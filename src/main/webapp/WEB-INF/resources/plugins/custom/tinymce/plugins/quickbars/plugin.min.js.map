{"version":3,"sources":["quickbars/plugin.min.js"],"names":["e","t","n","o","tinymce","util","Tools","resolve","c","l","s","f","i","u","ui","registry","addButton","icon","tooltip","onAction","r","document","createElement","type","accept","style","position","left","top","opacity","body","appendChild","addEventListener","Array","prototype","slice","call","target","files","parentNode","removeChild","os","isAndroid","setEditorTimeout","off","on","click","then","length","FileReader","onloadend","result","split","readAsDataURL","editorUpload","blobCache","create","Date","getTime","Math","floor","random","String","add","insertContent","dom","createHTML","src","blobUri","a","plugins","table","insertTable","undoManager","transact","select","removeAttribute","selection","setCursorLocation","d","m","g","h","isNone","fold","is","isSome","getOr","getOrThunk","getOrDie","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","p","b","some","none","from","y","isPrototypeOf","constructor","name","v","k","w","T","N","q","E","M","S","C","O","x","nodeType","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","A","window","Function","D","_","getParam","trim","addContextToolbar","predicate","schema","getTextBlockElements","getBody","nodeName","toLowerCase","isEmpty","items","scope","L","test","className","isCollapsed","getContentEditableParent","P"],"mappings":"CAQC,WAAW,aAAa,IAAIA,EAAEC,EAAEC,EAAIC,EAAEC,QAAQC,KAAKC,MAAMC,QAAQ,yBAAyBC,EAAE,EAAiOC,EAAEL,QAAQC,KAAKC,MAAMC,QAAQ,wBAAwBG,EAAEN,QAAQC,KAAKC,MAAMC,QAAQ,eAAeI,EAAEP,QAAQC,KAAKC,MAAMC,QAAQ,sBAAsBK,EAAE,SAASC,GAAGA,EAAEC,GAAGC,SAASC,UAAU,aAAa,CAACC,KAAK,QAAQC,QAAQ,eAAeC,SAAS,WAAW,IAAIP,EAAEA,EAAEC,EAAE,IAAIJ,GAAE,SAASP,GAAG,IAAIkB,EAAEC,SAASC,cAAc,SAASF,EAAEG,KAAK,OAAOH,EAAEI,OAAO,UAAUJ,EAAEK,MAAMC,SAAS,QAAQN,EAAEK,MAAME,KAAK,IAAIP,EAAEK,MAAMG,IAAI,IAAIR,EAAEK,MAAMI,QAAQ,QAAQR,SAASS,KAAKC,YAAYX,GAAGA,EAAEY,iBAAiB,UAAS,SAAShC,GAAGE,EAAE+B,MAAMC,UAAUC,MAAMC,KAAKpC,EAAEqC,OAAOC,WAAU,IAAInC,EAAE,SAASH,GAAG,IAAIC,EAAE,WAAWC,EAAE,IAAIkB,EAAEmB,WAAWC,YAAYpB,IAAIV,EAAE+B,GAAGC,aAAa,WAAW1C,EAAEuB,KAAKZ,EAAEgC,iBAAiB/B,EAAEX,EAAE,GAAGA,IAAIW,EAAEgC,IAAI,iBAAiBzC,IAAIS,EAAEiC,GAAG,iBAAiB1C,GAAGiB,EAAE0B,WAAUC,MAAK,SAAS/C,GAAG,IAAIC,EAAEC,EAAE,EAAEF,EAAEgD,SAAS/C,EAAED,EAAE,GAAGE,EAAED,EAAE,IAAIQ,GAAE,SAAST,GAAG,IAAIC,EAAE,IAAIgD,WAAWhD,EAAEiD,UAAU,WAAWlD,EAAEC,EAAEkD,OAAOC,MAAM,KAAK,KAAKnD,EAAEoD,cAAcnD,MAAK6C,MAAK,SAAS/C,IAA5nC,SAASA,EAAEC,EAAEC,GAAG,IAAMC,EAAES,EAAEZ,EAAEsD,aAAaC,UAAU1C,EAAED,EAAE4C,QAAiBrD,GAAE,IAAKsD,MAAMC,UAAUtC,QAAMuC,KAAKC,MAAM,IAAID,KAAKE,aAAarD,EAAEsD,OAAO3D,IAAID,EAAED,GAAGW,EAAEmD,IAAIlD,GAAGb,EAAEgE,cAAchE,EAAEiE,IAAIC,WAAW,MAAM,CAACC,IAAItD,EAAEuD,aAAg7BC,CAAExD,EAAEb,EAAEC,aAAWY,EAAEC,GAAGC,SAASC,UAAU,aAAa,CAACC,KAAK,QAAQC,QAAQ,eAAeC,SAAS,WAAW,IAAInB,EAAIE,EAAEkB,EAAIR,EAAEV,EAAI,GAAGF,EAAEa,GAAGyD,QAAQC,MAAMvE,EAAEsE,QAAQC,MAAMC,YAAtC,EAAoDtE,IAApD,EAA4DU,EAAEV,GAAGkB,EAAEpB,GAAGyE,YAAYC,UAAS,WAAWtD,EAAE4C,cAAc,SAAShE,EAAEC,GAAG,IAAIC,EAAEkB,EAAEjB,EAAE,gDAAgD,IAAIA,GAAG,UAAUiB,EAAE,EAAEA,EAAEnB,EAAEmB,IAAI,CAAC,IAAIjB,GAAG,OAAOD,EAAE,EAAEA,EAA0EC,EAAtED,IAAIC,GAAG,gBAAgBA,GAAG,QAAQ,OAAOA,GAAG,YAAc,WAAtL,CAAtH,EAA0TS,IAAI,IAAIZ,EAAEoB,EAAE6C,IAAIU,OAAO,kBAAkB,GAAG3E,EAAE4E,gBAAgB,eAAe,IAAI3E,EAAEmB,EAAE6C,IAAIU,OAAO,QAAQ3E,GAAGoB,EAAEyD,UAAUC,kBAAkB7E,EAAE,GAAG,WAAUY,EAAE,SAASb,GAAG,OAAO,WAAW,OAAOA,IAAI+E,EAAElE,GAAE,GAAImE,EAAEnE,GAAE,GAAIoE,EAAE,WAAW,OAAOC,GAAGA,GAAGlF,EAAE,SAASA,GAAG,OAAOA,EAAEmF,UAAU,CAACC,KAAK,SAASpF,EAAEC,GAAG,OAAOD,KAAKqF,GAAGN,EAAEO,OAAOP,EAAEI,OAAOH,EAAEO,MAAMrF,EAAE,SAASF,GAAG,OAAOA,GAAGwF,WAAWvF,EAAE,SAASD,GAAG,OAAOA,KAAKyF,SAAS,SAASzF,GAAG,MAAM,IAAI0F,MAAM1F,GAAG,oCAAoC2F,UAAU9E,EAAE,MAAM+E,eAAe/E,OAAEgF,GAAWC,GAAG5F,EAAE6F,QAAQ9F,EAAE+F,IAAIf,EAAEgB,KAAK,aAAaC,KAAKjB,EAAEkB,OAAOpB,EAAEqB,OAAOpB,EAAEqB,OAAOpB,EAAEqB,OAAOtG,EAAEuG,QAAQvG,EAAEwG,QAAQ,WAAW,MAAM,IAAIC,SAAS5F,EAAE,YAAY6F,EAAE,SAASxG,GAAG,IAAIF,EAAEa,EAAEX,GAAGD,EAAE,WAAW,OAAOE,GAAGiB,EAAE,SAASpB,GAAG,OAAOA,EAAEE,IAAIC,EAAE,CAACiF,KAAK,SAASpF,EAAEC,GAAG,OAAOA,EAAEC,IAAImF,GAAG,SAASrF,GAAG,OAAOE,IAAIF,GAAGsF,OAAON,EAAEG,OAAOJ,EAAEQ,MAAMvF,EAAEwF,WAAWxF,EAAEyF,SAASzF,EAAE2F,UAAU3F,EAAE4F,eAAe5F,EAAE8F,GAAG7F,EAAE8F,QAAQ9F,EAAE+F,IAAI,SAAShG,GAAG,OAAO0G,EAAE1G,EAAEE,KAAK+F,KAAK,SAASjG,GAAGA,EAAEE,IAAIgG,KAAK9E,EAAE+E,OAAO/E,EAAEgF,OAAOhF,EAAEiF,OAAO,SAASrG,GAAG,OAAOA,EAAEE,GAAGC,EAAE+E,GAAGsB,QAAQ,WAAW,MAAM,CAACtG,IAAIuG,SAAS,WAAW,MAAM,QAAQvG,EAAE,KAAKoG,OAAO,SAAStG,GAAG,OAAOA,EAAEqF,GAAGnF,IAAIqG,QAAQ,SAASvG,EAAEC,GAAG,OAAOD,EAAEoF,KAAKL,GAAE,SAAS/E,GAAG,OAAOC,EAAEC,EAAEF,QAAO,OAAOG,GAAGwG,EAAE,CAACC,KAAKF,EAAEG,KAAK5B,EAAE6B,KAAK,SAAS9G,GAAG,OAAO,MAAOA,EAAiBkF,EAAEwB,EAAE1G,KAAK+G,EAAE,SAAS3F,GAAG,OAAO,SAASpB,GAAG,OAAOE,SAASD,EAAED,IAAI,OAAOC,EAAE,OAAO,UAAUC,IAAI+B,MAAMC,UAAU8E,cAAc/G,IAAIA,EAAEgH,aAAa,UAAUhH,EAAEgH,YAAYC,MAAM,QAAQ,UAAUhH,IAAI4D,OAAO5B,UAAU8E,cAAc/G,IAAIA,EAAEgH,aAAa,WAAWhH,EAAEgH,YAAYC,MAAM,SAAShH,KAAKkB,EAAE,IAAInB,EAAEC,IAAIiH,EAAE,SAASlH,GAAG,OAAO,SAASD,GAAG,cAAcA,IAAIC,IAAImH,EAAEL,EAAE,UAAUM,EAAEN,EAAE,UAAUO,EAAEP,EAAE,SAASQ,EAAEJ,EAAE,WAAWK,QAAK3B,EAAU,SAAS7F,GAAG,OAAtB6F,YAAiC7F,IAAIyH,EAAEN,EAAE,YAAY,SAASO,EAAE1H,EAAEC,EAAEC,EAAEkB,EAAEjB,GAAG,OAAOH,EAAEE,EAAEkB,GAAGuF,EAAEC,KAAK1G,GAAGuH,EAAEtH,IAAIA,EAAED,GAAGyG,EAAEE,OAAO5G,EAAEC,EAAEkB,EAAEjB,GAAG,IAAIwH,EAAEC,EAAE,SAAS5H,GAAG,GAAG,MAAOA,EAAiB,MAAM,IAAI0F,MAAM,oCAAoC,MAAM,CAACzB,IAAIjE,IAAI6H,EAAiaD,EAAgFE,EAAE,SAAS9H,EAAEC,GAAG,IAAIC,EAAEF,EAAEiE,IAAI,GAAG,IAAI/D,EAAE6H,SAAS,OAAM,EAAG,IAAI3G,EAAElB,EAAE,QAAe2F,IAAZzE,EAAE4G,QAAoB,OAAO5G,EAAE4G,QAAQ/H,GAAG,QAAyB4F,IAAtBzE,EAAE6G,kBAA8B,OAAO7G,EAAE6G,kBAAkBhI,GAAG,QAA6B4F,IAA1BzE,EAAE8G,sBAAkC,OAAO9G,EAAE8G,sBAAsBjI,GAAG,QAA0B4F,IAAvBzE,EAAE+G,mBAA+B,OAAO/G,EAAE+G,mBAAmBlI,GAAG,MAAM,IAAIyF,MAAM,mCAAmC0C,GAAG,oBAAoBC,QAAQC,SAAS,eAATA,GAA2B,SAAStI,EAAEC,EAAEC,GAAG,IAAI,IAAIkB,EAAEpB,EAAEiE,IAAI9D,EAAEsH,EAAEvH,GAAGA,EAAE6E,EAAE3D,EAAEmB,YAAY,CAACnB,EAAEA,EAAEmB,WAAW,IAAI3B,EAAEiH,EAAUzG,GAAG,GAAGnB,EAAEW,GAAG,OAAO+F,EAAEC,KAAKhG,GAAG,GAAGT,EAAES,GAAG,MAAM,OAAO+F,EAAEE,SAAS0B,EAAE,SAASvI,EAAEC,EAAEC,GAAG,OAAOkI,EAAEpI,GAAE,SAASA,GAAG,OAAO8H,EAAE9H,EAAEC,KAAIC,IAAIsI,GAAGb,EAAEP,EAAE,SAASpH,EAAEC,EAAEC,GAAG,OAAO,SAASF,EAAEC,GAAG,IAAIA,EAAED,GAAG,MAAM,IAAI0F,MAAM,+CAAvC,CAAuFxF,EAAEyH,GAAG,SAAS3H,EAAEC,GAAG,GAAGqH,EAAEtH,IAAIqH,EAAErH,GAAG,MAAM,IAAI0F,MAAM,gCAAgC1F,GAAG,OAAOwH,EAAExH,GAAGC,EAAEsH,EAAEvH,IAAG,IAAKA,EAAE,GAAGC,EAAED,EAA9G,CAAiHA,EAAEyI,SAASxI,EAAEC,GAAGA,KAA6kCC,EAAE4D,IAAI,aAAY,SAAS/D,GAAGY,EAAEZ,GAAtmC,SAASG,GAAG,IAAIH,EAAEwI,EAAErI,EAAE,2BAA2B,yBAAyB,EAAEH,EAAE0I,OAAO1F,QAAQ7C,EAAEW,GAAGC,SAAS4H,kBAAkB,aAAa,CAACC,UAAU,SAAS5I,GAAG,IAAIC,EAAE4H,EAAU7H,GAAGE,EAAEC,EAAE0I,OAAOC,uBAAuB1H,EAAE,SAASpB,GAAG,OAAOA,EAAEiE,MAAM9D,EAAE4I,WAAW,OAAOrB,EAAEI,EAAES,EAAEtI,EAAE,QAAQmB,GAAGgE,MAAK,WAAW,OAAOsC,GAAE,SAAS1H,EAAEC,GAAG,OAAOA,EAAED,KAAIoI,EAAEnI,GAAE,SAASD,GAAG,OAAOA,EAAEiE,IAAI+E,SAASC,gBAAgB/I,GAAGC,EAAE8D,IAAIiF,QAAQlJ,EAAEiE,OAAM7C,GAAGkE,YAAU,WAAW,OAAM,MAAM6D,MAAMnJ,EAAE0B,SAAS,OAAO0H,MAAM,WAA0oBC,CAAErJ,GAA9nB,SAASE,GAAG,IAAIkB,EAAE,SAASpB,GAAG,MAAM,QAAQA,EAAEgJ,UAAU,WAAWhJ,EAAEgJ,UAAU,SAASM,KAAKtJ,EAAEuJ,YAAYvJ,EAAEwI,EAAEtI,EAAE,0BAA0B,oCAAoC,EAAEF,EAAE0I,OAAO1F,QAAQ9C,EAAEY,GAAGC,SAAS4H,kBAAkB,iBAAiB,CAACC,UAAUxH,EAAE+H,MAAMnJ,EAAE0B,SAAS,SAAS,IAAIzB,EAAEuI,EAAEtI,EAAE,8BAA8B,4CAA4C,EAAED,EAAEyI,OAAO1F,QAAQ9C,EAAEY,GAAGC,SAAS4H,kBAAkB,gBAAgB,CAACC,UAAU,SAAS5I,GAAG,OAAOoB,EAAEpB,KAAKE,EAAE2E,UAAU2E,gBAAgBvJ,EAAED,EAAE,UAAUE,EAAE+D,IAAIwF,yBAAyBxJ,IAAI,IAAIA,GAAGkJ,MAAMlJ,EAAEyB,SAAS,YAAY0H,MAAM,WAAoDM,CAAE1J,MAAl/L","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n!function(){\"use strict\";var e,t,n,r,o=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),c=0,a=function(e,t,n){var r,o,i=e.editorUpload.blobCache,u=i.create((r=\"mceu\",o=(new Date).getTime(),r+\"_\"+Math.floor(1e9*Math.random())+ ++c+String(o)),n,t);i.add(u),e.insertContent(e.dom.createHTML(\"img\",{src:u.blobUri()}))},l=tinymce.util.Tools.resolve(\"tinymce.util.Promise\"),s=tinymce.util.Tools.resolve(\"tinymce.Env\"),f=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),i=function(u){u.ui.registry.addButton(\"quickimage\",{icon:\"image\",tooltip:\"Insert image\",onAction:function(){var i;i=u,new l(function(n){var r=document.createElement(\"input\");r.type=\"file\",r.accept=\"image/*\",r.style.position=\"fixed\",r.style.left=\"0\",r.style.top=\"0\",r.style.opacity=\"0.001\",document.body.appendChild(r),r.addEventListener(\"change\",function(e){n(Array.prototype.slice.call(e.target.files))});var o=function(e){var t=function(){n([]),r.parentNode.removeChild(r)};s.os.isAndroid()&&\"remove\"!==e.type?f.setEditorTimeout(i,t,0):t(),i.off(\"focusin remove\",o)};i.on(\"focusin remove\",o),r.click()}).then(function(e){var t,n;0<e.length&&(t=e[0],n=t,new l(function(e){var t=new FileReader;t.onloadend=function(){e(t.result.split(\",\")[1])},t.readAsDataURL(n)}).then(function(e){a(u,e,t)}))})}}),u.ui.registry.addButton(\"quicktable\",{icon:\"table\",tooltip:\"Insert table\",onAction:function(){var e,t,n,r,o,i;n=t=2,(e=u).plugins.table?e.plugins.table.insertTable(t,n):(o=t,i=n,(r=e).undoManager.transact(function(){r.insertContent(function(e,t){var n,r,o='<table data-mce-id=\"mce\" style=\"width: 100%\">';for(o+=\"<tbody>\",r=0;r<t;r++){for(o+=\"<tr>\",n=0;n<e;n++)o+=\"<td><br></td>\";o+=\"</tr>\"}return o+=\"</tbody>\",o+=\"</table>\"}(o,i));var e=r.dom.select(\"*[data-mce-id]\")[0];e.removeAttribute(\"data-mce-id\");var t=r.dom.select(\"td,th\",e);r.selection.setCursorLocation(t[0],0)}))}})},u=function(e){return function(){return e}},d=u(!1),m=u(!0),g=function(){return h},h=(e=function(e){return e.isNone()},{fold:function(e,t){return e()},is:d,isSome:d,isNone:m,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||\"error: getOrDie called on none.\")},getOrNull:u(null),getOrUndefined:u(undefined),or:n,orThunk:t,map:g,each:function(){},bind:g,exists:d,forall:m,filter:g,equals:e,equals_:e,toArray:function(){return[]},toString:u(\"none()\")}),p=function(n){var e=u(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:m,isNone:d,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return p(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:h},toArray:function(){return[n]},toString:function(){return\"some(\"+n+\")\"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(d,function(e){return t(n,e)})}};return o},b={some:p,none:g,from:function(e){return null===e||e===undefined?h:p(e)}},y=function(r){return function(e){return n=typeof(t=e),(null===t?\"null\":\"object\"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&\"Array\"===t.constructor.name)?\"array\":\"object\"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&\"String\"===t.constructor.name)?\"string\":n)===r;var t,n}},v=function(t){return function(e){return typeof e===t}},k=y(\"string\"),w=y(\"object\"),T=y(\"array\"),N=v(\"boolean\"),q=(r=undefined,function(e){return r===e}),E=v(\"function\");function M(e,t,n,r,o){return e(n,r)?b.some(n):E(o)&&o(n)?b.none():t(n,r,o)}var S,C=function(e){if(null===e||e===undefined)throw new Error(\"Node cannot be null or undefined\");return{dom:e}},O={fromHtml:function(e,t){var n=(t||document).createElement(\"div\");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error(\"HTML does not have a single root node\",e),new Error(\"HTML must have a single root node\");return C(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return C(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return C(n)},fromDom:C,fromPoint:function(e,t,n){return b.from(e.dom.elementFromPoint(t,n)).map(C)}},x=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(r.matches!==undefined)return r.matches(t);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(t);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(t);throw new Error(\"Browser lacks native selectors\")},A=(\"undefined\"!=typeof window||Function(\"return this;\")(),function(e,t,n){for(var r=e.dom,o=E(n)?n:d;r.parentNode;){r=r.parentNode;var i=O.fromDom(r);if(t(i))return b.some(i);if(o(i))break}return b.none()}),D=function(e,t,n){return A(e,function(e){return x(e,t)},n)},_=(S=k,function(e,t,n){return function(e,t){if(!t(e))throw new Error(\"Default value doesn't match requested type.\")}(n,S),function(e,t){if(T(e)||w(e))throw new Error(\"expected a string but found: \"+e);return q(e)?t:N(e)?!1===e?\"\":t:e}(e.getParam(t,n),n)}),L=function(o){var e=_(o,\"quickbars_insert_toolbar\",\"quickimage quicktable\");0<e.trim().length&&o.ui.registry.addContextToolbar(\"quickblock\",{predicate:function(e){var t=O.fromDom(e),n=o.schema.getTextBlockElements(),r=function(e){return e.dom===o.getBody()};return M(x,D,t,\"table\",r).fold(function(){return M(function(e,t){return t(e)},A,t,function(e){return e.dom.nodeName.toLowerCase()in n&&o.dom.isEmpty(e.dom)},r).isSome()},function(){return!1})},items:e,position:\"line\",scope:\"editor\"})},P=function(n){var r=function(e){return\"IMG\"===e.nodeName||\"FIGURE\"===e.nodeName&&/image/i.test(e.className)},e=_(n,\"quickbars_image_toolbar\",\"alignleft aligncenter alignright\");0<e.trim().length&&n.ui.registry.addContextToolbar(\"imageselection\",{predicate:r,items:e,position:\"node\"});var t=_(n,\"quickbars_selection_toolbar\",\"bold italic | quicklink h2 h3 blockquote\");0<t.trim().length&&n.ui.registry.addContextToolbar(\"textselection\",{predicate:function(e){return!r(e)&&!n.selection.isCollapsed()&&(t=e,\"false\"!==n.dom.getContentEditableParent(t));var t},items:t,position:\"selection\",scope:\"editor\"})};o.add(\"quickbars\",function(e){i(e),L(e),P(e)})}();"]}