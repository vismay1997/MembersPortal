{"version":3,"sources":["fullscreen/plugin.js"],"names":["Cell","initial","value","get","set","v","global","tinymce","util","Tools","resolve","fullscreenState","isFullscreen","noop","constant","curry","fn","initialArgs","_i","arguments","length","restArgs","all","concat","apply","never","always","none","NONE","eq","o","isNone","call","thunk","id","n","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","a","constant_a","self","me","f","s","elementEq","b","Optional","from","unbindable","doRevoke","unbind","subject","revoke","clear","isSet","isType","type","t","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isArray","isBoolean","isNonNullable","isNullable","isFunction","isNumber","nativePush","push","xs","len","r","i","pred","flatten","head","get$1","keys","Object","isSupported","dom","style","getPropertyValue","fromDom","node","SugarElement","fromHtml","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","isType$1","window","Function","element","nodeType","isElement","isText","isDocument","isDocumentFragment","selector","elem","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","owner","ownerDocument","siblings","parentNode","parent","children","elements","e2","supported","Element","attachShadow","Node","getRootNode","isSupported$1","e","dos","getShadowRoot","getShadowHost","host","isOpenShadowHost","shadowRoot","inBody","fbc","fab","doc","body","contains","key","setAttribute","rawSet","get$2","getAttribute","remove","removeAttribute","setAll","css","obj","props","k","each$1","property","setProperty","internalSet","getUnsafeProperty","fromRawEvent","rawEvent","fa","fb","target","event","el","composed","composedPath","getOriginalEventTarget","stop","stopPropagation","prevent","preventDefault","kill","args","raw","mkEvent","clientX","clientY","binder","handler","useCapture","wrapped","handle","addEventListener","removeEventListener","filter$1","bind$2","bind$1","left","top","translate","SugarPosition","get$5","_win","win","bounds","width","height","right","bottom","getBounds","scroll","_DOC","scrollLeft","documentElement","scrollTop","get$4","clientWidth","clientHeight","visualViewport","Math","max","pageLeft","pageTop","bind$3","callback","global$1","global$2","global$3","fireFullscreenStateChanged","editor","state","fire","getFullscreenNative","getParam","getFullscreenRoot","getElement","getBody","isFullscreenElement","root","fullscreenElement","msFullscreenElement","webkitFullscreenElement","ancestors","predicate","isRoot","ret","rawParent","p","parents","all$1","base","childElementCount","querySelectorAll","ancestors$1","siblings$2","siblings$1","attr","ancestorPosition","ancestorStyles","isAndroid","os","matchColor","editorBody","color","getComputedStyle","get$3","DOM","viewportUpdate","editorContainer","on","resizeBinder","scrollBinder","update","throttle","requestAnimationFrame","container","offsetTop","offsetLeft","toggleFullscreen","pos","sugarDoc","vp","getContainer","editorContainerS","fullscreenRoot","fullscreenInfo","isTouch","deviceType","editorContainerStyle","iframeStyle","iframeElement","handleClasses","cleanup","clobberedEls","restore","parseStyle","removeClass","info","fullscreenChangeHandler","exitFullscreen","msExitFullscreen","webkitCancelFullScreen","iframeWidth","iframeHeight","containerWidth","containerHeight","containerTop","containerLeft","scrollPos","scrollTo","off","_evt","newFullScreenInfo","clobber","clobberStyle","styles","backup","trim","bgColor","clobberStyles","addClass","requestFullscreen","msRequestFullscreen","webkitRequestFullScreen","makeSetupHandler","api","setActive","editorEventCallback","add","inline","addCommand","register","ui","registry","addToggleMenuItem","icon","shortcut","onAction","execCommand","onSetup","addToggleButton","tooltip","register$1","addShortcut"],"mappings":"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","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n(function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (fullscreenState) {\n      return {\n        isFullscreen: function () {\n          return fullscreenState.get() !== null;\n        }\n      };\n    };\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var revocable = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        set: set\n      };\n    };\n    var unbindable = function () {\n      return revocable(function (s) {\n        return s.unbind();\n      });\n    };\n    var value = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var get$1 = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$1(xs, 0);\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var get$2 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var remove = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$1 = always;\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$1, handler);\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var get$4 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n\n    var get$5 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      return Optional.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$4(SugarElement.fromDom(doc));\n      return get$5(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n    var bind$3 = function (name, callback, _win) {\n      return get$5(_win).map(function (visualViewport) {\n        var handler = function (e) {\n          return callback(fromRawEvent(e));\n        };\n        visualViewport.addEventListener(name, handler);\n        return {\n          unbind: function () {\n            return visualViewport.removeEventListener(name, handler);\n          }\n        };\n      }).getOrThunk(function () {\n        return { unbind: noop };\n      });\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var fireFullscreenStateChanged = function (editor, state) {\n      editor.fire('FullscreenStateChanged', { state: state });\n    };\n\n    var getFullscreenNative = function (editor) {\n      return editor.getParam('fullscreen_native', false, 'boolean');\n    };\n\n    var getFullscreenRoot = function (editor) {\n      var elem = SugarElement.fromDom(editor.getElement());\n      return getShadowRoot(elem).map(getShadowHost).getOrThunk(function () {\n        return getBody(owner(elem));\n      });\n    };\n    var getFullscreenElement = function (root) {\n      if (root.fullscreenElement !== undefined) {\n        return root.fullscreenElement;\n      } else if (root.msFullscreenElement !== undefined) {\n        return root.msFullscreenElement;\n      } else if (root.webkitFullscreenElement !== undefined) {\n        return root.webkitFullscreenElement;\n      } else {\n        return null;\n      }\n    };\n    var getFullscreenchangeEventName = function () {\n      if (document.fullscreenElement !== undefined) {\n        return 'fullscreenchange';\n      } else if (document.msFullscreenElement !== undefined) {\n        return 'MSFullscreenChange';\n      } else if (document.webkitFullscreenElement !== undefined) {\n        return 'webkitfullscreenchange';\n      } else {\n        return 'fullscreenchange';\n      }\n    };\n    var requestFullscreen = function (sugarElem) {\n      var elem = sugarElem.dom;\n      if (elem.requestFullscreen) {\n        elem.requestFullscreen();\n      } else if (elem.msRequestFullscreen) {\n        elem.msRequestFullscreen();\n      } else if (elem.webkitRequestFullScreen) {\n        elem.webkitRequestFullScreen();\n      }\n    };\n    var exitFullscreen = function (sugarDoc) {\n      var doc = sugarDoc.dom;\n      if (doc.exitFullscreen) {\n        doc.exitFullscreen();\n      } else if (doc.msExitFullscreen) {\n        doc.msExitFullscreen();\n      } else if (doc.webkitCancelFullScreen) {\n        doc.webkitCancelFullScreen();\n      }\n    };\n    var isFullscreenElement = function (elem) {\n      return elem.dom === getFullscreenElement(owner(elem).dom);\n    };\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var siblings$1 = function (scope, predicate) {\n      return filter(siblings(scope), predicate);\n    };\n\n    var all$1 = function (selector) {\n      return all(selector);\n    };\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var siblings$2 = function (scope, selector) {\n      return siblings$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n\n    var attr = 'data-ephox-mobile-fullscreen-style';\n    var siblingStyles = 'display:none!important;';\n    var ancestorPosition = 'position:absolute!important;';\n    var ancestorStyles = 'top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;';\n    var bgFallback = 'background-color:rgb(255,255,255)!important;';\n    var isAndroid = global$2.os.isAndroid();\n    var matchColor = function (editorBody) {\n      var color = get$3(editorBody, 'background-color');\n      return color !== undefined && color !== '' ? 'background-color:' + color + '!important' : bgFallback;\n    };\n    var clobberStyles = function (dom, container, editorBody) {\n      var gatherSiblings = function (element) {\n        return siblings$2(element, '*:not(.tox-silver-sink)');\n      };\n      var clobber = function (clobberStyle) {\n        return function (element) {\n          var styles = get$2(element, 'style');\n          var backup = styles === undefined ? 'no-styles' : styles.trim();\n          if (backup === clobberStyle) {\n            return;\n          } else {\n            set(element, attr, backup);\n            setAll(element, dom.parseStyle(clobberStyle));\n          }\n        };\n      };\n      var ancestors = ancestors$1(container, '*');\n      var siblings = bind(ancestors, gatherSiblings);\n      var bgColor = matchColor(editorBody);\n      each(siblings, clobber(siblingStyles));\n      each(ancestors, clobber(ancestorPosition + ancestorStyles + bgColor));\n      var containerStyles = isAndroid === true ? '' : ancestorPosition;\n      clobber(containerStyles + ancestorStyles + bgColor)(container);\n    };\n    var restoreStyles = function (dom) {\n      var clobberedEls = all$1('[' + attr + ']');\n      each(clobberedEls, function (element) {\n        var restore = get$2(element, attr);\n        if (restore !== 'no-styles') {\n          setAll(element, dom.parseStyle(restore));\n        } else {\n          remove(element, 'style');\n        }\n        remove(element, attr);\n      });\n    };\n\n    var DOM = global$1.DOM;\n    var getScrollPos = function () {\n      var vp = getBounds(window);\n      return {\n        x: vp.x,\n        y: vp.y\n      };\n    };\n    var setScrollPos = function (pos) {\n      window.scrollTo(pos.x, pos.y);\n    };\n    var viewportUpdate = get$5().fold(function () {\n      return {\n        bind: noop,\n        unbind: noop\n      };\n    }, function (visualViewport) {\n      var editorContainer = value();\n      var resizeBinder = unbindable();\n      var scrollBinder = unbindable();\n      var refreshScroll = function () {\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n      };\n      var refreshVisualViewport = function () {\n        window.requestAnimationFrame(function () {\n          editorContainer.on(function (container) {\n            return setAll(container, {\n              top: visualViewport.offsetTop + 'px',\n              left: visualViewport.offsetLeft + 'px',\n              height: visualViewport.height + 'px',\n              width: visualViewport.width + 'px'\n            });\n          });\n        });\n      };\n      var update = global$3.throttle(function () {\n        refreshScroll();\n        refreshVisualViewport();\n      }, 50);\n      var bind = function (element) {\n        editorContainer.set(element);\n        update();\n        resizeBinder.set(bind$3('resize', update));\n        scrollBinder.set(bind$3('scroll', update));\n      };\n      var unbind = function () {\n        editorContainer.on(function () {\n          resizeBinder.clear();\n          scrollBinder.clear();\n        });\n        editorContainer.clear();\n      };\n      return {\n        bind: bind,\n        unbind: unbind\n      };\n    });\n    var toggleFullscreen = function (editor, fullscreenState) {\n      var body = document.body;\n      var documentElement = document.documentElement;\n      var editorContainer = editor.getContainer();\n      var editorContainerS = SugarElement.fromDom(editorContainer);\n      var fullscreenRoot = getFullscreenRoot(editor);\n      var fullscreenInfo = fullscreenState.get();\n      var editorBody = SugarElement.fromDom(editor.getBody());\n      var isTouch = global$2.deviceType.isTouch();\n      var editorContainerStyle = editorContainer.style;\n      var iframe = editor.iframeElement;\n      var iframeStyle = iframe.style;\n      var handleClasses = function (handler) {\n        handler(body, 'tox-fullscreen');\n        handler(documentElement, 'tox-fullscreen');\n        handler(editorContainer, 'tox-fullscreen');\n        getShadowRoot(editorContainerS).map(function (root) {\n          return getShadowHost(root).dom;\n        }).each(function (host) {\n          handler(host, 'tox-fullscreen');\n          handler(host, 'tox-shadowhost');\n        });\n      };\n      var cleanup = function () {\n        if (isTouch) {\n          restoreStyles(editor.dom);\n        }\n        handleClasses(DOM.removeClass);\n        viewportUpdate.unbind();\n        Optional.from(fullscreenState.get()).each(function (info) {\n          return info.fullscreenChangeHandler.unbind();\n        });\n      };\n      if (!fullscreenInfo) {\n        var fullscreenChangeHandler = bind$2(owner(fullscreenRoot), getFullscreenchangeEventName(), function (_evt) {\n          if (getFullscreenNative(editor)) {\n            if (!isFullscreenElement(fullscreenRoot) && fullscreenState.get() !== null) {\n              toggleFullscreen(editor, fullscreenState);\n            }\n          }\n        });\n        var newFullScreenInfo = {\n          scrollPos: getScrollPos(),\n          containerWidth: editorContainerStyle.width,\n          containerHeight: editorContainerStyle.height,\n          containerTop: editorContainerStyle.top,\n          containerLeft: editorContainerStyle.left,\n          iframeWidth: iframeStyle.width,\n          iframeHeight: iframeStyle.height,\n          fullscreenChangeHandler: fullscreenChangeHandler\n        };\n        if (isTouch) {\n          clobberStyles(editor.dom, editorContainerS, editorBody);\n        }\n        iframeStyle.width = iframeStyle.height = '100%';\n        editorContainerStyle.width = editorContainerStyle.height = '';\n        handleClasses(DOM.addClass);\n        viewportUpdate.bind(editorContainerS);\n        editor.on('remove', cleanup);\n        fullscreenState.set(newFullScreenInfo);\n        if (getFullscreenNative(editor)) {\n          requestFullscreen(fullscreenRoot);\n        }\n        fireFullscreenStateChanged(editor, true);\n      } else {\n        fullscreenInfo.fullscreenChangeHandler.unbind();\n        if (getFullscreenNative(editor) && isFullscreenElement(fullscreenRoot)) {\n          exitFullscreen(owner(fullscreenRoot));\n        }\n        iframeStyle.width = fullscreenInfo.iframeWidth;\n        iframeStyle.height = fullscreenInfo.iframeHeight;\n        editorContainerStyle.width = fullscreenInfo.containerWidth;\n        editorContainerStyle.height = fullscreenInfo.containerHeight;\n        editorContainerStyle.top = fullscreenInfo.containerTop;\n        editorContainerStyle.left = fullscreenInfo.containerLeft;\n        setScrollPos(fullscreenInfo.scrollPos);\n        fullscreenState.set(null);\n        fireFullscreenStateChanged(editor, false);\n        cleanup();\n        editor.off('remove', cleanup);\n      }\n    };\n\n    var register = function (editor, fullscreenState) {\n      editor.addCommand('mceFullScreen', function () {\n        toggleFullscreen(editor, fullscreenState);\n      });\n    };\n\n    var makeSetupHandler = function (editor, fullscreenState) {\n      return function (api) {\n        api.setActive(fullscreenState.get() !== null);\n        var editorEventCallback = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('FullscreenStateChanged', editorEventCallback);\n        return function () {\n          return editor.off('FullscreenStateChanged', editorEventCallback);\n        };\n      };\n    };\n    var register$1 = function (editor, fullscreenState) {\n      editor.ui.registry.addToggleMenuItem('fullscreen', {\n        text: 'Fullscreen',\n        icon: 'fullscreen',\n        shortcut: 'Meta+Shift+F',\n        onAction: function () {\n          return editor.execCommand('mceFullScreen');\n        },\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n      editor.ui.registry.addToggleButton('fullscreen', {\n        tooltip: 'Fullscreen',\n        icon: 'fullscreen',\n        onAction: function () {\n          return editor.execCommand('mceFullScreen');\n        },\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n    };\n\n    function Plugin () {\n      global.add('fullscreen', function (editor) {\n        var fullscreenState = Cell(null);\n        if (editor.inline) {\n          return get(fullscreenState);\n        }\n        register(editor, fullscreenState);\n        register$1(editor, fullscreenState);\n        editor.addShortcut('Meta+Shift+F', '', 'mceFullScreen');\n        return get(fullscreenState);\n      });\n    }\n\n    Plugin();\n\n}());\n"]}