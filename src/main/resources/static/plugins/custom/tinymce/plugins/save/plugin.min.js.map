{"version":3,"sources":["save/plugin.min.js"],"names":["e","tinymce","util","Tools","resolve","o","a","i","getParam","c","n","notificationManager","open","text","type","r","t","setDisabled","isDirty","on","off","add","ui","registry","addButton","icon","tooltip","disabled","onAction","execCommand","onSetup","addShortcut","addCommand","DOM","getParent","id","save","execCallback","nodeChanged","setDirty","onsubmit","submit","trim","startContent","resetContent"],"mappings":"CAQC,WAAW,aAAa,IAAIA,EAAEC,QAAQC,KAAKC,MAAMC,QAAQ,yBAAyBC,EAAEJ,QAAQC,KAAKC,MAAMC,QAAQ,wBAAwBE,EAAEL,QAAQC,KAAKC,MAAMC,QAAQ,sBAAsBG,EAAE,SAASP,GAAG,OAAOA,EAAEQ,SAAS,wBAAuB,IAAKC,EAAE,SAAST,EAAEU,GAAGV,EAAEW,oBAAoBC,KAAK,CAACC,KAAKH,EAAEI,KAAK,WAAylBC,EAAE,SAASC,GAAG,OAAO,SAAShB,GAAG,IAAIU,EAAE,WAAWV,EAAEiB,YAAYV,EAAES,KAAKA,EAAEE,YAAY,OAAOF,EAAEG,GAAG,mBAAmBT,GAAG,WAAW,OAAOM,EAAEI,IAAI,mBAAmBV,MAAMV,EAAEqB,IAAI,QAAO,SAASrB,GAAG,IAAIU,GAAGA,EAAEV,GAAGsB,GAAGC,SAASC,UAAU,OAAO,CAACC,KAAK,OAAOC,QAAQ,OAAOC,UAAS,EAAGC,SAAS,WAAW,OAAOlB,EAAEmB,YAAY,YAAYC,QAAQf,EAAEL,KAAKA,EAAEY,GAAGC,SAASC,UAAU,SAAS,CAACC,KAAK,SAASC,QAAQ,SAASC,UAAS,EAAGC,SAAS,WAAW,OAAOlB,EAAEmB,YAAY,cAAcC,QAAQf,EAAEL,KAAKA,EAAEqB,YAAY,SAAS,GAAG,WAA/kC,SAASf,GAAGA,EAAEgB,WAAW,WAAU,YAAY,SAAShC,GAAG,IAAIU,EAAEL,EAAE4B,IAAIC,UAAUlC,EAAEmC,GAAG,QAAQ,IAAI5B,EAAEP,IAAIA,EAAEkB,UAAU,CAAC,GAAGlB,EAAEoC,OAAOpC,EAAEQ,SAAS,uBAAuB,OAAOR,EAAEqC,aAAa,sBAAsBrC,GAAGA,EAAEsC,cAAc5B,GAAGV,EAAEuC,UAAS,GAAI7B,EAAE8B,WAAW9B,EAAE8B,aAAa,mBAAmB9B,EAAE+B,OAAO/B,EAAE+B,SAAShC,EAAET,EAAE,wCAAwCA,EAAEsC,eAAe7B,EAAET,EAAE,kCAAzU,CAA4WgB,MAAKA,EAAEgB,WAAW,aAAY,WAAW,IAAIhC,EAAEU,EAAEV,EAAEgB,EAAEN,EAAEJ,EAAEoC,KAAK1C,EAAE2C,cAAc3C,EAAEQ,SAAS,yBAAyBR,EAAEqC,aAAa,wBAAwBrC,GAAGA,EAAE4C,aAAalC,MAAohBM,CAAEhB,MAAv5C","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n!function(){\"use strict\";var e=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),o=tinymce.util.Tools.resolve(\"tinymce.dom.DOMUtils\"),a=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),i=function(e){return e.getParam(\"save_enablewhendirty\",!0)},c=function(e,n){e.notificationManager.open({text:n,type:\"error\"})},t=function(t){t.addCommand(\"mceSave\",function(){!function(e){var n=o.DOM.getParent(e.id,\"form\");if(!i(e)||e.isDirty()){if(e.save(),e.getParam(\"save_onsavecallback\"))return e.execCallback(\"save_onsavecallback\",e),e.nodeChanged();n?(e.setDirty(!1),n.onsubmit&&!n.onsubmit()||(\"function\"==typeof n.submit?n.submit():c(e,\"Error: Form submit field collision.\")),e.nodeChanged()):c(e,\"Error: No form element found.\")}}(t)}),t.addCommand(\"mceCancel\",function(){var e,n;e=t,n=a.trim(e.startContent),e.getParam(\"save_oncancelcallback\")?e.execCallback(\"save_oncancelcallback\",e):e.resetContent(n)})},r=function(t){return function(e){var n=function(){e.setDisabled(i(t)&&!t.isDirty())};return t.on(\"NodeChange dirty\",n),function(){return t.off(\"NodeChange dirty\",n)}}};e.add(\"save\",function(e){var n;(n=e).ui.registry.addButton(\"save\",{icon:\"save\",tooltip:\"Save\",disabled:!0,onAction:function(){return n.execCommand(\"mceSave\")},onSetup:r(n)}),n.ui.registry.addButton(\"cancel\",{icon:\"cancel\",tooltip:\"Cancel\",disabled:!0,onAction:function(){return n.execCommand(\"mceCancel\")},onSetup:r(n)}),n.addShortcut(\"Meta+S\",\"\",\"mceSave\"),t(e)})}();"]}