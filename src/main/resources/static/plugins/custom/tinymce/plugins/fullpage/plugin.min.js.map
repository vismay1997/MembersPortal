{"version":3,"sources":["fullpage/plugin.min.js"],"names":["s","e","t","get","set","tinymce","util","Tools","resolve","u","Object","assign","n","l","arguments","length","i","prototype","hasOwnProperty","call","apply","this","p","m","f","h","getParam","g","y","v","validate","root_name","parse","format","_","each","b","replace","toLowerCase","k","add","o","r","a","c","addCommand","fontface","fontsize","firstChild","type","xml_pi","exec","value","docencoding","getAll","doctype","title","attr","langcode","stylesheets","push","langdir","style","visited_color","link_color","active_color","d","keywords","description","robots","author","windowManager","open","size","body","items","name","label","buttons","text","primary","initialData","onSubmit","getData","dom","undefined","insert","append","remove","substring","shortEnded","empty","split","rel","href","setAttribs","getBody","dir","vLink","link","aLink","indent","indent_before","indent_after","serialize","indexOf","extend","close","ui","registry","addButton","tooltip","icon","onAction","execCommand","addMenuItem","on","selection","content","escape","source_view","trim","getDoc","getElementsByTagName","id","appendChild","document","createTextNode","getAttribute","data-mce-fullpage","parentNode","removeChild","x","unescape","C"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n!function(){\"use strict\";var s=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},e=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),u=function(){return(u=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),t=tinymce.util.Tools.resolve(\"tinymce.html.DomParser\"),m=tinymce.util.Tools.resolve(\"tinymce.html.Node\"),f=tinymce.util.Tools.resolve(\"tinymce.html.Serializer\"),h=function(e){return e.getParam(\"fullpage_hide_in_source_view\")},i=function(e){return e.getParam(\"fullpage_default_encoding\")},g=function(e){return e.getParam(\"fullpage_default_font_family\")},y=function(e){return e.getParam(\"fullpage_default_font_size\")},v=function(e){return t({validate:!1,root_name:\"#document\"}).parse(e,{format:\"xhtml\"})},d=function(l,i){var e,t,n,o,r,a,c=(e=l,t=i.get(),r=v(t),(a={}).fontface=g(e),a.fontsize=y(e),7===(n=r.firstChild).type&&(a.xml_pi=!0,(o=/encoding=\"([^\"]+)\"/.exec(n.value))&&(a.docencoding=o[1])),(n=r.getAll(\"#doctype\")[0])&&(a.doctype=\"<!DOCTYPE\"+n.value+\">\"),(n=r.getAll(\"title\")[0])&&n.firstChild&&(a.title=n.firstChild.value),p.each(r.getAll(\"meta\"),function(e){var t,n=e.attr(\"name\"),l=e.attr(\"http-equiv\");n?a[n.toLowerCase()]=e.attr(\"content\"):\"Content-Type\"===l&&(t=/charset\\s*=\\s*(.*)\\s*/gi.exec(e.attr(\"content\")))&&(a.docencoding=t[1])}),(n=r.getAll(\"html\")[0])&&(a.langcode=s(n,\"lang\")||s(n,\"xml:lang\")),a.stylesheets=[],p.each(r.getAll(\"link\"),function(e){\"stylesheet\"===e.attr(\"rel\")&&a.stylesheets.push(e.attr(\"href\"))}),(n=r.getAll(\"body\")[0])&&(a.langdir=s(n,\"dir\"),a.style=s(n,\"style\"),a.visited_color=s(n,\"vlink\"),a.link_color=s(n,\"link\"),a.active_color=s(n,\"alink\")),a);function s(e,t){return e.attr(t)||\"\"}var d=u(u({},{title:\"\",keywords:\"\",description:\"\",robots:\"\",author:\"\",docencoding:\"\"}),c);l.windowManager.open({title:\"Metadata and Document Properties\",size:\"normal\",body:{type:\"panel\",items:[{name:\"title\",type:\"input\",label:\"Title\"},{name:\"keywords\",type:\"input\",label:\"Keywords\"},{name:\"description\",type:\"input\",label:\"Description\"},{name:\"robots\",type:\"input\",label:\"Robots\"},{name:\"author\",type:\"input\",label:\"Author\"},{name:\"docencoding\",type:\"input\",label:\"Encoding\"}]},buttons:[{type:\"cancel\",name:\"cancel\",text:\"Cancel\"},{type:\"submit\",name:\"save\",text:\"Save\",primary:!0}],initialData:d,onSubmit:function(e){var t=e.getData(),n=function(e,o,t){var r,n,l=e.dom;function i(e,t,n){e.attr(t,n||undefined)}function a(e){c.firstChild?c.insert(e,c.firstChild):c.append(e)}var c,s=v(t);(c=s.getAll(\"head\")[0])||(r=s.getAll(\"html\")[0],c=new m(\"head\",1),r.firstChild?r.insert(c,r.firstChild,!0):r.append(c)),r=s.firstChild,o.xml_pi?(n='version=\"1.0\"',o.docencoding&&(n+=' encoding=\"'+o.docencoding+'\"'),7!==r.type&&(r=new m(\"xml\",7),s.insert(r,s.firstChild,!0)),r.value=n):r&&7===r.type&&r.remove(),r=s.getAll(\"#doctype\")[0],o.doctype?(r||(r=new m(\"#doctype\",10),o.xml_pi?s.insert(r,s.firstChild):a(r)),r.value=o.doctype.substring(9,o.doctype.length-1)):r&&r.remove(),r=null,p.each(s.getAll(\"meta\"),function(e){\"Content-Type\"===e.attr(\"http-equiv\")&&(r=e)}),o.docencoding?(r||((r=new m(\"meta\",1)).attr(\"http-equiv\",\"Content-Type\"),r.shortEnded=!0,a(r)),r.attr(\"content\",\"text/html; charset=\"+o.docencoding)):r&&r.remove(),r=s.getAll(\"title\")[0],o.title?(r?r.empty():a(r=new m(\"title\",1)),r.append(new m(\"#text\",3)).value=o.title):r&&r.remove(),p.each(\"keywords,description,author,copyright,robots\".split(\",\"),function(e){for(var t,n=s.getAll(\"meta\"),l=o[e],i=0;i<n.length;i++)if((t=n[i]).attr(\"name\")===e)return void(l?t.attr(\"content\",l):t.remove());l&&((r=new m(\"meta\",1)).attr(\"name\",e),r.attr(\"content\",l),r.shortEnded=!0,a(r))});var d={};p.each(s.getAll(\"link\"),function(e){\"stylesheet\"===e.attr(\"rel\")&&(d[e.attr(\"href\")]=e)}),p.each(o.stylesheets,function(e){d[e]||((r=new m(\"link\",1)).attr({rel:\"stylesheet\",text:\"text/css\",href:e}),r.shortEnded=!0,a(r)),delete d[e]}),p.each(d,function(e){e.remove()}),(r=s.getAll(\"body\")[0])&&(i(r,\"dir\",o.langdir),i(r,\"style\",o.style),i(r,\"vlink\",o.visited_color),i(r,\"link\",o.link_color),i(r,\"alink\",o.active_color),l.setAttribs(e.getBody(),{style:o.style,dir:o.dir,vLink:o.visited_color,link:o.link_color,aLink:o.active_color})),(r=s.getAll(\"html\")[0])&&(i(r,\"lang\",o.langcode),i(r,\"xml:lang\",o.langcode)),c.firstChild||c.remove();var u=f({validate:!1,indent:!0,indent_before:\"head,html,body,meta,title,script,link,style\",indent_after:\"head,html,body,meta,title,script,link,style\"}).serialize(s);return u.substring(0,u.indexOf(\"</body>\"))}(l,p.extend(c,t),i.get());i.set(n),e.close()}})},_=p.each,b=function(e){return e.replace(/<\\/?[A-Z]+/g,function(e){return e.toLowerCase()})},x=function(e,t,n,l){var i,o,r,a,c,s,d,u,m,f=\"\",g=e.dom;l.selection||(a=e.getParam(\"protect\"),c=l.content,p.each(a,function(e){c=c.replace(e,function(e){return\"\\x3c!--mce:protected \"+escape(e)+\"--\\x3e\"})}),r=c,\"raw\"===l.format&&t.get()||l.source_view&&h(e)||(0!==r.length||l.source_view||(r=p.trim(t.get())+\"\\n\"+p.trim(r)+\"\\n\"+p.trim(n.get())),-1!==(i=(r=r.replace(/<(\\/?)BODY/gi,\"<$1body\")).indexOf(\"<body\"))?(i=r.indexOf(\">\",i),t.set(b(r.substring(0,i+1))),-1===(o=r.indexOf(\"</body\",i))&&(o=r.length),l.content=p.trim(r.substring(i+1,o)),n.set(b(r.substring(o)))):(t.set(k(e)),n.set(\"\\n</body>\\n</html>\")),s=v(t.get()),_(s.getAll(\"style\"),function(e){e.firstChild&&(f+=e.firstChild.value)}),(d=s.getAll(\"body\")[0])&&g.setAttribs(e.getBody(),{style:d.attr(\"style\")||\"\",dir:d.attr(\"dir\")||\"\",vLink:d.attr(\"vlink\")||\"\",link:d.attr(\"link\")||\"\",aLink:d.attr(\"alink\")||\"\"}),g.remove(\"fullpage_styles\"),u=e.getDoc().getElementsByTagName(\"head\")[0],f&&g.add(u,\"style\",{id:\"fullpage_styles\"}).appendChild(document.createTextNode(f)),m={},p.each(u.getElementsByTagName(\"link\"),function(e){\"stylesheet\"===e.rel&&e.getAttribute(\"data-mce-fullpage\")&&(m[e.href]=e)}),p.each(s.getAll(\"link\"),function(e){var t=e.attr(\"href\");if(!t)return!0;m[t]||\"stylesheet\"!==e.attr(\"rel\")||g.add(u,\"link\",{rel:\"stylesheet\",text:\"text/css\",href:t,\"data-mce-fullpage\":\"1\"}),delete m[t]}),p.each(m,function(e){e.parentNode.removeChild(e)})))},k=function(e){var t,n=\"\",l=\"\";return e.getParam(\"fullpage_default_xml_pi\")&&(n+='<?xml version=\"1.0\" encoding=\"'+(i(e)||\"ISO-8859-1\")+'\" ?>\\n'),n+=e.getParam(\"fullpage_default_doctype\",\"<!DOCTYPE html>\"),n+=\"\\n<html>\\n<head>\\n\",(t=e.getParam(\"fullpage_default_title\"))&&(n+=\"<title>\"+t+\"</title>\\n\"),(t=i(e))&&(n+='<meta http-equiv=\"Content-Type\" content=\"text/html; charset='+t+'\" />\\n'),(t=g(e))&&(l+=\"font-family: \"+t+\";\"),(t=y(e))&&(l+=\"font-size: \"+t+\";\"),(t=e.getParam(\"fullpage_default_text_color\"))&&(l+=\"color: \"+t+\";\"),n+=\"</head>\\n<body\"+(l?' style=\"'+l+'\"':\"\")+\">\\n\"},C=function(e,t,n,l){\"html\"!==l.format||l.selection||l.source_view&&h(e)||(l.content=(p.trim(t)+\"\\n\"+p.trim(l.content)+\"\\n\"+p.trim(n)).replace(/<!--mce:protected ([\\s\\S]*?)-->/g,function(e,t){return unescape(t)}))};e.add(\"fullpage\",function(e){var t,n,l,i,o,r,a=s(\"\"),c=s(\"\");n=a,(t=e).addCommand(\"mceFullPageProperties\",function(){d(t,n)}),(l=e).ui.registry.addButton(\"fullpage\",{tooltip:\"Metadata and document properties\",icon:\"document-properties\",onAction:function(){l.execCommand(\"mceFullPageProperties\")}}),l.ui.registry.addMenuItem(\"fullpage\",{text:\"Metadata and document properties\",icon:\"document-properties\",onAction:function(){l.execCommand(\"mceFullPageProperties\")}}),o=a,r=c,(i=e).on(\"BeforeSetContent\",function(e){x(i,o,r,e)}),i.on(\"GetContent\",function(e){C(i,o.get(),r.get(),e)})})}();"]}