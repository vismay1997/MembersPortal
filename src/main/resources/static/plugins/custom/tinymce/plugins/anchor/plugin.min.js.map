{"version":3,"sources":["anchor/plugin.min.js"],"names":["e","tinymce","util","Tools","resolve","t","o","a","n","getAttribute","r","nodeName","toLowerCase","c","dom","walk","selection","getRng","each","firstChild","remove","u","getParent","getStart","l","windowManager","open","title","size","body","type","items","name","label","placeholder","buttons","text","primary","initialData","id","onSubmit","getData","test","i","removeAttribute","addVisual","undoManager","add","transact","getParam","collapse","isCollapsed","insertContent","createHTML","formatter","apply","value","focus","alert","close","d","length","attr","on","parser","addNodeFilter","serializer","addCommand","ui","registry","addToggleButton","icon","tooltip","onAction","execCommand","onSetup","selectorChangedWithUnbind","setActive","unbind","addMenuItem","register","inline","selector","split","deep","attributes","onmatch"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n!function(){\"use strict\";var e=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),t=tinymce.util.Tools.resolve(\"tinymce.dom.RangeUtils\"),o=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),a=\"a:not([href])\",n=function(e){return e.getAttribute(\"id\")||e.getAttribute(\"name\")||\"\"},r=function(e){return(t=e)&&\"a\"===t.nodeName.toLowerCase()&&!e.getAttribute(\"href\")&&\"\"!==n(e);var t},c=function(e){var n=e.dom;t(n).walk(e.selection.getRng(),function(e){o.each(e,function(e){var t;r(t=e)&&!t.firstChild&&n.remove(e,!1)})})},u=function(e){return e.dom.getParent(e.selection.getStart(),a)},i=function(e,t){var n,o,a,r,i,l=u(e);l?(a=e,r=t,(i=l).removeAttribute(\"name\"),i.id=r,a.addVisual(),a.undoManager.add()):(o=t,(n=e).undoManager.transact(function(){n.getParam(\"allow_html_in_named_anchor\",!1,\"boolean\")||n.selection.collapse(!0),n.selection.isCollapsed()?n.insertContent(n.dom.createHTML(\"a\",{id:o})):(c(n),n.formatter.remove(\"namedAnchor\",null,null,!0),n.formatter.apply(\"namedAnchor\",{value:o}),n.addVisual())})),e.focus()},l=function(o){var e,t=(e=u(o))?n(e):\"\";o.windowManager.open({title:\"Anchor\",size:\"normal\",body:{type:\"panel\",items:[{name:\"id\",type:\"input\",label:\"ID\",placeholder:\"example\"}]},buttons:[{type:\"cancel\",name:\"cancel\",text:\"Cancel\"},{type:\"submit\",name:\"save\",text:\"Save\",primary:!0}],initialData:{id:t},onSubmit:function(e){var t,n;t=o,n=e.getData().id,(/^[A-Za-z][A-Za-z0-9\\-:._]*$/.test(n)?(i(t,n),1):(t.windowManager.alert(\"Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.\"),0))&&e.close()}})},d=function(r){return function(e){for(var t,n,o=0;o<e.length;o++){var a=e[o];n=void 0,!(n=t=a)||n.attr(\"href\")||!n.attr(\"id\")&&!n.attr(\"name\")||t.firstChild||a.attr(\"contenteditable\",r)}}};e.add(\"anchor\",function(e){var t,n,o;(t=e).on(\"PreInit\",function(){t.parser.addNodeFilter(\"a\",d(\"false\")),t.serializer.addNodeFilter(\"a\",d(null))}),(n=e).addCommand(\"mceAnchor\",function(){l(n)}),(o=e).ui.registry.addToggleButton(\"anchor\",{icon:\"bookmark\",tooltip:\"Anchor\",onAction:function(){return o.execCommand(\"mceAnchor\")},onSetup:function(e){return o.selection.selectorChangedWithUnbind(\"a:not([href])\",e.setActive).unbind}}),o.ui.registry.addMenuItem(\"anchor\",{icon:\"bookmark\",text:\"Anchor...\",onAction:function(){return o.execCommand(\"mceAnchor\")}}),e.on(\"PreInit\",function(){e.formatter.register(\"namedAnchor\",{inline:\"a\",selector:a,remove:\"all\",split:!0,deep:!0,attributes:{id:\"%value\"},onmatch:function(e,t,n){return r(e)}})})})}();"]}