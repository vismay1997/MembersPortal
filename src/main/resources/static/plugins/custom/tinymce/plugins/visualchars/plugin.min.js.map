{"version":3,"sources":["visualchars/plugin.min.js"],"names":["n","t","e","u","i","tinymce","util","Tools","resolve","c","a","s","f","l","isNone","fold","is","isSome","getOr","getOrThunk","getOrDie","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","v","g","Array","prototype","isPrototypeOf","constructor","name","String","h","p","y","r","length","b","Object","keys","w","o","N","window","Function","dom","nodeValue","T","nodeType","k","console","error","setAttribute","A","removeAttribute","O","getAttribute","split","C","classList","L","x","V"," ","­","B","RegExp","P","_","j","M","q","H","test","F","childNodes","concat","I","nodeName","toLowerCase","contains","U","parentNode","add","join","S","encode","replace","create","lastChild","insertAfter","remove","K","select","push","D","E","R","getBody","selection","getBookmark","getNode","moveToBookmark","z","get","fire","state","J","Q","setActive","on","off","getParam","set","addCommand","G","ui","registry","addToggleButton","tooltip","icon","onAction","execCommand","onSetup","addToggleMenuItem","text","debounce","keyCode","stop","isEnabled"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n!function(){\"use strict\";var n,t,e,r,o,u,i=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),c=function(n){return function(){return n}},a=c(!1),s=c(!0),f=function(){return l},l=(n=function(n){return n.isNone()},{fold:function(n,t){return n()},is:a,isSome:a,isNone:s,getOr:e=function(n){return n},getOrThunk:t=function(n){return n()},getOrDie:function(n){throw new Error(n||\"error: getOrDie called on none.\")},getOrNull:c(null),getOrUndefined:c(undefined),or:e,orThunk:t,map:f,each:function(){},bind:f,exists:a,forall:s,filter:f,equals:n,equals_:n,toArray:function(){return[]},toString:c(\"none()\")}),d=function(e){var n=c(e),t=function(){return o},r=function(n){return n(e)},o={fold:function(n,t){return t(e)},is:function(n){return e===n},isSome:s,isNone:a,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:t,orThunk:t,map:function(n){return d(n(e))},each:function(n){n(e)},bind:r,exists:r,forall:r,filter:function(n){return n(e)?o:l},toArray:function(){return[e]},toString:function(){return\"some(\"+e+\")\"},equals:function(n){return n.is(e)},equals_:function(n,t){return n.fold(a,function(n){return t(e,n)})}};return o},m=function(n){return null===n||n===undefined?l:d(n)},v=function(t){return function(n){return typeof n===t}},g=(r=\"string\",function(n){return e=typeof(t=n),(null===t?\"null\":\"object\"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&\"Array\"===t.constructor.name)?\"array\":\"object\"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&\"String\"===t.constructor.name)?\"string\":e)===r;var t,e}),h=v(\"boolean\"),p=v(\"number\"),y=function(n,t){for(var e=0,r=n.length;e<r;e++){t(n[e],e)}},b=Object.keys,w=function(n,t){for(var e=b(n),r=0,o=e.length;r<o;r++){var u=e[r];t(n[u],u)}},N=(\"undefined\"!=typeof window||Function(\"return this;\")(),function(n){return n.dom.nodeValue}),T=(o=3,function(n){return n.dom.nodeType===o}),k=function(n,t,e){!function(n,t,e){if(!(g(e)||h(e)||p(e)))throw console.error(\"Invalid call to Attribute.set. Key \",t,\":: Value \",e,\":: Element \",n),new Error(\"Attribute value was not simple\");n.setAttribute(t,e+\"\")}(n.dom,t,e)},A=function(n,t){n.dom.removeAttribute(t)},O=function(n,t){var e,r,o=(e=t,null===(r=n.dom.getAttribute(e))?undefined:r);return o===undefined||\"\"===o?[]:o.split(\" \")},C=function(n){return n.dom.classList!==undefined},S=function(n,t){return o=t,u=O(e=n,r=\"class\").concat([o]),k(e,r,u.join(\" \")),!0;var e,r,o,u},D=function(n,t){return o=t,0<(u=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e}(O(e=n,r=\"class\"),function(n){return n!==o})).length?k(e,r,u.join(\" \")):A(e,r),!1;var e,r,o,u},E=function(n){0===(C(n)?n.dom.classList:O(n,\"class\")).length&&A(n,\"class\")},L=function(n){if(null===n||n===undefined)throw new Error(\"Node cannot be null or undefined\");return{dom:n}},x={fromHtml:function(n,t){var e=(t||document).createElement(\"div\");if(e.innerHTML=n,!e.hasChildNodes()||1<e.childNodes.length)throw console.error(\"HTML does not have a single root node\",n),new Error(\"HTML must have a single root node\");return L(e.childNodes[0])},fromTag:function(n,t){var e=(t||document).createElement(n);return L(e)},fromText:function(n,t){var e=(t||document).createTextNode(n);return L(e)},fromDom:L,fromPoint:function(n,t,e){return m(n.dom.elementFromPoint(t,e)).map(L)}},V={\"\\xa0\":\"nbsp\",\"\\xad\":\"shy\"},B=function(n,t){var e=\"\";return w(n,function(n,t){e+=t}),new RegExp(\"[\"+e+\"]\",t?\"g\":\"\")},P=B(V),_=B(V,!0),j=(u=\"\",w(V,function(n){u&&(u+=\",\"),u+=\"span.mce-\"+n}),u),M=\"mce-nbsp\",q=function(n){return'<span data-mce-bogus=\"1\" class=\"mce-'+V[n]+'\">'+n+\"</span>\"},H=function(n){var t=N(n);return T(n)&&t!==undefined&&P.test(t)},F=function(n,t){var e=[],r=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r}(n.dom.childNodes,x.fromDom);return y(r,function(n){t(n)&&(e=e.concat([n])),e=e.concat(F(n,t))}),e},I=function(n){return\"span\"===n.nodeName.toLowerCase()&&n.classList.contains(\"mce-nbsp-wrap\")},U=function(c,n){var t=F(x.fromDom(n),H);y(t,function(n){var t,e,r=n.dom.parentNode;if(I(r))t=x.fromDom(r),e=M,C(t)?t.dom.classList.add(e):S(t,e);else{for(var o=c.dom.encode(N(n)).replace(_,q),u=c.dom.create(\"div\",null,o),i=void 0;i=u.lastChild;)c.dom.insertAfter(i,n.dom);c.dom.remove(n.dom)}})},K=function(r,n){var t=r.dom.select(j,n);y(t,function(n){var t,e;I(n)?(t=x.fromDom(n),e=M,C(t)?t.dom.classList.remove(e):D(t,e),E(t)):r.dom.remove(n,!0)})},R=function(n){var t=n.getBody(),e=n.selection.getBookmark(),r=(r=function(n,t){for(;n.parentNode;){if(n.parentNode===t)return n;n=n.parentNode}}(n.selection.getNode(),t))!==undefined?r:t;K(n,r),U(n,r),n.selection.moveToBookmark(e)},z=function(n,t){var e,r;e=n,r=t.get(),e.fire(\"VisualChars\",{state:r});var o=n.getBody();(!0===t.get()?U:K)(n,o)},G=function(n,t){n.addCommand(\"mceVisualChars\",function(){!function(n,t){t.set(!t.get());var e=n.selection.getBookmark();z(n,t),n.selection.moveToBookmark(e)}(n,t)})},J=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),Q=function(e,r){return function(t){t.setActive(r.get());var n=function(n){return t.setActive(n.state)};return e.on(\"VisualChars\",n),function(){return e.off(\"VisualChars\",n)}}};i.add(\"visualchars\",function(n){var t,e,r,o,u,i,c,a,s,f,l=(t=n.getParam(\"visualchars_default_state\",!1),e=t,{get:function(){return e},set:function(n){e=n}});return G(n,l),o=l,(r=n).ui.registry.addToggleButton(\"visualchars\",{tooltip:\"Show invisible characters\",icon:\"visualchars\",onAction:function(){return r.execCommand(\"mceVisualChars\")},onSetup:Q(r,o)}),r.ui.registry.addToggleMenuItem(\"visualchars\",{text:\"Show invisible characters\",icon:\"visualchars\",onAction:function(){return r.execCommand(\"mceVisualChars\")},onSetup:Q(r,o)}),u=n,i=l,c=J.debounce(function(){R(u)},300),!1!==u.getParam(\"forced_root_block\")&&u.on(\"keydown\",function(n){!0===i.get()&&(13===n.keyCode?R(u):c())}),u.on(\"remove\",c.stop),s=l,(a=n).on(\"init\",function(){z(a,s)}),f=l,{isEnabled:function(){return f.get()}}})}();"]}