{"version":3,"sources":["pagebreak/plugin.min.js"],"names":["e","tinymce","util","Tools","resolve","a","i","getParam","m","transparentSrc","add","n","o","c","t","r","addCommand","insertContent","ui","registry","addButton","icon","tooltip","onAction","execCommand","addMenuItem","text","RegExp","replace","on","content","serializer","addNodeFilter","length","attr","indexOf","parent","schema","getBlockElements","name","type","value","raw","remove","target","nodeName","dom","hasClass"],"mappings":"CAQC,WAAW,aAAa,IAAIA,EAAEC,QAAQC,KAAKC,MAAMC,QAAQ,yBAAyBC,EAAEJ,QAAQC,KAAKC,MAAMC,QAAQ,eAAeE,EAAE,SAASN,GAAG,OAAOA,EAAEO,SAAS,yBAAwB,IAAyCC,EAAE,WAAW,MAAM,aAAaH,EAAEI,eAAf,2EAAmGT,EAAEU,IAAI,aAAY,SAASV,GAAG,IAAIK,EAAEM,EAAEC,EAAEC,EAAEC,EAAEC,GAAGV,EAAEL,GAAGgB,WAAW,gBAAe,WAAWV,EAAED,GAAGA,EAAEY,cAAc,MAAMT,IAAI,QAAQH,EAAEY,cAAcT,SAAQG,EAAEX,GAAGkB,GAAGC,SAASC,UAAU,YAAY,CAACC,KAAK,aAAaC,QAAQ,aAAaC,SAAS,WAAW,OAAOZ,EAAEa,YAAY,mBAAmBb,EAAEO,GAAGC,SAASM,YAAY,YAAY,CAACC,KAAK,aAAaL,KAAK,aAAaE,SAAS,WAAW,OAAOZ,EAAEa,YAAY,mBAAmBX,GAAGD,EAAEZ,GAAGO,SAAS,sBAAsB,4BAA4BO,EAAE,IAAIa,OAAOd,EAAEe,QAAQ,iCAAgC,SAAS5B,GAAG,MAAM,KAAKA,KAAI,MAAMY,EAAEiB,GAAG,oBAAmB,SAAS7B,GAAGA,EAAE8B,QAAQ9B,EAAE8B,QAAQF,QAAQd,EAAEN,QAAOI,EAAEiB,GAAG,WAAU,WAAWjB,EAAEmB,WAAWC,cAAc,OAAM,SAAShC,GAAG,IAAI,IAAIK,EAAEM,EAAEG,EAAEd,EAAEiC,OAAOnB,KAAK,IAAIH,GAAGN,EAAEL,EAAEc,IAAIoB,KAAK,YAAY,IAAIvB,EAAEwB,QAAQ,iBAAiB,CAAC,IAAIpB,EAAEV,EAAE+B,OAAO,GAAGxB,EAAEyB,OAAOC,mBAAmBvB,EAAEwB,OAAOjC,EAAEM,GAAG,CAACG,EAAEyB,KAAK,EAAEzB,EAAE0B,MAAM5B,EAAEE,EAAE2B,KAAI,EAAGrC,EAAEsC,SAAS,SAAStC,EAAEmC,KAAK,EAAEnC,EAAEoC,MAAM5B,EAAER,EAAEqC,KAAI,UAAS3B,EAAEf,GAAG6B,GAAG,eAAc,SAAS7B,GAAG,QAAQA,EAAE4C,OAAOC,UAAU9B,EAAE+B,IAAIC,SAAS/C,EAAE4C,OAArpC,mBAAmqC5C,EAAEuC,KAAK,mBAAx3C","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n!function(){\"use strict\";var e=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),a=tinymce.util.Tools.resolve(\"tinymce.Env\"),i=function(e){return e.getParam(\"pagebreak_split_block\",!1)},g=function(){return\"mce-pagebreak\"},m=function(){return'<img src=\"'+a.transparentSrc+'\" class=\"'+g()+'\" data-mce-resize=\"false\" data-mce-placeholder />'};e.add(\"pagebreak\",function(e){var a,n,o,c,t,r;(a=e).addCommand(\"mcePageBreak\",function(){i(a)?a.insertContent(\"<p>\"+m()+\"</p>\"):a.insertContent(m())}),(n=e).ui.registry.addButton(\"pagebreak\",{icon:\"page-break\",tooltip:\"Page break\",onAction:function(){return n.execCommand(\"mcePageBreak\")}}),n.ui.registry.addMenuItem(\"pagebreak\",{text:\"Page break\",icon:\"page-break\",onAction:function(){return n.execCommand(\"mcePageBreak\")}}),c=(o=e).getParam(\"pagebreak_separator\",\"\\x3c!-- pagebreak --\\x3e\"),t=new RegExp(c.replace(/[\\?\\.\\*\\[\\]\\(\\)\\{\\}\\+\\^\\$\\:]/g,function(e){return\"\\\\\"+e}),\"gi\"),o.on(\"BeforeSetContent\",function(e){e.content=e.content.replace(t,m())}),o.on(\"PreInit\",function(){o.serializer.addNodeFilter(\"img\",function(e){for(var a,n,t=e.length;t--;)if((n=(a=e[t]).attr(\"class\"))&&-1!==n.indexOf(\"mce-pagebreak\")){var r=a.parent;if(o.schema.getBlockElements()[r.name]&&i(o)){r.type=3,r.value=c,r.raw=!0,a.remove();continue}a.type=3,a.value=c,a.raw=!0}})}),(r=e).on(\"ResolveName\",function(e){\"IMG\"===e.target.nodeName&&r.dom.hasClass(e.target,g())&&(e.name=\"pagebreak\")})})}();"]}