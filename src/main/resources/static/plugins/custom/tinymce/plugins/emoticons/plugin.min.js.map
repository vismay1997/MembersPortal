{"version":3,"sources":["emoticons/plugin.min.js"],"names":["u","t","n","e","r","tinymce","util","Tools","resolve","o","Object","assign","arguments","length","prototype","hasOwnProperty","call","apply","this","m","get","set","a","c","Array","Error","i","l","s","f","g","isNone","fold","is","isSome","getOr","getOrThunk","getOrDie","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","d","h","some","none","from","y","keys","v","p","w","indexOf","O","C","j","k","A","symbols","people","animals_and_nature","food_and_drink","activity","travel_and_places","objects","flags","user","_","T","getParam","keywords","category","b","P","title","char","substr","replace","concat","push","on","load","then","console","log","listCategories","hasLoaded","waitForLoad","setInterval","clearInterval","listAll","listCategory","x","toLowerCase","value","text","icon","D","L","pattern","results","getData","setData","cancel","clearTimeout","throttle","setTimeout","label","type","name","size","body","tabs","items","initialData","onTabChange","newTabName","onChange","onAction","insertContent","close","buttons","primary","windowManager","open","focus","block","redial","unblock","level","add","suffix","ui","registry","addButton","tooltip","addMenuItem","addAutocompleter","ch","columns","minChars","fetch","selection","setRng","hide","parser","addAttributeFilter","attr"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n!function(){\"use strict\";var u,t,n,e,r=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),o=function(){return(o=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},m=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},a=Object.prototype.hasOwnProperty,c=function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error(\"Can't merge zero objects\");for(var e={},r=0;r<t.length;r++){var o=t[r];for(var i in o)a.call(o,i)&&(e[i]=u(e[i],o[i]))}return e},i=function(t){return function(){return t}},l=i(!(u=function(t,n){return n})),s=i(!0),f=function(){return g},g=(t=function(t){return t.isNone()},{fold:function(t,n){return t()},is:l,isSome:l,isNone:s,getOr:e=function(t){return t},getOrThunk:n=function(t){return t()},getOrDie:function(t){throw new Error(t||\"error: getOrDie called on none.\")},getOrNull:i(null),getOrUndefined:i(undefined),or:e,orThunk:n,map:f,each:function(){},bind:f,exists:l,forall:s,filter:f,equals:t,equals_:t,toArray:function(){return[]},toString:i(\"none()\")}),d=function(e){var t=i(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return d(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:g},toArray:function(){return[e]},toString:function(){return\"some(\"+e+\")\"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(l,function(t){return n(e,t)})}};return o},h={some:d,none:f,from:function(t){return null===t||t===undefined?g:d(t)}},y=Object.keys,v=Object.hasOwnProperty,p=function(t,n){for(var e=y(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}},b=function(t,r){var o={};return p(t,function(t,n){var e=r(t,n);o[e.k]=e.v}),o},w=function(t,n){return-1!==t.indexOf(n)},O=tinymce.util.Tools.resolve(\"tinymce.Resource\"),C=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),j=tinymce.util.Tools.resolve(\"tinymce.util.Promise\"),k=\"All\",A={symbols:\"Symbols\",people:\"People\",animals_and_nature:\"Animals and Nature\",food_and_drink:\"Food and Drink\",activity:\"Activity\",travel_and_places:\"Travel and Places\",objects:\"Objects\",flags:\"Flags\",user:\"User Defined\"},_=function(t,n){return e=t,r=n,v.call(e,r)?t[n]:n;var e,r},T=function(t){var e,n=t.getParam(\"emoticons_append\",{},\"object\");return e=function(t){return o({keywords:[],category:\"user\"},t)},b(n,function(t,n){return{k:n,v:e(t,n)}})},P=function(e,o,t){var r=m(h.none()),n=m(h.none()),f=e.getParam(\"emoticons_images_url\",\"https://twemoji.maxcdn.com/v/13.0.1/72x72/\",\"string\"),i=function(t){var l={},s=[];p(t,function(t,n){var e,r,o,i,u,a={title:n,keywords:t.keywords,\"char\":(r=(e=t)[\"char\"],u=0,i=\"<img\",(o=r).length>=i.length&&o.substr(u,u+i.length)===i?e[\"char\"].replace(/src=\"([^\"]+)\"/,function(t,n){return'src=\"'+f+n+'\"'}):e[\"char\"]),category:_(A,t.category)},c=l[a.category]!==undefined?l[a.category]:[];l[a.category]=c.concat([a]),s.push(a)}),r.set(h.some(l)),n.set(h.some(s))};e.on(\"init\",function(){O.load(t,o).then(function(t){var n=T(e);i(c(t,n))},function(t){console.log(\"Failed to load emoticons: \"+t),r.set(h.some({})),n.set(h.some([]))})});var u=function(){return n.get().getOr([])},a=function(){return r.get().isSome()&&n.get().isSome()};return{listCategories:function(){return[k].concat(y(r.get().getOr({})))},hasLoaded:a,waitForLoad:function(){return a()?j.resolve(!0):new j(function(t,n){var e=15,r=C.setInterval(function(){a()?(C.clearInterval(r),t(!0)):--e<0&&(console.log(\"Could not load emojis from url: \"+o),C.clearInterval(r),n(!1))},100)})},listAll:u,listCategory:function(n){return n===k?u():r.get().bind(function(t){return h.from(t[n])}).getOr([])}}},x=function(t,n,e){for(var r=[],o=n.toLowerCase(),i=e.fold(function(){return l},function(n){return function(t){return n<=t}}),u=0;u<t.length&&(0!==n.length&&!function(t,n){return w(t.title.toLowerCase(),n)||function(t,n){for(var e=0,r=t.length;e<r;e++){if(n(t[e],e))return!0}return!1}(t.keywords,function(t){return w(t.toLowerCase(),n)})}(t[u],o)||(r.push({value:t[u][\"char\"],text:t[u].title,icon:t[u][\"char\"]}),!i(r.length)));u++);return r},D=\"pattern\",L=function(o,u){var e,r,i,t={pattern:\"\",results:x(u.listAll(),\"\",h.some(300))},a=m(k),c=(e=function(t){var n,e,r,o,i;e=(n=t).getData(),r=a.get(),o=u.listCategory(r),i=x(o,e[D],r===k?h.some(300):h.none()),n.setData({results:i})},r=200,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==i&&clearTimeout(i),i=setTimeout(function(){e.apply(null,t),i=null},r)}}),n={label:\"Search\",type:\"input\",name:D},l={type:\"collection\",name:\"results\"},s=function(){return{title:\"Emoticons\",size:\"normal\",body:{type:\"tabpanel\",tabs:function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(u.listCategories(),function(t){return{title:t,name:t,items:[n,l]}})},initialData:t,onTabChange:function(t,n){a.set(n.newTabName),c.throttle(t)},onChange:c.throttle,onAction:function(t,n){var e,r;\"results\"===n.name&&(e=o,r=n.value,e.insertContent(r),t.close())},buttons:[{type:\"cancel\",text:\"Close\",primary:!0}]}},f=o.windowManager.open(s());f.focus(D),u.hasLoaded()||(f.block(\"Loading emoticons...\"),u.waitForLoad().then(function(){f.redial(s()),c.throttle(f),f.focus(D),f.unblock()})[\"catch\"](function(t){f.redial({title:\"Emoticons\",body:{type:\"panel\",items:[{type:\"alertbanner\",level:\"error\",icon:\"warning\",text:\"<p>Could not load emoticons</p>\"}]},buttons:[{type:\"cancel\",text:\"Close\",primary:!0}],initialData:{pattern:\"\",results:[]}}),f.focus(D),f.unblock()}))};r.add(\"emoticons\",function(t,n){var e,r,o,i,u,a,c,l,s,f=(r=n,o=(e=t).getParam(\"emoticons_database\",\"emojis\",\"string\"),e.getParam(\"emoticons_database_url\",r+\"/js/\"+o+e.suffix+\".js\",\"string\")),m=t.getParam(\"emoticons_database_id\",\"tinymce.plugins.emoticons\",\"string\"),g=P(t,f,m);u=g,a=function(){return L(i,u)},(i=t).ui.registry.addButton(\"emoticons\",{tooltip:\"Emoticons\",icon:\"emoji\",onAction:a}),i.ui.registry.addMenuItem(\"emoticons\",{text:\"Emoticons...\",icon:\"emoji\",onAction:a}),l=g,(c=t).ui.registry.addAutocompleter(\"emoticons\",{ch:\":\",columns:\"auto\",minChars:2,fetch:function(n,e){return l.waitForLoad().then(function(){var t=l.listAll();return x(t,n,h.some(e))})},onAction:function(t,n,e){c.selection.setRng(n),c.insertContent(e),t.hide()}}),(s=t).on(\"PreInit\",function(){s.parser.addAttributeFilter(\"data-emoticon\",function(t){!function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}}(t,function(t){t.attr(\"data-mce-resize\",\"false\"),t.attr(\"data-mce-placeholder\",\"1\")})})})})}();"]}