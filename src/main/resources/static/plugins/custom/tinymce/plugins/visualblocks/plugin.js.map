{"version":3,"sources":["visualblocks/plugin.js"],"names":["global","tinymce","util","Tools","resolve","toggleVisualBlocks","editor","pluginUrl","enabledState","dom","toggleClass","getBody","set","get","state","fire","fireVisualBlocks","toggleActiveState","api","setActive","editorEventCallback","e","on","off","add","value","v","addCommand","register","ui","registry","addToggleButton","icon","tooltip","onAction","execCommand","onSetup","addToggleMenuItem","text","register$1","type","getParam","isEnabledByDefault","setup"],"mappings":"CAQC,WACG,aAEA,IAcIA,EAASC,QAAQC,KAAKC,MAAMC,QAAQ,yBAMpCC,EAAqB,SAAUC,EAAQC,EAAWC,GAC1CF,EAAOG,IACbC,YAAYJ,EAAOK,UAAW,oBAClCH,EAAaI,KAAKJ,EAAaK,OAPV,SAAUP,EAAQQ,GACvCR,EAAOS,KAAK,eAAgB,CAAED,MAAOA,IAOrCE,CAAiBV,EAAQE,EAAaK,QA0BpCI,EAAoB,SAAUX,EAAQE,GACxC,OAAO,SAAUU,GACfA,EAAIC,UAAUX,EAAaK,OAC3B,IAAIO,EAAsB,SAAUC,GAClC,OAAOH,EAAIC,UAAUE,EAAEP,QAGzB,OADAR,EAAOgB,GAAG,eAAgBF,GACnB,WACL,OAAOd,EAAOiB,IAAI,eAAgBH,MAwBtCpB,EAAOwB,IAAI,gBAAgB,SAAUlB,EAAQC,GAC3C,IAlFEkB,EAkFEjB,GAlFFiB,GAkFsB,EA3EnB,CACLZ,IAPQ,WACR,OAAOY,GAOPb,IALQ,SAAUc,GAClBD,EAAQC,MAqBG,SAAUpB,EAAQC,EAAWC,GAC1CF,EAAOqB,WAAW,mBAAmB,WACnCtB,EAAmBC,EAAQC,EAAWC,MAuDtCoB,CAAStB,EAAQC,EAAWC,GAtBf,SAAUF,EAAQE,GACjCF,EAAOuB,GAAGC,SAASC,gBAAgB,eAAgB,CACjDC,KAAM,eACNC,QAAS,cACTC,SAAU,WACR,OAAO5B,EAAO6B,YAAY,oBAE5BC,QAASnB,EAAkBX,EAAQE,KAErCF,EAAOuB,GAAGC,SAASO,kBAAkB,eAAgB,CACnDC,KAAM,cACNN,KAAM,eACNE,SAAU,WACR,OAAO5B,EAAO6B,YAAY,oBAE5BC,QAASnB,EAAkBX,EAAQE,KAQnC+B,CAAWjC,EAAQE,GAhDX,SAAUF,EAAQC,EAAWC,GACvCF,EAAOgB,GAAG,sCAAsC,SAAUD,GACpDb,EAAaK,OACfP,EAAOG,IAAIC,YAAYJ,EAAOK,UAAW,mBAA+B,wBAAXU,EAAEmB,SAGnElC,EAAOgB,GAAG,QAAQ,YAVK,SAAUhB,GACjC,OAAOA,EAAOmC,SAAS,8BAA8B,EAAO,YAUtDC,CAAmBpC,IACrBD,EAAmBC,EAAQC,EAAWC,MAyCxCmC,CAAMrC,EAAQC,EAAWC,MAzFjC","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n(function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var fireVisualBlocks = function (editor, state) {\n      editor.fire('VisualBlocks', { state: state });\n    };\n\n    var toggleVisualBlocks = function (editor, pluginUrl, enabledState) {\n      var dom = editor.dom;\n      dom.toggleClass(editor.getBody(), 'mce-visualblocks');\n      enabledState.set(!enabledState.get());\n      fireVisualBlocks(editor, enabledState.get());\n    };\n\n    var register = function (editor, pluginUrl, enabledState) {\n      editor.addCommand('mceVisualBlocks', function () {\n        toggleVisualBlocks(editor, pluginUrl, enabledState);\n      });\n    };\n\n    var isEnabledByDefault = function (editor) {\n      return editor.getParam('visualblocks_default_state', false, 'boolean');\n    };\n\n    var setup = function (editor, pluginUrl, enabledState) {\n      editor.on('PreviewFormats AfterPreviewFormats', function (e) {\n        if (enabledState.get()) {\n          editor.dom.toggleClass(editor.getBody(), 'mce-visualblocks', e.type === 'afterpreviewformats');\n        }\n      });\n      editor.on('init', function () {\n        if (isEnabledByDefault(editor)) {\n          toggleVisualBlocks(editor, pluginUrl, enabledState);\n        }\n      });\n    };\n\n    var toggleActiveState = function (editor, enabledState) {\n      return function (api) {\n        api.setActive(enabledState.get());\n        var editorEventCallback = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('VisualBlocks', editorEventCallback);\n        return function () {\n          return editor.off('VisualBlocks', editorEventCallback);\n        };\n      };\n    };\n    var register$1 = function (editor, enabledState) {\n      editor.ui.registry.addToggleButton('visualblocks', {\n        icon: 'visualblocks',\n        tooltip: 'Show blocks',\n        onAction: function () {\n          return editor.execCommand('mceVisualBlocks');\n        },\n        onSetup: toggleActiveState(editor, enabledState)\n      });\n      editor.ui.registry.addToggleMenuItem('visualblocks', {\n        text: 'Show blocks',\n        icon: 'visualblocks',\n        onAction: function () {\n          return editor.execCommand('mceVisualBlocks');\n        },\n        onSetup: toggleActiveState(editor, enabledState)\n      });\n    };\n\n    function Plugin () {\n      global.add('visualblocks', function (editor, pluginUrl) {\n        var enabledState = Cell(false);\n        register(editor, pluginUrl, enabledState);\n        register$1(editor, enabledState);\n        setup(editor, pluginUrl, enabledState);\n      });\n    }\n\n    Plugin();\n\n}());\n"]}