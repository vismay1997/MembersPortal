{"version":3,"sources":["searchreplace/plugin.js"],"names":["eq","call","id","t","Cell","initial","value","get","set","v","global","tinymce","util","Tools","resolve","__assign","Object","assign","s","i","n","arguments","length","p","prototype","hasOwnProperty","apply","this","noop","constant","never","always","punctuation","none","NONE","o","isNone","fold","_s","is","isSome","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","a","constant_a","self","me","f","elementEq","b","Optional","from","punctuation$1","global$1","isType","type","x","Array","isPrototypeOf","constructor","name","String","isSimpleType","isString","isArray","isBoolean","isNumber","nativeSlice","slice","nativePush","push","xs","len","r","eachr","flatten","has","obj","key","isText","window","Function","element","dom","nodeType","console","error","setAttribute","rawSet","fromDom","node","SugarElement","fromHtml","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","spot","offset","leaf","cs","children","before","marker","parentNode","parent","insertBefore","wrap","wrapper","appendChild","append","getOption","api","nodeValue","descendants","selector","base","childElementCount","querySelectorAll","all","global$2","isSimpleBoundary","isBlock","schema","getShortEndedElements","nodeName","isContentEditableFalse","getContentEditable","isHidden","getWhiteSpaceElements","toLeaf","walk","walkerFn","startNode","callbacks","endNode","skipStart","next","isCefNode","cef","boundary","collectTextToBoundary","section","rootNode","forwards","getContentEditableParent","isContentEditableTrueInCef","isBoundary","rootBlock","getParent","walker","prev","fOffset","sOffset","elements","collect","sections","current","finishSection","collectRangeSections","rng","start","startContainer","startOffset","end","endContainer","endOffset","commonAncestorContainer","comparator","copy","e","ceTrueNode","match","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","documentPositionPreceding","sort","fromRng","collapsed","fromNode","createRng","selectNode","extract","matches","acc","wasType","group","groupBy","content","last","finish","positions","matchIdx","Math","max","min","matchId","results","concat","position","find$1","pattern","join","regex","lastIndex","exec","matchedText","matchIndex","matchStart","index","indexOf","matchFinish","find","mark","replacementNode","idx","pos","cloneNode","textNode","splitText","matchNode","findAndMarkInSelection","selection","bookmark","getBookmark","nodes","select","textSections","fromNodes","getRng","moveToBookmark","getElmIndex","elm","getAttribute","markAllMatches","editor","currentSearchState","inSelection","create","data-mce-bogus","className","getBody","done","findAndMark","unwrap","firstChild","removeChild","findSpansByIndex","spans","getElementsByTagName","nodeIndex","moveSelection","forward","searchState","testIndex","count","removeClass","addClass","scrollIntoView","removeNode","remove","isEmpty","find$2","matchCase","wholeWord","escapedText","wordRegex","replace","escapeSearchText","RegExp","newIndex","isMatchSpan","currentMatchIndex","currentIndex","nextIndex","grep","parseInt","keepEditorSelection","setStart","setEnd","data","setRng","global$3","open","subject","dialogApi","clear","isSet","on","undoManager","add","selectedText","trim","getContent","format","updateButtonStates","hasNext","enable","disable","hasPrev","disableAll","toggle","focusButtonIfRequired","browser","isSafari","deviceType","isTouch","focus","reset","doFind","getData","findtext","matchcase","wholewords","inselection","windowManager","alert","notFoundAlert","initialState","spec","title","size","body","items","placeholder","maximized","inputMode","icon","disabled","borderless","buttons","tooltip","align","primary","initialData","replacetext","onChange","details","onAction","updateSearchState","onSubmit","onClose","inline","showDialog","addCommand","register","ui","registry","addMenuItem","shortcut","addButton","shortcuts","register$1","currentState","get$1"],"mappings":"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","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n(function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var punctuationStr = '[!-#%-*,-\\\\/:;?@\\\\[-\\\\]_{}\\xA1\\xAB\\xB7\\xBB\\xBF;\\xB7\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1361-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u3008\\u3009\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30\\u2E31\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uff3f\\uFF5B\\uFF5D\\uFF5F-\\uFF65]';\n\n    var punctuation = constant(punctuationStr);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var punctuation$1 = punctuation;\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isNumber = isSimpleType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isText = isType$1(TEXT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_PRECEDING);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var spot = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var leaf = function (element, offset) {\n      var cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get = function (element) {\n      return api.get(element);\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var isSimpleBoundary = function (dom, node) {\n      return dom.isBlock(node) || has(dom.schema.getShortEndedElements(), node.nodeName);\n    };\n    var isContentEditableFalse = function (dom, node) {\n      return dom.getContentEditable(node) === 'false';\n    };\n    var isContentEditableTrueInCef = function (dom, node) {\n      return dom.getContentEditable(node) === 'true' && dom.getContentEditableParent(node.parentNode) === 'false';\n    };\n    var isHidden = function (dom, node) {\n      return !dom.isBlock(node) && has(dom.schema.getWhiteSpaceElements(), node.nodeName);\n    };\n    var isBoundary = function (dom, node) {\n      return isSimpleBoundary(dom, node) || isContentEditableFalse(dom, node) || isHidden(dom, node) || isContentEditableTrueInCef(dom, node);\n    };\n    var isText$1 = function (node) {\n      return node.nodeType === 3;\n    };\n    var nuSection = function () {\n      return {\n        sOffset: 0,\n        fOffset: 0,\n        elements: []\n      };\n    };\n    var toLeaf = function (node, offset) {\n      return leaf(SugarElement.fromDom(node), offset);\n    };\n    var walk = function (dom, walkerFn, startNode, callbacks, endNode, skipStart) {\n      if (skipStart === void 0) {\n        skipStart = true;\n      }\n      var next = skipStart ? walkerFn(false) : startNode;\n      while (next) {\n        var isCefNode = isContentEditableFalse(dom, next);\n        if (isCefNode || isHidden(dom, next)) {\n          var stopWalking = isCefNode ? callbacks.cef(next) : callbacks.boundary(next);\n          if (stopWalking) {\n            break;\n          } else {\n            next = walkerFn(true);\n            continue;\n          }\n        } else if (isSimpleBoundary(dom, next)) {\n          if (callbacks.boundary(next)) {\n            break;\n          }\n        } else if (isText$1(next)) {\n          callbacks.text(next);\n        }\n        if (next === endNode) {\n          break;\n        } else {\n          next = walkerFn(false);\n        }\n      }\n    };\n    var collectTextToBoundary = function (dom, section, node, rootNode, forwards) {\n      if (isBoundary(dom, node)) {\n        return;\n      }\n      var rootBlock = dom.getParent(rootNode, dom.isBlock);\n      var walker = new global$2(node, rootBlock);\n      var walkerFn = forwards ? walker.next : walker.prev;\n      walk(dom, walkerFn, node, {\n        boundary: always,\n        cef: always,\n        text: function (next) {\n          if (forwards) {\n            section.fOffset += next.length;\n          } else {\n            section.sOffset += next.length;\n          }\n          section.elements.push(SugarElement.fromDom(next));\n        }\n      });\n    };\n    var collect = function (dom, rootNode, startNode, endNode, callbacks, skipStart) {\n      if (skipStart === void 0) {\n        skipStart = true;\n      }\n      var walker = new global$2(startNode, rootNode);\n      var sections = [];\n      var current = nuSection();\n      collectTextToBoundary(dom, current, startNode, rootNode, false);\n      var finishSection = function () {\n        if (current.elements.length > 0) {\n          sections.push(current);\n          current = nuSection();\n        }\n        return false;\n      };\n      walk(dom, walker.next, startNode, {\n        boundary: finishSection,\n        cef: function (node) {\n          finishSection();\n          if (callbacks) {\n            sections.push.apply(sections, callbacks.cef(node));\n          }\n          return false;\n        },\n        text: function (next) {\n          current.elements.push(SugarElement.fromDom(next));\n          if (callbacks) {\n            callbacks.text(next, current);\n          }\n        }\n      }, endNode, skipStart);\n      if (endNode) {\n        collectTextToBoundary(dom, current, endNode, rootNode, true);\n      }\n      finishSection();\n      return sections;\n    };\n    var collectRangeSections = function (dom, rng) {\n      var start = toLeaf(rng.startContainer, rng.startOffset);\n      var startNode = start.element.dom;\n      var end = toLeaf(rng.endContainer, rng.endOffset);\n      var endNode = end.element.dom;\n      return collect(dom, rng.commonAncestorContainer, startNode, endNode, {\n        text: function (node, section) {\n          if (node === endNode) {\n            section.fOffset += node.length - end.offset;\n          } else if (node === startNode) {\n            section.sOffset += start.offset;\n          }\n        },\n        cef: function (node) {\n          var sections = bind(descendants(SugarElement.fromDom(node), '*[contenteditable=true]'), function (e) {\n            var ceTrueNode = e.dom;\n            return collect(dom, ceTrueNode, ceTrueNode);\n          });\n          return sort(sections, function (a, b) {\n            return documentPositionPreceding(a.elements[0].dom, b.elements[0].dom) ? 1 : -1;\n          });\n        }\n      }, false);\n    };\n    var fromRng = function (dom, rng) {\n      return rng.collapsed ? [] : collectRangeSections(dom, rng);\n    };\n    var fromNode = function (dom, node) {\n      var rng = dom.createRng();\n      rng.selectNode(node);\n      return fromRng(dom, rng);\n    };\n    var fromNodes = function (dom, nodes) {\n      return bind(nodes, function (node) {\n        return fromNode(dom, node);\n      });\n    };\n\n    var find = function (text, pattern, start, finish) {\n      if (start === void 0) {\n        start = 0;\n      }\n      if (finish === void 0) {\n        finish = text.length;\n      }\n      var regex = pattern.regex;\n      regex.lastIndex = start;\n      var results = [];\n      var match;\n      while (match = regex.exec(text)) {\n        var matchedText = match[pattern.matchIndex];\n        var matchStart = match.index + match[0].indexOf(matchedText);\n        var matchFinish = matchStart + matchedText.length;\n        if (matchFinish > finish) {\n          break;\n        }\n        results.push({\n          start: matchStart,\n          finish: matchFinish\n        });\n        regex.lastIndex = matchFinish;\n      }\n      return results;\n    };\n    var extract = function (elements, matches) {\n      var nodePositions = foldl(elements, function (acc, element) {\n        var content = get(element);\n        var start = acc.last;\n        var finish = start + content.length;\n        var positions = bind(matches, function (match, matchIdx) {\n          if (match.start < finish && match.finish > start) {\n            return [{\n                element: element,\n                start: Math.max(start, match.start) - start,\n                finish: Math.min(finish, match.finish) - start,\n                matchId: matchIdx\n              }];\n          } else {\n            return [];\n          }\n        });\n        return {\n          results: acc.results.concat(positions),\n          last: finish\n        };\n      }, {\n        results: [],\n        last: 0\n      }).results;\n      return groupBy(nodePositions, function (position) {\n        return position.matchId;\n      });\n    };\n\n    var find$1 = function (pattern, sections) {\n      return bind(sections, function (section) {\n        var elements = section.elements;\n        var content = map(elements, get).join('');\n        var positions = find(content, pattern, section.sOffset, content.length - section.fOffset);\n        return extract(elements, positions);\n      });\n    };\n    var mark = function (matches, replacementNode) {\n      eachr(matches, function (match, idx) {\n        eachr(match, function (pos) {\n          var wrapper = SugarElement.fromDom(replacementNode.cloneNode(false));\n          set(wrapper, 'data-mce-index', idx);\n          var textNode = pos.element.dom;\n          if (textNode.length === pos.finish && pos.start === 0) {\n            wrap(pos.element, wrapper);\n          } else {\n            if (textNode.length !== pos.finish) {\n              textNode.splitText(pos.finish);\n            }\n            var matchNode = textNode.splitText(pos.start);\n            wrap(SugarElement.fromDom(matchNode), wrapper);\n          }\n        });\n      });\n    };\n    var findAndMark = function (dom, pattern, node, replacementNode) {\n      var textSections = fromNode(dom, node);\n      var matches = find$1(pattern, textSections);\n      mark(matches, replacementNode);\n      return matches.length;\n    };\n    var findAndMarkInSelection = function (dom, pattern, selection, replacementNode) {\n      var bookmark = selection.getBookmark();\n      var nodes = dom.select('td[data-mce-selected],th[data-mce-selected]');\n      var textSections = nodes.length > 0 ? fromNodes(dom, nodes) : fromRng(dom, selection.getRng());\n      var matches = find$1(pattern, textSections);\n      mark(matches, replacementNode);\n      selection.moveToBookmark(bookmark);\n      return matches.length;\n    };\n\n    var getElmIndex = function (elm) {\n      var value = elm.getAttribute('data-mce-index');\n      if (typeof value === 'number') {\n        return '' + value;\n      }\n      return value;\n    };\n    var markAllMatches = function (editor, currentSearchState, pattern, inSelection) {\n      var marker = editor.dom.create('span', { 'data-mce-bogus': 1 });\n      marker.className = 'mce-match-marker';\n      var node = editor.getBody();\n      done(editor, currentSearchState, false);\n      if (inSelection) {\n        return findAndMarkInSelection(editor.dom, pattern, editor.selection, marker);\n      } else {\n        return findAndMark(editor.dom, pattern, node, marker);\n      }\n    };\n    var unwrap = function (node) {\n      var parentNode = node.parentNode;\n      if (node.firstChild) {\n        parentNode.insertBefore(node.firstChild, node);\n      }\n      node.parentNode.removeChild(node);\n    };\n    var findSpansByIndex = function (editor, index) {\n      var spans = [];\n      var nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      if (nodes.length) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeIndex = getElmIndex(nodes[i]);\n          if (nodeIndex === null || !nodeIndex.length) {\n            continue;\n          }\n          if (nodeIndex === index.toString()) {\n            spans.push(nodes[i]);\n          }\n        }\n      }\n      return spans;\n    };\n    var moveSelection = function (editor, currentSearchState, forward) {\n      var searchState = currentSearchState.get();\n      var testIndex = searchState.index;\n      var dom = editor.dom;\n      forward = forward !== false;\n      if (forward) {\n        if (testIndex + 1 === searchState.count) {\n          testIndex = 0;\n        } else {\n          testIndex++;\n        }\n      } else {\n        if (testIndex - 1 === -1) {\n          testIndex = searchState.count - 1;\n        } else {\n          testIndex--;\n        }\n      }\n      dom.removeClass(findSpansByIndex(editor, searchState.index), 'mce-match-marker-selected');\n      var spans = findSpansByIndex(editor, testIndex);\n      if (spans.length) {\n        dom.addClass(findSpansByIndex(editor, testIndex), 'mce-match-marker-selected');\n        editor.selection.scrollIntoView(spans[0]);\n        return testIndex;\n      }\n      return -1;\n    };\n    var removeNode = function (dom, node) {\n      var parent = node.parentNode;\n      dom.remove(node);\n      if (dom.isEmpty(parent)) {\n        dom.remove(parent);\n      }\n    };\n    var escapeSearchText = function (text, wholeWord) {\n      var escapedText = text.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&').replace(/\\s/g, '[^\\\\S\\\\r\\\\n\\\\uFEFF]');\n      var wordRegex = '(' + escapedText + ')';\n      return wholeWord ? '(?:^|\\\\s|' + punctuation$1() + ')' + wordRegex + ('(?=$|\\\\s|' + punctuation$1() + ')') : wordRegex;\n    };\n    var find$2 = function (editor, currentSearchState, text, matchCase, wholeWord, inSelection) {\n      var escapedText = escapeSearchText(text, wholeWord);\n      var pattern = {\n        regex: new RegExp(escapedText, matchCase ? 'g' : 'gi'),\n        matchIndex: 1\n      };\n      var count = markAllMatches(editor, currentSearchState, pattern, inSelection);\n      if (count) {\n        var newIndex = moveSelection(editor, currentSearchState, true);\n        currentSearchState.set({\n          index: newIndex,\n          count: count,\n          text: text,\n          matchCase: matchCase,\n          wholeWord: wholeWord,\n          inSelection: inSelection\n        });\n      }\n      return count;\n    };\n    var next = function (editor, currentSearchState) {\n      var index = moveSelection(editor, currentSearchState, true);\n      currentSearchState.set(__assign(__assign({}, currentSearchState.get()), { index: index }));\n    };\n    var prev = function (editor, currentSearchState) {\n      var index = moveSelection(editor, currentSearchState, false);\n      currentSearchState.set(__assign(__assign({}, currentSearchState.get()), { index: index }));\n    };\n    var isMatchSpan = function (node) {\n      var matchIndex = getElmIndex(node);\n      return matchIndex !== null && matchIndex.length > 0;\n    };\n    var replace = function (editor, currentSearchState, text, forward, all) {\n      var searchState = currentSearchState.get();\n      var currentIndex = searchState.index;\n      var currentMatchIndex, nextIndex = currentIndex;\n      forward = forward !== false;\n      var node = editor.getBody();\n      var nodes = global$1.grep(global$1.toArray(node.getElementsByTagName('span')), isMatchSpan);\n      for (var i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        var matchIndex = currentMatchIndex = parseInt(nodeIndex, 10);\n        if (all || matchIndex === searchState.index) {\n          if (text.length) {\n            nodes[i].firstChild.nodeValue = text;\n            unwrap(nodes[i]);\n          } else {\n            removeNode(editor.dom, nodes[i]);\n          }\n          while (nodes[++i]) {\n            matchIndex = parseInt(getElmIndex(nodes[i]), 10);\n            if (matchIndex === currentMatchIndex) {\n              removeNode(editor.dom, nodes[i]);\n            } else {\n              i--;\n              break;\n            }\n          }\n          if (forward) {\n            nextIndex--;\n          }\n        } else if (currentMatchIndex > currentIndex) {\n          nodes[i].setAttribute('data-mce-index', String(currentMatchIndex - 1));\n        }\n      }\n      currentSearchState.set(__assign(__assign({}, searchState), {\n        count: all ? 0 : searchState.count - 1,\n        index: nextIndex\n      }));\n      if (forward) {\n        next(editor, currentSearchState);\n      } else {\n        prev(editor, currentSearchState);\n      }\n      return !all && currentSearchState.get().count > 0;\n    };\n    var done = function (editor, currentSearchState, keepEditorSelection) {\n      var i, startContainer, endContainer;\n      var searchState = currentSearchState.get();\n      var nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      for (i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        if (nodeIndex !== null && nodeIndex.length) {\n          if (nodeIndex === searchState.index.toString()) {\n            if (!startContainer) {\n              startContainer = nodes[i].firstChild;\n            }\n            endContainer = nodes[i].firstChild;\n          }\n          unwrap(nodes[i]);\n        }\n      }\n      currentSearchState.set(__assign(__assign({}, searchState), {\n        index: -1,\n        count: 0,\n        text: ''\n      }));\n      if (startContainer && endContainer) {\n        var rng = editor.dom.createRng();\n        rng.setStart(startContainer, 0);\n        rng.setEnd(endContainer, endContainer.data.length);\n        if (keepEditorSelection !== false) {\n          editor.selection.setRng(rng);\n        }\n        return rng;\n      }\n    };\n    var hasNext = function (editor, currentSearchState) {\n      return currentSearchState.get().count > 1;\n    };\n    var hasPrev = function (editor, currentSearchState) {\n      return currentSearchState.get().count > 1;\n    };\n\n    var get$1 = function (editor, currentState) {\n      var done$1 = function (keepEditorSelection) {\n        return done(editor, currentState, keepEditorSelection);\n      };\n      var find = function (text, matchCase, wholeWord, inSelection) {\n        if (inSelection === void 0) {\n          inSelection = false;\n        }\n        return find$2(editor, currentState, text, matchCase, wholeWord, inSelection);\n      };\n      var next$1 = function () {\n        return next(editor, currentState);\n      };\n      var prev$1 = function () {\n        return prev(editor, currentState);\n      };\n      var replace$1 = function (text, forward, all) {\n        return replace(editor, currentState, text, forward, all);\n      };\n      return {\n        done: done$1,\n        find: find,\n        next: next$1,\n        prev: prev$1,\n        replace: replace$1\n      };\n    };\n\n    var value = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var open = function (editor, currentSearchState) {\n      var dialogApi = value();\n      editor.undoManager.add();\n      var selectedText = global$1.trim(editor.selection.getContent({ format: 'text' }));\n      function updateButtonStates(api) {\n        var updateNext = hasNext(editor, currentSearchState) ? api.enable : api.disable;\n        updateNext('next');\n        var updatePrev = hasPrev(editor, currentSearchState) ? api.enable : api.disable;\n        updatePrev('prev');\n      }\n      var updateSearchState = function (api) {\n        var data = api.getData();\n        var current = currentSearchState.get();\n        currentSearchState.set(__assign(__assign({}, current), {\n          matchCase: data.matchcase,\n          wholeWord: data.wholewords,\n          inSelection: data.inselection\n        }));\n      };\n      var disableAll = function (api, disable) {\n        var buttons = [\n          'replace',\n          'replaceall',\n          'prev',\n          'next'\n        ];\n        var toggle = disable ? api.disable : api.enable;\n        each(buttons, toggle);\n      };\n      function notFoundAlert(api) {\n        editor.windowManager.alert('Could not find the specified string.', function () {\n          api.focus('findtext');\n        });\n      }\n      var focusButtonIfRequired = function (api, name) {\n        if (global$3.browser.isSafari() && global$3.deviceType.isTouch() && (name === 'find' || name === 'replace' || name === 'replaceall')) {\n          api.focus(name);\n        }\n      };\n      var reset = function (api) {\n        done(editor, currentSearchState, false);\n        disableAll(api, true);\n        updateButtonStates(api);\n      };\n      var doFind = function (api) {\n        var data = api.getData();\n        var last = currentSearchState.get();\n        if (!data.findtext.length) {\n          reset(api);\n          return;\n        }\n        if (last.text === data.findtext && last.matchCase === data.matchcase && last.wholeWord === data.wholewords) {\n          next(editor, currentSearchState);\n        } else {\n          var count = find$2(editor, currentSearchState, data.findtext, data.matchcase, data.wholewords, data.inselection);\n          if (count <= 0) {\n            notFoundAlert(api);\n          }\n          disableAll(api, count === 0);\n        }\n        updateButtonStates(api);\n      };\n      var initialState = currentSearchState.get();\n      var initialData = {\n        findtext: selectedText,\n        replacetext: '',\n        wholewords: initialState.wholeWord,\n        matchcase: initialState.matchCase,\n        inselection: initialState.inSelection\n      };\n      var spec = {\n        title: 'Find and Replace',\n        size: 'normal',\n        body: {\n          type: 'panel',\n          items: [\n            {\n              type: 'bar',\n              items: [\n                {\n                  type: 'input',\n                  name: 'findtext',\n                  placeholder: 'Find',\n                  maximized: true,\n                  inputMode: 'search'\n                },\n                {\n                  type: 'button',\n                  name: 'prev',\n                  text: 'Previous',\n                  icon: 'action-prev',\n                  disabled: true,\n                  borderless: true\n                },\n                {\n                  type: 'button',\n                  name: 'next',\n                  text: 'Next',\n                  icon: 'action-next',\n                  disabled: true,\n                  borderless: true\n                }\n              ]\n            },\n            {\n              type: 'input',\n              name: 'replacetext',\n              placeholder: 'Replace with',\n              inputMode: 'search'\n            }\n          ]\n        },\n        buttons: [\n          {\n            type: 'menu',\n            name: 'options',\n            icon: 'preferences',\n            tooltip: 'Preferences',\n            align: 'start',\n            items: [\n              {\n                type: 'togglemenuitem',\n                name: 'matchcase',\n                text: 'Match case'\n              },\n              {\n                type: 'togglemenuitem',\n                name: 'wholewords',\n                text: 'Find whole words only'\n              },\n              {\n                type: 'togglemenuitem',\n                name: 'inselection',\n                text: 'Find in selection'\n              }\n            ]\n          },\n          {\n            type: 'custom',\n            name: 'find',\n            text: 'Find',\n            primary: true\n          },\n          {\n            type: 'custom',\n            name: 'replace',\n            text: 'Replace',\n            disabled: true\n          },\n          {\n            type: 'custom',\n            name: 'replaceall',\n            text: 'Replace All',\n            disabled: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, details) {\n          if (details.name === 'findtext' && currentSearchState.get().count > 0) {\n            reset(api);\n          }\n        },\n        onAction: function (api, details) {\n          var data = api.getData();\n          switch (details.name) {\n          case 'find':\n            doFind(api);\n            break;\n          case 'replace':\n            if (!replace(editor, currentSearchState, data.replacetext)) {\n              reset(api);\n            } else {\n              updateButtonStates(api);\n            }\n            break;\n          case 'replaceall':\n            replace(editor, currentSearchState, data.replacetext, true, true);\n            reset(api);\n            break;\n          case 'prev':\n            prev(editor, currentSearchState);\n            updateButtonStates(api);\n            break;\n          case 'next':\n            next(editor, currentSearchState);\n            updateButtonStates(api);\n            break;\n          case 'matchcase':\n          case 'wholewords':\n          case 'inselection':\n            updateSearchState(api);\n            reset(api);\n            break;\n          }\n          focusButtonIfRequired(api, details.name);\n        },\n        onSubmit: function (api) {\n          doFind(api);\n          focusButtonIfRequired(api, 'find');\n        },\n        onClose: function () {\n          editor.focus();\n          done(editor, currentSearchState);\n          editor.undoManager.add();\n        }\n      };\n      dialogApi.set(editor.windowManager.open(spec, { inline: 'toolbar' }));\n    };\n\n    var register = function (editor, currentSearchState) {\n      editor.addCommand('SearchReplace', function () {\n        open(editor, currentSearchState);\n      });\n    };\n\n    var showDialog = function (editor, currentSearchState) {\n      return function () {\n        open(editor, currentSearchState);\n      };\n    };\n    var register$1 = function (editor, currentSearchState) {\n      editor.ui.registry.addMenuItem('searchreplace', {\n        text: 'Find and replace...',\n        shortcut: 'Meta+F',\n        onAction: showDialog(editor, currentSearchState),\n        icon: 'search'\n      });\n      editor.ui.registry.addButton('searchreplace', {\n        tooltip: 'Find and replace',\n        onAction: showDialog(editor, currentSearchState),\n        icon: 'search'\n      });\n      editor.shortcuts.add('Meta+F', '', showDialog(editor, currentSearchState));\n    };\n\n    function Plugin () {\n      global.add('searchreplace', function (editor) {\n        var currentSearchState = Cell({\n          index: -1,\n          count: 0,\n          text: '',\n          matchCase: false,\n          wholeWord: false,\n          inSelection: false\n        });\n        register(editor, currentSearchState);\n        register$1(editor, currentSearchState);\n        return get$1(editor, currentSearchState);\n      });\n    }\n\n    Plugin();\n\n}());\n"]}