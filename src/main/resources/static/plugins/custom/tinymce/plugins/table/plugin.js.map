{"version":3,"sources":["table/plugin.js"],"names":["noop","constant","value","identity","x","curry","fn","initialArgs","_i","arguments","length","restArgs","all","concat","apply","t","not","f","never","always","none","NONE","eq","o","isNone","call","thunk","id","n","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","a","constant_a","self","me","s","v","elementEq","b","Optional","from","isType","type","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isObject","isArray","isBoolean","isUndefined","isNonNullable","isNullable","isFunction","isNumber","nativeSlice","slice","nativeIndexOf","indexOf","nativePush","push","contains","xs","ts","rawIndexOf","pred","i","len","range","num","r","foldr","acc","eachr","foldl","find","until","findUntil","findIndex","flatten","pure","get","last","findMap","arr","__assign","Object","assign","p","hasOwnProperty","this","__spreadArrays","il","k","j","jl","cached","called","args","unknown","nu","major","minor","Version","detect","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","test","firstMatch","group","Number","replace","find$1","detect$1","candidates","userAgent","candidate","search","UaString","browsers","browser","version","current","oses","os","checkRange","str","substr","start","contains$1","startsWith","prefix","endsWith","suffix","trim","blank","isNotEmpty","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chrome","opera","firefox","safari","nu$1","info","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","ie","windows","android","linux","solaris","freebsd","chromeos","nu$2","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","ios","osx","PlatformDetection","mediaMatch","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","window","matchMedia","matches","platform","navigator","detect$3","fromDom","node","dom","SugarElement","fromHtml","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq$1","e1","e2","ieContains","match","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","contains$2","d1","d2","regularContains","is$1","keys","each$1","obj","props","map$1","tupleMap","tuple","filter$1","onTrue","onFalse","internalFilter","objAcc","values","mapToArray","get$1","key","has","validSectionList","detail","rowspan","colspan","rowdata","cells","section","elementnew","isNew","rowcells","Function","nodeName","isType$1","isComment","isElement","isText","isDocument","isDocumentFragment","owner","ownerDocument","documentOrOwner","dos","parent","parentNode","parents","isRoot","stop","ret","rawParent","prevSibling","previousSibling","nextSibling","children","child","index","cs","supported","Element","attachShadow","getRootNode","isSupported","e","getShadowRoot","getShadowHost","host","getOriginalEventTarget","event","el","isOpenShadowHost","composed","composedPath","shadowRoot","inBody","fbc","fab","doc","body","getBody","descendants","predicate","result","ancestors$1","ancestors","children$2","children$1","descendants$1","base","querySelectorAll","ClosestOrAncestor","ancestor","ancestor$1","child$2","child$1","descendant$1","querySelector","one","closest$1","rawSet","setAttribute","set","setAll","attrs","get$2","getAttribute","getOpt","remove","removeAttribute","clone","attributes","attr","isSupported$1","style","getPropertyValue","internalSet","property","setProperty","set$1","setAll$1","css","get$3","getComputedStyle","getUnsafeProperty","getRaw","raw","remove$1","removeProperty","internalRemove","getAttrValue","cell","fallback","parseInt","getSpan","hasColspan","hasRowspan","getCssValue","minWidth","minHeight","firstLayer","filterFirstLayer","tags","join","elm","lookup","columns","columnGroups","columnGroup","table","rows","fromRowsOrColGroups","elems","getSection","row","cells$1","column","getParentSection","parentName","isValidSection","fromTable","rows$1","filterItems","warehouse","generate","list","access","maxRows","maxColumns","rowCount","rowData","columnsGroup","columnIndex","colIndex","columnext","generateColumns","currentRow_1","rowCell","extended","occupiedColumnPosition","occupiedRowPosition","columnPosition","newpos","Math","max","grid","Warehouse","getAt","findItem","item","comparator","filtered","justCells","w","justColumns","hasColumns","getColumnAt","inSelection","bounds","leftEdge","rightEdge","topEdge","bottomEdge","finishCol","startCol","finishRow","startRow","isWithin","getAnyBox","startCell","finishCell","startCoords","finishCoords","sc","fc","detailA","detailB","min","getBox","isRect","detailIsWithin","isRectangular","intercepts","finish","inside","parentCell","innerCell","c1","c2","moveBy$1","deltaRow","deltaColumn","d","moveBy","getWarehouse","intercepts$1","first","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","before","marker","insertBefore","after","append","prepend","firstChild","appendChild","wrap","wrapper","after$1","elements","append$1","empty","textContent","rogue","remove$2","removeChild","unwrap","api","getOption","nodeValue","NodeValue","get$4","set$2","TagBoundaries","DomUniverse","up","closest","down","styles","copyTo","source","destination","as","insert","afterAll","appendAll","create","cloneNode","comparePosition","other","getText","setText","isBoundary","isEmptyTag","isNonEditable","unsafeOne","universe","look","head","tail","commonElement","end","sharedOne","all$1","ancestors$3","ps1","ps2","prune","path","ind","pruned1","pruned2","shared","eq$2","firstpath","secondpath","sharedOne$1","_universe","lookupTable","container","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","ancestors$4","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve","sels","getEdges","firstSelectedSelector","lastSelectedSelector","shiftSelection","box","getLast","identified","expandTo","retrieve$1","retrieveBox","edges","sectionSelector","firstAncestor","lastAncestor","fA","lA","getBox$1","Adt","cases","constructors","adt","acase","count","keys$1","argLength","branches","branchKeys","reqKey","log","label","params","type$1","multiple","single","cata","subject","onNone","onMultiple","onSingle","none$1","global","tinymce","util","Tools","resolve","makeCell","seenSelected","rowIndex","td","extract","selectedSelector","isSelected","house","stats","totalColumns","minRow","minCol","maxRow","maxCol","endRow","endCol","statsStruct","findSelectedStats","unselectedCells","totalRows","fillInGaps","emptyRows","clean","getEnd","elementsWithCursorPosition","isCursorPosition","descend","child_1","res","last$1","descendantRtl","clone$1","original","isDeep","shallow","deep","copy$1","shallowAs","cloneChildren","transferableAttributes","createCell","createCol","createColgroup","replica","pasteReplace","newRow","cellOperations","mutate","formatsToClone","cloneCss","prev","sourceDom","targetDom","cssText","col","colgroup","docu","formats","lastNode","oldCell","newCell","firstText","formatSelector","clonedFormat","cloneFormats","validAttributes","attributeName","attribute","cloneAppropriateAttributes","gap","paste","fromDom$1","nodes","selection","selections","unmergable","hasSpan","span","mergable","ephemera","strSelected","strFirstSelected","strLastSelected","selected","firstSelected","lastSelected","noMenu","forMenu","registerEvents","editor","actions","cellSelection","on","preventDefault","extractSelected","content","format","innerText","getTextContent","serializer","serialize","serializeElements","getParent","getStart","domCell","getDoc","generators","targets","clipboard","paste$1","pasteCells","rng","setRng","focus","clear","only","left","middle","right","ColumnContext","determine","input","step","tableSize","resize","context","neighbours","singleColumnWidth","next","calcLeftEdgeDeltas","minCellWidth","isRelative","calcMiddleDeltas","calcRightEdgeDeltas","cat","Dimension","getOffset","parseFloat","aggregate","properties","val","isNaN","h","getOuter","cumulativeInclusions","decimalDigits","exponentPart","opt","unsignedDecimalLiteral","api$1","offsetWidth","get$5","columns$1","cols","rowsArr","decide","getBlock","isSingle","getFallback","inBlock","c","deduce","rest","reverse","aa","delta","extras","abs","onDirection","isLtr","isRtl","getDirection","api$2","getBoundingClientRect","height","offsetHeight","get$6","getOuter$1","top","translate","SugarPosition","firstDefinedOrZero","absolute","win","defaultView","documentElement","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","boxPosition","rowInfo","colInfo","rtlEdge","ltrEdge","getLeftEdge","getRightEdge","getTop","getTopEdge","getBottomEdge","findPositions","getInnerEdge","getOuterEdge","array","lines","cellOption","lastLine","positions","optElements","detect$4","width","amount","units","unsupportedLength","fixed","relative","pattern","dot","RegExp","parse","accepted","exec","unitRaw","unit","check","isUnit","needManualCalc","getProp","px","toNumber","getHeight","getCalculatedHeight","getWidth","getCalculatedWidth","rPercentageBasedSizeRegex","rPixelBasedSizeRegex","getPercentSize","getter","relativeParent","offsetParent","setPixelWidth","setPercentageWidth","setHeight","normalizePixelSize","setter","number","newSize","total","floor","convert","getTotalHeight","getHeightValue","getRawWidth","normalizePercentageWidth","cellWidth","pixelWidth","getPercentageWidth","intWidth","percentMatch","choosePercentageSize","getPixelWidth","pixelMatch","normalizePixelWidth","choosePixelSize","getHeight$1","get$7","setGenericWidth","getPercentTableWidth","percentageBasedSizeRegex","pixelBasedSizeRegex","isCol","getRaw$1","getRawW","getRawH","getDimension","cellOpt","backups","getWidthFrom","columnCells","justCols","pos","colFilter","isValidColumn","getDeduced","deduced","getPixelWidths","getHeightFrom","direction","measures","recalculateHeightForCells","heights","recalculate","widths","groups","recalculateWidthForColumns","recalculateWidthForCells","recalculateAndApply","newSizes","setElementWidth","adjustWidth","resizing","getCellDelta","getWidths","isLastColumn","clampedStep","clampTableDelta","deltas","newWidths","dx","resizeTable","adjustTableWidth","adjustHeight","getPixelHeights","newHeights","dy","newCellSizes","newRowSizes","matchRowHeight","zero","surround","sizes","startIndex","endIndex","results","clampDeltaHelper","minCellSize","diff","clampNegativeDelta","clampDelta","calcRelativeDeltas","ratio","newThis","size","idx","relativeSizing","clampedDelta","calcFixedDeltas","resizer","_prev","ResizeWire","isResizable","view","origin","editable","adt$1","invalid","pixels","percent","validateFor","rawAmount","substring","Size","redistributeValues","newWidthType","totalWidth","newTotalWidth","scale","pc","redistributeToPx","_pc","redistributeToPercent","redistribute","newWidth","newType","floats","redistributeEmpty","normalize","sum","add","scan","remainder","floored","roundDown","output","round","validate","getUnit","redistribute$1","optWidth","optHeight","widthUnit","oldWidths","getRawWidths","nuWidths","redistributeToColumns","redistributeToW","newHeight","hUnit","totalHeight","oldHeights","getRawHeights","redistributeToH","isPercentSizing$1","isPixelSizing$1","isNoneSizing$1","getPercentTableWidth$1","getGridSize","Event","fields","handlers","handler","unbind","trigger","typeDefs","registry","sort","baseWith","handleUnsupported","required","sorted","validateStrArr","req","reqMessage","invalidKeys","incorrect","invalidTypeMessage","handleExact","unsupported","unsuppMessage","exactly","DragMode","DragSink","DragApi","InDrag","previous","events","move","onEvent","mode","data","old","compare","update","reset","Movement","noDragState","inDragState","dragState","off","isOn","setup","mutation","settings","rate","timer","active","movement","drop","sink","throttledDrop","cancel","clearTimeout","throttle","setTimeout","runIfActive","forceDrop","delayDrop","go","destroy","fromRawEvent","rawEvent","fa","fb","stopPropagation","prevent","kill","mkEvent","clientX","clientY","binder","useCapture","wrapped","handle","addEventListener","removeEventListener","filter$2","bind$2","bind$1","fromRawEvent$1","read","split","supports","classList","add$2","clazz","add$1","add$3","has$1","namespace","dashNamespace","MouseDrag","dragApi","blocker","options","layerClass","position","Blocker","mdown","mup","mmove","mout","isContentEditableTrue","styles$1","resolve$1","BarMutation","drag","delegate","Mutation","xDelta","yDelta","resizeBar","resizeRowBar","resizeColBar","wire","drawBar","cpOption","cp","bar","refreshCol","colPositions","tableHeight","colBar","data-column","role","refreshRow","rowPositions","tableWidth","rowBar","data-row","refreshGrid","warhouse","resizableRowBars","resizableRows","resizableRowPositions","_pos","barIndex","resizableColBars","resizableCols","resizableColumns","resizableColPositions","refresh","each$2","bars","hide","show","resizeBarDragging","BarManager","transform","hoverTable","getResizer","_dataRow","currentRow","_dataCol","currentCol","getDelta","dir","startAdjust","mousedown","isColBar","findClosestEditableTable","findClosestContentEditable","mouseover","tbl","hideBars","showBars","TableResize","lazySizing","hdirection","vdirection","manager","beforeResize","afterResize","startDrag","_event","fireNewRow","fire","fireNewCell","fireTableModified","defaultStyles","border-collapse","defaultAttributes","border","defaultColumnResizingBehaviour","getTableSizingMode","getParam","getTableResponseWidth","getDefaultAttributes","getDefaultStyles","isPixelsForced","editorWidth","isResponsiveForced","_value","determineDefaultStyles","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","shouldStyleWithCss","isPercentagesForced","useColumnGroup","getTableHeaderType","defaultValue","getColumnResizingBehaviour","givenMode","isPreserveTableColumnResizing","getCloneElements","cloneElements","getNodeName","getBody$1","getPixelWidth$1","getPixelHeight","addPxSuffix","removeDataStyle","removeStyleAttribute","getRawWidth$1","getStyle","getAttrib","isPercentage","getSelectionStart","Cell","initial","noneSize","percentageSize","initialWidth","floatWidth","getPercentageWidths","_delta","currentWidth","pixelSize","TableSize","fallbackWidth","chooseSize","get$9","cleanupLegacyAttributes","convertToPixelSize","getPixelTableWidth","enforcePercentage","convertToPercentSize","enforcePixels","tableSizing","enforceNone","rowElements","createContainer","padding","margin","barResizerPrefix","getResizeHandler","startW","startRawW","selectionRng","isTable","lazyResize","lazyResizingBehaviour","maxDelta","_index","_minCellSize","afterCornerResize","isRightEdgeResize","getNumColumns","percentW","isPixel","computedWidth","syncPixels","rawWire","inline","get$a","objectResizing","hasObjectResizing","hasTableResizeBars","sz","getRng","rawTable","fireObjectResizeStart","fireObjectResized","undoManager","targetElm","select","addClass","origin_1","isReadOnly","lazyWire","remove$6","point","offset","toEnd","freefallRtl","freefallRtl$1","universe$1","halve","main","getGenericWidth","mutateCell","gridRow","setCells","mapCells","getCell","getCellElement","cellLength","extractGridDetails","pass","fail","partition","setIfNot","ignore","render","newRows","newCells","syncRows","gridSection","tr","syncColGroup","colGroup","renderSection","sectionName","newSection","generateSection","sectionElems","renderOrRemoveSection","removeSection","headSection","bodySection","footSection","columnGroupsSection","findDiff","comp","subgrid","restOfRow","getRow","endColIndex","restOfColumn","getColumn","toDetails","seen","details","rowdetails","updateSeen","toGrid","groupElementNew","rowCells","deriveRows","rendered","findRow","rowdatanew","toDetailList","findInWarehouse","run","operation","adjustment","postAction","genWrappers","sizing","model","fromWarehouse","cursor","out","newElements","onCell","onPasteByEditor","cell$1","lc","onCells","unmerge","substitution","isToReplace","splitRows","currentCell","uniqueCells","replacement","_loop_1","_loop_2","sub","isValue","isError","_opt","_f","_","onValue","mapError","toOptional","message","onError","Result","fromOption","err","measureWidth","gridA","gridB","rowDelta","colDelta","measureHeight","generateElements","getGenerator","rowFill","colFill","newChildren","tailor","fillCols","isSpanning","matching","merge$1","startAddress","generator","rowRemainder","colRemainder","colRequired","rowRequired","measure","fittedGrid","mergeTables","insertCols","prevCell","splitCols","fittedNewGrid","secondDelta","fittedOldGrid","insertRows","_a","oldCols","oldRows","insertRowAt","example","between","ex","insertColumnAt","withinSpan","getElementFor","addCell","replaceIn","isTarget","notStartRow","notStartColumn","replaceColumn","replaceRow","targetRow","verifyGenerators","elementToData","Generators","toData","nuFrom","recent","getOrInit","makeNew","replaceOrInit","combine","blockList","universe$2","isBlock$1","tagName","isBlock","isList$1","isList","isEmptyTag$1","merge$2","isBr","markCell","rightSiblingIsBlock","rightSibling","isListItem","contents","advancedBr","outcome","elementFromGrid","findIn","bundle","uniqueRows","currentDetail","uniqueColumns","gridifyRows","pasteDetails","wh","getCellsType","headerPred","headerCells","insertRowsBefore","targetIndex","newGrid","newG","_row","insertRowsAfter","insertColumnsBefore","insertColumnsAfter","eraseColumns","_comparator","_genWrappers","deleteColumnsAt","eraseRows","deleteRowsAt","makeColumnsHeader","initialGrid","currentGrid","unmakeColumnsHeader","mergeCells","merge","_warehouse","unmergeCells","gridify","address","pasteColsBefore","mergedGrid","pasteColsAfter","pasteRowsBefore","pasteRowsAfter","getColumnType","selectedCells","lastSelectedCell","minColRange","maxColRange","selectedColumnCells","detectHeaderRow","isThead","areAllCellsThs","thead","ths","getRowType","_rowConfig","switchRowSection","rowElm","newSectionName","tableElm","oldSectionElm","oldSectionName","sectionElm_1","firstTableChild_1","insertAfter","switchCellType","newCellType","newCellElm","rename","renameCell","setAttrib","switchCellsType","switchSectionType","allTableRows","headerRowTypeSetting","headerRowType","detectedType","getSelectionStartFromSelector","startCellName","getSelectionStartCellFallback","getSelectionStartCell","getSelectionStartCellOrCaption","getCellsFromSelection","_cell","getRowsFromSelection","oa","ob","rowsOpt","TableActions","isTableBody","execute","guard","des","createRng","setStart","setEnd","deleteRow","deleteColumn","insertRowsBefore$1","insertRowsAfter$1","insertColumnsBefore$1","insertColumnsAfter$1","mergeCells$1","unmergeCells$1","pasteColsBefore$1","pasteColsAfter$1","pasteRowsBefore$1","pasteRowsAfter$1","pasteCells$1","extractType","validTypes","setTableCellType","setTableRowType","getTableRowType","rowTypes","hasHeader","hasFooter","hasBody","getTableCellType","getTableColType","DefaultRenderOptions","colGroups","createGroupRow","createRows","rowHeaders","columnHeaders","createRow","placeCaretInCell","collapse","insert$1","colHeaders","headerType","renderOpts","rowHeadersGoInThead","actualRowHeaders","theadRows","tbody","tbodyRows","render$1","get$b","getOuter$2","insertContent","addVisual","isPercentage$1","fireEvents","selectFirstCellInTable","insertTableWithDataValidation","errorMsg","checkInput","headerRows","headerColumns","getClipboardElements","getClipboard","setClipboardElements","setClipboard","elmsOpt","insertTable","constrainSpan","currentColspan","copyCols","colsToCopy","copiedCols","clonedCol","fakeColgroup","generateColGroup","cellsToCopy","copiedCells","clonedCell","fakeTR","generateRows","copyRows","slicedGrid","copy$2","global$1","getTDTHOverallStyle","firstChildStyle","elms","currentStyle","checkChildren","applyAlign","formatter","unApplyAlign","isListGroup","hasNonNullableKey","buildListItems","inputList","startItems","title","items","menu","appendItems","rgbToHex","toHex","extractAdvancedStyles","borderwidth","borderstyle","bordercolor","backgroundcolor","getSharedValues","baseData","comparisonData","itemValue","itemKey","comparisonValue","getAdvancedTab","dialogName","advTabItems","getAlignment","formatName","matchNode","getHAlignment","getVAlignment","children$3","getItems","classes","getCellClassList","getClassList","modifiers","testTruthy","setStyle","prop","setFormat","DomModifier","normal","ifTruthy","getSelectedCells","allCells","cellA","cellB","applyCellData","isSingleCell","tableOpt","cellElm","celltype","modifier","colModifier","class","updateSimpleProps","updateAdvancedProps","unApplyVAlign","halign","valign","applyVAlign","onSubmitCellForm","getData","close","transact","cellsData","colElm","extractDataFromCellElement","open","dialogTabPanel","tabs","dialogPanel","windowManager","buttons","primary","initialData","onSubmit","formChildren","getItems$1","getRowClassList","getClassList$1","applyRowData","oldData","isSingleRow","updateSimpleProps$1","updateAdvancedProps$1","align","onSubmitRowForm","open$1","rowsData","extractDataFromRowElement","global$2","getItems$2","insertNewTable","rowColCountItems","inputMode","appearanceItems","hasAppearanceOptions","classListItem","styleTDTH","onSubmitTableForm","captionElm","cellspacing","cellpadding","border-width","border-color","serializeStyle","setAttribs","applyDataToElement","caption","open$2","hasAdvTableTab","spacing","borderWidth","advStyle","extractDataFromSettings","optBorderWidth","getBorder","extractDataFromTableElement","getTableClassList","generalPanel","dialogBody","getSelectionStartCellOrCaption$1","getSelectionStartCell$1","registerCommands","getTableFromCell","postExecute","actOnSelection","copyRowSelection","copyColSelection","pasteOnSelection","getRows","clonedRows","pasteRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutCol","_grid","setColumns","mceTableCutRow","setRows","mceTableCopyCol","mceTableCopyRow","mceTablePasteColBefore","getColumns","mceTablePasteColAfter","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","cellOrCaption","isEmpty","setContent","setCursorLocation","nodeChanged","mceTableSizingMode","ui","setSizingMode","func","addCommand","fireTableModifiedForSelection","mceTableCellType","_ui","mceTableRowType","mceTableProps","mceTableRowProps","mceTableCellProps","getFormatName","validArgs","structure","registerQueryCommands","mceTableColType","addQueryValueHandler","cellFormats","tablecellbackgroundcolor","backgroundColor","remove_similar","tablecellbordercolor","borderColor","tablecellborderstyle","borderStyle","tablecellborderwidth","adt$2","CellLocation","detect$5","SimRange","soffset","foffset","adt$3","Situ","onBefore","onOn","onAfter","situ","adt$4","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startContainer","startSitu","_finishSitu","_soffset","_finish","_foffset","getStart$1","selectNodeContentsUsing","selectNodeContents","relativeToNative","finishSitu","createRange","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setFinish","exactToNative","toRect","rect","bottom","adt$5","ltr","rtl","fromRange","startOffset","endContainer","endOffset","diagnose","ranges","collapsed","rev","doDiagnose","getRanges","asLtrRange","inRect","locateOffset","textnode","rangeForOffset","rectForOffset","maxX","curDeltaX","searchForPoint","locateNode","selectNode","rects","getClientRects","locate","searchInChildren","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","caretPositionFromPoint","offsetNode","caretRangeFromPoint","searchTextNodes","boundedX","boundedY","locate$1","searchFromPoint","availableSearch","beforeSpecial","name$1","preprocessRelative","preprocessExact","after$3","makeRange","same","getNativeSelection","getSelection","doSetNativeRange","removeAllRanges","addRange","doSetRange","setRangeFromRelative","setBaseAndExtent","extend","setLegacyRtlRange","setExact","setRelative","toNative","getDomRange","preprocess","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","anchor","focus_1","anchorOffset","focusOffset","setToElement","get$c","sel","getExact","getFirstRect$1","getFirstRect","getAtPoint","fromPoint$1","global$3","forward","backward","getCellFirstCursorPosition","getNewRowCursorPosition","rootElements","Response","Situs","convertToRange","makeSitus","detect$6","selectRange","cellSel","traverse","backtrack","_direction","transition","sidestep","advance","sibling","successors","go$1","rules","succ","rule","Walkers","hone","isLeaf","seekLeft","seekRight","universe$3","before$4","before$3","after$5","after$4","adt$6","success","failedUp","failedDown","isRow","BeforeAfter","verify","bridge","beforeOffset","afterOffset","failure","afterCell","beforeCell","beforeBounds","getRect","afterBounds","isOverlapping","_sharedRow","onSuccess","onFailedUp","onFailedDown","gatherer","cand","gather","handleParent","findBr","br","adjacent","inParent","indexInParent","tryBr","handleBr","tgt","moveDown","caret","moveUp","toCaret","getElemBox","getBoxAt","getRangedRect","getPartialBox","getEntireBox","adt$7","retry","inOutsideBlock","isOutside","downMovement","adjuster","guessBox","lowerCaret","adjustTil","numRetries","isAtTable","adjustForTable","situsFromPoint","guess","newCaret","moved","adjusted","getInnerHeight","checkScroll","scrollBy","Retries","tryUp","higherCaret","tryDown","ieTryUp","ieTryDown","getJumpSize","findSpot","brNeighbour","fromSitus","analysis","_message","process","scan$1","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","inSameTable","simulate","spot","handle$2","navigate","precheck","firstUpCheck","seekLeft$1","lastOffset","lastDownCheck","seekRight$1","findCell","MouseSelection","annotations","isSet","clearstate","clearBeforeUpdate","selectContents","mouseup","isKey","keycode","isUp","isDown","isNavigation","ltr$2","isBackward","isForward","rtl$2","WindowBridge","exactAdt","clearSelection","collapseSelection","toStart","setSelection","setRelativeSelection","innerHeight","getScrollY","_DOC","by","rc","keyboard","clearToNavigate","keydown","realEvent","which","shiftKey","update$1","attempts","newSels","keyup","sync","SelectionAnnotation","onSelection","onClear","removeSelectionAttributes","addSelectionAttribute","getOtherCells","upOrLeftCells","upGrid","upDetails","slicedCells","getUpOrLeftCells","downOrRightCells","downGrid","downDetails","getDownOrRightCells","hasInternalTarget","CellSelection","selectionTargets","otherCells","fireTableSelectionChange","fireTableSelectionClear","_e","mouseHandlers","mouse","keyHandlers","external$1","external","lastTarget","lastTimeStamp","handleResponse","response","hasShiftKey","ns","isLeftMouse","button","doubleTap","touchEnd","lT","lTS","timeStamp","wrappedEvent","getSelectionTargets","changeHandlers","findTargets","table$1","resetTargets","onSetup","isDisabled","setDisabled","onSetupTable","onSetupCellOrRow","onSetupPasteable","getClipboardData","onSetupMergeable","onSetupUnmergeable","Plugin","lazyRoot","Selections","resizeHandler","clearClipboard","clearRows","clearColumns","Clipboard","cmd","command","execCommand","insertTableAction","numRows","numColumns","tableProperties","onAction","deleteTable","icon","addMenuItem","hasTableGrid","addNestedMenuItem","getSubmenuItems","fancytype","addContextMenu","addMenuItems","addMenuButton","tooltip","fetch","callback","addButton","addButtons","toolbar","getToolbar","addContextToolbar","addToolbars","addTempAttr","register","registerFormats","hasTabNavigation","keyCode","TAB","body_1","isRoot_1","handle$1","setClipboardRows","getClipboardRows","setClipboardCols","getClipboardCols","getApi"],"mappings":"CAQC,WACG,aAEA,IAAIA,EAAO,aAgBPC,EAAW,SAAUC,GACvB,OAAO,WACL,OAAOA,IAGPC,EAAW,SAAUC,GACvB,OAAOA,GAET,SAASC,EAAMC,GAEb,IADA,IAAIC,EAAc,GACTC,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCD,EAAYC,EAAK,GAAKC,UAAUD,GAElC,OAAO,WAEL,IADA,IAAIG,EAAW,GACNH,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCG,EAASH,GAAMC,UAAUD,GAE3B,IAAII,EAAML,EAAYM,OAAOF,GAC7B,OAAOL,EAAGQ,MAAM,KAAMF,IAG1B,IA6ImBG,EA7IfC,EAAM,SAAUC,GAClB,OAAO,SAAUF,GACf,OAAQE,EAAEF,KAQVG,EAAQjB,GAAS,GACjBkB,EAASlB,GAAS,GAElBmB,EAAO,WACT,OAAOC,GAELA,EAAO,WACT,IAAIC,EAAK,SAAUC,GACjB,OAAOA,EAAEC,UAEPC,EAAO,SAAUC,GACnB,OAAOA,KAELC,EAAK,SAAUC,GACjB,OAAOA,GA+BT,MA7BS,CACPC,KAAM,SAAUD,EAAGE,GACjB,OAAOF,KAETG,GAAIb,EACJc,OAAQd,EACRM,OAAQL,EACRc,MAAON,EACPO,WAAYT,EACZU,SAAU,SAAUC,GAClB,MAAM,IAAIC,MAAMD,GAAO,oCAEzBE,UAAWrC,EAAS,MACpBsC,eAAgBtC,OAASuC,GACzBC,GAAId,EACJe,QAASjB,EACTkB,IAAKvB,EACLwB,KAAM5C,EACN6C,KAAMzB,EACN0B,OAAQ5B,EACR6B,OAAQ5B,EACR6B,OAAQ5B,EACR6B,OAAQ3B,EACR4B,QAAS5B,EACT6B,QAAS,WACP,MAAO,IAETC,SAAUnD,EAAS,WArCZ,GAyCPoD,EAAO,SAAUC,GACnB,IAAIC,EAAatD,EAASqD,GACtBE,EAAO,WACT,OAAOC,GAELZ,EAAO,SAAU5B,GACnB,OAAOA,EAAEqC,IAEPG,EAAK,CACP5B,KAAM,SAAUD,EAAG8B,GACjB,OAAOA,EAAEJ,IAEXvB,GAAI,SAAU4B,GACZ,OAAOL,IAAMK,GAEf3B,OAAQb,EACRK,OAAQN,EACRe,MAAOsB,EACPrB,WAAYqB,EACZpB,SAAUoB,EACVjB,UAAWiB,EACXhB,eAAgBgB,EAChBd,GAAIe,EACJd,QAASc,EACTb,IAAK,SAAU1B,GACb,OAAOoC,EAAKpC,EAAEqC,KAEhBV,KAAM,SAAU3B,GACdA,EAAEqC,IAEJT,KAAMA,EACNC,OAAQD,EACRE,OAAQF,EACRG,OAAQ,SAAU/B,GAChB,OAAOA,EAAEqC,GAAKG,EAAKpC,GAErB8B,QAAS,WACP,MAAO,CAACG,IAEVF,SAAU,WACR,MAAO,QAAUE,EAAI,KAEvBL,OAAQ,SAAU1B,GAChB,OAAOA,EAAEQ,GAAGuB,IAEdJ,QAAS,SAAU3B,EAAGqC,GACpB,OAAOrC,EAAEM,KAAKX,GAAO,SAAU2C,GAC7B,OAAOD,EAAUN,EAAGO,QAI1B,OAAOJ,GAKLK,EAAW,CACbT,KAAMA,EACNjC,KAAMA,EACN2C,KANS,SAAU7D,GACnB,OAAOA,MAAAA,EAAwCmB,EAAOgC,EAAKnD,KAoBzD8D,EAAS,SAAUC,GACrB,OAAO,SAAU/D,GACf,OAbEa,SADiBX,EAcLF,IAZN,OAANE,EACK,OACQ,WAANW,IAAmBmD,MAAMC,UAAUC,cAAchE,IAAMA,EAAEiE,aAAsC,UAAvBjE,EAAEiE,YAAYC,MACxF,QACQ,WAANvD,IAAmBwD,OAAOJ,UAAUC,cAAchE,IAAMA,EAAEiE,aAAsC,WAAvBjE,EAAEiE,YAAYC,MACzF,SAEAvD,KAKkBkD,EAdhB,IAAU7D,EACjBW,IAgBFyD,EAAe,SAAUP,GAC3B,OAAO,SAAU/D,GACf,cAAcA,IAAU+D,IAQxBQ,EAAWT,EAAO,UAClBU,EAAWV,EAAO,UAClBW,EAAUX,EAAO,SACjBY,EAAYJ,EAAa,WACzBK,GATe9D,OASEyB,EARZ,SAAUc,GACf,OAAOvC,IAAMuC,IAWbwB,EAAgB,SAAUxB,GAC5B,OAJe,SAAUA,GACzB,OAAOA,MAAAA,EAGCyB,CAAWzB,IAEjB0B,EAAaR,EAAa,YAC1BS,EAAWT,EAAa,UAExBU,EAAchB,MAAMC,UAAUgB,MAC9BC,EAAgBlB,MAAMC,UAAUkB,QAChCC,EAAapB,MAAMC,UAAUoB,KAI7BC,EAAW,SAAUC,EAAIrF,GAC3B,OAJe,SAAUsF,EAAI3E,GAC7B,OAAOqE,EAAc3D,KAAKiE,EAAI3E,GAGvB4E,CAAWF,EAAIrF,IAAM,GAE1B0C,EAAS,SAAU2C,EAAIG,GACzB,IAAK,IAAIC,EAAI,EAAGC,EAAML,EAAG/E,OAAQmF,EAAIC,EAAKD,IAAK,CAE7C,GAAID,EADIH,EAAGI,GACCA,GACV,OAAO,EAGX,OAAO,GAELE,EAAQ,SAAUC,EAAK/E,GAEzB,IADA,IAAIgF,EAAI,GACCJ,EAAI,EAAGA,EAAIG,EAAKH,IACvBI,EAAEV,KAAKtE,EAAE4E,IAEX,OAAOI,GAELtD,EAAM,SAAU8C,EAAIxE,GAGtB,IAFA,IAAI6E,EAAML,EAAG/E,OACTuF,EAAI,IAAI/B,MAAM4B,GACTD,EAAI,EAAGA,EAAIC,EAAKD,IAAK,CAC5B,IAAIzF,EAAIqF,EAAGI,GACXI,EAAEJ,GAAK5E,EAAEb,EAAGyF,GAEd,OAAOI,GAELrD,EAAO,SAAU6C,EAAIxE,GACvB,IAAK,IAAI4E,EAAI,EAAGC,EAAML,EAAG/E,OAAQmF,EAAIC,EAAKD,IAAK,CAE7C5E,EADQwE,EAAGI,GACNA,KAsBL7C,EAAS,SAAUyC,EAAIG,GAEzB,IADA,IAAIK,EAAI,GACCJ,EAAI,EAAGC,EAAML,EAAG/E,OAAQmF,EAAIC,EAAKD,IAAK,CAC7C,IAAIzF,EAAIqF,EAAGI,GACPD,EAAKxF,EAAGyF,IACVI,EAAEV,KAAKnF,GAGX,OAAO6F,GAELC,EAAQ,SAAUT,EAAIxE,EAAGkF,GAI3B,OAjCU,SAAUV,EAAIxE,GACxB,IAAK,IAAI4E,EAAIJ,EAAG/E,OAAS,EAAGmF,GAAK,EAAGA,IAElC5E,EADQwE,EAAGI,GACNA,GA2BPO,CAAMX,GAAI,SAAUrF,GAClB+F,EAAMlF,EAAEkF,EAAK/F,MAER+F,GAELE,EAAQ,SAAUZ,EAAIxE,EAAGkF,GAI3B,OAHAvD,EAAK6C,GAAI,SAAUrF,GACjB+F,EAAMlF,EAAEkF,EAAK/F,MAER+F,GAaLG,EAAO,SAAUb,EAAIG,GACvB,OAZc,SAAUH,EAAIG,EAAMW,GAClC,IAAK,IAAIV,EAAI,EAAGC,EAAML,EAAG/E,OAAQmF,EAAIC,EAAKD,IAAK,CAC7C,IAAIzF,EAAIqF,EAAGI,GACX,GAAID,EAAKxF,EAAGyF,GACV,OAAO/B,EAAST,KAAKjD,GAChB,GAAImG,EAAMnG,EAAGyF,GAClB,MAGJ,OAAO/B,EAAS1C,OAGToF,CAAUf,EAAIG,EAAM1E,IAEzBuF,EAAY,SAAUhB,EAAIG,GAC5B,IAAK,IAAIC,EAAI,EAAGC,EAAML,EAAG/E,OAAQmF,EAAIC,EAAKD,IAAK,CAE7C,GAAID,EADIH,EAAGI,GACCA,GACV,OAAO/B,EAAST,KAAKwC,GAGzB,OAAO/B,EAAS1C,QAEdsF,EAAU,SAAUjB,GAEtB,IADA,IAAIQ,EAAI,GACCJ,EAAI,EAAGC,EAAML,EAAG/E,OAAQmF,EAAIC,IAAOD,EAAG,CAC7C,IAAKlB,EAAQc,EAAGI,IACd,MAAM,IAAIxD,MAAM,oBAAsBwD,EAAI,6BAA+BJ,GAE3EH,EAAWxE,MAAMmF,EAAGR,EAAGI,IAEzB,OAAOI,GAELpD,EAAO,SAAU4C,EAAIxE,GACvB,OAAOyF,EAAQ/D,EAAI8C,EAAIxE,KAErB8B,EAAS,SAAU0C,EAAIG,GACzB,IAAK,IAAIC,EAAI,EAAGC,EAAML,EAAG/E,OAAQmF,EAAIC,IAAOD,EAAG,CAE7C,IAAmB,IAAfD,EADIH,EAAGI,GACCA,GACV,OAAO,EAGX,OAAO,GAOLc,EAAO,SAAUvG,GACnB,MAAO,CAACA,IAENwG,EAAM,SAAUnB,EAAII,GACtB,OAAOA,GAAK,GAAKA,EAAIJ,EAAG/E,OAASoD,EAAST,KAAKoC,EAAGI,IAAM/B,EAAS1C,QAK/DyF,EAAO,SAAUpB,GACnB,OAAOmB,EAAInB,EAAIA,EAAG/E,OAAS,IAEzBoG,EAAU,SAAUC,EAAK9F,GAC3B,IAAK,IAAI4E,EAAI,EAAGA,EAAIkB,EAAIrG,OAAQmF,IAAK,CACnC,IAAII,EAAIhF,EAAE8F,EAAIlB,GAAIA,GAClB,GAAII,EAAEjE,SACJ,OAAOiE,EAGX,OAAOnC,EAAS1C,QAGd4F,EAAW,WAUb,OATAA,EAAWC,OAAOC,QAAU,SAAkBnG,GAC5C,IAAK,IAAI2C,EAAGmC,EAAI,EAAGjE,EAAInB,UAAUC,OAAQmF,EAAIjE,EAAGiE,IAE9C,IAAK,IAAIsB,KADTzD,EAAIjD,UAAUoF,GAERoB,OAAO9C,UAAUiD,eAAe3F,KAAKiC,EAAGyD,KAC1CpG,EAAEoG,GAAKzD,EAAEyD,IAEf,OAAOpG,IAEOD,MAAMuG,KAAM5G,YAE9B,SAAS6G,IACP,IAAK,IAAI5D,EAAI,EAAGmC,EAAI,EAAG0B,EAAK9G,UAAUC,OAAQmF,EAAI0B,EAAI1B,IACpDnC,GAAKjD,UAAUoF,GAAGnF,OACf,IAAIuF,EAAI/B,MAAMR,GAAI8D,EAAI,EAA3B,IAA8B3B,EAAI,EAAGA,EAAI0B,EAAI1B,IAC3C,IAAK,IAAIvC,EAAI7C,UAAUoF,GAAI4B,EAAI,EAAGC,EAAKpE,EAAE5C,OAAQ+G,EAAIC,EAAID,IAAKD,IAC5DvB,EAAEuB,GAAKlE,EAAEmE,GACb,OAAOxB,EAGT,IAAI0B,EAAS,SAAU1G,GACrB,IACIgF,EADA2B,GAAS,EAEb,OAAO,WAEL,IADA,IAAIC,EAAO,GACFrH,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCqH,EAAKrH,GAAMC,UAAUD,GAMvB,OAJKoH,IACHA,GAAS,EACT3B,EAAIhF,EAAEH,MAAM,KAAM+G,IAEb5B,IAuDP6B,EAAU,WACZ,OAAOC,EAAG,EAAG,IAEXA,EAAK,SAAUC,EAAOC,GACxB,MAAO,CACLD,MAAOA,EACPC,MAAOA,IAGPC,EAAU,CACZH,GAAIA,EACJI,OAlBW,SAAUC,EAAgBC,GACrC,IAAIC,EAAe/D,OAAO8D,GAAOE,cACjC,OAA8B,IAA1BH,EAAe1H,OACVoH,IAhBE,SAAUU,EAASH,GAC9B,IAAIpC,EAVW,SAAUuC,EAAS9E,GAClC,IAAK,IAAImC,EAAI,EAAGA,EAAI2C,EAAQ9H,OAAQmF,IAAK,CACvC,IAAIzF,EAAIoI,EAAQ3C,GAChB,GAAIzF,EAAEqI,KAAK/E,GACT,OAAOtD,GAMHsI,CAAWF,EAASH,GAC5B,IAAKpC,EACH,MAAO,CACL+B,MAAO,EACPC,MAAO,GAGX,IAAIU,EAAQ,SAAU9C,GACpB,OAAO+C,OAAOP,EAAMQ,QAAQ5C,EAAG,IAAMJ,KAEvC,OAAOkC,EAAGY,EAAM,GAAIA,EAAM,IAOnBG,CAAOV,EAAgBE,IAc9BR,QAASA,GAGPiB,EAAW,SAAUC,EAAYC,GACnC,IAAIZ,EAAQ9D,OAAO0E,GAAWV,cAC9B,OAAOjC,EAAK0C,GAAY,SAAUE,GAChC,OAAOA,EAAUC,OAAOd,OAqBxBe,EAlBgB,SAAUC,EAAUJ,GACtC,OAAOF,EAASM,EAAUJ,GAAWtG,KAAI,SAAU2G,GACjD,IAAIC,EAAUrB,EAAQC,OAAOmB,EAAQlB,eAAgBa,GACrD,MAAO,CACLO,QAASF,EAAQhF,KACjBiF,QAASA,OAaXH,EATW,SAAUK,EAAMR,GAC7B,OAAOF,EAASU,EAAMR,GAAWtG,KAAI,SAAU+G,GAC7C,IAAIH,EAAUrB,EAAQC,OAAOuB,EAAGtB,eAAgBa,GAChD,MAAO,CACLO,QAASE,EAAGpF,KACZiF,QAASA,OASXI,EAAa,SAAUC,EAAKC,EAAQC,GACtC,MAAkB,KAAXD,GAAiBD,EAAIlJ,QAAUmJ,EAAOnJ,QAAUkJ,EAAIC,OAAOC,EAAOA,EAAQD,EAAOnJ,UAAYmJ,GAElGE,EAAa,SAAUH,EAAKC,GAC9B,OAAgC,IAAzBD,EAAIvE,QAAQwE,IAEjBG,EAAa,SAAUJ,EAAKK,GAC9B,OAAON,EAAWC,EAAKK,EAAQ,IAE7BC,GAAW,SAAUN,EAAKO,GAC5B,OAAOR,EAAWC,EAAKO,EAAQP,EAAIlJ,OAASyJ,EAAOzJ,SAOjD0J,GALQ,SAAUnE,GACpB,OAAO,SAAUvC,GACf,OAAOA,EAAEmF,QAAQ5C,EAAG,KAGboE,CAAM,cACbC,GAAa,SAAU5G,GACzB,OAAOA,EAAEhD,OAAS,GAGhB6J,GAAqB,sCACrBC,GAAgB,SAAUC,GAC5B,OAAO,SAAUC,GACf,OAAOX,EAAWW,EAAUD,KAG5BpB,GAAW,CACb,CACE/E,KAAM,OACN8D,eAAgB,CAAC,kCACjBe,OAAQ,SAAUuB,GAChB,OAAOX,EAAWW,EAAU,UAAYX,EAAWW,EAAU,WAAaX,EAAWW,EAAU,WAAaX,EAAWW,EAAU,iBAGrI,CACEpG,KAAM,SACN8D,eAAgB,CACd,kCACAmC,IAEFpB,OAAQ,SAAUuB,GAChB,OAAOX,EAAWW,EAAU,YAAcX,EAAWW,EAAU,iBAGnE,CACEpG,KAAM,KACN8D,eAAgB,CACd,iCACA,8BAEFe,OAAQ,SAAUuB,GAChB,OAAOX,EAAWW,EAAU,SAAWX,EAAWW,EAAU,aAGhE,CACEpG,KAAM,QACN8D,eAAgB,CACdmC,GACA,kCAEFpB,OAAQqB,GAAc,UAExB,CACElG,KAAM,UACN8D,eAAgB,CAAC,uCACjBe,OAAQqB,GAAc,YAExB,CACElG,KAAM,SACN8D,eAAgB,CACdmC,GACA,iCAEFpB,OAAQ,SAAUuB,GAChB,OAAQX,EAAWW,EAAU,WAAaX,EAAWW,EAAU,aAAeX,EAAWW,EAAU,kBAIrGjB,GAAO,CACT,CACEnF,KAAM,UACN6E,OAAQqB,GAAc,OACtBpC,eAAgB,CAAC,0CAEnB,CACE9D,KAAM,MACN6E,OAAQ,SAAUuB,GAChB,OAAOX,EAAWW,EAAU,WAAaX,EAAWW,EAAU,SAEhEtC,eAAgB,CACd,sCACA,+BACA,wCAGJ,CACE9D,KAAM,UACN6E,OAAQqB,GAAc,WACtBpC,eAAgB,CAAC,sCAEnB,CACE9D,KAAM,MACN6E,OAAQqB,GAAc,YACtBpC,eAAgB,CAAC,wCAEnB,CACE9D,KAAM,QACN6E,OAAQqB,GAAc,SACtBpC,eAAgB,IAElB,CACE9D,KAAM,UACN6E,OAAQqB,GAAc,SACtBpC,eAAgB,IAElB,CACE9D,KAAM,UACN6E,OAAQqB,GAAc,WACtBpC,eAAgB,IAElB,CACE9D,KAAM,WACN6E,OAAQqB,GAAc,QACtBpC,eAAgB,CAAC,qCAGjBuC,GAAe,CACjBtB,SAAUpJ,EAASoJ,IACnBI,KAAMxJ,EAASwJ,KAGbmB,GAAO,OACPC,GAAS,SAETC,GAAQ,QACRC,GAAU,UACVC,GAAS,SAOTC,GAAO,SAAUC,GACnB,IAAI1B,EAAU0B,EAAK1B,QACfD,EAAU2B,EAAK3B,QACf4B,EAAY,SAAU7G,GACxB,OAAO,WACL,OAAOkF,IAAYlF,IAGvB,MAAO,CACLkF,QAASA,EACTD,QAASA,EACT6B,OAAQD,EAAUP,IAClBS,SAAUF,EAAUN,IACpBS,KAAMH,EAvBD,MAwBLI,QAASJ,EAAUL,IACnBU,UAAWL,EAAUJ,IACrBU,SAAUN,EAAUH,MAGpBU,GAAU,CACZ5D,QA1Bc,WACd,OAAOmD,GAAK,CACVzB,aAAShH,EACT+G,QAASrB,EAAQJ,aAwBnBC,GAAIkD,GACJL,KAAM3K,EAAS2K,IACfC,OAAQ5K,EAAS4K,IACjBc,GAAI1L,EAlCG,MAmCP6K,MAAO7K,EAAS6K,IAChBC,QAAS9K,EAAS8K,IAClBC,OAAQ/K,EAAS+K,KAGfY,GAAU,UAEVC,GAAU,UACVC,GAAQ,QAERC,GAAU,UACVC,GAAU,UACVC,GAAW,WAOXC,GAAO,SAAUhB,GACnB,IAAI1B,EAAU0B,EAAK1B,QACfD,EAAU2B,EAAK3B,QACf4C,EAAO,SAAU7H,GACnB,OAAO,WACL,OAAOkF,IAAYlF,IAGvB,MAAO,CACLkF,QAASA,EACTD,QAASA,EACT6C,UAAWD,EAAKP,IAChBS,MAAOF,EAzBD,OA0BNG,UAAWH,EAAKN,IAChBU,MAAOJ,EAxBD,OAyBNK,QAASL,EAAKL,IACdW,UAAWN,EAAKJ,IAChBW,UAAWP,EAAKH,IAChBW,WAAYR,EAAKF,MAGjBW,GAAkB,CACpB9E,QA5Bc,WACd,OAAOoE,GAAK,CACV1C,aAAShH,EACT+G,QAASrB,EAAQJ,aA0BnBC,GAAImE,GACJN,QAAS3L,EAAS2L,IAClBiB,IAAK5M,EAtCG,OAuCR4L,QAAS5L,EAAS4L,IAClBC,MAAO7L,EAAS6L,IAChBgB,IAAK7M,EAtCG,OAuCR8L,QAAS9L,EAAS8L,IAClBC,QAAS/L,EAAS+L,IAClBC,SAAUhM,EAASgM,KAejBc,GAZW,SAAU9D,EAAW+D,GAClC,IAAI3D,EAAWsB,GAAatB,WACxBI,EAAOkB,GAAalB,OACpBH,EAAUF,EAAuBC,EAAUJ,GAAWpH,KAAK6J,GAAQ5D,QAAS4D,GAAQ3D,IACpF2B,EAAKN,EAAkBK,EAAMR,GAAWpH,KAAK+K,GAAgB9E,QAAS8E,GAAgB7E,IACtFkF,EAnUW,SAAUvD,EAAIJ,EAASL,EAAW+D,GACjD,IAAIE,EAASxD,EAAG2C,UAAuC,IAA5B,QAAQ5D,KAAKQ,GACpCkE,EAAWzD,EAAG2C,UAAYa,EAC1BE,EAAW1D,EAAG2C,SAAW3C,EAAG4C,YAC5Be,EAAUD,GAAYJ,EAAW,oBACjCM,EAAWJ,IAAWC,GAAYC,GAAYJ,EAAW,4BACzDO,EAAUJ,GAAYC,IAAaE,EACnCE,EAAalE,EAAQmC,YAAc/B,EAAG2C,UAAyC,IAA9B,UAAU5D,KAAKQ,GAChEwE,GAAaF,IAAYD,IAAaE,EAC1C,MAAO,CACLN,OAAQjN,EAASiN,GACjBC,SAAUlN,EAASkN,GACnBG,SAAUrN,EAASqN,GACnBC,QAAStN,EAASsN,GAClBF,QAASpN,EAASoN,GAClBf,UAAW5C,EAAG4C,UACdD,MAAO3C,EAAG2C,MACVqB,UAAWzN,EAASuN,GACpBC,UAAWxN,EAASwN,IAiTLE,CAAWjE,EAAIJ,EAASL,EAAW+D,GACpD,MAAO,CACL1D,QAASA,EACTI,GAAIA,EACJuD,WAAYA,IAKZD,GAAa,SAAUY,GACzB,OAAOC,OAAOC,WAAWF,GAAOG,SAE9BC,GAAWrG,GAAO,WACpB,OAAOoF,GAAyBkB,UAAUhF,UAAW+D,OAEnDkB,GAAW,WACb,OAAOF,MAoCLG,GAAU,SAAUC,GACtB,GAAIA,MAAAA,EACF,MAAM,IAAI/L,MAAM,oCAElB,MAAO,CAAEgM,IAAKD,IAKZE,GAAe,CACjBC,SA9Ba,SAAUC,EAAMC,GAC7B,IACIC,GADMD,GAASE,UACLC,cAAc,OAE5B,GADAF,EAAIG,UAAYL,GACXE,EAAII,iBAAmBJ,EAAIK,WAAWrO,OAAS,EAElD,MADAsO,QAAQC,MAAM,wCAAyCT,GACjD,IAAInM,MAAM,qCAElB,OAAO8L,GAAQO,EAAIK,WAAW,KAuB9BG,QArBY,SAAUC,EAAKV,GAC3B,IACIL,GADMK,GAASE,UACJC,cAAcO,GAC7B,OAAOhB,GAAQC,IAmBfgB,SAjBa,SAAUC,EAAMZ,GAC7B,IACIL,GADMK,GAASE,UACJW,eAAeD,GAC9B,OAAOlB,GAAQC,IAefD,QAASA,GACToB,UARc,SAAUC,EAAQpP,EAAGqP,GACnC,OAAO3L,EAASC,KAAKyL,EAAOnB,IAAIqB,iBAAiBtP,EAAGqP,IAAI9M,IAAIwL,MAU1DpM,GAAK,SAAU4N,EAASC,GAC1B,IAAIvB,EAAMsB,EAAQtB,IAClB,GA1CY,IA0CRA,EAAIwB,SACN,OAAO,EAEP,IAAIC,EAAOzB,EACX,QAAqB7L,IAAjBsN,EAAK/B,QACP,OAAO+B,EAAK/B,QAAQ6B,GACf,QAA+BpN,IAA3BsN,EAAKC,kBACd,OAAOD,EAAKC,kBAAkBH,GACzB,QAAmCpN,IAA/BsN,EAAKE,sBACd,OAAOF,EAAKE,sBAAsBJ,GAC7B,QAAgCpN,IAA5BsN,EAAKG,mBACd,OAAOH,EAAKG,mBAAmBL,GAE/B,MAAM,IAAIvN,MAAM,mCAIlB6N,GAAiB,SAAU7B,GAC7B,OA5DY,IA4DLA,EAAIwB,UA9DE,IA8DsBxB,EAAIwB,UA7DjB,KA6D0CxB,EAAIwB,UAA4D,IAA1BxB,EAAI8B,mBAWxGC,GAAO,SAAUC,EAAIC,GACvB,OAAOD,EAAGhC,MAAQiC,EAAGjC,KAOnBkC,GAAa,SAAUF,EAAIC,GAC7B,OAvF0ChN,EAuFP+M,EAAGhC,IAvFOxK,EAuFFyM,EAAGjC,IA1FlB,SAAU/K,EAAGO,EAAG2M,GAC5C,OAAkD,IAA1ClN,EAAEmN,wBAAwB5M,GAAK2M,GAGhCC,CAAwBnN,EAAGO,EAAG6M,KAAKC,gCADV,IAAUrN,EAAGO,GAyF3C+M,GAAa,SAAUP,EAAIC,GAC7B,OAAOpC,KAAW5E,QAAQgC,OAASiF,GAAWF,EAAIC,GAT9B,SAAUD,EAAIC,GAClC,IAAIO,EAAKR,EAAGhC,IACRyC,EAAKR,EAAGjC,IACZ,OAAOwC,IAAOC,GAAaD,EAAGrL,SAASsL,GAMiBC,CAAgBV,EAAIC,IAE1EU,GAAOjP,GAEPkP,GAAOhK,OAAOgK,KACd7J,GAAiBH,OAAOG,eACxB8J,GAAS,SAAUC,EAAKlQ,GAE1B,IADA,IAAImQ,EAAQH,GAAKE,GACR3J,EAAI,EAAG1B,EAAMsL,EAAM1Q,OAAQ8G,EAAI1B,EAAK0B,IAAK,CAChD,IAAI3B,EAAIuL,EAAM5J,GAEdvG,EADQkQ,EAAItL,GACPA,KAGLwL,GAAQ,SAAUF,EAAKlQ,GACzB,OAAOqQ,GAASH,GAAK,SAAU/Q,EAAGyF,GAChC,MAAO,CACL2B,EAAG3B,EACHlC,EAAG1C,EAAEb,EAAGyF,QAIVyL,GAAW,SAAUH,EAAKlQ,GAC5B,IAAIgF,EAAI,GAKR,OAJAiL,GAAOC,GAAK,SAAU/Q,EAAGyF,GACvB,IAAI0L,EAAQtQ,EAAEb,EAAGyF,GACjBI,EAAEsL,EAAM/J,GAAK+J,EAAM5N,KAEdsC,GAcLuL,GAAW,SAAUL,EAAKvL,GAC5B,IAAI7E,EAAI,GAER,OAVmB,SAAUoQ,EAAKvL,EAAM6L,EAAQC,GAEhDR,GAAOC,GAAK,SAAU/Q,EAAGyF,IACtBD,EAAKxF,EAAGyF,GAAK4L,EAASC,GAAStR,EAAGyF,MAMrC8L,CAAeR,EAAKvL,EAdT,SAAUK,GACrB,OAAO,SAAU7F,EAAGyF,GAClBI,EAAEJ,GAAKzF,GAYiBwR,CAAO7Q,GAAIf,GAC9Be,GASL8Q,GAAS,SAAUV,GACrB,OARe,SAAUA,EAAKlQ,GAC9B,IAAIgF,EAAI,GAIR,OAHAiL,GAAOC,GAAK,SAAUjR,EAAOoE,GAC3B2B,EAAEV,KAAKtE,EAAEf,EAAOoE,OAEX2B,EAGA6L,CAAWX,GAAK,SAAUxN,GAC/B,OAAOA,MAGPoO,GAAQ,SAAUZ,EAAKa,GACzB,OAAOC,GAAId,EAAKa,GAAOlO,EAASC,KAAKoN,EAAIa,IAAQlO,EAAS1C,QAExD6Q,GAAM,SAAUd,EAAKa,GACvB,OAAO5K,GAAe3F,KAAK0P,EAAKa,IAc9BE,GAAmB,CACrB,QACA,QACA,QACA,YAiBEC,GAAS,SAAUxC,EAASyC,EAASC,GACvC,MAAO,CACL1C,QAASA,EACTyC,QAASA,EACTC,QAASA,IAoBTC,GAAU,SAAU3C,EAAS4C,EAAOC,GACtC,MAAO,CACL7C,QAASA,EACT4C,MAAOA,EACPC,QAASA,IAGTC,GAAa,SAAU9C,EAAS+C,GAClC,MAAO,CACL/C,QAASA,EACT+C,MAAOA,IAWPC,GAAW,SAAUJ,EAAOC,GAC9B,MAAO,CACLD,MAAOA,EACPC,QAASA,IA2BTlO,IAF2B,oBAAXuJ,OAAyBA,OAAS+E,SAAS,eAATA,GAE3C,SAAUjD,GAEnB,OADQA,EAAQtB,IAAIwE,SACXtK,gBAEPtE,GAAO,SAAU0L,GACnB,OAAOA,EAAQtB,IAAIwB,UAEjBiD,GAAW,SAAU/R,GACvB,OAAO,SAAU4O,GACf,OAAO1L,GAAK0L,KAAa5O,IAGzBgS,GAAY,SAAUpD,GACxB,OAhRY,IAgRL1L,GAAK0L,IAA0C,aAAlBrL,GAAKqL,IAEvCqD,GAAYF,GA/QF,GAgRVG,GAASH,GA/QF,GAgRPI,GAAaJ,GAnRF,GAoRXK,GAAqBL,GAnRD,IA0RpBM,GAAQ,SAAUzD,GACpB,OAAOrB,GAAaH,QAAQwB,EAAQtB,IAAIgF,gBAEtCC,GAAkB,SAAUC,GAC9B,OAAOL,GAAWK,GAAOA,EAAMH,GAAMG,IAKnCC,GAAS,SAAU7D,GACrB,OAAO7L,EAASC,KAAK4L,EAAQtB,IAAIoF,YAAY9Q,IAAI2L,GAAaH,UAE5DuF,GAAU,SAAU/D,EAASgE,GAI/B,IAHA,IAAIC,EAAO5O,EAAW2O,GAAUA,EAASzS,EACrCmN,EAAMsB,EAAQtB,IACdwF,EAAM,GACgB,OAAnBxF,EAAIoF,iBAA0CjR,IAAnB6L,EAAIoF,YAA0B,CAC9D,IAAIK,EAAYzF,EAAIoF,WAChBtM,EAAImH,GAAaH,QAAQ2F,GAE7B,GADAD,EAAItO,KAAK4B,IACO,IAAZyM,EAAKzM,GACP,MAEAkH,EAAMyF,EAGV,OAAOD,GAKLE,GAAc,SAAUpE,GAC1B,OAAO7L,EAASC,KAAK4L,EAAQtB,IAAI2F,iBAAiBrR,IAAI2L,GAAaH,UAEjE8F,GAAc,SAAUtE,GAC1B,OAAO7L,EAASC,KAAK4L,EAAQtB,IAAI4F,aAAatR,IAAI2L,GAAaH,UAE7D+F,GAAW,SAAUvE,GACvB,OAAOhN,EAAIgN,EAAQtB,IAAIU,WAAYT,GAAaH,UAE9CgG,GAAQ,SAAUxE,EAASyE,GAC7B,IAAIC,EAAK1E,EAAQtB,IAAIU,WACrB,OAAOjL,EAASC,KAAKsQ,EAAGD,IAAQzR,IAAI2L,GAAaH,UAS/CmG,GAAYtP,EAAWuP,QAAQpQ,UAAUqQ,eAAiBxP,EAAW0L,KAAKvM,UAAUsQ,aACpFC,GAAczU,EAASqU,IACvBG,GAAcH,GAAY,SAAUK,GACtC,OAAOrG,GAAaH,QAAQwG,EAAEtG,IAAIoG,gBAChCnB,GACAsB,GAAgB,SAAUD,GAC5B,IAAI1O,EAAIwO,GAAYE,GACpB,OATOxB,GASalN,GAAKnC,EAAST,KAAK4C,GAAKnC,EAAS1C,QAEnDyT,GAAgB,SAAUF,GAC5B,OAAOrG,GAAaH,QAAQwG,EAAEtG,IAAIyG,OAEhCC,GAAyB,SAAUC,GACrC,GAAIN,MAAiB5P,EAAckQ,EAAMvK,QAAS,CAChD,IAAIwK,EAAK3G,GAAaH,QAAQ6G,EAAMvK,QACpC,GAAIuI,GAAUiC,IAAOC,GAAiBD,IAChCD,EAAMG,UAAYH,EAAMI,aAAc,CACxC,IAAIA,EAAeJ,EAAMI,eACzB,GAAIA,EACF,OAnvBDxO,EAmvBawO,EAnvBL,IAwvBf,OAAOtR,EAASC,KAAKiR,EAAMvK,SAEzByK,GAAmB,SAAUvF,GAC/B,OAAO7K,EAAc6K,EAAQtB,IAAIgH,aAG/BC,GAAS,SAAU3F,GACrB,IAAItB,EAAM4E,GAAOtD,GAAWA,EAAQtB,IAAIoF,WAAa9D,EAAQtB,IAC7D,GAAIA,MAAAA,GAA2D,OAAtBA,EAAIgF,cAC3C,OAAO,EAET,IAxkCuBkC,EAAKC,EAwkCxBC,EAAMpH,EAAIgF,cACd,OAAOuB,GAActG,GAAaH,QAAQE,IAAMxM,MAAK,WACnD,OAAO4T,EAAIC,KAAKlQ,SAAS6I,MA1kCJkH,EA2kCXD,GA3kCgBE,EA2kCRX,GA1kCb,SAAUvR,GACf,OAAOiS,EAAIC,EAAIlS,QA8kCfqS,GAAU,SAAUF,GACtB,IAAI5R,EAAI4R,EAAIpH,IAAIqH,KAChB,GAAI7R,MAAAA,EACF,MAAM,IAAIxB,MAAM,6BAElB,OAAOiM,GAAaH,QAAQtK,IAS1B+R,GAAc,SAAUnH,EAAOoH,GACjC,IAAIC,EAAS,GAOb,OANAlT,EAAKsR,GAASzF,IAAQ,SAAUrO,GAC1ByV,EAAUzV,KACZ0V,EAASA,EAAOjV,OAAO,CAACT,KAE1B0V,EAASA,EAAOjV,OAAO+U,GAAYxV,EAAGyV,OAEjCC,GAGLC,GAAc,SAAUtH,EAAOmB,EAAU+D,GAC3C,OAlBc,SAAUlF,EAAOoH,EAAWlC,GAC1C,OAAO3Q,EAAO0Q,GAAQjF,EAAOkF,GAASkC,GAiB/BG,CAAUvH,GAAO,SAAUkG,GAChC,OAAO5S,GAAG4S,EAAG/E,KACZ+D,IAEDsC,GAAa,SAAUxH,EAAOmB,GAChC,OApBe,SAAUnB,EAAOoH,GAChC,OAAO7S,EAAOkR,GAASzF,GAAQoH,GAmBxBK,CAAWzH,GAAO,SAAUkG,GACjC,OAAO5S,GAAG4S,EAAG/E,OAGbuG,GAAgB,SAAU1H,EAAOmB,GACnC,OA7VQ,SAAUA,EAAUnB,GAC5B,IAAI2H,OAAiB5T,IAAViM,EAAsBE,SAAWF,EAAMJ,IAClD,OAAO6B,GAAekG,GAAQ,GAAKzT,EAAIyT,EAAKC,iBAAiBzG,GAAWtB,GAAaH,SA2V9EvN,CAAIgP,EAAUnB,IAGvB,SAAS6H,GAAmBvU,EAAIwU,EAAU9H,EAAOnL,EAAGqQ,GAClD,OAAI5R,EAAG0M,EAAOnL,GACLQ,EAAST,KAAKoL,GACZzJ,EAAW2O,IAAWA,EAAOlF,GAC/B3K,EAAS1C,OAETmV,EAAS9H,EAAOnL,EAAGqQ,GAI9B,IAAI4C,GAAW,SAAU9H,EAAOoH,EAAWlC,GAGzC,IAFA,IAAIhE,EAAUlB,EAAMJ,IAChBuF,EAAO5O,EAAW2O,GAAUA,EAASzS,EAClCyO,EAAQ8D,YAAY,CACzB9D,EAAUA,EAAQ8D,WAClB,IAAIwB,EAAK3G,GAAaH,QAAQwB,GAC9B,GAAIkG,EAAUZ,GACZ,OAAOnR,EAAST,KAAK4R,GAChB,GAAIrB,EAAKqB,GACd,MAGJ,OAAOnR,EAAS1C,QAgCdoV,GAAa,SAAU/H,EAAOmB,EAAU+D,GAC1C,OAAO4C,GAAS9H,GAAO,SAAUkG,GAC/B,OAAO5S,GAAG4S,EAAG/E,KACZ+D,IAED8C,GAAU,SAAUhI,EAAOmB,GAC7B,OA9BY,SAAUnB,EAAOoH,GAK7B,OADavP,EAAKmI,EAAMJ,IAAIU,YAHjB,SAAUX,GACnB,OAAOyH,EAAUvH,GAAaH,QAAQC,OAG1BzL,IAAI2L,GAAaH,SAyBxBuI,CAAQjI,GAAO,SAAUkG,GAC9B,OAAO5S,GAAG4S,EAAG/E,OAGb+G,GAAe,SAAUlI,EAAOmB,GAClC,OA7ZQ,SAAUA,EAAUnB,GAC5B,IAAI2H,OAAiB5T,IAAViM,EAAsBE,SAAWF,EAAMJ,IAClD,OAAO6B,GAAekG,GAAQtS,EAAS1C,OAAS0C,EAASC,KAAKqS,EAAKQ,cAAchH,IAAWjN,IAAI2L,GAAaH,SA2ZtG0I,CAAIjH,EAAUnB,IAEnBqI,GAAY,SAAUrI,EAAOmB,EAAU+D,GAIzC,OAAO2C,IAHI,SAAU3G,EAASC,GAC5B,OAAO7N,GAAG4N,EAASC,KAEU4G,GAAY/H,EAAOmB,EAAU+D,IAG1DoD,GAAS,SAAU1I,EAAK2D,EAAK9R,GAC/B,KAAIuE,EAASvE,IAAU0E,EAAU1E,IAAU+E,EAAS/E,IAIlD,MADA8O,QAAQC,MAAM,sCAAuC+C,EAAK,YAAa9R,EAAO,cAAemO,GACvF,IAAIhM,MAAM,kCAHhBgM,EAAI2I,aAAahF,EAAK9R,EAAQ,KAM9B+W,GAAM,SAAUtH,EAASqC,EAAK9R,GAChC6W,GAAOpH,EAAQtB,IAAK2D,EAAK9R,IAEvBgX,GAAS,SAAUvH,EAASwH,GAC9B,IAAI9I,EAAMsB,EAAQtB,IAClB6C,GAAOiG,GAAO,SAAUxT,EAAG6D,GACzBuP,GAAO1I,EAAK7G,EAAG7D,OAGfyT,GAAQ,SAAUzH,EAASqC,GAC7B,IAAIrO,EAAIgM,EAAQtB,IAAIgJ,aAAarF,GACjC,OAAa,OAANrO,OAAanB,EAAYmB,GAE9B2T,GAAS,SAAU3H,EAASqC,GAC9B,OAAOlO,EAASC,KAAKqT,GAAMzH,EAASqC,KAElCuF,GAAS,SAAU5H,EAASqC,GAC9BrC,EAAQtB,IAAImJ,gBAAgBxF,IAE1ByF,GAAQ,SAAU9H,GACpB,OAAOtJ,EAAMsJ,EAAQtB,IAAIqJ,YAAY,SAAUvR,EAAKwR,GAElD,OADAxR,EAAIwR,EAAKrT,MAAQqT,EAAKzX,MACfiG,IACN,KAGDyR,GAAgB,SAAUvJ,GAC5B,YAAqB7L,IAAd6L,EAAIwJ,OAAuB7S,EAAWqJ,EAAIwJ,MAAMC,mBAGrDC,GAAc,SAAU1J,EAAK2J,EAAU9X,GACzC,IAAKuE,EAASvE,GAEZ,MADA8O,QAAQC,MAAM,qCAAsC+I,EAAU,YAAa9X,EAAO,cAAemO,GAC3F,IAAIhM,MAAM,+BAAiCnC,GAE/C0X,GAAcvJ,IAChBA,EAAIwJ,MAAMI,YAAYD,EAAU9X,IAQhCgY,GAAQ,SAAUvI,EAASqI,EAAU9X,GACvC,IAAImO,EAAMsB,EAAQtB,IAClB0J,GAAY1J,EAAK2J,EAAU9X,IAEzBiY,GAAW,SAAUxI,EAASyI,GAChC,IAAI/J,EAAMsB,EAAQtB,IAClB6C,GAAOkH,GAAK,SAAUzU,EAAG6D,GACvBuQ,GAAY1J,EAAK7G,EAAG7D,OAGpB0U,GAAQ,SAAU1I,EAASqI,GAC7B,IAAI3J,EAAMsB,EAAQtB,IAEdpI,EADS4H,OAAOyK,iBAAiBjK,GACtByJ,iBAAiBE,GAChC,MAAa,KAAN/R,GAAaqP,GAAO3F,GAA8C1J,EAAnCsS,GAAkBlK,EAAK2J,IAE3DO,GAAoB,SAAUlK,EAAK2J,GACrC,OAAOJ,GAAcvJ,GAAOA,EAAIwJ,MAAMC,iBAAiBE,GAAY,IAEjEQ,GAAS,SAAU7I,EAASqI,GAC9B,IAAI3J,EAAMsB,EAAQtB,IACdoK,EAAMF,GAAkBlK,EAAK2J,GACjC,OAAOlU,EAASC,KAAK0U,GAAKzV,QAAO,SAAUiD,GACzC,OAAOA,EAAEvF,OAAS,MAGlBgY,GAAW,SAAU/I,EAASqI,IA/Bb,SAAU3J,EAAK2J,GAC9BJ,GAAcvJ,IAChBA,EAAIwJ,MAAMc,eAAeX,GA+B3BY,CADUjJ,EAAQtB,IACE2J,GAChBV,GAAO3H,EAAS,SAAShN,IAAIyH,IAAMrI,GAAG,KACxCwV,GAAO5H,EAAS,UAWhBkJ,GAAe,SAAUC,EAAMxU,EAAMyU,GAIvC,YAHiB,IAAbA,IACFA,EAAW,GAENzB,GAAOwB,EAAMxU,GAAM3B,KAAI,SAAUzC,GACtC,OAAO8Y,SAAS9Y,EAAO,OACtB+B,MAAM8W,IAEPE,GAAU,SAAUH,EAAM7U,GAC5B,OAAO4U,GAAaC,EAAM7U,EAAM,IAE9BiV,GAAa,SAAUJ,GACzB,OAAOG,GAAQH,EAAM,WAAa,GAEhCK,GAAa,SAAUL,GACzB,OAAOG,GAAQH,EAAM,WAAa,GAEhCM,GAAc,SAAUzJ,EAASqI,GACnC,OAAOgB,SAASX,GAAM1I,EAASqI,GAAW,KAExCqB,GAAWpZ,EAAS,IACpBqZ,GAAYrZ,EAAS,IAErBsZ,GAAa,SAAU9K,EAAOmB,GAChC,OAAO4J,GAAiB/K,EAAOmB,EAAUzO,IAEvCqY,GAAmB,SAAU/K,EAAOmB,EAAUiG,GAChD,OAAOhT,EAAKqR,GAASzF,IAAQ,SAAUrO,GACrC,OAAI2B,GAAG3B,EAAGwP,GACDiG,EAAUzV,GAAK,CAACA,GAAK,GAErBoZ,GAAiBpZ,EAAGwP,EAAUiG,OAoBvCiD,GAAO,SAAUnJ,EAASgE,GAC5B,OAhBW,SAAU8F,EAAM9J,EAASgE,GAIpC,YAHe,IAAXA,IACFA,EAASzS,GAEPyS,EAAOhE,GACF7L,EAAS1C,OAEdoE,EAASiU,EAAMnV,GAAKqL,IACf7L,EAAST,KAAKsM,GAKhB6G,GAAW7G,EAAS8J,EAAKC,KAAK,MAHZ,SAAUC,GACjC,OAAO5X,GAAG4X,EAAK,UAAYhG,EAAOgG,MAK7BC,CAAO,CACZ,KACA,MACCjK,EAASgE,IAEVpB,GAAQ,SAAUgE,GACpB,OAAOgD,GAAWhD,EAAU,UAE1BsD,GAAU,SAAUtD,GACtB,OAAIxU,GAAGwU,EAAU,YACRN,GAAWM,EAAU,OAErB1T,EAAKiX,GAAavD,IAAW,SAAUwD,GAC5C,OAAO9D,GAAW8D,EAAa,WAIjCC,GAAQ,SAAUrK,EAASgE,GAC7B,OAAOmD,GAAUnH,EAAS,QAASgE,IAEjCsG,GAAO,SAAU1D,GACnB,OAAOgD,GAAWhD,EAAU,OAE1BuD,GAAe,SAAUvD,GAC3B,OAAOyD,GAAMzD,GAAU1U,KAAK5B,EAAS,KAAK,SAAU+Z,GAClD,OAAO/D,GAAW+D,EAAO,gBAIzBE,GAAsB,SAAUC,EAAOC,GACzC,OAAOzX,EAAIwX,GAAO,SAAUE,GAC1B,GAAkB,aAAd/V,GAAK+V,GAAqB,CAC5B,IAAIC,EAAU3X,EAAIkX,GAAQQ,IAAM,SAAUE,GACxC,IAAIlI,EAAUwG,GAAa0B,EAAQ,OAAQ,GAC3C,OAAOpI,GAAOoI,EAAQ,EAAGlI,MAE3B,OAAOC,GAAQ+H,EAAKC,EAAS,YAEzBA,EAAU3X,EAAI4P,GAAM8H,IAAM,SAAUvB,GACtC,IAAI1G,EAAUyG,GAAaC,EAAM,UAAW,GACxCzG,EAAUwG,GAAaC,EAAM,UAAW,GAC5C,OAAO3G,GAAO2G,EAAM1G,EAASC,MAE/B,OAAOC,GAAQ+H,EAAKC,EAASF,EAAWC,QAI1CG,GAAmB,SAAU7R,GAC/B,OAAO6K,GAAO7K,GAAOhG,KAAI,SAAU6Q,GACjC,IAAIiH,EAAanW,GAAKkP,GACtB,OArgBiB,SAAUiH,GAC7B,OAAOjV,EAAS0M,GAAkBuI,GAogBzBC,CAAeD,GAAcA,EAAa,WAChDxY,MAAM,UAEP0Y,GAAY,SAAUX,GACxB,IAAIY,EAASX,GAAKD,GAEdG,EAAQ7S,EADSwS,GAAaE,GACSY,GAC3C,OAAOV,GAAoBC,EAAOK,KAQhCxI,GAAM,SAAUqI,EAAKE,GACvB,OAAOF,EAAM,IAAME,GAYjBM,GAAc,SAAUC,EAAWjF,GACrC,IAAIjV,EAAMiC,EAAKiY,EAAUla,KAAK,SAAUqF,GACtC,OAAOA,EAAEsM,SAEX,OAAOvP,EAAOpC,EAAKiV,IAejBkF,GAAW,SAAUC,GACvB,IAAIC,EAAS,GACT1I,EAAQ,GACRsH,EAAU,GACVqB,EAAU,EACVC,EAAa,EACbC,EAAW,EA6Bf,OA5BAxY,EAAKoY,GAAM,SAAUK,GACnB,GAAwB,aAApBA,EAAQ7I,QACVqH,EAtBgB,SAAUwB,GAC9B,IAAIC,EAAe,GACflH,EAAQ,EASZ,OARAxR,EAAKyY,EAAQ9I,OAAO,SAAUgI,GAC5B,IAAIlI,EAAUkI,EAAOlI,QACrBtM,EAAMsM,GAAS,SAAUkJ,GACvB,IAAIC,EAAWpH,EAAQmH,EACvBD,EAAaE,GA9dH,SAAU7L,EAAS0C,EAASkI,GAC1C,MAAO,CACL5K,QAASA,EACT0C,QAASA,EACTkI,OAAQA,GA0dmBkB,CAAUlB,EAAO5K,QAAS0C,EAASmJ,MAE9DpH,GAAS/B,KAEJiJ,EAWOI,CAAgBL,OACrB,CACL,IAAIM,EAAe,GACnB/Y,EAAKyY,EAAQ9I,OAAO,SAAUqJ,GAE5B,IADA,IAAI9R,EAAQ,OAC4BtH,IAAjCyY,EAAOjJ,GAAIoJ,EAAUtR,KAC1BA,IAGF,IADA,IAAIN,EAviBG,SAAUmG,EAASyC,EAASC,EAASgI,EAAKE,GACvD,MAAO,CACL5K,QAASA,EACTyC,QAASA,EACTC,QAASA,EACTgI,IAAKA,EACLE,OAAQA,GAiiBUsB,CAASD,EAAQjM,QAASiM,EAAQxJ,QAASwJ,EAAQvJ,QAAS+I,EAAUtR,GAC3EgS,EAAyB,EAAGA,EAAyBF,EAAQvJ,QAASyJ,IAC7E,IAAK,IAAIC,EAAsB,EAAGA,EAAsBH,EAAQxJ,QAAS2J,IAAuB,CAC9F,IACIC,EAAiBlS,EAAQgS,EACzBG,EAASjK,GAFKoJ,EAAWW,EAECC,GAC9Bf,EAAOgB,GAAUzS,EACjB2R,EAAae,KAAKC,IAAIhB,EAAYa,EAAiB,GAGvDL,EAAapW,KAAKiE,MAEpB0R,IACA3I,EAAMhN,KAAK+M,GAAQ+I,EAAQ1L,QAASgM,EAAcN,EAAQ7I,UAC1D4I,QAIG,CACLgB,KArlBO,SAAUnC,EAAMJ,GACzB,MAAO,CACLI,KAAMA,EACNJ,QAASA,GAglBEuC,CAAKlB,EAASC,GAGzBF,OAAQA,EACRra,IAAK2R,EACLsH,QAASA,IAqBTwC,GAAY,CACd1B,UAnBgB,SAAUX,GAC1B,IAAIgB,EAAOL,GAAUX,GACrB,OAAOe,GAASC,IAkBhBD,SAAUA,GACVuB,MA5FU,SAAUxB,EAAWT,EAAKE,GACpC,IAAI9B,EAAMqC,EAAUG,OAAOjJ,GAAIqI,EAAKE,IACpC,YAAe/X,IAARiW,EAAoB3U,EAAST,KAAKoV,GAAO3U,EAAS1C,QA2FzDmb,SAzFa,SAAUzB,EAAW0B,EAAMC,GACxC,IAAIC,EAAW7B,GAAYC,GAAW,SAAU3I,GAC9C,OAAOsK,EAAWD,EAAMrK,EAAOxC,YAEjC,OAAO+M,EAAShc,OAAS,EAAIoD,EAAST,KAAKqZ,EAAS,IAAM5Y,EAAS1C,QAsFnEyZ,YAAaA,GACb8B,UApBc,SAAU7B,GACxB,OAAOjY,EAAKiY,EAAUla,KAAK,SAAUgc,GACnC,OAAOA,EAAErK,UAmBXsK,YAhBgB,SAAU/B,GAC1B,OAAOjJ,GAAOiJ,EAAUjB,UAgBxBiD,WAde,SAAUhC,GACzB,OAAO7J,GAAK6J,EAAUjB,SAASnZ,OAAS,GAcxCqc,YAZgB,SAAUjC,EAAWS,GACrC,OAAOzX,EAASC,KAAK+W,EAAUjB,QAAQ0B,MAcrCyB,GAAc,SAAUC,EAAQ9K,GAClC,IAAI+K,EAAW/K,EAAOoI,OAClB4C,EAAYhL,EAAOoI,OAASpI,EAAOE,QAAU,EAC7C+K,EAAUjL,EAAOkI,IACjBgD,EAAalL,EAAOkI,IAAMlI,EAAOC,QAAU,EAC/C,OAAO8K,GAAYD,EAAOK,WAAaH,GAAaF,EAAOM,UAAaH,GAAWH,EAAOO,WAAaH,GAAcJ,EAAOQ,UAE1HC,GAAW,SAAUT,EAAQ9K,GAC/B,OAAOA,EAAOoI,QAAU0C,EAAOM,UAAYpL,EAAOoI,OAASpI,EAAOE,QAAU,GAAK4K,EAAOK,WAAanL,EAAOkI,KAAO4C,EAAOQ,UAAYtL,EAAOkI,IAAMlI,EAAOC,QAAU,GAAK6K,EAAOO,WAgB9KG,GAAY,SAAU7C,EAAW8C,EAAWC,GAC9C,IAAIC,EAAczB,GAAUE,SAASzB,EAAW8C,EAAWxN,IACvD2N,EAAe1B,GAAUE,SAASzB,EAAW+C,EAAYzN,IAC7D,OAAO0N,EAAYjb,MAAK,SAAUmb,GAChC,OAAOD,EAAapb,KAAI,SAAUsb,GAChC,OARoBC,EAQHF,EARYG,EAQRF,EAjlBJR,EA0kBPvB,KAAKkC,IAAIF,EAAQ7D,IAAK8D,EAAQ9D,KA1kBbkD,EA0kBmBrB,KAAKkC,IAAIF,EAAQ3D,OAAQ4D,EAAQ5D,QA1kB1CiD,EA0kBmDtB,KAAKC,IAAI+B,EAAQ7D,IAAM6D,EAAQ9L,QAAU,EAAG+L,EAAQ9D,IAAM8D,EAAQ/L,QAAU,GA1kBpHkL,EA0kBwHpB,KAAKC,IAAI+B,EAAQ3D,OAAS2D,EAAQ7L,QAAU,EAAG8L,EAAQ5D,OAAS4D,EAAQ9L,QAAU,GAzkBvP,CACLoL,SAAUA,EACVF,SAAUA,EACVC,UAAWA,EACXF,UAAWA,GAokBC,IAAUY,EAASC,EAzkBZV,EAAUF,EAAUC,EAAWF,SAqlBlDe,GAAS,SAAUvD,EAAW8C,EAAWC,GAC3C,OAAOF,GAAU7C,EAAW8C,EAAWC,GAAYhb,MAAK,SAAUoa,GAChE,OAzBgB,SAAUnC,EAAWmC,GAGvC,IAFA,IAAIqB,GAAS,EACTC,EAAiBle,EAAMqd,GAAUT,GAC5BpX,EAAIoX,EAAOQ,SAAU5X,GAAKoX,EAAOO,UAAW3X,IACnD,IAAK,IAAI4B,EAAIwV,EAAOM,SAAU9V,GAAKwV,EAAOK,UAAW7V,IACnD6W,EAASA,GAAUjC,GAAUC,MAAMxB,EAAWjV,EAAG4B,GAAG3E,OAAOyb,GAG/D,OAAOD,EAASxa,EAAST,KAAK4Z,GAAUnZ,EAAS1C,OAiBxCod,CAAc1D,EAAWmC,OAchCwB,GAAa,SAAU3D,EAAWhR,EAAO4U,GAC3C,OAAOf,GAAU7C,EAAWhR,EAAO4U,GAAQ/b,KAAI,SAAUsa,GACvD,IAAI0B,EAAStC,GAAUxB,YAAYC,EAAWza,EAAM2c,GAAaC,IACjE,OAAOta,EAAIgc,GAAQ,SAAUxM,GAC3B,OAAOA,EAAOxC,eAIhBiP,GAAa,SAAU9D,EAAW+D,GAIpC,OAAOxC,GAAUE,SAASzB,EAAW+D,GAHjB,SAAUC,EAAIC,GAChC,OAAOnO,GAAWmO,EAAID,MAEuCnc,KAAI,SAAUwP,GAC3E,OAAOA,EAAOxC,YAIdqP,GAAW,SAAUlG,EAAMmG,EAAUC,GACvC,OAAOlF,GAAMlB,GAAMjW,MAAK,SAAUmX,GAEhC,OA9BS,SAAUc,EAAWhC,EAAMuB,EAAKE,GAC3C,OAAO8B,GAAUE,SAASzB,EAAWhC,EAAM1I,IAAMvN,MAAK,SAAUsP,GAC9D,IAAIsL,EAAWpD,EAAM,EAAIlI,EAAOkI,IAAMlI,EAAOC,QAAU,EAAID,EAAOkI,IAC9DkD,EAAWhD,EAAS,EAAIpI,EAAOoI,OAASpI,EAAOE,QAAU,EAAIF,EAAOoI,OAExE,OADW8B,GAAUC,MAAMxB,EAAW2C,EAAWpD,EAAKkD,EAAWhD,GACrD5X,KAAI,SAAUwc,GACxB,OAAOA,EAAExP,cAwBJyP,CADSC,GAAarF,GACJlB,EAAMmG,EAAUC,OAGzCI,GAAe,SAAUtF,EAAOuF,EAAO1Y,GACzC,IAAIiU,EAAYuE,GAAarF,GAC7B,OAAOyE,GAAW3D,EAAWyE,EAAO1Y,IAElC2Y,GAAmB,SAAUxF,EAAOuF,EAAOE,EAAY5Y,EAAM6Y,GAC/D,IAAI5E,EAAYuE,GAAarF,GACzB2F,EAAevP,GAAK4J,EAAOyF,GAAc3b,EAAST,KAAKkc,GAASX,GAAW9D,EAAWyE,GACtFK,EAAcxP,GAAK4J,EAAO0F,GAAa5b,EAAST,KAAKwD,GAAQ+X,GAAW9D,EAAWjU,GACvF,OAAO8Y,EAAa9c,MAAK,SAAU+a,GACjC,OAAOgC,EAAY/c,MAAK,SAAUgd,GAChC,OAAOpB,GAAW3D,EAAW8C,EAAWiC,UAQ1CR,GAAehD,GAAU1B,UAEzBmF,GAAS,SAAUC,EAAQpQ,GACd6D,GAAOuM,GACbnd,MAAK,SAAUe,GACtBA,EAAE0K,IAAI2R,aAAarQ,EAAQtB,IAAK0R,EAAO1R,SAGvC4R,GAAQ,SAAUF,EAAQpQ,GACdsE,GAAY8L,GAClBle,MAAK,WACI2R,GAAOuM,GACbnd,MAAK,SAAUe,GACtBuc,GAAOvc,EAAGgM,SAEX,SAAUhM,GACXmc,GAAOnc,EAAGgM,OAGVwQ,GAAU,SAAU3M,EAAQ7D,IA1kBf,SAAUA,GACzB,OAAOwE,GAAMxE,EAAS,IA0kBHyQ,CAAW5M,GACjB3R,MAAK,WAChBqe,GAAO1M,EAAQ7D,MACd,SAAUhM,GACX6P,EAAOnF,IAAI2R,aAAarQ,EAAQtB,IAAK1K,EAAE0K,SAGvC6R,GAAS,SAAU1M,EAAQ7D,GAC7B6D,EAAOnF,IAAIgS,YAAY1Q,EAAQtB,MAE7BiS,GAAO,SAAU3Q,EAAS4Q,GAC5BT,GAAOnQ,EAAS4Q,GAChBL,GAAOK,EAAS5Q,IAQd6Q,GAAU,SAAUT,EAAQU,GAC9B7d,EAAK6d,GAAU,SAAUrgB,EAAGyF,GAC1B,IAAI8O,EAAU,IAAN9O,EAAUka,EAASU,EAAS5a,EAAI,GACxCoa,GAAMtL,EAAGvU,OAGTsgB,GAAW,SAAUlN,EAAQiN,GAC/B7d,EAAK6d,GAAU,SAAUrgB,GACvB8f,GAAO1M,EAAQpT,OAIfugB,GAAQ,SAAUhR,GACpBA,EAAQtB,IAAIuS,YAAc,GAC1Bhe,EAAKsR,GAASvE,IAAU,SAAUkR,GAChCC,GAASD,OAGTC,GAAW,SAAUnR,GACvB,IAAItB,EAAMsB,EAAQtB,IACK,OAAnBA,EAAIoF,YACNpF,EAAIoF,WAAWsN,YAAY1S,IAG3B2S,GAAS,SAAUT,GACrB,IA9BuBR,EA8BnB7J,EAAahC,GAASqM,GACtBrK,EAAWxV,OAAS,IA/BDqf,EAgCZQ,EA/BX3d,EA+BoBsT,GA/BL,SAAU9V,GACvB0f,GAAOC,EAAQ3f,OAgCjB0gB,GAASP,IA0BX,IAAIU,GAvBJ,SAAoBlf,EAAIuC,GACtB,IAMI4c,EAAY,SAAUvR,GACxB,OAAO5N,EAAG4N,GAAW7L,EAASC,KAAK4L,EAAQtB,IAAI8S,WAAard,EAAS1C,QAQvE,MAAO,CACLwF,IAhBQ,SAAU+I,GAClB,IAAK5N,EAAG4N,GACN,MAAM,IAAItN,MAAM,gBAAkBiC,EAAO,eAAiBA,EAAO,SAEnE,OAAO4c,EAAUvR,GAAS1N,MAAM,KAahCif,UAAWA,EACXjK,IATQ,SAAUtH,EAASzP,GAC3B,IAAK6B,EAAG4N,GACN,MAAM,IAAItN,MAAM,oBAAsBiC,EAAO,eAAiBA,EAAO,SAEvEqL,EAAQtB,IAAI8S,UAAYjhB,IASlBkhB,CAAUnO,GAAQ,QACxBoO,GAAQ,SAAU1R,GACpB,OAAOsR,GAAIra,IAAI+I,IAEbuR,GAAY,SAAUvR,GACxB,OAAOsR,GAAIC,UAAUvR,IAEnB2R,GAAQ,SAAU3R,EAASzP,GAC7B,OAAO+gB,GAAIhK,IAAItH,EAASzP,IAGtBqhB,GAAgB,CAClB,OACA,IACA,MACA,UACA,QACA,aACA,SACA,SACA,SACA,MACA,UACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,UACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,aACA,MACA,WAGF,SAASC,KAqCP,MAAO,CACLC,GAAIxhB,EAAS,CACX2P,SAAU4G,GACVkL,QAAS5K,GACTjB,UAAWU,GACX3V,IAAK8S,KAEPiO,KAAM1hB,EAAS,CACb2P,SAAUuG,GACVN,UAAWD,KAEbgM,OAAQ3hB,EAAS,CACf2G,IAAKyR,GACLG,OAAQA,GACRvB,IAAKiB,GACLX,OAAQmB,KAEVvB,MAAOlX,EAAS,CACd2G,IAAKwQ,GACLH,IAAKA,GACLM,OAAQA,GACRsK,OAzBmB,SAAUC,EAAQC,GACvC,IAAIC,EAAKvK,GAAMqK,GACf5K,GAAO6K,EAAaC,MAyBpBC,OAAQhiB,EAAS,CACf6f,OAAQA,GACRG,MAAOA,GACPiC,SAAU1B,GACVN,OAAQA,GACRiC,UAAWzB,GACXP,QAASA,GACTG,KAAMA,KAER/I,OAAQtX,EAAS,CACf+gB,OAAQA,GACRzJ,OAAQuJ,KAEVsB,OAAQniB,EAAS,CACf8H,GAAIuG,GAAaY,QACjBuI,MA1EU,SAAU9H,GACtB,OAAOrB,GAAaH,QAAQwB,EAAQtB,IAAIgU,WAAU,KA0EhDhT,KAAMf,GAAac,WAErBxB,MAAO3N,EAAS,CACdqiB,gBAjDkB,SAAU3S,EAAS4S,GACvC,OAAO5S,EAAQtB,IAAIoC,wBAAwB8R,EAAMlU,MAiD/C0F,YAAaA,GACbE,YAAaA,KAEf+D,SAAU/X,EAAS,CACjBiU,SAAUA,GACV5P,KAAMA,GACNkP,OAAQA,GACR7E,SAnFW,SAAUgB,GACvB,OAAO2D,GAAgB3D,GAAStB,KAmF9B4E,OAAQA,GACRF,UAAWA,GACXC,UAAWA,GACXwP,QAASnB,GACToB,QAASnB,GACToB,WAtFa,SAAU/S,GACzB,QAAKqD,GAAUrD,KAGO,SAAlBrL,GAAKqL,IAGFnK,EAAS+b,GAAejd,GAAKqL,MAgFlCgT,WA9Ea,SAAUhT,GACzB,QAAKqD,GAAUrD,IAGRnK,EAAS,CACd,KACA,MACA,KACA,SACClB,GAAKqL,KAsENiT,cApEgB,SAAUjT,GAC5B,OAAOqD,GAAUrD,IAAkD,UAAtCyH,GAAMzH,EAAS,sBAqE5CrO,GAAI8O,GACJrO,GAAIiP,IAIR,IAQI6R,GAAY,SAAUC,EAAUC,EAAMC,EAAMC,GAC9C,IAAInZ,EAAQiZ,EAAKD,EAAUE,GAC3B,OAAO9c,EAAM+c,GAAM,SAAUpf,EAAGP,GAC9B,IAAIkG,EAAUuZ,EAAKD,EAAUxf,GAC7B,OAAO4f,GAAcJ,EAAUjf,EAAG2F,KACjCM,IAEDoZ,GAAgB,SAAUJ,EAAUhZ,EAAOqZ,GAC7C,OAAOrZ,EAAMjH,MAAK,SAAUa,GAC1B,OAAOyf,EAAIngB,OAAO3C,EAAMyiB,EAASxhB,GAAIoC,QAiCrC0f,GA7CS,SAAUN,EAAUC,EAAMtC,GACrC,OAAOA,EAAS/f,OAAS,EANf,SAAUoiB,EAAUC,EAAMtC,EAAUxf,GAG9C,OAAOA,EAAE6hB,EAAUC,EAFRtC,EAAS,GACTA,EAAStb,MAAM,IAIGke,CAAMP,EAAUC,EAAMtC,EAAUoC,IAAa/e,EAAS1C,QA6CjFkiB,GA3Bc,SAAUR,EAAUhZ,EAAOqZ,EAAKxP,QACjC,IAAXA,IACFA,EAASzS,GAEX,IAAIqiB,EAAM,CAACzZ,GAAOjJ,OAAOiiB,EAASrB,KAAK7gB,IAAIkJ,IACvC0Z,EAAM,CAACL,GAAKtiB,OAAOiiB,EAASrB,KAAK7gB,IAAIuiB,IACrCM,EAAQ,SAAUC,GAEpB,OADYjd,EAAUid,EAAM/P,GACf9R,MAAK,WAChB,OAAO6hB,KACN,SAAUC,GACX,OAAOD,EAAKve,MAAM,EAAGwe,EAAM,OAG3BC,EAAUH,EAAMF,GAChBM,EAAUJ,EAAMD,GAChBM,EAASxd,EAAKsd,GAAS,SAAUxjB,GACnC,OAAO0C,EAAO+gB,EApBP,SAAUf,EAAUtG,GAC7B,OAAOnc,EAAMyiB,EAASxhB,GAAIkb,GAmBDuH,CAAKjB,EAAU1iB,OAExC,MAAO,CACL4jB,UAAWJ,EACXK,WAAYJ,EACZC,OAAQA,IAORhB,GAAWtB,KACX0C,GAAc,SAAUnB,EAAMtC,GAChC,OAAO2C,GAAUN,IAAU,SAAUqB,EAAWxU,GAC9C,OAAOoT,EAAKpT,KACX8Q,IAMD2D,GAAc,SAAUC,GAC1B,OAAO7N,GAAW6N,EAAW,UAE3BC,GAAW,SAAUxa,EAAO4U,EAAQ/K,GACtC,IAAI4Q,EAAY,SAAUC,GACxB,OAAO,SAAU7U,GACf,YAAkBnN,IAAXmR,GAAwBA,EAAOhE,IAAYS,GAAKT,EAAS6U,KAGpE,OAAIpU,GAAKtG,EAAO4U,GACP5a,EAAST,KAAK,CACnBohB,MAAO3gB,EAAST,KAAK,CAACyG,IACtBA,MAAOA,EACP4U,OAAQA,IAGH0F,GAAYta,GAAOjH,MAAK,SAAU6hB,GACvC,OAAON,GAAY1F,GAAQ7b,MAAK,SAAU8hB,GACxC,GAAIvU,GAAKsU,EAAYC,GACnB,OAAO7gB,EAAST,KAAK,CACnBohB,MAAOnF,GAAaoF,EAAY5a,EAAO4U,GACvC5U,MAAOA,EACP4U,OAAQA,IAEL,GAAI9N,GAAW8T,EAAYC,GAAc,CAC9C,IACI9G,GADA+G,EAAgB7O,GAAY2I,EAAQ,QAAS6F,EAAUG,KAC5BhkB,OAAS,EAAIkkB,EAAcA,EAAclkB,OAAS,GAAKge,EACtF,OAAO5a,EAAST,KAAK,CACnBohB,MAAOjF,GAAiBkF,EAAY5a,EAAO4a,EAAYhG,EAAQiG,GAC/D7a,MAAOA,EACP4U,OAAQb,IAEL,GAAIjN,GAAW+T,EAAaD,GAAa,CAC9C,IAAIE,EACAhH,GADAgH,EAAgB7O,GAAYjM,EAAO,QAASya,EAAUI,KAC5BjkB,OAAS,EAAIkkB,EAAcA,EAAclkB,OAAS,GAAKoJ,EACrF,OAAOhG,EAAST,KAAK,CACnBohB,MAAOjF,GAAiBmF,EAAa7a,EAAO4a,EAAYhG,EAAQiG,GAChE7a,MAAOA,EACP4U,OAAQd,IAGV,OA7CQ,SAAU9T,EAAO4U,EAAQ/K,GACzC,OAAO2P,GAAYR,GAAUhZ,EAAO4U,EAAQ/K,GA4C7BkR,CAAY/a,EAAO4U,GAAQoF,OAAOjhB,MAAK,SAAUiiB,GACtD,OAAOhO,GAAUgO,EAAK,QAASnR,GAAQ9Q,MAAK,SAAUkiB,GACpD,IAAIC,EAAsBjP,GAAY2I,EAAQ,QAAS6F,EAAUQ,IAC7DlH,EAAamH,EAAoBtkB,OAAS,EAAIskB,EAAoBA,EAAoBtkB,OAAS,GAAKge,EACpGuG,EAAqBlP,GAAYjM,EAAO,QAASya,EAAUQ,IAC3DnH,EAAYqH,EAAmBvkB,OAAS,EAAIukB,EAAmBA,EAAmBvkB,OAAS,GAAKoJ,EACpG,OAAOhG,EAAST,KAAK,CACnBohB,MAAOjF,GAAiBuF,EAAUjb,EAAO4a,EAAYhG,EAAQiG,GAC7D7a,MAAO8T,EACPc,OAAQb,iBASpBqH,GAAW,SAAUb,EAAWzU,GAClC,IAAIuV,EAAOhP,GAAckO,EAAWzU,GACpC,OAAOuV,EAAKzkB,OAAS,EAAIoD,EAAST,KAAK8hB,GAAQrhB,EAAS1C,QAOtDgkB,GAAW,SAAUf,EAAWgB,EAAuBC,GACzD,OAAO3O,GAAa0N,EAAWgB,GAAuBxiB,MAAK,SAAU0c,GACnE,OAAO5I,GAAa0N,EAAWiB,GAAsBziB,MAAK,SAAUgE,GAClE,OAAOqd,GAAYE,GAAa,CAC9B7E,EACA1Y,IACClE,KAAI,SAAUqX,GACf,MAAO,CACLuF,MAAOA,EACP1Y,KAAMA,EACNmT,MAAOA,aAqBbuL,GAAiB,SAAUd,EAAOxF,EAAUC,EAAamG,EAAuBC,GAClF,OArCY,SAAUb,EAAOa,GAC7B,OAAOhf,EAAKme,GAAO,SAAUe,GAC3B,OAAOzjB,GAAGyjB,EAAKF,MAmCVG,CAAQhB,EAAOa,GAAsBziB,MAAK,SAAUgE,GACzD,OAAOmY,GAASnY,EAAMoY,EAAUC,GAAarc,MAAK,SAAU6b,GAC1D,OAlBS,SAAUA,EAAQ2G,GAC/B,OAAO7O,GAAWkI,EAAQ,SAAS7b,MAAK,SAAUmX,GAChD,OAAOrD,GAAaqD,EAAOqL,GAAuBxiB,MAAK,SAAUiH,GAC/D,OAAOwa,GAASxa,EAAO4U,GAAQ7b,MAAK,SAAU6iB,GAC5C,OAAOA,EAAWjB,MAAM9hB,KAAI,SAAU8hB,GACpC,MAAO,CACLA,MAAOA,EACP3a,MAAO4b,EAAW5b,MAClB4U,OAAQgH,EAAWhH,oBAUlBiH,CAASjH,EAAQ2G,UAK1BO,GAAa,SAAUvB,EAAWzU,GACpC,OAAOsV,GAASb,EAAWzU,IAEzBiW,GAAc,SAAUxB,EAAWgB,EAAuBC,GAC5D,OAAOF,GAASf,EAAWgB,EAAuBC,GAAsBziB,MAAK,SAAUijB,GACrF,IAAInS,EAAS,SAAU4C,GACrB,OAAOnG,GAAKiU,EAAW9N,IAErBwP,EAAkB,0BAClBC,EAAgBxP,GAAWsP,EAAMvG,MAAOwG,EAAiBpS,GACzDsS,EAAezP,GAAWsP,EAAMjf,KAAMkf,EAAiBpS,GAC3D,OAAOqS,EAAcnjB,MAAK,SAAUqjB,GAClC,OAAOD,EAAapjB,MAAK,SAAUsjB,GACjC,OAAO/V,GAAK8V,EAAIC,GA7aT,SAAUnM,EAAOuF,EAAO1Y,GACrC,IAAIiU,EAAYuE,GAAarF,GAC7B,OAAOqE,GAAOvD,EAAWyE,EAAO1Y,GA2aJuf,CAASN,EAAM9L,MAAO8L,EAAMvG,MAAOuG,EAAMjf,MAAQ/C,EAAS1C,iBAyEpFilB,GAnEa,SAAUC,GACzB,IAAK3hB,EAAQ2hB,GACX,MAAM,IAAIjkB,MAAM,0BAElB,GAAqB,IAAjBikB,EAAM5lB,OACR,MAAM,IAAI2B,MAAM,mCAElB,IAAIkkB,EAAe,GACfC,EAAM,GAyDV,OAxDA5jB,EAAK0jB,GAAO,SAAUG,EAAOC,GAC3B,IAAIC,EAAS1V,GAAKwV,GAClB,GAAsB,IAAlBE,EAAOjmB,OACT,MAAM,IAAI2B,MAAM,kCAElB,IAAI2P,EAAM2U,EAAO,GACbzmB,EAAQumB,EAAMzU,GAClB,QAAiBxP,IAAbgkB,EAAIxU,GACN,MAAM,IAAI3P,MAAM,0BAA4B2P,GACvC,GAAY,SAARA,EACT,MAAM,IAAI3P,MAAM,yCACX,IAAKsC,EAAQzE,GAClB,MAAM,IAAImC,MAAM,mCAElBkkB,EAAahhB,KAAKyM,GAClBwU,EAAIxU,GAAO,WACT,IAAI4U,EAAYnmB,UAAUC,OAC1B,GAAIkmB,IAAc1mB,EAAMQ,OACtB,MAAM,IAAI2B,MAAM,qCAAuC2P,EAAM,cAAgB9R,EAAMQ,OAAS,KAAOR,EAAQ,UAAY0mB,GAGzH,IADA,IAAI/e,EAAO,IAAI3D,MAAM0iB,GACZ/gB,EAAI,EAAGA,EAAIgC,EAAKnH,OAAQmF,IAC/BgC,EAAKhC,GAAKpF,UAAUoF,GAEtB,IAAI2K,EAAQ,SAAUqW,GACpB,IAAIC,EAAa7V,GAAK4V,GACtB,GAAIN,EAAa7lB,SAAWomB,EAAWpmB,OACrC,MAAM,IAAI2B,MAAM,iDAAmDkkB,EAAa7M,KAAK,KAAO,aAAeoN,EAAWpN,KAAK,MAK7H,IAHc3W,EAAOwjB,GAAc,SAAUQ,GAC3C,OAAOvhB,EAASshB,EAAYC,MAG5B,MAAM,IAAI1kB,MAAM,gEAAkEykB,EAAWpN,KAAK,MAAQ,eAAiB6M,EAAa7M,KAAK,OAE/I,OAAOmN,EAAS7U,GAAKlR,MAAM,KAAM+G,IAEnC,MAAO,CACLhG,KAAM,WACJ,GAAIpB,UAAUC,SAAW4lB,EAAM5lB,OAC7B,MAAM,IAAI2B,MAAM,+CAAiDikB,EAAM5lB,OAAS,SAAWD,UAAUC,QAEvG,IAAI+J,EAAShK,UAAUimB,GACvB,OAAOjc,EAAO3J,MAAM,KAAM+G,IAE5B2I,MAAOA,EACPwW,IAAK,SAAUC,GACbjY,QAAQgY,IAAIC,EAAO,CACjBV,aAAcA,EACdliB,YAAa2N,EACbkV,OAAQrf,UAMX2e,GAILW,GAASd,GAAa,CACxB,CAAEjlB,KAAM,IACR,CAAEgmB,SAAU,CAAC,aACb,CAAEC,OAAQ,CAAC,cAETC,GAAO,SAAUC,EAASC,EAAQC,EAAYC,GAChD,OAAOH,EAAQ1lB,KAAK2lB,EAAQC,EAAYC,IAEtCC,GAASR,GAAO/lB,KAChBgmB,GAAWD,GAAOC,SAClBC,GAASF,GAAOE,OAahBO,GAASC,QAAQC,KAAKC,MAAMC,QAAQ,yBAqCpCC,GAAW,SAAUjN,EAAMkN,EAAcC,GAC3C,IAAI9N,EAAMW,EAAKmN,GAAUxY,QACrByY,EAAK9Z,GAAaY,QAAQ,MAC9BgR,GAAOkI,EAAI9Z,GAAaY,QAAQ,QACxBgZ,EAAehI,GAASC,IAC9B9F,EAAK+N,IAmCLC,GAAU,SAAUrO,EAAOsO,GAC7B,IAAIC,EAAa,SAAUpW,GACzB,OAAOpQ,GAAGoQ,EAAOxC,QAAS2Y,IAExBtN,EAAOL,GAAUX,GACjBwO,EAAQnM,GAAUtB,SAASC,GAC3ByN,EAzEkB,SAAUD,EAAOD,GACvC,IAAIG,EAAeF,EAAMpM,KAAKvC,QAE1B8O,EADYH,EAAMpM,KAAKnC,KAEvB2O,EAASF,EACTG,EAAS,EACTC,EAAS,EAmBb,OAlBA5X,GAAOsX,EAAMvN,QAAQ,SAAU9I,GAC7B,GAAIoW,EAAWpW,GAAS,CACtB,IAAIsL,EAAWtL,EAAOkI,IAClB0O,EAAStL,EAAWtL,EAAOC,QAAU,EACrCmL,EAAWpL,EAAOoI,OAClByO,EAASzL,EAAWpL,EAAOE,QAAU,EACrCoL,EAAWkL,EACbA,EAASlL,EACAsL,EAASF,IAClBA,EAASE,GAEPxL,EAAWqL,EACbA,EAASrL,EACAyL,EAASF,IAClBA,EAASE,OA7BC,SAAUL,EAAQC,EAAQC,EAAQC,GAClD,MAAO,CACLH,OAAQA,EACRC,OAAQA,EACRC,OAAQA,EACRC,OAAQA,GA4BHG,CAAYN,EAAQC,EAAQC,EAAQC,GAgD/BI,CAAkBV,EAAOD,GACjC3Y,EAAW,UAAY0Y,EAAZ,YAAkDA,EAAmB,IAChFa,EAAkB3P,GAAiBQ,EAAO,SAAS,SAAUlB,GAC/D,OAAO/W,GAAG+W,EAAMlJ,MAKlB,OAHAhN,EAAKumB,EAAiBrI,IA5CP,SAAU9F,EAAMwN,EAAOC,EAAOF,GAG7C,IAFA,IAAIG,EAAeF,EAAMpM,KAAKvC,QAC1BuP,EAAYZ,EAAMpM,KAAKnC,KAClBpU,EAAI,EAAGA,EAAIujB,EAAWvjB,IAE7B,IADA,IAAIqiB,GAAe,EACVzgB,EAAI,EAAGA,EAAIihB,EAAcjhB,IAC1B5B,EAAI4iB,EAAME,QAAU9iB,EAAI4iB,EAAMI,QAAUphB,EAAIghB,EAAMG,QAAUnhB,EAAIghB,EAAMK,SAC3DzM,GAAUC,MAAMkM,EAAO3iB,EAAG4B,GAAGzE,OAAOulB,GAAY/mB,SAE7DymB,GAASjN,EAAMkN,EAAcriB,GAE7BqiB,GAAe,GAkCvBmB,CAAWrO,EAAMwN,EAAOC,EAAOF,GA5BrB,SAAUvO,EAAOyO,GAC3B,IAAIa,EAAYtmB,EAAOuW,GAAWS,EAAO,OAAO,SAAUK,GACxD,OAAqC,IAA9BA,EAAIhM,IAAI8B,qBAEjBvN,EAAK0mB,EAAWxI,IACZ2H,EAAMG,SAAWH,EAAMK,QAAUL,EAAME,SAAWF,EAAMI,QAC1DjmB,EAAK2W,GAAWS,EAAO,UAAU,SAAUlB,GACzCvB,GAAOuB,EAAM,WACbvB,GAAOuB,EAAM,cAGjBvB,GAAOyC,EAAO,SACdzC,GAAOyC,EAAO,UACdtB,GAASsB,EAAO,SAChBtB,GAASsB,EAAO,UAehBuP,CAAMvP,EAAOyO,GACNzO,GAKLwP,GAAS,SAAU7Z,GACrB,MAAyB,QAAlBrL,GAAKqL,GAAqB,EAAIuR,GAAUvR,GAAS9N,MAAK,WAC3D,OAAOqS,GAASvE,GAASjP,UACxB,SAAUiD,GACX,OAAOA,EAAEjD,WAQT+oB,GAA6B,CAC/B,MACA,MAEEC,GAAmB,SAAU5Z,GAE/B,OAVOoR,GAS8CpR,GAThC9M,QAAO,SAAUqM,GACpC,OAA8B,IAAvBA,EAAKjF,OAAO1J,QAAgB2O,EAAKhK,QAXjC,MAWkD,KACxDrD,UAQyBwD,EAASikB,GAA4BnlB,GAAKwL,KAGpEyP,GAAQ,SAAU5P,GACpB,OA1jCgCkG,EA0jCL6T,IAzjCvBC,EAAU,SAAUvb,GACtB,IAAK,IAAIvI,EAAI,EAAGA,EAAIuI,EAAKW,WAAWrO,OAAQmF,IAAK,CAC/C,IAAI+jB,EAAUtb,GAAaH,QAAQC,EAAKW,WAAWlJ,IACnD,GAAIgQ,EAAU+T,GACZ,OAAO9lB,EAAST,KAAKumB,GAEvB,IAAIC,EAAMF,EAAQvb,EAAKW,WAAWlJ,IAClC,GAAIgkB,EAAI7nB,SACN,OAAO6nB,EAGX,OAAO/lB,EAAS1C,SA8iCAuO,EA5iCGtB,KAdN,IAAiBwH,EAC5B8T,GA2jCFG,GAAS,SAAUna,GACrB,OAAOoa,GAAcpa,EAAS+Z,KAE5BK,GAAgB,SAAUtb,EAAOoH,GACnC,IAAI8T,EAAU,SAAUha,GAEtB,IADA,IAAIuG,EAAahC,GAASvE,GACjB9J,EAAIqQ,EAAWxV,OAAS,EAAGmF,GAAK,EAAGA,IAAK,CAC/C,IAAIsO,EAAQ+B,EAAWrQ,GACvB,GAAIgQ,EAAU1B,GACZ,OAAOrQ,EAAST,KAAK8Q,GAEvB,IAAI0V,EAAMF,EAAQxV,GAClB,GAAI0V,EAAI7nB,SACN,OAAO6nB,EAGX,OAAO/lB,EAAS1C,QAElB,OAAOuoB,EAAQlb,IAGbub,GAAU,SAAUC,EAAUC,GAChC,OAAO5b,GAAaH,QAAQ8b,EAAS5b,IAAIgU,UAAU6H,KAEjDC,GAAU,SAAUF,GACtB,OAAOD,GAAQC,GAAU,IAEvBG,GAAO,SAAUH,GACnB,OAAOD,GAAQC,GAAU,IAQvBI,GAAS,SAAUJ,EAAU9a,GAC/B,IAAIpH,EAPU,SAAUkiB,EAAU9a,GAClC,IAAIpH,EAAKuG,GAAaY,QAAQC,GAC1BuI,EAAaD,GAAMwS,GAEvB,OADA/S,GAAOnP,EAAI2P,GACJ3P,EAGEuiB,CAAUL,EAAU9a,GACzBob,EAAgBrW,GAASkW,GAAKH,IAElC,OADAvJ,GAAS3Y,EAAIwiB,GACNxiB,GAGLyiB,GAAyB,CAC3B/b,MAAO,CACL,MACA,QAGAgc,GAAa,WACf,IAAIrC,EAAK9Z,GAAaY,QAAQ,MAE9B,OADAgR,GAAOkI,EAAI9Z,GAAaY,QAAQ,OACzBkZ,GAELsC,GAAY,WACd,OAAOpc,GAAaY,QAAQ,QAE1Byb,GAAiB,WACnB,OAAOrc,GAAaY,QAAQ,aAE1BrG,GAAU,SAAUiQ,EAAM3J,EAAKgI,GACjC,IAAIyT,EAAUP,GAAOvR,EAAM3J,GAQ3B,OAPA+B,GAAOiG,GAAO,SAAUxT,EAAG6D,GACf,OAAN7D,EACF4T,GAAOqT,EAASpjB,GAEhByP,GAAI2T,EAASpjB,EAAG7D,MAGbinB,GAELC,GAAe,SAAU/R,GAC3B,OAAOA,GAELgS,GAAS,SAAUrV,GACrB,OAAO,WACL,OAAOnH,GAAaY,QAAQ,KAAMuG,EAAIpH,OA2BtC0c,GAAiB,SAAUC,EAAQvV,EAAKwV,GAC1C,IAAIC,EAAW,SAAUC,EAAM1T,GA1iCtB,IAAUqK,EAAQrX,EACvB2gB,EACAC,EAFevJ,EA2iCZqJ,EAAKxb,QA3iCelF,EA2iCNgN,EA1iCjB2T,EAAYtJ,EAAOzT,IACnBgd,EAAY5gB,EAAO4D,IACnBuJ,GAAcwT,IAAcxT,GAAcyT,KAC5CA,EAAUxT,MAAMyT,QAAUF,EAAUvT,MAAMyT,SAwiC1C5S,GAASjB,EAAO,UACK,IAAjB0T,EAAK9Y,SACPqG,GAASyS,EAAKxb,QAAS,UAoC3B,MAAO,CACL4b,IARW,SAAUJ,GACrB,IAAI1V,EAAMrC,GAAM+X,EAAKxb,SACjB4b,EAAMjd,GAAaY,QAAQ5K,GAAK6mB,EAAKxb,SAAU8F,EAAIpH,KAGvD,OAFA6c,EAASC,EAAMI,GACfP,EAAOG,EAAKxb,QAAS4b,GACdA,GAIPC,SAAUb,GACVtQ,IAAKyQ,GAAOrV,GACZqD,KArCY,SAAUqS,GACtB,IAAIM,EAAOrY,GAAM+X,EAAKxb,SAClByY,EAAK9Z,GAAaY,QAAQ5K,GAAK6mB,EAAKxb,SAAU8b,EAAKpd,KACnDqd,EAAUT,EAAehpB,MAAM,CACjC,SACA,KACA,IACA,IACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,QAEE0pB,EAAWD,EAAQhrB,OAAS,EAnDjB,SAAUkrB,EAASC,EAASH,GAE7C,OADcnM,GAAMqM,GACLjpB,KAAI,SAAUmpB,GAC3B,IAAIC,EAAiBL,EAAQhS,KAAK,KAC9BhG,EAAUqC,GAAY+V,EAAWC,GAAgB,SAAUpc,GAC7D,OAAOS,GAAKT,EAASic,MAEvB,OAAO1lB,EAAMwN,GAAS,SAAU7M,EAAM2M,GACpC,IAAIwY,EAAe7B,GAAQ3W,GAG3B,OAFA+D,GAAOyU,EAAc,mBACrB9L,GAAOrZ,EAAMmlB,GACNA,IACNH,MACF5pB,MAAM4pB,GAsC6BI,CAAad,EAAKxb,QAASyY,EAAIsD,GAAWtD,EAK9E,OAJAlI,GAAOyL,EAAUrd,GAAaY,QAAQ,OACtCgc,EAASC,EAAM/C,GAtCc,SAAU6B,EAAUxS,GACnDvG,GAAOsZ,IAAwB,SAAU0B,EAAiBC,GACxD,OAAO7U,GAAO2S,EAAUkC,GAAenpB,QAAO,SAAUopB,GACtD,OAAO5mB,EAAS0mB,EAAiBE,MAChCxpB,MAAK,SAAUwpB,GAChB,OAAOnV,GAAIQ,EAAO0U,EAAeC,SAkCnCC,CAA2BlB,EAAKxb,QAASyY,GACzC4C,EAAOG,EAAKxb,QAASyY,GACdA,GAcPvf,QAASA,GACTyjB,IAAK7B,KAGL8B,GAAQ,SAAU9W,GACpB,MAAO,CACL8V,IAAKb,GACLc,SAAUb,GACVtQ,IAAKyQ,GAAOrV,GACZqD,KAAM2R,GACN5hB,QAASgiB,GACTyB,IAAK7B,KAUL+B,GAAY,SAAUC,GACxB,OAAO9pB,EAAI8pB,EAAOne,GAAaH,UAG7Bue,GAAY,SAAUC,GACxB,OAAOrF,GAAKqF,EAAW/lB,MAAO3G,EAAS,IAAKE,EAAUwG,IAEpDimB,GAAa,SAAUD,GACzB,IAAIE,EAAU,SAAU/c,EAAM7L,GAC5B,OAAOqT,GAAOxH,EAAM7L,GAAMnB,QAAO,SAAUgqB,GACzC,OAAO9T,SAAS8T,EAAM,IAAM,MAM5B9jB,EAAa0jB,GAAUC,GAC3B,OAAO3jB,EAAWtI,OAAS,GAAKqC,EAAOiG,GAJjB,SAAU8G,GAC9B,OAAO+c,EAAQ/c,EAAM,YAAc+c,EAAQ/c,EAAM,cAGmBhM,EAAST,KAAK2F,GAAclF,EAAS1C,QAEzG2rB,GAAW,SAAU/S,EAAO2S,EAAYK,GAC1C,OAAO1F,GAAKqF,EAAW/lB,MAAO9C,EAAS1C,MAAM,SAAUmR,GACrD,OAAIA,EAAM7R,QAAU,EACXoD,EAAS1C,OAETykB,GAAY7L,EAAOgT,EAAS3H,sBAAuB2H,EAAS1H,sBAAsB3iB,KAAI,SAAUsa,GACrG,MAAO,CACLA,OAAQA,EACR1K,MAAOA,QAIZzO,EAAS1C,OAGV6rB,GAAc,oBAGdC,GAAmB,0BAEnBC,GAAkB,yBAGlBH,GAAW,CACbI,SAAUH,GACV3E,iBATwB,8CAUxB+E,cAAeH,GACf7H,sBAR6B,0DAS7BiI,aAAcH,GACd7H,qBAR4B,yDAW1BiI,GAAS,SAAUzU,GACrB,MAAO,CACLnJ,QAASmJ,EACTiU,SAAUjpB,EAAS1C,OACnBwrB,WAAY9oB,EAAS1C,OACrBsrB,UAAW,CAAC5T,KAGZ0U,GAAU,SAAUb,EAAY3S,EAAOlB,GACzC,MAAO,CACLnJ,QAASmJ,EACTiU,SAAUA,GAAS/S,EAAO2S,EAAYK,IACtCJ,WAAYA,GAAWD,GACvBD,UAAWA,GAAUC,KAiCrBc,GAAiB,SAAUC,EAAQf,EAAYgB,EAASC,GAC1DF,EAAOG,GAAG,oBAAoB,SAAUlZ,IAOlB,IAAhBA,EAAE+X,WACJpF,GAAKqF,EAAW/lB,MAAO5G,GAPF,SAAUuS,GAC/BoC,EAAEmZ,iBAlBc,SAAUvb,GAC9B,OAAOyH,GAAMzH,EAAM,IAAI5P,IAAIynB,IAAMznB,KAAI,SAAUioB,GAC7C,MAAO,CAACvC,GAAQuC,EAhDO,2BAiErBmD,CAAgBxb,GAAO3P,MAAK,SAAU6d,GACpC9L,EAAEqZ,QAAuB,SAAbrZ,EAAEsZ,OAVD,SAAUxN,GAC7B,OAAO9d,EAAI8d,GAAU,SAAU9Q,GAC7B,OAAOA,EAAQtB,IAAI6f,aAClBxU,KAAK,IAOgCyU,CAAe1N,GAfjC,SAAUiN,EAAQjN,GACxC,OAAO9d,EAAI8d,GAAU,SAAU9G,GAC7B,OAAO+T,EAAOhB,UAAU0B,WAAWC,UAAU1U,EAAItL,IAAK,OACrDqL,KAAK,IAY2D4U,CAAkBZ,EAAQjN,QAI1CzgB,MAGnD0tB,EAAOG,GAAG,oBAAoB,SAAUlZ,IAClB,IAAhBA,EAAE+X,YAAkC,IAAZ/X,EAAE4X,OACdzoB,EAASC,KAAK2pB,EAAOrf,IAAIkgB,UAAUb,EAAOhB,UAAU8B,WAAY,UACtE5rB,MAAK,SAAU6rB,GACrB,IAAI3V,EAAOxK,GAAaH,QAAQsgB,GAChCzU,GAAMlB,GAAMlW,MAAK,SAAUoX,GACzB,IAzHiBxL,EAAMC,EAE3BC,EA0H4BiL,EAHpB8G,EAAWzd,GAzHEwL,EAyHgBmG,EAAEqZ,SAvHvCtf,GADMD,GAASE,UACLC,cAAc,QACxBC,UAAYL,EACT0F,GAAS5F,GAAaH,QAAQO,MAqHgB,SAAUsf,GACrD,MAAyB,SAAlB1pB,GAAK0pB,MAKd,GAAwB,IAApBvN,EAAS/f,SAHWiZ,EAGa8G,EAAS,GAFvB,UAAdnc,GAAKqV,IAEqC,CACjDhF,EAAEmZ,iBACF,IAAIrY,EAAMnH,GAAaH,QAAQuf,EAAOgB,UAClCC,EAAapC,GAAM9W,GACnBmZ,EA1DF,SAAUjf,EAASkf,EAAWF,GAC1C,MAAO,CACLhf,QAASA,EACTkf,UAAWA,EACXF,WAAYA,GAsDUG,CAAQhW,EAAM2H,EAAS,GAAIkO,GACzChB,EAAQoB,WAAW/U,EAAO4U,GAAShsB,MAAK,SAAUosB,GAChDtB,EAAOhB,UAAUuC,OAAOD,GACxBtB,EAAOwB,QACPtB,EAAcuB,MAAMnV,iBAS9BwM,GAAMH,GAAa,CACrB,CAAEjlB,KAAM,IACR,CAAEguB,KAAM,CAAC,UACT,CACEC,KAAM,CACJ,QACA,SAGJ,CACEC,OAAQ,CACN,OACA,QACA,SAGJ,CACEC,MAAO,CACL,OACA,YAIFC,GAAgBxoB,EAAS,GAAIwf,IAoB7BiJ,GAAY,SAAUC,EAAOnV,EAAQoV,EAAMC,EAAWC,GACxD,IAAI/Z,EAAS4Z,EAAMvqB,MAAM,GACrB2qB,EApBW,SAAUJ,EAAOtb,GAChC,OAAqB,IAAjBsb,EAAMhvB,OACD8uB,GAAcpuB,OAEF,IAAjBsuB,EAAMhvB,OACD8uB,GAAcJ,KAAK,GAEd,IAAVhb,EACKob,GAAcH,KAAK,EAAG,GAE3Bjb,IAAUsb,EAAMhvB,OAAS,EACpB8uB,GAAcD,MAAMnb,EAAQ,EAAGA,GAEpCA,EAAQ,GAAKA,EAAQsb,EAAMhvB,OAAS,EAC/B8uB,GAAcF,OAAOlb,EAAQ,EAAGA,EAAOA,EAAQ,GAEjDob,GAAcpuB,OAIP2uB,CAAWL,EAAOnV,GAC5BiN,EAASvnB,EAAS0C,EAAImT,EAAQ7V,EAAS,KAa3C,OAAO6vB,EAAQjuB,KAAK2lB,GAZP,SAAUpT,GACrB,OAAOwb,EAAUI,kBAAkBla,EAAO1B,GAAQub,MAEvC,SAAUvb,EAAO6b,GAC5B,OAAOJ,EAAOK,mBAAmBpa,EAAQ1B,EAAO6b,EAAMN,EAAMC,EAAUO,eAAgBP,EAAUQ,eAEnF,SAAUjF,EAAM/W,EAAO6b,GACpC,OAAOJ,EAAOQ,iBAAiBva,EAAQqV,EAAM/W,EAAO6b,EAAMN,EAAMC,EAAUO,eAAgBP,EAAUQ,eAExF,SAAUjF,EAAM/W,GAC5B,OAAOyb,EAAOS,oBAAoBxa,EAAQqV,EAAM/W,EAAOub,EAAMC,EAAUO,eAAgBP,EAAUQ,gBAKjGG,GAAM,SAAUxpB,GAKlB,IAJA,IAAId,EAAI,GACJV,EAAO,SAAUnF,GACnB6F,EAAEV,KAAKnF,IAEAyF,EAAI,EAAGA,EAAIkB,EAAIrG,OAAQmF,IAC9BkB,EAAIlB,GAAGjD,KAAK2C,GAEd,OAAOU,GAST,SAASuqB,GAAWlsB,EAAMmsB,GACxB,IASI7pB,EAAM,SAAU+I,GAClB,IAAI1J,EAAIwqB,EAAU9gB,GAClB,GAAI1J,GAAK,GAAW,OAANA,EAAY,CACxB,IAAImS,EAAMC,GAAM1I,EAASrL,GACzB,OAAOosB,WAAWtY,IAAQ,EAE5B,OAAOnS,GAGL0qB,EAAY,SAAUhhB,EAASihB,GACjC,OAAOvqB,EAAMuqB,GAAY,SAAUzqB,EAAK6R,GACtC,IAAI6Y,EAAMxY,GAAM1I,EAASqI,GACrB9X,OAAgBsC,IAARquB,EAAoB,EAAI7X,SAAS6X,EAAK,IAClD,OAAOC,MAAM5wB,GAASiG,EAAMA,EAAMjG,IACjC,IAOL,MAAO,CACL+W,IA/BQ,SAAUtH,EAASohB,GAC3B,IAAK9rB,EAAS8rB,KAAOA,EAAEvgB,MAAM,YAC3B,MAAM,IAAInO,MAAMiC,EAAO,wDAA0DysB,GAEnF,IAAI1iB,EAAMsB,EAAQtB,IACduJ,GAAcvJ,KAChBA,EAAIwJ,MAAMvT,GAAQysB,EAAI,OA0BxBnqB,IAAKA,EACLoqB,SAhBapqB,EAiBb+pB,UAAWA,EACXxU,IAVQ,SAAUxM,EAASzP,EAAO0wB,GAClC,IAAIK,EAAuBN,EAAUhhB,EAASihB,GAE9C,OADkB1wB,EAAQ+wB,EAAuB/wB,EAAQ+wB,EAAuB,IAYpF,IAwSMC,GAEAC,GAEAC,GAGAC,GAt8DgBliB,GAupDlBmiB,GAAQd,GAAU,SAAS,SAAU7gB,GACvC,OAAOA,EAAQtB,IAAIkjB,eAEjBC,GAAQ,SAAU7hB,GACpB,OAAO2hB,GAAM1qB,IAAI+I,IAEfqhB,GAAW,SAAUrhB,GACvB,OAAO2hB,GAAMN,SAASrhB,IAGpB8hB,GAAY,SAAU3W,GACxB,IAAIsB,EAAOtB,EAAUsB,KACjBsV,EAAO3rB,EAAMqW,EAAKvC,QAAS1Z,GAC3BwxB,EAAU5rB,EAAMqW,EAAKnC,KAAM9Z,GAC/B,OAAOwC,EAAI+uB,GAAM,SAAUnG,GAczB,OAAOqG,IAbQ,WACb,OAAO/uB,EAAK8uB,GAAS,SAAU1rB,GAC7B,OAAOoW,GAAUC,MAAMxB,EAAW7U,EAAGslB,GAAKvoB,QAAO,SAAUmP,GACzD,OAAOA,EAAOoI,SAAWgR,KACxBpoB,gBAGQ,SAAUgP,GACvB,OAA0B,IAAnBA,EAAOE,WAEE,WAChB,OAAOgK,GAAUC,MAAMxB,EAAW,EAAGyQ,UAKvCqG,GAAS,SAAUC,EAAUC,EAAUC,GACzC,IAAIC,EAAUH,IAKd,OAJoBvrB,EAAK0rB,EAASF,GACDpvB,SAAQ,WACvC,OAAOoB,EAASC,KAAKiuB,EAAQ,IAAItvB,QAAQqvB,MAEvBpvB,KAAI,SAAUwP,GAChC,OAAOA,EAAOxC,YAGdiL,GAAS,SAAUE,GACrB,IAAIsB,EAAOtB,EAAUsB,KACjBuV,EAAU5rB,EAAMqW,EAAKnC,KAAM9Z,GAC3BuxB,EAAO3rB,EAAMqW,EAAKvC,QAAS1Z,GAC/B,OAAOwC,EAAIgvB,GAAS,SAAUtX,GAgB5B,OAAOuX,IAfQ,WACb,OAAO/uB,EAAK6uB,GAAM,SAAUO,GAC1B,OAAO5V,GAAUC,MAAMxB,EAAWT,EAAK4X,GAAGjvB,QAAO,SAAUmP,GACzD,OAAOA,EAAOkI,MAAQA,KACrBxY,KAAK5B,EAAS,KAAK,SAAUkS,GAC9B,MAAO,CAACA,YAIC,SAAUA,GACvB,OAA0B,IAAnBA,EAAOC,WAEE,WAChB,OAAOiK,GAAUC,MAAMxB,EAAWT,EAAK,UAMzC6X,GAAS,SAAUzsB,EAAI2O,GACzB,GAAIA,EAAQ,GAAKA,GAAS3O,EAAG/E,OAAS,EACpC,OAAOoD,EAAS1C,OAElB,IAAIoI,EAAU/D,EAAG2O,GAAOvS,MAAK,WAC3B,IAAIswB,EAh5EM,SAAU1sB,GACtB,IAAIQ,EAAIf,EAAYzD,KAAKgE,EAAI,GAE7B,OADAQ,EAAEmsB,UACKnsB,EA64EMmsB,CAAQ3sB,EAAGN,MAAM,EAAGiP,IAC/B,OAAOtN,EAAQqrB,GAAM,SAAU7uB,EAAGuC,GAChC,OAAOvC,EAAEX,KAAI,SAAU0vB,GACrB,MAAO,CACLnyB,MAAOmyB,EACPC,MAAOzsB,EAAI,YAIhB,SAAUosB,GACX,OAAOnuB,EAAST,KAAK,CACnBnD,MAAO+xB,EACPK,MAAO,OAGPrC,EAAOxqB,EAAG2O,EAAQ,GAAGvS,MAAK,WAC5B,IAAIswB,EAAO1sB,EAAGN,MAAMiP,EAAQ,GAC5B,OAAOtN,EAAQqrB,GAAM,SAAU7uB,EAAGuC,GAChC,OAAOvC,EAAEX,KAAI,SAAU0vB,GACrB,MAAO,CACLnyB,MAAOmyB,EACPC,MAAOzsB,EAAI,YAIhB,SAAUjE,GACX,OAAOkC,EAAST,KAAK,CACnBnD,MAAO0B,EACP0wB,MAAO,OAGX,OAAO9oB,EAAQ3G,MAAK,SAAUovB,GAC5B,OAAOhC,EAAKttB,KAAI,SAAUf,GACxB,IAAI2wB,EAAS3wB,EAAE0wB,MAAQL,EAAEK,MACzB,OAAOpW,KAAKsW,IAAI5wB,EAAE1B,MAAQ+xB,EAAE/xB,OAASqyB,SAKvCE,GAAc,SAAUC,EAAOC,GACjC,OAAO,SAAUhjB,GACf,MAAiC,QAA1BijB,GAAajjB,GAAqBgjB,EAAQD,IAGjDE,GAAe,SAAUjjB,GAC3B,MAAuC,QAAhC0I,GAAM1I,EAAS,aAAyB,MAAQ,OAGrDkjB,GAAQrC,GAAU,UAAU,SAAU7gB,GACxC,IAAItB,EAAMsB,EAAQtB,IAClB,OAAOiH,GAAO3F,GAAWtB,EAAIykB,wBAAwBC,OAAS1kB,EAAI2kB,gBAEhEC,GAAQ,SAAUtjB,GACpB,OAAOkjB,GAAMjsB,IAAI+I,IAEfujB,GAAa,SAAUvjB,GACzB,OAAOkjB,GAAM7B,SAASrhB,IAGpB1J,GAAI,SAAUopB,EAAM8D,GAItB,MAAO,CACL9D,KAAMA,EACN8D,IAAKA,EACLC,UANc,SAAUhzB,EAAGqP,GAC3B,OAAOxJ,GAAEopB,EAAOjvB,EAAG+yB,EAAM1jB,MAQzB4jB,GAAgBptB,GAMhBqtB,GAAqB,SAAUhwB,EAAGO,GACpC,YAAUrB,IAANc,EACKA,OAEMd,IAANqB,EAAkBA,EAAI,GAG7B0vB,GAAW,SAAU5jB,GACvB,IAAI8F,EAAM9F,EAAQtB,IAAIgF,cAClBqC,EAAOD,EAAIC,KACX8d,EAAM/d,EAAIge,YACVjlB,EAAOiH,EAAIie,gBACf,GAAIhe,IAAS/F,EAAQtB,IACnB,OAAOglB,GAAc3d,EAAKie,WAAYje,EAAKke,WAE7C,IAAIC,EAAYP,GAAmBE,MAAAA,OAAiC,EAASA,EAAIM,YAAatlB,EAAKqlB,WAC/FE,EAAaT,GAAmBE,MAAAA,OAAiC,EAASA,EAAIQ,YAAaxlB,EAAKulB,YAChGE,EAAYX,GAAmB9kB,EAAKylB,UAAWve,EAAKue,WACpDC,EAAaZ,GAAmB9kB,EAAK0lB,WAAYxe,EAAKwe,YAC1D,OAAOC,GAASxkB,GAASyjB,UAAUW,EAAaG,EAAYL,EAAYI,IAEtEE,GAAW,SAAUxkB,GACvB,IAAItB,EAAMsB,EAAQtB,IAEdqH,EADMrH,EAAIgF,cACCqC,KACf,OAAIA,IAASrH,EACJglB,GAAc3d,EAAKie,WAAYje,EAAKke,WAExCte,GAAO3F,GAhCI,SAAUtB,GAC1B,IAAImX,EAAMnX,EAAIykB,wBACd,OAAOO,GAAc7N,EAAI6J,KAAM7J,EAAI2N,KAiC5BiB,CAAY/lB,GAFVglB,GAAc,EAAG,IAKxBgB,GAAU,SAAUha,EAAK5K,GAC3B,MAAO,CACL4K,IAAKA,EACL5K,EAAGA,IAGH6kB,GAAU,SAAU/I,EAAKnrB,GAC3B,MAAO,CACLmrB,IAAKA,EACLnrB,EAAGA,IAGHm0B,GAAU,SAAUzb,GAEtB,OADUya,GAASza,GACRuW,KAAO2B,GAASlY,IAEzB0b,GAAU,SAAU1b,GACtB,OAAOya,GAASza,GAAMuW,MAEpBoF,GAAc,SAAUrgB,EAAO0E,GACjC,OAAOwb,GAAQlgB,EAAOogB,GAAQ1b,KAE5B4b,GAAe,SAAUtgB,EAAO0E,GAClC,OAAOwb,GAAQlgB,EAAOmgB,GAAQzb,KAE5B6b,GAAS,SAAU7b,GACrB,OAAOya,GAASza,GAAMqa,KAEpByB,GAAa,SAAUxgB,EAAO0E,GAChC,OAAOub,GAAQjgB,EAAOugB,GAAO7b,KAE3B+b,GAAgB,SAAUzgB,EAAO0E,GACnC,OAAOub,GAAQjgB,EAAOugB,GAAO7b,GAAQoa,GAAWpa,KAE9Cgc,GAAgB,SAAUC,EAAcC,EAAcC,GACxD,GAAqB,IAAjBA,EAAMv0B,OACR,MAAO,GAET,IAAIw0B,EAAQvyB,EAAIsyB,EAAM9vB,MAAM,IAAI,SAAUgwB,EAAY/gB,GACpD,OAAO+gB,EAAWxyB,KAAI,SAAUmW,GAC9B,OAAOic,EAAa3gB,EAAO0E,SAG3Bsc,EAAWH,EAAMA,EAAMv0B,OAAS,GAAGiC,KAAI,SAAUmW,GACnD,OAAOkc,EAAaC,EAAMv0B,OAAS,EAAGoY,MAExC,OAAOoc,EAAMr0B,OAAO,CAACu0B,KAKnBrC,GAAS,CACXT,MAAOnyB,EACPk1B,UAAW,SAAUC,GACnB,OAAOR,GAAcF,GAAYC,GAAeS,IAElD1qB,KAAM+pB,IAgBJY,GAAW9C,GAdL,CACRH,MAAOnyB,EACPyK,KAAM4pB,GACNa,UAAW,SAAUC,GACnB,OAAOR,GAAcL,GAAaC,GAAcY,KAG1C,CACRhD,MAlBW,SAAU3C,GACrB,OAAQA,GAkBR/kB,KAAM2pB,GACNc,UAAW,SAAUC,GACnB,OAAOR,GAAcJ,GAAcD,GAAaa,MAIhDE,GAAQ,CACVlD,MAAO,SAAUmD,EAAQzb,GACvB,OAAOub,GAASvb,GAAOsY,MAAMmD,EAAQzb,IAEvCqb,UAAW,SAAU3D,EAAM1X,GACzB,OAAOub,GAASvb,GAAOqb,UAAU3D,EAAM1X,IAEzCpP,KAAM,SAAUkO,GACd,OAAOyc,GAASzc,GAAMlO,KAAKkO,KAI3B4c,GAAQ,CACVC,kBAAmB,CACjB,KACA,KACA,MACA,KACA,KACA,MACA,KACA,MACA,KACA,KACA,KACA,KACA,OACA,OACA,KACA,KACA,IACA,KACA,KACA,KACA,MAEFC,MAAO,CACL,KACA,MAEFC,SAAU,CAAC,KACXlV,MAAO,CAAC,KAENmV,IAGE3E,GAAe,kBAKfE,GAAyB,CAC3B,WACAH,aALEE,GAAM,SAAU1B,GAClB,MAAO,MAAQA,EAAQ,OALrBwB,GAAgB,UASyBE,GAAID,IAC/C4E,YAAsB3E,GAAID,IAC1BD,GAAgBE,GAAID,KACpBzX,KAAK,KAEA,IAAIsc,OAAO,aADO3E,GACP,YAShB4E,GAAQ,SAAUvG,EAAOwG,GAE3B,OADYpyB,EAASC,KAAK+xB,GAAQK,KAAKzG,IAC1B7sB,MAAK,SAAUoyB,GAC1B,IAAI/0B,EAAQ0I,OAAOqsB,EAAM,IACrBmB,EAAUnB,EAAM,GACpB,OAZS,SAAUoB,EAAMH,GAC3B,OAAOpzB,EAAOozB,GAAU,SAAU/vB,GAChC,OAAOrD,EAAO4yB,GAAMvvB,IAAM,SAAUmwB,GAClC,OAAOD,IAASC,QASdC,CAAOH,EAASF,GACXpyB,EAAST,KAAK,CACnBnD,MAAOA,EACPm2B,KAAMD,IAGDtyB,EAAS1C,WAKlBo1B,GAAiB,WACnB,IAAIltB,EAAU4E,KAAW5E,QACzB,OAAOA,EAAQgC,QAAUhC,EAAQ8B,UAM/BqrB,GAAU,SAAU9c,EAAKrV,EAAMyU,GACjC,OALa,SAAU2d,EAAI3d,GAC3B,IAAI/S,EAAM0qB,WAAWgG,GACrB,OAAO5F,MAAM9qB,GAAO+S,EAAW/S,EAGxB2wB,CAASte,GAAMsB,EAAKrV,GAAOyU,IA8BhC6d,GAAY,SAAU9d,GACxB,OAAO0d,KA7BiB,SAAU1d,GAClC,IAAIia,EAASja,EAAKzK,IAAIykB,wBAAwBC,OAE9C,MAAkB,eADF1a,GAAMS,EAAM,cAEnBia,EAOAA,EALU0D,GAAQ3d,EAAM,cAAe,GAC1B2d,GAAQ3d,EAAM,iBAAkB,IACpC2d,GAAQ3d,EAAM,mBAAoB,GAC/B2d,GAAQ3d,EAAM,sBAAuB,IAoBhC+d,CAAoB/d,GAAQ2d,GAAQ3d,EAAM,SAAUma,GAAMna,KAElFge,GAAW,SAAUhe,GACvB,OAAO0d,KAlBgB,SAAU1d,GACjC,IAAI0c,EAAQ1c,EAAKzK,IAAIykB,wBAAwB0C,MAE7C,MAAkB,eADFnd,GAAMS,EAAM,cAEnB0c,EAOAA,EALWiB,GAAQ3d,EAAM,eAAgB,GAC7B2d,GAAQ3d,EAAM,gBAAiB,IACjC2d,GAAQ3d,EAAM,oBAAqB,GAClC2d,GAAQ3d,EAAM,qBAAsB,IAS9Bie,CAAmBje,GAAQ2d,GAAQ3d,EAAM,QAAS0Y,GAAM1Y,KAGhFke,GAA4B,iBAC5BC,GAAuB,qBACvBC,GAAiB,SAAUvd,EAAKwd,GAClC,IAr/D2BxnB,EAq/DvBynB,GAr/DuBznB,EAq/DOgK,EAp/D3B7V,EAASC,KAAK4L,EAAQtB,IAAIgpB,cAAc10B,IAAI2L,GAAaH,UAo/DzBlM,MAAM0T,GAAQvC,GAAMuG,KAC3D,OAAOwd,EAAOxd,GAAOwd,EAAOC,GAAkB,KAE5CE,GAAgB,SAAUxe,EAAM2c,GAClCvd,GAAMY,EAAM,QAAS2c,EAAS,OAE5B8B,GAAqB,SAAUze,EAAM2c,GACvCvd,GAAMY,EAAM,QAAS2c,EAAS,MAE5B+B,GAAY,SAAU1e,EAAM2c,GAC9Bvd,GAAMY,EAAM,SAAU2c,EAAS,OAe7BgC,GAAqB,SAAUv3B,EAAO4Y,EAAMqe,EAAQO,GACtD,IAAIC,EAAS3e,SAAS9Y,EAAO,IAC7B,OAAOgK,GAAShK,EAAO,MAAuB,UAAfoE,GAAKwU,GAVxB,SAAUA,EAAM6e,EAAQR,EAAQO,GAC5C,IAAIE,EAAU5d,GAAMlB,GAAMnW,KAAI,SAAUqX,GACtC,IAAI6d,EAAQV,EAAOnd,GACnB,OAAOkC,KAAK4b,MAAMH,EAAS,IAAME,MAChC51B,MAAM01B,GAET,OADAD,EAAO5e,EAAM8e,GACNA,EAIiDG,CAAQjf,EAAM6e,EAAQR,EAAQO,GAAUC,GAE9FK,GAAiB,SAAUlf,GAC7B,IAAI5Y,EAlBe,SAAU4Y,GAC7B,OAAON,GAAOM,EAAM,UAAU5W,YAAW,WACvC,OAAO00B,GAAU9d,GAAQ,QAgBfmf,CAAenf,GAC3B,OAAK5Y,EAGEu3B,GAAmBv3B,EAAO4Y,EAAMma,GAAOuE,IAFrCvE,GAAMna,IASbof,GAAc,SAAUvoB,GAE1B,OADe6I,GAAO7I,EAAS,SACf9N,MAAK,WACnB,OAAOiC,EAASC,KAAKqT,GAAMzH,EAAS,aACnC,SAAU6lB,GACX,OAAO1xB,EAAST,KAAKmyB,OAGrB2C,GAA2B,SAAUC,EAAWxI,GAClD,OAAOwI,EAAYxI,EAAUyI,aAAe,KAW1CC,GAAqB,SAAUxf,EAAM8W,GAEvC,OADYsI,GAAYpf,GACXjX,MAAK,WAChB,IAAI02B,EAAW/G,GAAM1Y,GACrB,OAAOqf,GAAyBI,EAAU3I,MACzC,SAAUhT,GACX,OAfuB,SAAUjN,EAAS6lB,EAAO5F,GACnD,IAAI4I,EAAexB,GAA0Bb,KAAKX,GAClD,GAAqB,OAAjBgD,EACF,OAAO9H,WAAW8H,EAAa,IAE/B,IAAID,EAAWzB,GAASnnB,GACxB,OAAOwoB,GAAyBI,EAAU3I,GASnC6I,CAAqB3f,EAAM8D,EAAGgT,OAkBrC8I,GAAgB,SAAU5f,EAAM8W,GAElC,OADYsI,GAAYpf,GACXjX,MAAK,WAChB,OAAOi1B,GAAShe,MACf,SAAU8D,GACX,OAjBkB,SAAUjN,EAAS6lB,EAAO5F,GAC9C,IAAI+I,EAAa1B,GAAqBd,KAAKX,GAC3C,GAAmB,OAAfmD,EACF,OAAO3f,SAAS2f,EAAW,GAAI,IAEjC,IAAIH,EAAexB,GAA0Bb,KAAKX,GAClD,OAAqB,OAAjBgD,EAToB,SAAUJ,EAAWxI,GAC7C,OAAOwI,EAAY,IAAMxI,EAAUyI,aAU1BO,CADUlI,WAAW8H,EAAa,IACF5I,GAElCkH,GAASnnB,GAOPkpB,CAAgB/f,EAAM8D,EAAGgT,OAGhCkJ,GAAc,SAAUhgB,GAC1B,OA1DU,SAAUA,EAAM7U,EAAMhD,GAGhC,OAFQA,EAAE6X,GACCG,GAAQH,EAAM7U,GAwDlB80B,CAAMjgB,EAAM,UAAWkf,KAY5BgB,GAAkB,SAAUlgB,EAAM2c,EAAQY,GAC5Cne,GAAMY,EAAM,QAAS2c,EAASY,IAK5B4C,GAAuB,SAAUjf,GACnC,OAAOkd,GAAeld,EAAOwX,IAAS,KAepC0H,GAA2Bj5B,EAAS+2B,IACpCmC,GAAsBl5B,EAASg3B,IAE/BmC,IA1pEkBjqB,GA0pEJ,MAzpET,SAAUwF,GACf,OAAO3B,GAAU2B,IAAMrQ,GAAKqQ,KAAOxF,KAypEnCkqB,GAAW,SAAUvgB,EAAMd,EAAUmf,GACvC,OAAO3e,GAAOM,EAAMd,GAAUnW,MAAK,WACjC,OAAOs1B,EAAOre,GAAQ,QACrB,SAAUL,GACX,OAAOA,MAGP6gB,GAAU,SAAUxgB,EAAM8W,GAI5B,OAAOyJ,GAASvgB,EAAM,SAHP,SAAUnE,GACvB,OAAOykB,GAAMzkB,GAAK6c,GAAM7c,GAAK+jB,GAAc/jB,EAAGib,OAI9C2J,GAAU,SAAUzgB,GACtB,OAAOugB,GAASvgB,EAAM,SAAUggB,KAU9BU,GAAe,SAAUC,EAASrlB,EAAOslB,EAAS12B,EAAQm0B,EAAQpe,GACpE,OAAO0gB,EAAQz2B,OAAOA,GAAQnB,MAAK,WACjC,OAAOkX,EAASmZ,GAAOwH,EAAStlB,OAC/B,SAAU0E,GACX,OAAOqe,EAAOre,OAGd6gB,GAAe,SAAU7e,EAAWd,EAAO8c,EAAU/d,EAAU6W,GACjE,IAAIgK,EAAcnI,GAAU3W,GACxBjB,EAAUwC,GAAUS,WAAWhC,GAjBtB,SAAUA,GACvB,OAAOnY,EAAI0Z,GAAUQ,YAAY/B,IAAY,SAAUP,GACrD,OAAOzW,EAASC,KAAKwW,EAAO5K,YAekBkqB,CAAS/e,GAAa8e,EAClEF,EAAU,CAAC51B,EAAST,KAAKmyB,GAAM5qB,KAAKoP,KAASnZ,OAAO8B,EAAI6yB,GAAMH,UAAUuE,EAAa5f,IAAQ,SAAU8f,GACzG,OAAOA,EAAIn3B,KAAI,SAAUwE,GACvB,OAAOA,EAAE/G,SAGT25B,EAAY/4B,EAAIkY,IACpB,OAAOvW,EAAIkX,GAAS,SAAUsb,EAAYlD,GACxC,OAAOuH,GAAarE,EAAYlD,EAAGyH,EAASK,GAAW,SAAUxf,GAC/D,GArBc,SAAUzB,GAC5B,OAAQsgB,GAAMtgB,IAASN,GAAOM,EAAM,SAAS9W,SAoBrCg4B,CAAczf,GAChB,OAAOuc,EAASvc,EAAQqV,GAExB,IA7lBiBtsB,EAAGrC,EA6lBhB6X,GA7lBaxV,EA6lBGs2B,EAAY3H,GA7lBZhxB,EA6lBgBd,EA5lBnCmD,MAAAA,EAAgCrC,EAAEqC,GAAKQ,EAAS1C,QA6lBjD,OAAOo4B,GAAa1gB,EAAMmZ,EAAGyH,EAASK,GAAW,SAAUjhB,GACzD,OAAOC,EAASjV,EAAST,KAAKmuB,GAAM1Y,OACnCC,KAEJA,OAGHkhB,GAAa,SAAUC,GACzB,OAAOA,EAAQv3B,KAAI,SAAUwc,GAC3B,OAAOA,EAAI,QACVld,MAAM,KAcPk4B,GAAiB,SAAUrf,EAAWd,EAAO4V,GAC/C,OAAO+J,GAAa7e,EAAWd,EAAO0e,IAAe,SAAUwB,GAC7D,OAAOA,EAAQh4B,WAAW0tB,EAAUO,gBACnCP,IAEDwK,GAAgB,SAAUtf,EAAWd,EAAOqgB,EAAWzD,EAAW7d,GACpE,IAAIkB,EAAOW,GAAOE,GACd4e,EAAU,CAAC51B,EAAST,KAAKg3B,EAAUzvB,KAAKoP,KAASnZ,OAAO8B,EAAI03B,EAAUhF,UAAUpb,EAAMD,IAAQ,SAAU8f,GAC1G,OAAOA,EAAIn3B,KAAI,SAAUwE,GACvB,OAAOA,EAAEsI,SAGb,OAAO9M,EAAIsX,GAAM,SAAUkb,EAAYlD,GACrC,OAAOuH,GAAarE,EAAYlD,EAAGyH,EAAS14B,EAAImY,IAAayd,EAAW7d,OAYxE8e,GAAQ,SAAU/tB,EAAOqZ,EAAKmX,GAEhC,IADA,IAAIr0B,EAAI,EACCJ,EAAIiE,EAAOjE,EAAIsd,EAAKtd,IAC3BI,QAAqBzD,IAAhB83B,EAASz0B,GAAmBy0B,EAASz0B,GAAK,EAEjD,OAAOI,GAuBLs0B,GAA4B,SAAUzf,EAAW0f,GACnD,IAAI55B,EAAMyb,GAAUM,UAAU7B,GAC9B,OAAOnY,EAAI/B,GAAK,SAAUkY,GACxB,IAAIia,EAAS8E,GAAM/e,EAAKuB,IAAKvB,EAAKuB,IAAMvB,EAAK1G,QAASooB,GACtD,MAAO,CACL7qB,QAASmJ,EAAKnJ,QACdojB,OAAQA,EACR3gB,QAAS0G,EAAK1G,aAkBhBqoB,GAAc,SAAU3f,EAAW4f,GACrC,OAAIre,GAAUS,WAAWhC,GApCM,SAAUA,EAAW4f,GACpD,IAAIC,EAASte,GAAUQ,YAAY/B,GACnC,OAAOnY,EAAIg4B,GAAQ,SAAUpgB,EAAQnG,GACnC,MAAO,CACLzE,QAAS4K,EAAO5K,QAChB6lB,MAAOkF,EAAOtmB,GACd/B,QAASkI,EAAOlI,YA+BXuoB,CAA2B9f,EAAW4f,GAhDlB,SAAU5f,EAAW4f,GAClD,IAAI95B,EAAMyb,GAAUM,UAAU7B,GAC9B,OAAOnY,EAAI/B,GAAK,SAAUkY,GACxB,IAAI0c,EAAQqC,GAAM/e,EAAKyB,OAAQzB,EAAKyB,OAASzB,EAAKzG,QAASqoB,GAC3D,MAAO,CACL/qB,QAASmJ,EAAKnJ,QACd6lB,MAAOA,EACPnjB,QAASyG,EAAKzG,YA2CTwoB,CAAyB/f,EAAW4f,IAG3CI,GAAsB,SAAUhgB,EAAW4f,EAAQ9K,GACrD,IAAImL,EAAWN,GAAY3f,EAAW4f,GACtC93B,EAAKm4B,GAAU,SAAUjiB,GACvB8W,EAAUoL,gBAAgBliB,EAAKnJ,QAASmJ,EAAK0c,WAG7CyF,GAAc,SAAUjhB,EAAOsY,EAAOle,EAAO8mB,EAAUtL,GACzD,IAAI9U,EAAYuB,GAAU1B,UAAUX,GAChC2V,EAAOC,EAAUuL,aAAa7I,GAC9BoI,EAAS9K,EAAUwL,UAAUtgB,EAAW8U,GACxCyL,EAAejnB,IAAU0G,EAAUsB,KAAKvC,QAAU,EAClDyhB,EAAcJ,EAASK,gBAAgBb,EAAQtmB,EAAOub,EAAMC,EAAUO,eAAgBkL,GACtFG,EAAS/L,GAAUiL,EAAQtmB,EAAOknB,EAAa1L,EAAWsL,GAC1DO,EAAY94B,EAAI64B,GAAQ,SAAUE,EAAI71B,GACxC,OAAO61B,EAAKhB,EAAO70B,MAErBi1B,GAAoBhgB,EAAW2gB,EAAW7L,GAC1CsL,EAASS,YAAY/L,EAAUgM,iBAAkBN,EAAaD,IAE5DQ,GAAe,SAAU7hB,EAAOsY,EAAOle,EAAOimB,GAChD,IAAIvf,EAAYuB,GAAU1B,UAAUX,GAChCwgB,EA1FgB,SAAU1f,EAAWd,EAAOqgB,GAChD,OAAOD,GAActf,EAAWd,EAAOqgB,EAAWvB,IAAa,SAAUoB,GACvE,OAAOA,EAAQh4B,WAAWoX,OAwFdwiB,CAAgBhhB,EAAWd,EAAOqgB,GAC5C0B,EAAap5B,EAAI63B,GAAS,SAAUwB,EAAIn2B,GAC1C,OAAOuO,IAAUvO,EAAIqW,KAAKC,IAAImW,EAAQ0J,EAAI1iB,MAAe0iB,KAEvDC,EAAe1B,GAA0Bzf,EAAWihB,GACpDG,EA/Ce,SAAUphB,EAAW0f,GACxC,OAAO73B,EAAImY,EAAUla,KAAK,SAAUyZ,EAAKxU,GACvC,MAAO,CACL8J,QAAS0K,EAAI1K,QACbojB,OAAQyH,EAAQ30B,OA2CFs2B,CAAerhB,EAAWihB,GAC5Cn5B,EAAKs5B,GAAa,SAAU7hB,GAC1Bmd,GAAUnd,EAAI1K,QAAS0K,EAAI0Y,WAE7BnwB,EAAKq5B,GAAc,SAAUnjB,GAC3B0e,GAAU1e,EAAKnJ,QAASmJ,EAAKia,WAE/B,IAAI8E,EA5CG3xB,EA4CW61B,GA5CI,SAAUl4B,EAAGP,GACjC,OAAOO,EAAIP,IACV,GA2CHk0B,GAAUxd,EAAO6d,IAQfuE,GAAO,SAAUnH,GACnB,OAAOtyB,EAAIsyB,EAAOh1B,EAAS,KAEzBo8B,GAAW,SAAUC,EAAOC,EAAYC,EAAUC,EAASx7B,GAC7D,OAAOA,EAAEq7B,EAAMn3B,MAAM,EAAGo3B,IAAa17B,OAAO47B,GAAS57B,OAAOI,EAAEq7B,EAAMn3B,MAAMq3B,MAExEE,GAAmB,SAAU7mB,GAC/B,OAAO,SAAUymB,EAAOloB,EAAOke,EAAOqK,GACpC,GAAK9mB,EAAUyc,GAER,CACL,IAAIsF,EAAU1b,KAAKC,IAAIwgB,EAAaL,EAAMloB,GAAS8H,KAAKsW,IAAIF,IACxDsK,EAAO1gB,KAAKsW,IAAIoF,EAAU0E,EAAMloB,IACpC,OAAOke,GAAS,EAAIsK,GAAQA,EAJ5B,OAAOtK,IAQTuK,GAAqBH,IAAiB,SAAUpK,GAClD,OAAOA,EAAQ,KAEbwK,GAAaJ,GAAiBv7B,GAC9Bw6B,GAAc,WAChB,IAOIoB,EAAqB,SAAUT,EAAOloB,EAAOke,EAAOqK,GACtD,IAAIK,GAAS,IAAM1K,GAAS,IACxB2K,EAAU/gB,KAAKC,IAAIwgB,GAAcL,EAAMloB,GAASke,GAAS0K,GAC7D,OAAOr6B,EAAI25B,GAAO,SAAUY,EAAMC,GAEhC,OADcA,IAAQ/oB,EAAQ6oB,EAAUC,EAAOF,GAC9BE,MAGjBhN,EAAqB,SAAUoM,EAAOloB,EAAO6b,EAAMqC,EAAOqK,EAAaS,GACzE,OAAIA,EACKL,EAAmBT,EAAOloB,EAAOke,EAAOqK,GAjB7B,SAAUL,EAAOloB,EAAO6b,EAAMqC,EAAOqK,GACzD,IAAIU,EAAeR,GAAmBP,EAAOloB,EAAOke,EAAOqK,GAC3D,OAAON,GAASC,EAAOloB,EAAO6b,EAAO,EAAG,CACtCoN,EACA,GACCjB,IAcMkB,CAAgBhB,EAAOloB,EAAO6b,EAAMqC,EAAOqK,IAiBtD,MAAO,CACLhB,YAZgB,SAAU4B,EAASjL,GACnC,OAAOiL,EAAQjL,IAYfiJ,gBAAiBsB,GACjB3M,mBAAoBA,EACpBG,iBAlBqB,SAAUiM,EAAOkB,EAAOppB,EAAO6b,EAAMqC,EAAOqK,EAAaS,GAC9E,OAAOlN,EAAmBoM,EAAOloB,EAAO6b,EAAMqC,EAAOqK,EAAaS,IAkBlE9M,oBAbwB,SAAUgM,EAAOkB,EAAOppB,EAAOke,EAAOqK,EAAaS,GAC3E,GAAIA,EACF,OAAOL,EAAmBT,EAAOloB,EAAOke,EAAOqK,GAE/C,IAAIU,EAAeR,GAAmBP,EAAOloB,EAAOke,EAAOqK,GAC3D,OAAOP,GAAKE,EAAMn3B,MAAM,EAAGiP,IAAQvT,OAAO,CAACw8B,OAuF7CI,GA5BO,SAAU9tB,EAAS+tB,GAC5B,IAAIlqB,EAAS1P,EAASC,KAAK4L,EAAQtB,IAAIqlB,iBAAiB/wB,IAAI2L,GAAaH,SAASlM,MAAM0N,GACxF,MAAO,CACL6D,OAAQvT,EAASuT,GACjBmqB,KAAM19B,EAAS0P,GACfiuB,OAAQ39B,EAASozB,GAAc,EAAG,IAClCqK,YAAaA,IAsBbD,GARS,SAAUI,EAAUhzB,EAAQ6yB,GACvC,MAAO,CACLlqB,OAAQvT,EAAS4K,GACjB8yB,KAAM19B,EAAS49B,GACfD,OAAQ39B,EAASozB,GAAc,EAAG,IAClCqK,YAAaA,IASbI,GAAQzX,GAAa,CACvB,CAAE0X,QAAS,CAAC,QACZ,CAAEC,OAAQ,CAAC,UACX,CAAEC,QAAS,CAAC,YAEVC,GAAc,SAAU/zB,EAAQlG,EAAM/D,GACxC,IAAIi+B,EAAYj+B,EAAMk+B,UAAU,EAAGl+B,EAAMQ,OAASyJ,EAAOzJ,QACrD+0B,EAAS/E,WAAWyN,GACxB,OAAOA,IAAc1I,EAAOryB,WAAaa,EAAKwxB,GAAUqI,GAAMC,QAAQ79B,IAWpEm+B,GAAOr3B,EAASA,EAAS,GAAI82B,IAAQ,CAAE/5B,KAT9B,SAAU7D,GACrB,OAAIgK,GAAShK,EAAO,KACXg+B,GAAY,IAAKJ,GAAMG,QAAS/9B,GAErCgK,GAAShK,EAAO,MACXg+B,GAAY,KAAMJ,GAAME,OAAQ99B,GAElC49B,GAAMC,QAAQ79B,MA0CnBo+B,GAAqB,SAAUC,EAAc7D,EAAQ8D,GACvD,OAAOD,EAAa18B,MAAK,WACvB,OAAO64B,KACN,SAAUhE,GACX,OA7BmB,SAAUgE,EAAQ8D,EAAYC,GACnD,IAAIC,EAAQD,EAAgBD,EAC5B,OAAO77B,EAAI+3B,GAAQ,SAAU9d,GAE3B,OADcyhB,GAAKt6B,KAAK6Y,GACT/a,MAAK,WAClB,OAAO+a,KACN,SAAU8Z,GACX,OAAOA,EAAKgI,EAAQ,QACnB,SAAUC,GACX,OAAOA,EAAK,IAAMF,EAAgB,WAoB7BG,CAAiBlE,EAAQ8D,EAAY9H,MAC3C,SAAUmI,GACX,OA5CwB,SAAUnE,EAAQ8D,GAC5C,OAAO77B,EAAI+3B,GAAQ,SAAU9d,GAE3B,OADcyhB,GAAKt6B,KAAK6Y,GACT/a,MAAK,WAClB,OAAO+a,KACN,SAAU8Z,GAEX,OADYA,EAAK8H,EAAa,IACf,OACd,SAAUG,GACX,OAAOA,EAAK,UAmCPG,CAAsBpE,EAAQ8D,OAGrCO,GAAe,SAAUrE,EAAQ8D,EAAYQ,GAC/C,IAAIC,EAAUZ,GAAKt6B,KAAKi7B,GACpBE,EAASn8B,EAAO23B,GAAQ,SAAUh3B,GACpC,MAAa,QAANA,KAxBa,SAAU66B,EAAc1kB,GAC9C,IAAI5Y,EAAIs9B,EAAa18B,MAAK,WACxB,OAAO5B,EAAS,OACf,SAAU+9B,GAEX,OAAO/9B,EADG+9B,EAASnkB,EACG,SACrB,WAED,OAAO5Z,EADG,IAAM4Z,EACM,QAExB,OAAO9T,EAAM8T,EAAS5Y,GAejBk+B,CAAkBF,EAASvE,EAAOh6B,QAAU49B,GAAmBW,EAASvE,EAAQ8D,GACrF,OAAOY,GAAUF,IAEfG,GAAM,SAAUxtB,EAAQkH,GAC1B,OAAsB,IAAlBlH,EAAOnR,OACFqY,EAEF7S,EAAM2L,GAAQ,SAAUsgB,EAAMxuB,GACnC,OAAO06B,GAAKt6B,KAAKJ,GAAG9B,KAAK5B,EAAS,GAAIE,EAAUA,GAAYgyB,IAC3D,IASDmN,GAAM,SAAUp/B,EAAOu1B,GACzB,OAAO4I,GAAKt6B,KAAK7D,GAAO2B,KAAK5B,EAASC,IAAQ,SAAUw2B,GACtD,OAAOA,EAAKjB,EAAS,QACpB,SAAUkJ,GACX,OAAOA,EAAKlJ,EAAS,QAGrB2J,GAAY,SAAUvtB,GACxB,GAAsB,IAAlBA,EAAOnR,OACT,OAAOmR,EAET,IAAI0tB,EAAOr5B,EAAM2L,GAAQ,SAAUsgB,EAAMjyB,GACvC,IAAIgL,EAAOmzB,GAAKt6B,KAAK7D,GAAO2B,MAAK,WAC/B,MAAO,CACL3B,MAAOA,EACPs/B,UAAW,MAEZ,SAAUx5B,GACX,OAzBU,SAAUA,EAAKqwB,GAC7B,IAAIoJ,EAAUvjB,KAAK4b,MAAM9xB,GACzB,MAAO,CACL9F,MAAOu/B,EAAUpJ,EACjBmJ,UAAWx5B,EAAMy5B,GAqBRC,CAAU15B,EAAK,SACrB,SAAUA,GACX,MAAO,CACL9F,MAAO8F,EAAM,IACbw5B,UAAW,MAGf,MAAO,CACLG,OAAQ,CAACz0B,EAAKhL,OAAOW,OAAOsxB,EAAKwN,QACjCH,UAAWrN,EAAKqN,UAAYt0B,EAAKs0B,aAElC,CACDG,OAAQ,GACRH,UAAW,IAETv5B,EAAIs5B,EAAKI,OACb,OAAO15B,EAAEd,MAAM,EAAGc,EAAEvF,OAAS,GAAGG,OAAO,CAACy+B,GAAIr5B,EAAEA,EAAEvF,OAAS,GAAIwb,KAAK0jB,MAAML,EAAKC,eAE3EK,GAAWxB,GAAKt6B,KAyBhB+7B,GAAU,SAAUlI,GACtB,OAAOiI,GAASjI,GAAS/1B,KAAK5B,EAAS,MAAOA,EAAS,MAAOA,EAAS,OAErE8/B,GAAiB,SAAU/lB,EAAOgmB,EAAUC,EAAWrQ,GACzD,IAAI9U,EAAYuB,GAAU1B,UAAUX,GAChCC,EAAOa,EAAUla,IACjB2R,EAAQ8J,GAAUM,UAAU7B,GAC5BjB,EAAUwC,GAAUQ,YAAY/B,GACpCklB,EAASp9B,MAAK,SAAUo8B,GACtB,IAAIkB,EAAYJ,GAAQd,GACpBR,EAAahN,GAAMxX,GACnBmmB,EAjcW,SAAUrlB,EAAWd,EAAO4V,GAC7C,OAAO+J,GAAa7e,EAAWd,EAAOsf,GAASW,GAAYrK,GAgczCwQ,CAAatlB,EAAWd,EAAO4V,GAC3CyQ,EAAWtB,GAAaoB,EAAW3B,EAAYQ,GAC/C3iB,GAAUS,WAAWhC,GA7BD,SAAU2gB,EAAW5hB,EAASwc,GACxDzzB,EAAKiX,GAAS,SAAUU,EAAQnG,GAC9B,IAAIohB,EAAQ6J,GAAI,CAAC5D,EAAUrnB,IAASiF,MACpCnB,GAAMqC,EAAO5K,QAAS,QAAS6lB,EAAQa,MA2BrCiK,CAAsBD,EAAUxmB,EAASqmB,GArCzB,SAAUzE,EAAWlpB,EAAO8jB,GAChDzzB,EAAK2P,GAAO,SAAUuG,GACpB,IAAI4hB,EAASe,EAAUt2B,MAAM2T,EAAKyB,OAAQzB,EAAKzG,QAAUyG,EAAKyB,QAC1DqC,EAAIyiB,GAAI3E,EAAQrhB,MACpBnB,GAAMY,EAAKnJ,QAAS,QAASiN,EAAIyZ,MAmC/BkK,CAAgBF,EAAU9tB,EAAO2tB,GAEnChoB,GAAM8B,EAAO,QAASglB,MAExBiB,EAAUr9B,MAAK,SAAU49B,GACvB,IAAIC,EAAQX,GAAQU,GAChBE,EAAczN,GAAMjZ,GACpB2mB,EA5aY,SAAU7lB,EAAWd,EAAOqgB,GAC9C,OAAOD,GAActf,EAAWd,EAAOqgB,EAAWd,GAASU,IA2axC2G,CAAc9lB,EAAWd,EAAO+Y,KAjC/B,SAAUgJ,EAAY9hB,EAAM1H,EAAO8jB,GACvDzzB,EAAK2P,GAAO,SAAUuG,GACpB,IAAI0hB,EAAUuB,EAAW52B,MAAM2T,EAAKuB,IAAKvB,EAAK1G,QAAU0G,EAAKuB,KACzD0W,EAAIsO,GAAI7E,EAASlhB,MACrBpB,GAAMY,EAAKnJ,QAAS,SAAUohB,EAAIsF,MAEpCzzB,EAAKqX,GAAM,SAAUI,EAAKxU,GACxBqS,GAAMmC,EAAI1K,QAAS,SAAUosB,EAAWl2B,OA4BxCg7B,CADgB9B,GAAa4B,EAAYD,EAAaF,GAC3BvmB,EAAM1H,EAAOkuB,GACxCvoB,GAAM8B,EAAO,SAAUwmB,OAGvBM,GA9hBkB,SAAU9mB,GAC9B,OAAOke,GAAYle,GAAOlX,QAAO,SAAUo6B,GACzC,OAAOlG,GAA0BvuB,KAAKy0B,OA6hBtC6D,GA1hBgB,SAAU/mB,GAC5B,OAAOke,GAAYle,GAAOlX,QAAO,SAAUo6B,GACzC,OAAOjG,GAAqBxuB,KAAKy0B,OAyhBjC8D,GAthBe,SAAUhnB,GAC3B,OAAOke,GAAYle,GAAOxY,UAshBxBy/B,GAAyBhI,GAEzBiI,GAAc,SAAUlnB,GAE1B,OADgBqC,GAAU1B,UAAUX,GACnBoC,MAGf+kB,GAAQ,SAAUC,GACpB,IAAIC,EAAW,GAyBf,MAAO,CACLx+B,KAzBS,SAAUy+B,GACnB,QAAgB9+B,IAAZ8+B,EACF,MAAM,IAAIj/B,MAAM,uCAElBg/B,EAAS97B,KAAK+7B,IAsBdC,OApBW,SAAUD,GACrBD,EAAWr+B,EAAOq+B,GAAU,SAAUtQ,GACpC,OAAOA,IAAMuQ,MAmBfE,QAhBY,WAEZ,IADA,IAAI35B,EAAO,GACFrH,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCqH,EAAKrH,GAAMC,UAAUD,GAEvB,IAAIwU,EAAQ,GACZpS,EAAKw+B,GAAQ,SAAU98B,EAAMuB,GAC3BmP,EAAM1Q,GAAQuD,EAAKhC,MAErBjD,EAAKy+B,GAAU,SAAUC,GACvBA,EAAQtsB,SAUVoN,GAAS,SAAUqf,GAUrB,MAAO,CACLC,SAVarwB,GAAMowB,GAAU,SAAUzsB,GACvC,MAAO,CACLnS,KAAMmS,EAAMnS,KACZ0+B,OAAQvsB,EAAMusB,WAQhBC,QALYnwB,GAAMowB,GAAU,SAAUzsB,GACtC,OAAOA,EAAMwsB,aAmCbG,GAAO,SAAU56B,GACnB,OAAOA,EAAI5B,MAAM,GAAGw8B,QAqClBC,GAAW,SAAUC,EAAmBC,EAAUl8B,GACpD,GAAwB,IAApBk8B,EAASphC,OACX,MAAM,IAAI2B,MAAM,iDAlBH,IACX0/B,EAqBJ,OAnCmB,SAAU9a,EAAOgO,GACpC,IAAKtwB,EAAQswB,GACX,MAAM,IAAI5yB,MAAM,OAAS4kB,EAAQ,kCAAoCgO,EAAQ,KAE/EryB,EAAKqyB,GAAO,SAAU3xB,GACpB,IAAKmB,EAASnB,GACZ,MAAM,IAAIjB,MAAM,aAAeiB,EAAI,WAAa2jB,EAAQ,gCA2B5D+a,CAAe,WAAYF,GAnBvBC,EAASJ,GAoBFG,GAnBAx7B,EAAKy7B,GAAQ,SAAUr+B,EAAGmC,GACnC,OAAOA,EAAIk8B,EAAOrhC,OAAS,GAAKgD,IAAMq+B,EAAOl8B,EAAI,MAE9CjD,MAAK,SAAUuc,GAClB,MAAM,IAAI9c,MAAM,cAAgB8c,EAAI,mDAAqD4iB,EAAOroB,KAAK,MAAQ,SAgBxG,SAAUvI,GACf,IAAIwV,EAAS1V,GAAKE,GACJpO,EAAO++B,GAAU,SAAUG,GACvC,OAAOz8B,EAASmhB,EAAQsb,OA5Cb,SAAUH,EAAU7wB,GACnC,MAAM,IAAI5O,MAAM,sBAAwBs/B,GAAKG,GAAUpoB,KAAK,MAAQ,8CAAgDioB,GAAK1wB,GAAMyI,KAAK,MAAQ,KA8CxIwoB,CAAWJ,EAAUnb,GAEvBkb,EAAkBC,EAAUnb,GAC5B,IAAIwb,EAAcn/B,EAAO8+B,GAAU,SAAU9vB,GAC3C,OAAQpM,EAAKi6B,SAAS1uB,EAAIa,GAAMA,MAKlC,OAHImwB,EAAYzhC,OAAS,GArCJ,SAAU0hC,EAAWn+B,GAC5C,MAAM,IAAI5B,MAAM,kCAAoC4B,EAAO,WAAa09B,GAAKS,GAAW1oB,KAAK,MAAQ,eAqCjG2oB,CAAmBF,EAAav8B,EAAKqhB,OAEhC9V,IAGPmxB,GAAc,SAAUR,EAAU7wB,GACpC,IAAIsxB,EAAcv/B,EAAOiO,GAAM,SAAUe,GACvC,OAAQxM,EAASs8B,EAAU9vB,MAEzBuwB,EAAY7hC,OAAS,GA5DP,SAAU6hC,GAC5B,MAAM,IAAIlgC,MAAM,gCAAkCs/B,GAAKY,GAAa7oB,KAAK,OA4DvE8oB,CAAcD,IAGdE,GAAU,SAAUX,GACtB,OAvCS,SAAUD,EAAmBC,GACtC,OAAOF,GAASC,EAAmBC,EAAU,CAC3CjC,SAAU76B,EACViiB,MAAO,aAoCF7Q,CAAKksB,GAAaR,IAGvBY,GAAWD,GAAQ,CACrB,UACA,UACA,SACA,SAEEE,GAAWF,GAAQ,CACrB,UACA,QACA,OACA,YAEEG,GAAUH,GAAQ,CACpB,YACA,OACA,OACA,cAGF,SAASI,KACP,IAAIC,EAAWh/B,EAAS1C,OAoBpB2hC,EAAS3gB,GAAO,CAAE4gB,KAAM7B,GAAM,CAAC,WACnC,MAAO,CACL8B,QAXY,SAAUjuB,EAAOkuB,GACZA,EAAK7a,QAAQrT,GACnBpS,MAAK,SAAUugC,IATf,SAAUD,EAAMn7B,GAC3B,IAAI+N,EAASgtB,EAASngC,KAAI,SAAUygC,GAClC,OAAOF,EAAKG,QAAQD,EAAKr7B,MAG3B,OADA+6B,EAAWh/B,EAAST,KAAK0E,GAClB+N,GAKQwtB,CAAOJ,EAAMC,GACnBvgC,MAAK,SAAUuc,GACpB4jB,EAAOvB,QAAQwB,KAAK7jB,UAOxBokB,MAtBU,WACVT,EAAWh/B,EAAS1C,QAsBpB2hC,OAAQA,EAAOrB,UAWnB,SAAS8B,KACP,IAAIC,EAPG,CACLR,QAASjjC,EACTujC,MAAOvjC,GAML0jC,EAAcb,KACdc,EAAYF,EAehB,MAAO,CACL5V,GAfO,WACP8V,EAAUJ,QACVI,EAAYD,GAcZE,IAZQ,WACRD,EAAUJ,QACVI,EAAYF,GAWZI,KANS,WACT,OAAOF,IAAcD,GAMrBT,QAVY,SAAUjuB,EAAOkuB,GAC7BS,EAAUV,QAAQjuB,EAAOkuB,IAUzBH,OAAQW,EAAYX,QAIxB,IAAIe,GAAQ,SAAUC,EAAUb,EAAMc,GACpC,IAxLqB1jC,EAAI2jC,EACrBC,EAuLAC,GAAS,EACTpB,EAAS3gB,GAAO,CAClBtY,MAAOq3B,GAAM,IACbvtB,KAAMutB,GAAM,MAEViD,EAAWZ,KACXa,EAAO,WACTC,EAAK1wB,OACDwwB,EAASP,SACXO,EAASR,MACTb,EAAOvB,QAAQ5tB,SAGf2wB,GArMiBjkC,EAqMM+jC,EArMFJ,EAqMQ,IApM7BC,EAAQ,KAoBL,CACLM,OApBW,WACG,OAAVN,IACFO,aAAaP,GACbA,EAAQ,OAkBVQ,SAfa,WAEb,IADA,IAAI78B,EAAO,GACFrH,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCqH,EAAKrH,GAAMC,UAAUD,GAET,OAAV0jC,GACFO,aAAaP,GAEfA,EAAQS,YAAW,WACjBrkC,EAAGQ,MAAM,KAAM+G,GACfq8B,EAAQ,OACPD,MA4LLG,EAASrB,OAAOC,KAAKngC,MAAK,SAAUmS,GAClCkuB,EAAKlY,OAAO+Y,EAAU/uB,EAAM9J,SAE9B,IAMI05B,EAAc,SAAU3jC,GAC1B,OAAO,WAEL,IADA,IAAI4G,EAAO,GACFrH,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCqH,EAAKrH,GAAMC,UAAUD,GAEnB2jC,GACFljC,EAAEH,MAAM,KAAM+G,KAIhBy8B,EAAOpB,EAAKoB,KAAK1B,GAAQ,CAC3BiC,UAAWR,EACXA,KAAMO,EAAYP,GAClBrB,KAAM4B,GA3BQ,SAAU5vB,GACxBuvB,EAAcC,SACdJ,EAASnB,QAAQjuB,EAAOkuB,MA0BxB4B,UAAWF,EAAYL,EAAcG,YACnCV,GAIJ,MAAO,CACLr0B,QAAS20B,EAAK30B,QACdo1B,GAxCO,SAAUvxB,GACjB8wB,EAAKx6B,MAAM0J,GACX4wB,EAASvW,KACTkV,EAAOvB,QAAQ13B,SAsCf+jB,GA7BO,WACPsW,GAAS,GA6BTP,IA3BQ,WACRO,GAAS,GA2BTa,QARY,WACZV,EAAKU,WAQLjC,OAAQA,EAAOrB,WAefuD,GAAe,SAAUC,GAC3B,IA19HsBC,EAAIC,EA09HtB36B,EAAS6D,GAAaH,QAAQ4G,GAAuBmwB,GAAUjjC,MAAMijC,EAASz6B,SAC9EmJ,EAAO,WACT,OAAOsxB,EAASG,mBAEdC,EAAU,WACZ,OAAOJ,EAASpX,kBAEdyX,GAj+HkBJ,EAi+HHG,EAj+HOF,EAi+HExxB,EAh+HrB,WAEL,IADA,IAAI/L,EAAO,GACFrH,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACtCqH,EAAKrH,GAAMC,UAAUD,GAEvB,OAAO2kC,EAAGC,EAAGtkC,MAAM,KAAM+G,MA49H3B,OApBY,SAAU4C,EAAQrK,EAAGqP,EAAGmE,EAAM0xB,EAASC,EAAM9sB,GACzD,MAAO,CACLhO,OAAQA,EACRrK,EAAGA,EACHqP,EAAGA,EACHmE,KAAMA,EACN0xB,QAASA,EACTC,KAAMA,EACN9sB,IAAKA,GAYA+sB,CAAQ/6B,EAAQy6B,EAASO,QAASP,EAASQ,QAAS9xB,EAAM0xB,EAASC,EAAML,IAS9ES,GAAS,SAAUh2B,EAASqF,EAAOhS,EAAQs+B,EAASsE,GACtD,IAAIC,EARO,SAAU7iC,EAAQs+B,GAC7B,OAAO,SAAU4D,GACXliC,EAAOkiC,IACT5D,EAAQ2D,GAAaC,KAKXY,CAAO9iC,EAAQs+B,GAE7B,OADA3xB,EAAQtB,IAAI03B,iBAAiB/wB,EAAO6wB,EAASD,GACtC,CAAErE,OAAQlhC,EAAMkhC,GAAQ5xB,EAASqF,EAAO6wB,EAASD,KAKtDrE,GAAS,SAAU5xB,EAASqF,EAAOssB,EAASsE,GAC9Cj2B,EAAQtB,IAAI23B,oBAAoBhxB,EAAOssB,EAASsE,IAG9CK,GAAW9kC,EACX+kC,GAAS,SAAUv2B,EAASqF,EAAOssB,GACrC,OATW,SAAU3xB,EAASqF,EAAOhS,EAAQs+B,GAC7C,OAAOqE,GAAOh2B,EAASqF,EAAOhS,EAAQs+B,GAAS,GAQxC6E,CAAOx2B,EAASqF,EAAOixB,GAAU3E,IAEtC8E,GAAiBnB,GAEjBoB,GAAO,SAAU12B,EAASgI,GAC5B,IAAIzX,EAAQkX,GAAMzH,EAASgI,GAC3B,YAAiBnV,IAAVtC,GAAiC,KAAVA,EAAe,GAAKA,EAAMomC,MAAM,MAoB5DC,GAAW,SAAU52B,GACvB,YAAiCnN,IAA1BmN,EAAQtB,IAAIm4B,WAKjBC,GAAQ,SAAU92B,EAAS+2B,GAC7B,OAzBU,SAAU/2B,EAASgI,EAAMhW,GACnC,IACIoG,EADMs+B,GAAK12B,EAASgI,GACX9W,OAAO,CAACc,IAErB,OADAsV,GAAItH,EAASgI,EAAM5P,EAAG2R,KAAK,OACpB,EAqBAitB,CAAMh3B,EAAS,QAAS+2B,IAM7BE,GAAQ,SAAUj3B,EAAS+2B,GACzBH,GAAS52B,GACXA,EAAQtB,IAAIm4B,UAAUlH,IAAIoH,GAE1BD,GAAM92B,EAAS+2B,IAkBfG,GAAQ,SAAUl3B,EAAS+2B,GAC7B,OAAOH,GAAS52B,IAAYA,EAAQtB,IAAIm4B,UAAUhhC,SAASkhC,IAGzDtuB,GAAM,SAAU0uB,GAClB,IAAIC,EAAgBD,EAAUj+B,QAAQ,MAAO,KAI7C,MAAO,CAAEmf,QAHK,SAAUpe,GACtB,OAAOm9B,EAAgB,IAAMn9B,KAK7BgY,GAASxJ,GAAI,kBACb4P,GAAUpG,GAAOoG,QA8DjBgf,GAAYtE,GAAS,CACvBW,QApCY,SAAUD,EAAKr7B,GAC3B,OAAOsrB,GAActrB,EAAGsnB,KAAO+T,EAAI/T,KAAMtnB,EAAGorB,IAAMiQ,EAAIjQ,MAoCtD9K,QAlCc,SAAUrT,GACxB,OAAOlR,EAAST,KAAKgwB,GAAcre,EAAM5U,EAAG4U,EAAMvF,KAkClD60B,KA7BS,SAAU2C,EAASjD,GAC5B,IAAIkD,EAnCQ,SAAUC,GACtB,IAAInD,EAAWh9B,EAAS,CAAEogC,WAAYpf,GAAQ,YAAcmf,GACxDz4B,EAAMJ,GAAaY,QAAQ,OAiB/B,OAhBA+H,GAAIvI,EAAK,OAAQ,gBACjByJ,GAASzJ,EAAK,CACZ24B,SAAU,QACVhY,KAAM,MACN8D,IAAK,MACLqC,MAAO,OACPzC,OAAQ,SAEV6T,GAAMl4B,EAAKsZ,GAAQ,YACnB4e,GAAMl4B,EAAKs1B,EAASoD,YAOb,CACLz3B,QAPY,WACZ,OAAOjB,GAOPs2B,QALY,WACZlkB,GAASpS,KAkBG44B,CAAQtD,GAClBuD,EAAQrB,GAAOgB,EAAQv3B,UAAW,YAAas3B,EAAQpC,WACvD2C,EAAMtB,GAAOgB,EAAQv3B,UAAW,UAAWs3B,EAAQ5C,MACnDoD,EAAQvB,GAAOgB,EAAQv3B,UAAW,YAAas3B,EAAQjE,MACvD0E,EAAOxB,GAAOgB,EAAQv3B,UAAW,WAAYs3B,EAAQnC,WAczD,OAAOnC,GAAS,CACdhzB,QAASu3B,EAAQv3B,QACjB7F,MARU,SAAU0J,GACpB0M,GAAO1M,EAAQ0zB,EAAQv3B,YAQvBiE,KANS,WACTkN,GAASomB,EAAQv3B,YAMjBq1B,QAjBY,WACZkC,EAAQlC,UACRwC,EAAIjG,SACJkG,EAAMlG,SACNmG,EAAKnG,SACLgG,EAAMhG,aAmBRvW,OAjCW,SAAU+Y,EAAU74B,GAC/B64B,EAAS/Y,OAAO9f,EAAKmkB,KAAMnkB,EAAKioB,QA2C9BwU,GAAwB,SAAUhuB,GACpC,MAAyC,SAAlCvC,GAAMuC,EAAK,oBAMhBiuB,GAAWxvB,GAAI,iBACfyvB,GAAYD,GAAS5f,QAkBrB8f,GAAc,WAChB,IAAI/E,EAAS3gB,GAAO,CAClB2lB,KAAM5G,GAAM,CACV,SACA,SACA,aAGA12B,EAAS3G,EAAS1C,OAClB4mC,EAzBS,WACb,IAAIjF,EAAS3gB,GAAO,CAClB2lB,KAAM5G,GAAM,CACV,SACA,aAMJ,MAAO,CACLnW,OAJW,SAAU5qB,EAAGqP,GACxBszB,EAAOvB,QAAQuG,KAAK3nC,EAAGqP,IAIvBszB,OAAQA,EAAOrB,UAaFuG,GACfD,EAASjF,OAAOgF,KAAKllC,MAAK,SAAUmS,GAClCvK,EAAO7H,MAAK,SAAU7B,GACpBgiC,EAAOvB,QAAQuG,KAAK/yB,EAAMkzB,OAAQlzB,EAAMmzB,OAAQpnC,SASpD,MAAO,CACLmG,OAPW,SAAUnG,GACrB0J,EAAS3G,EAAST,KAAKtC,IAOvB6F,IALQ,WACR,OAAO6D,GAKPugB,OAAQgd,EAAShd,OACjB+X,OAAQA,EAAOrB,WAmCf0G,GAAYP,GAAU,eACtBQ,GAAeR,GAAU,gBACzBS,GAAeT,GAAU,gBA0BzB7C,GAAU,SAAUuD,GACtB,IAAIzF,EAAW3sB,GAAcoyB,EAAK/0B,SAAU,IAAM40B,IAClDxlC,EAAKkgC,EAAUhiB,KAEb0nB,GAAU,SAAUD,EAAMlT,EAAWjT,GACvC,IAAIwb,EAAS2K,EAAK3K,SAClBh7B,EAAKyyB,GAAW,SAAUoT,GACxBA,EAAS7lC,MAAK,SAAU8lC,GACtB,IAAIC,EAAMvmB,EAAOwb,EAAQ8K,GACzB9B,GAAM+B,EAAKP,IACXloB,GAAOqoB,EAAK/0B,SAAUm1B,UAIxBC,GAAa,SAAUL,EAAMM,EAAcxB,EAAUyB,GACvDN,GAAQD,EAAMM,GAAc,SAAUjL,EAAQ8K,GAC5C,IA3EgBnuB,EAAQna,EAAGqP,EAAGmN,EAAGmU,EAC/B4X,EA0EEI,GA3EYxuB,EA2ECmuB,EAAGnd,IA3EInrB,EA2ECsoC,EAAGtoC,EAAIw9B,EAAOvO,KA3EZ5f,EA2EkB43B,EAASlU,IAAMyK,EAAOzK,IA3ErCvW,EAkCd,EAlCiBmU,EA2EsD+X,EA1ErFH,EAAMr6B,GAAaY,QAAQ,OAC/BiJ,GAASwwB,EAAK,CACZtB,SAAU,WACVhY,KAAMjvB,EAAIwc,EAAI,EAAI,KAClBuW,IAAK1jB,EAAI,KACTsjB,OAAQhC,EAAI,KACZyE,MAAO5Y,EAAI,OAEb1F,GAAOyxB,EAAK,CACVK,cAAezuB,EACf0uB,KAAQ,iBAEHN,GAgEL,OADA/B,GAAMmC,EAAQT,IACPS,MAGPG,GAAa,SAAUX,EAAMY,EAAc9B,EAAU+B,GACvDZ,GAAQD,EAAMY,GAAc,SAAUvL,EAAQ8K,GAC5C,IAAIW,EAnEE,SAAUpjC,EAAG7F,EAAGqP,EAAGmN,EAAGmU,GAC9B,IAAI4X,EAAMr6B,GAAaY,QAAQ,OAY/B,OAXAiJ,GAASwwB,EAAK,CACZtB,SAAU,WACVhY,KAAMjvB,EAAI,KACV+yB,IAAK1jB,EAAIshB,EAAI,EAAI,KACjBgC,OAAQhC,EAAI,KACZyE,MAAO5Y,EAAI,OAEb1F,GAAOyxB,EAAK,CACVW,WAAYrjC,EACZgjC,KAAQ,iBAEHN,EAsDQtuB,CAAIquB,EAAGruB,IAAKgtB,EAAShY,KAAOuO,EAAOvO,KAAMqZ,EAAGj5B,EAAImuB,EAAOzK,IAAKiW,EAhDzD,GAkDhB,OADAxC,GAAMyC,EAAQhB,IACPgB,MAGPE,GAAc,SAAUC,EAAUjB,EAAMvuB,EAAOC,EAAMyX,GACvD,IAAI2V,EAAW9T,GAASvZ,GACpB0jB,EAAc6K,EAAK7K,YACnByL,EAAelvB,EAAKvZ,OAAS,EAAIqyB,GAAOsC,UAAUpb,EAAMD,GAAS,GACjEyvB,EAAmBN,EAAazoC,OAAS,EAxD3B,SAAUoa,EAAW4iB,GACvC,OAAO76B,EAAKiY,EAAUla,KAAK,SAAUyZ,EAAKxU,GACxC,OAAO63B,EAAYrjB,EAAI1K,SAAW,CAAC9J,GAAK,MAsDO6jC,CAAcF,EAAU9L,GAAe,GACpFiM,EAAwB3mC,EAAOmmC,GAAc,SAAUS,EAAM/jC,GAC/D,OAAO/C,EAAO2mC,GAAkB,SAAUI,GACxC,OAAOhkC,IAAMgkC,QAGjBX,GAAWX,EAAMoB,EAAuBtC,EAAUrW,GAAShX,IAC3D,IAAI6uB,EAAenX,EAAKhxB,OAAS,EAAI80B,GAAMH,UAAU3D,EAAM1X,GAAS,GAChE8vB,EAAmBjB,EAAanoC,OAAS,EA3DxB,SAAUoa,EAAW4iB,GAC1C,IAAIqM,EAAgB,GASpB,OARAhkC,EAAM+U,EAAUsB,KAAKvC,SAAS,SAAUzF,GACtBiI,GAAUU,YAAYjC,EAAW1G,GAAOzR,KAAI,SAAU4oB,GACpE,OAAOA,EAAI5b,WAEC5M,OAAO26B,IACnBqM,EAAcxkC,KAAK6O,MAGhBpR,EAAO+mC,GAAe,SAAUvuB,GACrC,IAAIoe,EAAcvd,GAAUxB,YAAYC,GAAW,SAAUhC,GAC3D,OAAOA,EAAKyB,SAAWiB,KAEzB,OAAOzY,EAAO62B,GAAa,SAAU9gB,GACnC,OAAO4kB,EAAY5kB,EAAKnJ,eA4CqBq6B,CAAiBR,EAAU9L,GAAe,GACvFuM,EAAwBjnC,EAAO6lC,GAAc,SAAUe,EAAM/jC,GAC/D,OAAO/C,EAAOgnC,GAAkB,SAAUD,GACxC,OAAOhkC,IAAMgkC,QAGjBjB,GAAWL,EAAM0B,EAAuB5C,EAAUnU,GAAWlZ,KAE3DkwB,GAAU,SAAU3B,EAAMvuB,GAE5B,GADAgrB,GAAQuD,GACJA,EAAK7K,YAAY1jB,GAAQ,CAC3B,IAAIc,EAAYuB,GAAU1B,UAAUX,GAChCC,EAAOW,GAAOE,GACd4W,EAAOD,GAAU3W,GACrByuB,GAAYzuB,EAAWytB,EAAMvuB,EAAOC,EAAMyX,KAG1CyY,GAAS,SAAU5B,EAAMtnC,GAC3B,IAAImpC,EAAOj0B,GAAcoyB,EAAK/0B,SAAU,IAAM40B,IAC9CxlC,EAAKwnC,EAAMnpC,IAETopC,GAAO,SAAU9B,GACnB4B,GAAO5B,GAAM,SAAUI,GACrBzwB,GAAMywB,EAAK,UAAW,YAGtB2B,GAAO,SAAU/B,GACnB4B,GAAO5B,GAAM,SAAUI,GACrBzwB,GAAMywB,EAAK,UAAW,aAUtB4B,GAAoB1C,GAAU,wBAC9B2C,GAAa,SAAUjC,GACzB,IAAIxE,EAAW+D,KACX5M,EA3MU,SAAU6I,EAAUC,QACjB,IAAbA,IACFA,EAAW,IAEb,IAAId,OAAyB1gC,IAAlBwhC,EAASd,KAAqBc,EAASd,KAAO8D,GACzD,OAAOlD,GAAMC,EAAUb,EAAMc,GAsMdyG,CAAU1G,EAAU,IAC/B2G,EAAa5mC,EAAS1C,OACtBupC,EAAa,SAAUh7B,EAAS1L,GAClC,OAAOH,EAASC,KAAKqT,GAAMzH,EAAS1L,KAEtC8/B,EAAShB,OAAOgF,KAAKllC,MAAK,SAAUmS,GAClC21B,EAAW31B,EAAMvK,OAAQ,YAAY7H,MAAK,SAAUgoC,GAClD,IAAIC,EAAazxB,GAAYpE,EAAMvK,OAAQ,OAC3CyN,GAAMlD,EAAMvK,OAAQ,MAAOogC,EAAa71B,EAAMmzB,OAAS,SAEzDwC,EAAW31B,EAAMvK,OAAQ,eAAe7H,MAAK,SAAUkoC,GACrD,IAAIC,EAAa3xB,GAAYpE,EAAMvK,OAAQ,QAC3CyN,GAAMlD,EAAMvK,OAAQ,OAAQsgC,EAAa/1B,EAAMkzB,OAAS,YAG5D,IAAI8C,EAAW,SAAUvgC,EAAQwgC,GAG/B,OAFW7xB,GAAY3O,EAAQwgC,GACpBpyB,GAAapO,EAAQ,gBAAkBwgC,EAAK,IAGzD/P,EAAS6H,OAAOnvB,KAAK/Q,MAAK,WACxBkhC,EAASn9B,MAAMhE,MAAK,SAAU6H,GAC5BigC,EAAW9nC,MAAK,SAAUoX,GACxB2wB,EAAWlgC,EAAQ,YAAY7H,MAAK,SAAUyX,GAC5C,IAAIiY,EAAQ0Y,EAASvgC,EAAQ,OAC7B8M,GAAO9M,EAAQ,oBACfs4B,EAAOvB,QAAQ3F,aAAa7hB,EAAOsY,EAAOtZ,SAASqB,EAAK,QAE1DswB,EAAWlgC,EAAQ,eAAe7H,MAAK,SAAU2X,GAC/C,IAAI+X,EAAQ0Y,EAASvgC,EAAQ,QAC7B8M,GAAO9M,EAAQ,qBACfs4B,EAAOvB,QAAQvG,YAAYjhB,EAAOsY,EAAOtZ,SAASuB,EAAQ,QAE5D2vB,GAAQ3B,EAAMvuB,YAIpB,IAAIsnB,EAAU,SAAU72B,EAAQwgC,GAC9BlI,EAAOvB,QAAQ0J,cACfnH,EAAS78B,OAAOuD,GAChBwM,GAAIxM,EAAQ,gBAAkBwgC,EAAK7xB,GAAY3O,EAAQwgC,IACvDrE,GAAMn8B,EAAQ8/B,IACdryB,GAAMzN,EAAQ,UAAW,OACzBywB,EAAS6J,GAAGwD,EAAK/0B,WAEf23B,EAAYjF,GAAOqC,EAAK/0B,SAAU,aAAa,SAAUwB,GAvDhD,IAAUrF,EAAAA,EAwDRqF,EAAMvK,OAvDdo8B,GAAMl3B,EAAS04B,KAwDlB/G,EAAQtsB,EAAMvK,OAAQ,OAtDb,SAAUkF,GACvB,OAAOk3B,GAAMl3B,EAAS24B,IAuDhB8C,CAASp2B,EAAMvK,SACjB62B,EAAQtsB,EAAMvK,OAAQ,WAGtBkJ,EAAS,SAAUgB,GACrB,OAAOvE,GAAKuE,EAAG4zB,EAAK5K,SAElB0N,EAA2B,SAAU5gC,GACvC,OAAOqM,GAAUrM,EAAQ,QAASkJ,GAAQ3Q,QAAO,SAAUgX,GACzD,OA1P2B,SAAUvP,EAAQkJ,GACjD,OAAOmD,GAAUrM,EAAQ,oBAAqBkJ,GAyPnC23B,CAA2BtxB,EAAOrG,GAAQ7Q,OAAO6kC,QAGxD4D,EAAYrF,GAAOqC,EAAK5K,OAAQ,aAAa,SAAU3oB,GACzDq2B,EAAyBr2B,EAAMvK,QAAQ5I,MAAK,WACtCyT,GAAON,EAAMvK,SACfu6B,GAAQuD,MAET,SAAUvuB,GACX0wB,EAAa5mC,EAAST,KAAK2W,GAC3BkwB,GAAQ3B,EAAMvuB,SAYd+oB,EAAS3gB,GAAO,CAClByZ,aAAcsF,GAAM,CAClB,QACA,QACA,QAEFlG,YAAakG,GAAM,CACjB,QACA,QACA,WAEF+J,YAAa/J,GAAM,MAErB,MAAO,CACL6D,QAvBc,WACdmG,EAAU5J,SACVgK,EAAUhK,SACVrG,EAAS8J,UACTA,GAAQuD,IAoBR2B,QAlBc,SAAUsB,GACxBtB,GAAQ3B,EAAMiD,IAkBd3d,GAAIqN,EAASrN,GACb+V,IAAK1I,EAAS0I,IACd6H,SAAUprC,EAAMgqC,GAAM9B,GACtBmD,SAAUrrC,EAAMiqC,GAAM/B,GACtBxF,OAAQA,EAAOrB,WA8CfiK,GA1CW,SAAUpD,EAAMrN,EAAU0Q,GACvC,IAAIC,EAAa9Y,GACb+Y,EAAatW,GACbuW,EAAUvB,GAAWjC,GACrBxF,EAAS3gB,GAAO,CAClB4pB,aAAc7K,GAAM,CAClB,QACA,SAEF8K,YAAa9K,GAAM,CACjB,QACA,SAEF+K,UAAW/K,GAAM,MAoBnB,OAlBA4K,EAAQhJ,OAAOlH,aAAah5B,MAAK,SAAUmS,GACzC,IAAIgF,EAAQhF,EAAMgF,MAClB+oB,EAAOvB,QAAQwK,aAAahyB,EAAO,OACnC,IAAIsY,EAAQuZ,EAAWvZ,MAAMtd,EAAMsd,MAAOtY,GAC1C6hB,GAAa7hB,EAAOsY,EAAOtd,EAAMqF,IAAKwxB,GACtC9I,EAAOvB,QAAQyK,YAAYjyB,EAAO,UAEpC+xB,EAAQhJ,OAAOmI,YAAYroC,MAAK,SAAUspC,GACxCpJ,EAAOvB,QAAQ0K,eAEjBH,EAAQhJ,OAAO9H,YAAYp4B,MAAK,SAAUmS,GACxC,IAAIgF,EAAQhF,EAAMgF,MAClB+oB,EAAOvB,QAAQwK,aAAahyB,EAAO,OACnC,IAAIsY,EAAQwZ,EAAWxZ,MAAMtd,EAAMsd,MAAOtY,GACtC4V,EAAYgc,EAAW5xB,GAC3BihB,GAAYjhB,EAAOsY,EAAOtd,EAAMuF,OAAQ2gB,EAAUtL,GAClDmT,EAAOvB,QAAQyK,YAAYjyB,EAAO,UAE7B,CACL6T,GAAIke,EAAQle,GACZ+V,IAAKmI,EAAQnI,IACb6H,SAAUM,EAAQN,SAClBC,SAAUK,EAAQL,SAClB1G,QAAS+G,EAAQ/G,QACjBjC,OAAQA,EAAOrB,WAKf0K,GAAa,SAAU1e,EAAQrT,GACjC,OAAOqT,EAAO2e,KAAK,SAAU,CAAEj+B,KAAMiM,KAEnCiyB,GAAc,SAAU5e,EAAQ5U,GAClC,OAAO4U,EAAO2e,KAAK,UAAW,CAAEj+B,KAAM0K,KA6BpCyzB,GAAoB,SAAU7e,EAAQ1T,EAAOmpB,GAC/CzV,EAAO2e,KAAK,gBAAiBrlC,EAASA,EAAS,GAAIm8B,GAAO,CAAEnpB,MAAOA,MAIjEwyB,GAAgB,CAClBC,kBAAmB,WACnBjX,MAAS,QAcPkX,GAAoB,CAAEC,OAAQ,KAC9BC,GAAiC,gBACjCC,GAAqB,SAAUnf,GACjC,OAAOA,EAAOof,SAAS,oBAAqB,SAE1CC,GAAwB,SAAUrf,GACpC,OAAOA,EAAOof,SAAS,2BAErBE,GAAuB,SAAUtf,GACnC,OAAOA,EAAOof,SAAS,2BAA4BJ,GAAmB,WAEpEO,GAAmB,SAAUvf,GAC/B,OAAOA,EAAOof,SAAS,uBAxBI,SAAUpf,GACrC,GAAIwf,GAAexf,GAAS,CAC1B,IAAIyf,EAAczf,EAAO/X,UAAU4b,YACnC,OAAOvqB,EAASA,EAAS,GAAIwlC,IAAgB,CAAEhX,MAAO2X,EAAc,OAC/D,OAAIC,GAAmB1f,GACrBlc,GAASg7B,IAAe,SAAUa,EAAQr7B,GAC/C,MAAe,UAARA,KAGFw6B,GAesCc,CAAuB5f,GAAS,WAQ7E6f,GAAqB,SAAU7f,GACjC,OAAOA,EAAOof,SAAS,qBAAqB,EAAM,YAEhDU,GAAoB,SAAU9f,GAChC,OAAOA,EAAOof,SAAS,oBAAoB,EAAM,YAE/CW,GAAsB,SAAU/f,GAClC,OAAOA,EAAOof,SAAS,gBAAgB,EAAM,YAQ3CY,GAAqB,SAAUhgB,GACjC,OAAOA,EAAOof,SAAS,sBAAsB,EAAO,YAWlDa,GAAsB,SAAUjgB,GAClC,MAAsC,aAA/Bmf,GAAmBnf,KAA4D,IAAlCqf,GAAsBrf,IAExEwf,GAAiB,SAAUxf,GAC7B,MAAsC,UAA/Bmf,GAAmBnf,KAAyD,IAAlCqf,GAAsBrf,IAErE0f,GAAqB,SAAU1f,GACjC,MAAsC,eAA/Bmf,GAAmBnf,IAKxBkgB,GAAiB,SAAUlgB,GAC7B,OAAOA,EAAOof,SAAS,uBAAuB,EAAO,YAEnDe,GAAqB,SAAUngB,GACjC,IAAIogB,EAAe,UACf5tC,EAAQwtB,EAAOof,SAAS,oBAAqBgB,EAAc,UAO/D,OAAKtoC,EANa,CAChB,UACA,QACA,eACA,QAEyBtF,GAGlBA,EAFA4tC,GAKPC,GAA6B,SAAUrgB,GACzC,IAIIsgB,EAAYtgB,EAAOof,SAAS,wBAAyBF,GAAgC,UACzF,OAAOtmC,EALU,CACf,gBACA,gBAGsB,SAAU48B,GAChC,OAAOA,IAAS8K,KACf/rC,MAAM2qC,KAEPqB,GAAgC,SAAUvgB,GAC5C,MAA8C,kBAAvCqgB,GAA2BrgB,IAEhCwgB,GAAmB,SAAUxgB,GAC/B,IAAIygB,EAAgBzgB,EAAOof,SAAS,wBACpC,OAAIroC,EAAS0pC,GACJrqC,EAAST,KAAK8qC,EAAc7H,MAAM,SAChCpiC,MAAMS,QAAQwpC,GAChBrqC,EAAST,KAAK8qC,GAEdrqC,EAAS1C,QAQhBgtC,GAAc,SAAUz0B,GAC1B,OAAOA,EAAI9G,SAAStK,eAElB8lC,GAAY,SAAU3gB,GACxB,OAAOpf,GAAaH,QAAQuf,EAAO/X,YAEjC24B,GAAkB,SAAU30B,GAC9B,OAAOA,EAAImZ,wBAAwB0C,OAEjC+Y,GAAiB,SAAU50B,GAC7B,OAAOA,EAAImZ,wBAAwBC,QAEjCxO,GAAY,SAAUmJ,GACxB,OAAO,SAAU/d,GACf,OAAOS,GAAKT,EAAS0+B,GAAU3gB,MAM/B8gB,GAAc,SAAUtR,GAC1B,MAAO,gBAAgBz0B,KAAKy0B,GAAQA,EAAO,KAAOA,GAEhDuR,GAAkB,SAAUz0B,GAC9BzC,GAAOyC,EAAO,kBACd,IAAI00B,EAAuB,SAAU/+B,GACnC,OAAO4H,GAAO5H,EAAS,mBAEzB/M,EAAK2P,GAAMyH,GAAQ00B,GACnB9rC,EAAKiX,GAAQG,GAAQ00B,IAEnBC,GAAgB,SAAUjhB,EAAQ/T,GACpC,IAAIlB,EAAMiV,EAAOrf,IAAIugC,SAASj1B,EAAK,UAAY+T,EAAOrf,IAAIwgC,UAAUl1B,EAAK,SACzE,OAAO7V,EAASC,KAAK0U,GAAKzV,OAAOsH,KAE/BwkC,GAAe,SAAU5uC,GAC3B,MAAO,mBAAmBuI,KAAKvI,IAK7B6uC,GAAoB,SAAUrhB,GAChC,OAAOpf,GAAaH,QAAQuf,EAAOhB,UAAU8B,aAG3CwgB,GAAO,SAAUC,GACnB,IAAI/uC,EAAQ+uC,EAOZ,MAAO,CACLroC,IAPQ,WACR,OAAO1G,GAOP+W,IALQ,SAAUtT,GAClBzD,EAAQyD,KAQRurC,GAAW,SAAUl1B,GACvB,IAAI8c,EAAW,WACb,OAAOtF,GAAMxX,IAEXoiB,EAAOn8B,EAAS,GAIpB,MAAO,CACLu1B,MAAOsB,EACPuB,WAAYvB,EACZsE,UANc,SAAUtgB,EAAW8U,GACnC,OAAOuK,GAAerf,EAAWd,EAAO4V,IAMxCuL,aAAciB,EACdpM,kBAAmB/vB,EAAS,CAAC,IAC7BkwB,aAAciM,EACdpB,gBAAiBh7B,EACjB47B,iBAAkB57B,EAClBowB,YAAY,EACZnJ,MAAO,SAGPkoB,GAAiB,SAAUC,EAAcp1B,GAC3C,IAAIq1B,EAAaL,GAAKte,WAAW0e,IAC7B/W,EAAa2W,GAAKxd,GAAMxX,IAqB5B,MAAO,CACLwb,MAAO6Z,EAAWzoC,IAClByxB,WAAYA,EAAWzxB,IACvBw0B,UANc,SAAUtgB,EAAW8U,GACnC,OA9hDsB,SAAU9U,EAAWd,EAAO4V,GACpD,OAAO+J,GAAa7e,EAAWd,EAAOse,IAAoB,SAAU4B,GAClE,OAAOA,EAAQr4B,MAAK,WAClB,OAAO+tB,EAAUO,kBAChB,SAAUiI,GACX,OAAOA,EAAYxI,EAAUyI,aAAe,SAE7CzI,GAuhDM0f,CAAoBx0B,EAAWd,EAAO4V,IAM7CuL,aAxBiB,SAAU7I,GAC3B,OAAOA,EAAQ+F,EAAWzxB,MAAQ,KAwBlCopB,kBAtBsB,SAAUpT,EAAG2yB,GACnC,MAAO,CAAC,IAAM3yB,IAsBduT,aApBiB,WACjB,OAAO9W,KAAagf,EAAWzxB,MAAQ,KAoBvCo0B,gBAAiBzD,GACjBqE,iBAnBqB,SAAUtJ,GAC/B,IAAIkd,EAAeH,EAAWzoC,MAE1Bo4B,EAAWwQ,EADFld,EAAQ,IAAMkd,EAE3BjY,GAAmBvd,EAAOglB,GAC1BqQ,EAAWp4B,IAAI+nB,GACf3G,EAAWphB,IAAIua,GAAMxX,KAcrBoW,YAAY,EACZnJ,MAAO,YAGPwoB,GAAY,SAAUL,EAAcp1B,GACtC,IAAIwb,EAAQwZ,GAAKI,GACbtY,EAAWtB,EAAM5uB,IAcrB,MAAO,CACL4uB,MAAOsB,EACPuB,WAAYvB,EACZsE,UANc,SAAUtgB,EAAW8U,GACnC,OAAOuK,GAAerf,EAAWd,EAAO4V,IAMxCuL,aAjBiBh7B,EAkBjB6vB,kBAjBsB,SAAUpT,EAAG0V,GAEnC,MAAO,CADOpW,KAAKC,IAAI9C,KAAYuD,EAAI0V,GACrB1V,IAgBlBuT,aAAc9W,GACd2hB,gBAAiB1D,GACjBsE,iBAhBqB,SAAUtJ,GAC/B,IAAI0M,EAAWlI,IAAaxE,EAC5BgF,GAActd,EAAOglB,GACrBxJ,EAAMve,IAAI+nB,IAcV5O,YAAY,EACZnJ,MAAO,UAwBPyoB,GARe,SAAU11B,GAE3B,OADYke,GAAYle,GACXnY,MAAK,WAChB,OAAOqtC,GAASl1B,MACf,SAAU4C,GACX,OAlBa,SAAUjN,EAAS6lB,GAClC,IAAIgD,EAAeU,KAA2B/C,KAAKX,GACnD,GAAqB,OAAjBgD,EACF,OAAO2W,GAAe3W,EAAa,GAAI7oB,GAEzC,IAAIgpB,EAAaQ,KAAsBhD,KAAKX,GAC5C,GAAmB,OAAfmD,EAAqB,CACvB,IAAIJ,EAAWvf,SAAS2f,EAAW,GAAI,IACvC,OAAO8W,GAAUlX,EAAU5oB,GAE7B,IAAIggC,EAAgBne,GAAM7hB,GAC1B,OAAO8/B,GAAUE,EAAehgC,GAOvBigC,CAAW51B,EAAO4C,OAGzB8yB,GAESD,GAFTC,GAGcP,GAIdU,GAAQ,SAAUniB,EAAQ1T,GAC5B,GAAI2zB,GAAoBjgB,GAAS,CAC/B,IAAI8H,EAAQmZ,GAAcjhB,EAAQ1T,EAAM3L,KAAKrL,OAAO8rC,IAAc5sC,YAAW,WAC3E,OAAO++B,GAAuBjnB,MAEhC,OAAO01B,GAAyBla,EAAOxb,GAClC,OAAIkzB,GAAexf,GACjBgiB,GAAoBle,GAAMxX,GAAQA,GAElC01B,GAAuB11B,IAI9B81B,GAA0B,SAAUngC,GACtC4H,GAAO5H,EAAS,UAOdogC,GAAqB,SAAU/1B,EAAO4V,GACxC,IAAIoP,EAhtDmB,SAAUhlB,GACjC,OAAOwX,GAAMxX,GAAS,KA+sDPg2B,CAAmBh2B,GAClC+lB,GAAe/lB,EAAOlW,EAAST,KAAK27B,GAAWl7B,EAAS1C,OAAQwuB,GAChEkgB,GAAwB91B,IAatBi2B,GAAoB,SAAUviB,EAAQ1T,IArBf,SAAUA,EAAO4V,GAC1C,IAAIoP,EAAW/F,GAAqBjf,GACpC+lB,GAAe/lB,EAAOlW,EAAST,KAAK27B,GAAWl7B,EAAS1C,OAAQwuB,GAChEkgB,GAAwB91B,GAoBxBk2B,CAAqBl2B,EADH61B,GAAMniB,EAAQ1T,KAG9Bm2B,GAAgB,SAAUziB,EAAQ1T,GACpC,IAAIo2B,EAAcP,GAAMniB,EAAQ1T,GAChC+1B,GAAmB/1B,EAAOo2B,IAExBC,GAnBoB,SAAUr2B,GAChCtB,GAASsB,EAAO,SAChB,IAAIyX,EAAY5X,GAAQG,GACpBs2B,EAAc7e,EAAU/wB,OAAS,EAAI+wB,EAAYlf,GAAMyH,GAC3DpX,EAAK0tC,GAAa,SAAUx3B,GAC1BJ,GAASI,EAAM,SACfg3B,GAAwBh3B,MAE1Bg3B,GAAwB91B,IAuBtBu2B,GAAkB,WACpB,IAAIlsB,EAAY/V,GAAaY,QAAQ,OAUrC,OATAiJ,GAASkM,EAAW,CAClBgjB,SAAU,SACVtU,OAAQ,IACRyC,MAAO,IACPgb,QAAS,IACTC,OAAQ,IACR9D,OAAQ,MAEVzsB,GA/xHOvK,GAAQrH,GAAaH,QAAQQ,WA+xHrB0V,GACRA,GAWLqsB,GAAmB,OACnBhT,GAAc,SAAU/jB,GAC1B,MAAyC,UAAlCvC,GAAMuC,EAAK,oBAEhBg3B,GAAmB,SAAUjjB,GAC/B,IAGIkjB,EACAC,EAJAC,EAAehtC,EAAS1C,OACxByuB,EAAS/rB,EAAS1C,OAClBmnC,EAAOzkC,EAAS1C,OAGhB2vC,EAAU,SAAUp3B,GACtB,MAAwB,UAAjBA,EAAI9G,UAETm+B,EAAa,WACf,OAAOnhB,GAKL+b,EAAa,SAAU5xB,GACzB,OAAO61B,GAAMniB,EAAQ1T,IAEnBi3B,EAAwB,WAC1B,OAAOhD,GAA8BvgB,GA39ChC,CACLiO,YA5BgB,SAAU4B,EAASjL,EAAO+I,GACtCA,GACFkC,EAAQjL,IA2BViJ,gBAhBoB,SAAUe,EAAOloB,EAAOke,EAAOqK,EAAatB,GAChE,GAAIA,EAAc,CAChB,GAAI/I,GAAS,EACX,OAAOA,EAEP,IAAI4e,EAAW7qC,EAAMi2B,GAAO,SAAUh5B,EAAGO,GACvC,OAAOP,EAAIO,EAAI84B,IACd,GACH,OAAOzgB,KAAKC,KAAK+0B,EAAU5e,GAG7B,OAAOuK,GAAmBP,EAAOloB,EAAOke,EAAOqK,IAMjDzM,mBAzCEA,EAAqB,SAAUoM,EAAOloB,EAAO6b,EAAMqC,EAAOqK,GAC5D,IACIU,EAAeP,GAAWR,EADpBhK,GAAS,EAAIrC,EAAO7b,EACYke,EAAOqK,GACjD,OAAON,GAASC,EAAOloB,EAAO6b,EAAO,EAAG,CACtCoN,GACCA,GACAjB,KAoCH/L,iBAlCqB,SAAUiM,EAAOkB,EAAOppB,EAAO6b,EAAMqC,EAAOqK,GACjE,OAAOzM,EAAmBoM,EAAOloB,EAAO6b,EAAMqC,EAAOqK,IAkCrDrM,oBA3BwB,SAAUgM,EAAOkB,EAAO2T,EAAQ7e,EAAO8e,EAAchU,GAC7E,GAAIA,EACF,OAAOhB,GAAKE,GAEZ,IAAIM,EAAOtK,EAAQgK,EAAM57B,OACzB,OAAOiC,EAAI25B,EAAOr8B,EAAS28B,MA4+CoCjB,KAlgDjD,IACdzL,GAsgDAmhB,EAAoB,SAAUr3B,EAAO4jB,EAAQpI,GAC/C,IAAI8b,EAAoBpnC,GAAS0zB,EAAQ,KAIzC,GAHkB,KAAdiT,GACFZ,GAAkBviB,EAAQ1T,GAExBwb,IAAUob,GAAwB,KAAdC,EAAkB,CACxC34B,GAAM8B,EAAO,QAAS62B,GACtB,IAAI3V,EAAW+V,IACXrhB,EAAYgc,EAAW5xB,GACvBuR,EAAM0iB,GAA8BvgB,IAAW4jB,EAZnC,SAAUt3B,GAC5B,OAAOknB,GAAYlnB,GAAOH,QAW+C03B,CAAcv3B,GAAS,EAAI,EAClGihB,GAAYjhB,EAAOwb,EAAQob,EAAQrlB,EAAK2P,EAAUtL,QAC7C,GAAIkf,GAAa+B,GAAY,CAClC,IAAIW,EAAW9gB,WAAWmgB,EAAUhoC,QAAQ,IAAK,KAEjDqP,GAAM8B,EAAO,QADQwb,EAAQgc,EAAWZ,EACD,MAhQ/B,SAAU1wC,GACtB,MAAO,oBAAoBuI,KAAKvI,IAiQ1BuxC,CAAQZ,IA7EC,SAAU72B,GACzB,IAAIc,EAAYuB,GAAU1B,UAAUX,GAC/BqC,GAAUS,WAAWhC,IACxBlY,EAAK2P,GAAMyH,IAAQ,SAAUlB,GAC3B,IAAI44B,EAAgBr5B,GAAMS,EAAM,SAChCZ,GAAMY,EAAM,QAAS44B,GACrBn6B,GAAOuB,EAAM,YAwEb64B,CAAW33B,IA+Ef,OApEA0T,EAAOG,GAAG,QAAQ,WAChB,IAAI+jB,EAlEI,SAAUlkB,EAAQgQ,GAC5B,OAAOhQ,EAAOmkB,OAASpU,GAAgB4Q,GAAU3gB,GAAS6iB,KAAmB7S,GAAeD,GAAgBnvB,GAAaH,QAAQuf,EAAOgB,UAAWgP,GAiEnIoU,CAAMpkB,EAAQgQ,IAE5B,GADA6K,EAAOzkC,EAAST,KAAKuuC,GA3TD,SAAUlkB,GAChC,IAAIqkB,EAAiBrkB,EAAOof,SAAS,mBAAmB,GACxD,OAAOroC,EAASstC,GAAqC,UAAnBA,EAA6BA,EA0TzDC,CAAkBtkB,IAlZD,SAAUA,GACjC,OAAOA,EAAOof,SAAS,qBAAqB,EAAM,WAiZfmF,CAAmBvkB,GAAS,CAC3D,IAAIwN,EAAW+V,IACXiB,EAAKvG,GAAmBiG,EAAS1W,EAAU0Q,GAC/CsG,EAAGrkB,KACHqkB,EAAGnP,OAAOmJ,UAAUrpC,MAAK,SAAUspC,GACjC2E,EAAehtC,EAAST,KAAKqqB,EAAOhB,UAAUylB,aAEhDD,EAAGnP,OAAOiJ,aAAanpC,MAAK,SAAUmS,GACpC,IAAIo9B,EAAWp9B,EAAMgF,MAAM3L,KAxdP,SAAUqf,EAAQjjB,EAAQ+qB,EAAOzC,EAAQ6K,GACnElQ,EAAO2e,KAAK,oBAAqB,CAC/B5hC,OAAQA,EACR+qB,MAAOA,EACPzC,OAAQA,EACR6K,OAAQA,IAodJyU,CAAsB3kB,EAAQ0kB,EAAU9D,GAAgB8D,GAAW7D,GAAe6D,GAAW1B,GAAmB17B,EAAM/Q,SAExHiuC,EAAGnP,OAAOkJ,YAAYppC,MAAK,SAAUmS,GACnC,IAAIgF,EAAQhF,EAAMgF,MACdo4B,EAAWp4B,EAAM3L,IACrBogC,GAAgBz0B,GAChB82B,EAAaluC,MAAK,SAAUosB,GAC1BtB,EAAOhB,UAAUuC,OAAOD,GACxBtB,EAAOwB,WAzdO,SAAUxB,EAAQjjB,EAAQ+qB,EAAOzC,EAAQ6K,GAC/DlQ,EAAO2e,KAAK,gBAAiB,CAC3B5hC,OAAQA,EACR+qB,MAAOA,EACPzC,OAAQA,EACR6K,OAAQA,IAsdJ0U,CAAkB5kB,EAAQ0kB,EAAU9D,GAAgB8D,GAAW7D,GAAe6D,GAAW1B,GAAmB17B,EAAM/Q,MAClHypB,EAAO6kB,YAAYjT,SAErBzP,EAAS/rB,EAAST,KAAK6uC,OAG3BxkB,EAAOG,GAAG,qBAAqB,SAAUlZ,GACvC,IAAI69B,EAAY79B,EAAElK,OAClB,GAAIsmC,EAAQyB,GAAY,CACtB,IAAIx4B,EAAQ1L,GAAaH,QAAQqkC,GACjC5vC,EAAK8qB,EAAOrf,IAAIokC,OAAO,yBAAyB,SAAUh7B,GACxDiW,EAAOrf,IAAIqkC,SAASj7B,EAAO,OAASs2B,GAA2BrgB,GAAU,gBAEtEqT,GAAgB/mB,IAAUkzB,GAAexf,GAC5CyiB,GAAcziB,EAAQ1T,IACZ8mB,GAAkB9mB,IAAU2zB,GAAoBjgB,IAC1DuiB,GAAkBviB,EAAQ1T,GAExBgnB,GAAehnB,IAAUhQ,EAAW2K,EAAEipB,OAAQ8S,KAChDT,GAAkBviB,EAAQ1T,GAE5B42B,EAASj8B,EAAE6gB,MACXqb,EAAYzD,GAAmB1f,GAAU,GAAKihB,GAAcjhB,EAAQ8kB,GAAWvwC,MAAM,QAGzFyrB,EAAOG,GAAG,iBAAiB,SAAUlZ,GACnC,IAAI69B,EAAY79B,EAAElK,OAClB,GAAIsmC,EAAQyB,GAAY,CACtB,IAAIx4B,EAAQ1L,GAAaH,QAAQqkC,GAC7BG,EAAWh+B,EAAEipB,OACb5zB,EAAW2oC,EAAU,YACvBtB,EAAkBr3B,EAAO24B,EAAUh+B,EAAE6gB,OAEvCiZ,GAAgBz0B,GAChBuyB,GAAkB7e,EAAQ1T,EAAM3L,SAGpCqf,EAAOG,GAAG,cAAc,WACtBmjB,IAAapuC,MAAK,SAAUitB,GACtBnC,EAAOwV,KAAK0P,aACd/iB,EAAO4b,WAEP5b,EAAO6b,iBAIN,CACLsF,WAAYA,EACZ6B,SA9Ga,WACb,OAAOtK,EAAKtmC,MAAMw7B,GAAgBnvB,GAAaH,QAAQuf,EAAO/X,WAAY+nB,MA8G1EsH,QA/EY,WACZnV,EAAOjtB,MAAK,SAAUsvC,GACpBA,EAAGlN,aAELuD,EAAK3lC,MAAK,SAAUga,IA1DT,SAAU8Q,EAAQ6a,GAC3B7a,EAAOmkB,QACT/wB,GAASynB,EAAK/0B,UAyDZs/B,CAASplB,EAAQ9Q,SA8EnBm2B,GAAQ,SAAUpjC,EAASqjC,GAC7B,MAAO,CACLrjC,QAASA,EACTqjC,OAAQA,IAIRzT,GAAO,SAAUzc,EAAUnT,EAAS0qB,GACtC,OAAIvX,EAAS9K,WAAW/E,OAAOtD,IAAmE,IAAvDmT,EAAS9K,WAAWwK,QAAQ7S,GAASvF,OAAO1J,QAAgBoiB,EAAS9K,WAAWjF,UAAUpD,GAC5H0qB,EAAU1qB,GAAS9M,MAAK,SAAUiN,GACvC,OAAOyvB,GAAKzc,EAAUhT,EAAMuqB,GAAW33B,SAAQ,WAC7C,OAAOoB,EAAST,KAAKyM,SAIlBhM,EAAS1C,QAGhB6xC,GAAQ,SAAUnwB,EAAUnT,GAC9B,OAAImT,EAAS9K,WAAW/E,OAAOtD,GACtBmT,EAAS9K,WAAWwK,QAAQ7S,GAASjP,OAE/BoiB,EAAS9K,WAAW9D,SAASvE,GAC5BjP,QAEdwyC,GAAc,SAAUpwB,EAAUnT,GACpC,IAAIzG,EAAYq2B,GAAKzc,EAAUnT,EAASmT,EAASlV,QAAQmG,aAAa9R,MAAM0N,GAC5E,GAAImT,EAAS9K,WAAW/E,OAAO/J,GAC7B,OAAO6pC,GAAM7pC,EAAW+pC,GAAMnwB,EAAU5Z,IAE1C,IAAIgL,EAAW4O,EAAS9K,WAAW9D,SAAShL,GAC5C,OAAOgL,EAASxT,OAAS,EAAIwyC,GAAYpwB,EAAU5O,EAASA,EAASxT,OAAS,IAAMqyC,GAAM7pC,EAAW+pC,GAAMnwB,EAAU5Z,KAGnHiqC,GAAgBD,GAEhBE,GAAa5xB,KAKb6xB,GAAQ,SAAUC,EAAM/wB,IAl8DN,SAAUzJ,GAE9B,OADYof,GAAYpf,GACXjW,MAAK,SAAU+Z,GAC1B,OAAOqZ,GAAMrZ,EAAG,CACd,QACA,WACA,cA67DQ22B,CAAgBD,GACtB1wC,MAAK,SAAUga,GACnB,IAAIoiB,EAAWpiB,EAAE1c,MAAQ,EACzB84B,GAAgBsa,EAAMtU,EAAUpiB,EAAEyZ,MAClC2C,GAAgBzW,EAAOyc,EAAUpiB,EAAEyZ,UAWnCmd,GAAa,SAAUC,EAASr/B,EAAO0E,GAC7B26B,EAAQlhC,MACd6B,GAAS0E,GAEb46B,GAAW,SAAUD,EAASlhC,GAChC,OAAOI,GAASJ,EAAOkhC,EAAQjhC,UAE7BmhC,GAAW,SAAUF,EAASxyC,GAChC,IAAIsR,EAAQkhC,EAAQlhC,MAChBtM,EAAItD,EAAI4P,EAAOtR,GACnB,OAAO0R,GAAS1M,EAAGwtC,EAAQjhC,UAEzBohC,GAAU,SAAUH,EAASr/B,GAC/B,OAAOq/B,EAAQlhC,MAAM6B,IAEnBy/B,GAAiB,SAAUJ,EAASr/B,GACtC,OAAOw/B,GAAQH,EAASr/B,GAAOzE,SAE7BmkC,GAAa,SAAUL,GACzB,OAAOA,EAAQlhC,MAAM7R,QAEnBqzC,GAAqB,SAAU33B,GACjC,IAAItG,EAl2JU,SAAUrQ,EAAIG,GAG5B,IAFA,IAAIouC,EAAO,GACPC,EAAO,GACFpuC,EAAI,EAAGC,EAAML,EAAG/E,OAAQmF,EAAIC,EAAKD,IAAK,CAC7C,IAAIzF,EAAIqF,EAAGI,IACDD,EAAKxF,EAAGyF,GAAKmuC,EAAOC,GAC1B1uC,KAAKnF,GAEX,MAAO,CACL4zC,KAAMA,EACNC,KAAMA,GAw1JKC,CAAU93B,GAAM,SAAU/B,GACrC,MAAuB,aAAhBA,EAAI7H,WAEb,MAAO,CACLyH,KAAMnE,EAAOm+B,KACbviB,KAAM5b,EAAOk+B,OAIbG,GAAW,SAAUxkC,EAASqI,EAAU9X,EAAOk0C,GAC7Cl0C,IAAUk0C,EACZ78B,GAAO5H,EAASqI,GAEhBf,GAAItH,EAASqI,EAAU9X,IAGvB+hB,GAAS,SAAUjI,EAAOpK,EAAUD,GACtC9I,EAAKoP,GAAW+D,EAAOpK,IAAW/N,MAAK,WACrC,OAAOse,GAAQnG,EAAOrK,MACrB,SAAUwE,GACX,OAAO8L,GAAM9L,EAAOxE,OAkBpB0kC,GAAS,SAAUr6B,EAAOoC,GAC5B,IAAIk4B,EAAU,GACVC,EAAW,GACXC,EAAW,SAAUC,GACvB,OAAO9xC,EAAI8xC,GAAa,SAAUp6B,GAC5BA,EAAI3H,OACN4hC,EAAQ/uC,KAAK8U,EAAI1K,SAEnB,IAAI+kC,EAAKr6B,EAAI1K,QAUb,OATAgR,GAAM+zB,GACN9xC,EAAKyX,EAAI9H,OAAO,SAAUuG,GACpBA,EAAKpG,OACP6hC,EAAShvC,KAAKuT,EAAKnJ,SAErBwkC,GAASr7B,EAAKnJ,QAAS,UAAWmJ,EAAKzG,QAAS,GAChD8hC,GAASr7B,EAAKnJ,QAAS,UAAWmJ,EAAK1G,QAAS,GAChD8N,GAAOw0B,EAAI57B,EAAKnJ,YAEX+kC,MAGPC,EAAe,SAAUF,GAC3B,OAAO5xC,EAAK4xC,GAAa,SAAUG,GACjC,OAAOjyC,EAAIiyC,EAASriC,OAAO,SAAUgZ,GAEnC,OADA4oB,GAAS5oB,EAAI5b,QAAS,OAAQ4b,EAAIlZ,QAAS,GACpCkZ,EAAI5b,eAIbklC,EAAgB,SAAUJ,EAAaK,GACzC,IAAItiC,EA7Cc,SAAUwH,EAAO86B,GACrC,IAAItiC,EAAUiE,GAAQuD,EAAO86B,GAAa5yC,YAAW,WACnD,IAAI6yC,EAAazmC,GAAaY,QAAQ4lC,EAAa1hC,GAAM4G,GAAO3L,KAQhE,MAPoB,UAAhBymC,EACF7yB,GAAOjI,EAAO,mBAAoB+6B,GACT,aAAhBD,EACT7yB,GAAOjI,EAAO,UAAW+6B,GAEzB70B,GAAOlG,EAAO+6B,GAETA,KAGT,OADAp0B,GAAMnO,GACCA,EAgCSwiC,CAAgBh7B,EAAO86B,GAEjCG,GADuB,aAAhBH,EAA6BH,EAAeH,GAC/BC,GACxB/zB,GAASlO,EAASyiC,IAKhBC,EAAwB,SAAUT,EAAaK,GAC7CL,EAAY/zC,OAAS,EACvBm0C,EAAcJ,EAAaK,GALX,SAAUA,GAC5Br+B,GAAQuD,EAAO86B,GAAalyC,KAAKke,IAM/Bq0B,CAAcL,IAGdM,EAAc,GACdC,EAAc,GACdC,EAAc,GACdC,EAAsB,GAqB1B,OApBA3yC,EAAKwZ,GAAM,SAAU/B,GACnB,OAAQA,EAAI7H,SACZ,IAAK,QACH4iC,EAAY7vC,KAAK8U,GACjB,MACF,IAAK,QACHg7B,EAAY9vC,KAAK8U,GACjB,MACF,IAAK,QACHi7B,EAAY/vC,KAAK8U,GACjB,MACF,IAAK,WACHk7B,EAAoBhwC,KAAK8U,OAI7B66B,EAAsBK,EAAqB,YAC3CL,EAAsBE,EAAa,SACnCF,EAAsBG,EAAa,SACnCH,EAAsBI,EAAa,SAC5B,CACLhB,QAASA,EACTC,SAAUA,IAwBViB,GAAW,SAAU/vC,EAAIgwC,GAC3B,GAAkB,IAAdhwC,EAAG/E,OACL,OAAO,EAET,IAAI6e,EAAQ9Z,EAAG,GAIf,OAHYgB,EAAUhB,GAAI,SAAUrF,GAClC,OAAQq1C,EAAKl2B,EAAM5P,QAASvP,EAAEuP,YAEnB9N,MAAK,WAChB,OAAO4D,EAAG/E,UACT,SAAUijB,GACX,OAAOA,MAGP+xB,GAAU,SAAUt5B,EAAM/B,EAAKE,EAAQkC,GACzC,IAAIk5B,EAlBO,SAAUv5B,EAAMhI,GAC3B,OAAOgI,EAAKhI,GAiBIwhC,CAAOx5B,EAAM/B,GAAK9H,MAAMpN,MAAMoV,GAC1Cs7B,EAAcL,GAASG,EAAWl5B,GAClCq5B,EAzBU,SAAU15B,EAAMhI,GAC9B,OAAOzR,EAAIyZ,GAAM,SAAU/B,GACzB,OAAOu5B,GAAQv5B,EAAKjG,MAuBH2hC,CAAU35B,EAAM7B,GAAQpV,MAAMkV,GAEjD,MAAO,CACLhI,QAASwjC,EACTzjC,QAHgBojC,GAASM,EAAcr5B,KAOvCu5B,GAAY,SAAU55B,EAAMK,GAC9B,IAAIw5B,EAAOtzC,EAAIyZ,GAAM,SAAU/B,GAC7B,OAAO1X,EAAI0X,EAAI9H,MAAOrR,MASxB,OAAOyB,EAAIyZ,GAAM,SAAU/B,EAAK8N,GAU9B,OA7zIa,SAAU+tB,EAAS1jC,GAClC,MAAO,CACL0jC,QAASA,EACT1jC,QAASA,GA0zIF2jC,CATOtzC,EAAKwX,EAAI9H,OAAO,SAAUuG,EAAMyC,GAC5C,IAAoC,IAAhC06B,EAAK9tB,GAAU5M,GAAwB,CACzC,IAAIzF,EAAS4/B,GAAQt5B,EAAM+L,EAAU5M,EAAakB,GAElD,OAZW,SAAU0L,EAAU5M,EAAanJ,EAASC,GACzD,IAAK,IAAIgI,EAAM8N,EAAU9N,EAAM8N,EAAW/V,EAASiI,IACjD,IAAK,IAAIE,EAASgB,EAAahB,EAASgB,EAAclJ,EAASkI,IAC7D07B,EAAK57B,GAAKE,IAAU,EAQpB67B,CAAWjuB,EAAU5M,EAAazF,EAAO1D,QAAS0D,EAAOzD,SAClD,EAp2IW1C,EAo2IAmJ,EAAKnJ,QAp2IIyC,EAo2IK0D,EAAO1D,QAp2IHC,EAo2IYyD,EAAOzD,QAp2IVK,EAo2ImBoG,EAAKpG,MAn2IpE,CACL/C,QAASA,EACTyC,QAASA,EACTC,QAASA,EACTK,MAAOA,KAi2IH,MAAO,GAt2IC,IAAU/C,EAASyC,EAASC,EAASK,KAy2ItB2H,EAAI7H,aAG/B6jC,GAAS,SAAUv7B,EAAW6T,EAAYjc,GAC5C,IAAI0J,EAAO,GACX,GAAIC,GAAUS,WAAWhC,GAAY,CACnC,IAAIw7B,EAAkB3zC,EAAI0Z,GAAUQ,YAAY/B,IAAY,SAAUP,GACpE,OAAO9H,GAAW8H,EAAO5K,QAAS+C,MAEpC0J,EAAK7W,KAAKoN,GAAS2jC,EAAiB,aAEtC,IAAK,IAAInuB,EAAW,EAAGA,EAAWrN,EAAUsB,KAAKnC,KAAMkO,IAAY,CAEjE,IADA,IAAIouB,EAAW,GACNh7B,EAAc,EAAGA,EAAcT,EAAUsB,KAAKvC,QAAS0B,IAAe,CAC7E,IAAI5L,EAAU0M,GAAUC,MAAMxB,EAAWqN,EAAU5M,GAAa5Y,KAAI,SAAU6Z,GAC5E,OAAO/J,GAAW+J,EAAK7M,QAAS+C,MAC/BxQ,YAAW,WACZ,OAAOuQ,GAAWkc,EAAWrC,OAAO,MAEtCiqB,EAAShxC,KAAKoK,GAEhB,IAAI0K,EAAM1H,GAAS4jC,EAAUz7B,EAAUla,IAAIunB,GAAU3V,SACrD4J,EAAK7W,KAAK8U,GAEZ,OAAO+B,GAMLo6B,GAAa,SAAUC,EAAU9nB,GAYnC,OAAOhsB,EAAI8zC,GAAU,SAAUP,GAC7B,IAAI77B,EAZQ,SAAU67B,GAOtB,OANiBpvC,EAAQovC,GAAS,SAAU/jC,GAC1C,OAAOqB,GAAOrB,EAAOxC,SAAShN,KAAI,SAAU0X,GAC1C,IAAI3H,EAAQc,GAAO6G,GAAK7Y,SACxB,OAAOiR,GAAW4H,EAAK3H,SAGTxQ,YAAW,WAC3B,OAAOuQ,GAAWkc,EAAWtU,OAAO,MAI5Bq8B,CAAQR,EAAQA,SAC1B,OAv3Ia,SAAUvmC,EAAS4C,EAAOC,EAASE,GAClD,MAAO,CACL/C,QAASA,EACT4C,MAAOA,EACPC,QAASA,EACTE,MAAOA,GAk3IAikC,CAAWt8B,EAAI1K,QAASumC,EAAQA,QAASA,EAAQ1jC,QAAS6H,EAAI3H,WAGrEkkC,GAAe,SAAUx6B,EAAMuS,GACjC,IAAI8nB,EAAWT,GAAU55B,EAAMhM,IAC/B,OAAOomC,GAAWC,EAAU9nB,IAE1BkoB,GAAkB,SAAU/7B,EAAWnL,GACzC,OAAO7I,EAAQgU,EAAUla,KAAK,SAAUqF,GACtC,OAAOK,EAAKL,EAAEsM,OAAO,SAAUoC,GAC7B,OAAOvE,GAAKT,EAASgF,EAAEhF,gBAIzBmnC,GAAM,SAAUC,EAAW1uB,EAAS2uB,EAAYC,EAAYC,GAC9D,OAAO,SAAU3O,EAAMvuB,EAAOvP,EAAQkkB,EAAYwoB,GAChD,IAAIr8B,EAAYuB,GAAU1B,UAAUX,GAUpC,OATaqO,EAAQvN,EAAWrQ,GAAQ9H,KAAI,SAAUuI,GACpD,IAAIksC,EAnCU,SAAUt8B,EAAW6T,GACvC,OAAO0nB,GAAOv7B,EAAW6T,GAAY,GAkCrB0oB,CAAcv8B,EAAW6T,GACjC7Y,EAASihC,EAAUK,EAAOlsC,EAAMkF,GAAM8mC,EAAYvoB,IAEtD,MAAO,CACLvS,KAFSw6B,GAAa9gC,EAAOsG,KAAMuS,GAGnC2oB,OAAQxhC,EAAOwhC,WAGLz1C,MAAK,WACjB,OAAOiC,EAAS1C,UACf,SAAUm2C,GACX,IAAIC,EAAcnD,GAAOr6B,EAAOu9B,EAAIn7B,MAChCg0B,EAActsC,EAASC,KAAKozC,GAAQj1C,YAAW,WACjD,OAAOwtC,GAAuB11B,MAKhC,OAHAg9B,EAAWh9B,EAAOu9B,EAAIn7B,KAAMg0B,GAC5B6G,EAAWj9B,GACXkwB,GAAQ3B,EAAMvuB,GACPlW,EAAST,KAAK,CACnBi0C,OAAQC,EAAID,OACZhD,QAASkD,EAAYlD,QACrBC,SAAUiD,EAAYjD,gBAK1BkD,GAAS,SAAU38B,EAAWrQ,GAChC,OAAOqO,GAAKrO,EAAOkF,SAAS9M,MAAK,SAAUiW,GACzC,OAAO+9B,GAAgB/7B,EAAWhC,OAclC4+B,GAAkB,SAAU58B,EAAWrQ,GACzC,IAAIyrC,EAAUvzC,EAAI8H,EAAOiiB,WAAW,SAAUirB,GAC5C,OAAO7+B,GAAK6+B,GAAQ90C,MAAK,SAAU+0C,GACjC,OAAOf,GAAgB/7B,EAAW88B,SAGlCrlC,EAAQge,GAAI2lB,GAChB,OAAO3jC,EAAM7R,OAAS,EAAIoD,EAAST,KAAK,CACtCkP,MAAOA,EACPoc,WAAYlkB,EAAOkkB,WACnBE,UAAWpkB,EAAOokB,YACf/qB,EAAS1C,QAQZy2C,GAAU,SAAU/8B,EAAWrQ,GACjC,IAAIyrC,EAAUvzC,EAAI8H,EAAOiiB,WAAW,SAAUirB,GAC5C,OAAO7+B,GAAK6+B,GAAQ90C,MAAK,SAAU+0C,GACjC,OAAOf,GAAgB/7B,EAAW88B,SAGlCrlC,EAAQge,GAAI2lB,GAChB,OAAO3jC,EAAM7R,OAAS,EAAIoD,EAAST,KAAKkP,GAASzO,EAAS1C,QAexD02C,GAAU,SAAU17B,EAAM3R,EAAQgS,EAAYs7B,GAGhD,IAFA,IAAI99B,EAAO85B,GAAmB33B,GAAMnC,KAChCsF,GAAQ,EACH1Z,EAAI,EAAGA,EAAIoU,EAAKvZ,OAAQmF,IAC/B,IAAK,IAAI4B,EAAI,EAAGA,EAAIqsC,GAAW75B,EAAK,IAAKxS,IAAK,CAC5C,IACIuwC,EAAcv7B,EADJo3B,GAAe55B,EAAKpU,GAAI4B,GACAgD,IAClB,IAAhButC,IAAkC,IAAVz4B,EAC1Bi0B,GAAWv5B,EAAKpU,GAAI4B,EAAGgL,GAAWslC,KAAgB,KACzB,IAAhBC,IACTz4B,GAAQ,GAId,OAAOnD,GAsBL67B,GAAY,SAAU77B,EAAMhI,EAAOqI,EAAYs7B,GACjD,IAAI99B,EAAO85B,GAAmB33B,GAAMnC,KACpC,GAAI7F,EAAQ,GAAKA,EAAQ6F,EAAKvZ,OAAQ,CACpC,IACI6R,EAxBU,SAAU8H,EAAKoC,GAC/B,OAAOpW,EAAMgU,GAAK,SAAU8X,EAAMrZ,GAChC,OAAOhW,EAAOqvB,GAAM,SAAU+lB,GAC5B,OAAOz7B,EAAWy7B,EAAYvoC,QAASmJ,EAAKnJ,YACzCwiB,EAAOA,EAAKtxB,OAAO,CAACiY,MACxB,IAmBWq/B,CADOl+B,EAAK7F,EAAQ,GAAG7B,MACGkK,GACtC7Z,EAAK2P,GAAO,SAAUuG,GAmBpB,IAlBA,IAAIs/B,EAAct0C,EAAS1C,OACvBi3C,EAAU,SAAUxyC,GAatB,IAZA,IAAIyyC,EAAU,SAAU7wC,GACtB,IAAI+B,EAAUyQ,EAAKpU,GAAG0M,MAAM9K,GACVgV,EAAWjT,EAAQmG,QAASmJ,EAAKnJ,WAE7CyoC,EAAY52C,WACd42C,EAAct0C,EAAST,KAAK00C,MAE9BK,EAAYx1C,MAAK,SAAU21C,GACzB/E,GAAWv5B,EAAKpU,GAAI4B,EAAGgL,GAAW8lC,GAAK,SAIpC9wC,EAAI,EAAGA,EAAIqsC,GAAW75B,EAAK,IAAKxS,IACvC6wC,EAAQ7wC,IAGH5B,EAAIuO,EAAOvO,EAAIoU,EAAKvZ,OAAQmF,IACnCwyC,EAAQxyC,MAId,OAAOuW,GAGLlc,GAAQ,SAAUqB,GAkCpB,MAAO,CACLQ,GAlCO,SAAU4B,GACjB,OAAOpC,IAAMoC,GAkCb60C,QAASr3C,EACTs3C,QAASv3C,EACTe,MAAOhC,EAASsB,GAChBW,WAAYjC,EAASsB,GACrBY,SAAUlC,EAASsB,GACnBkB,GArCO,SAAUi2C,GACjB,OAAOx4C,GAAMqB,IAqCbmB,QAnCY,SAAUi2C,GACtB,OAAOz4C,GAAMqB,IAmCbM,KArBS,SAAU+2C,EAAGC,GACtB,OAAOA,EAAQt3C,IAqBfoB,IAlCQ,SAAU1B,GAClB,OAAOf,GAAMe,EAAEM,KAkCfu3C,SAhCa,SAAUH,GACvB,OAAOz4C,GAAMqB,IAgCbqB,KA9BS,SAAU3B,GACnBA,EAAEM,IA8BFsB,KA5BS,SAAU5B,GACnB,OAAOA,EAAEM,IA4BTuB,OAvBW,SAAU7B,GACrB,OAAOA,EAAEM,IAuBTwB,OArBW,SAAU9B,GACrB,OAAOA,EAAEM,IAqBTw3C,WAnBe,WACf,OAAOj1C,EAAST,KAAK9B,MAqBrB0N,GAAQ,SAAU+pC,GAyBpB,MAAO,CACLj3C,GAAIb,EACJs3C,QAASt3C,EACTu3C,QAASt3C,EACTc,MAAO9B,EACP+B,WA7Be,SAAUjB,GACzB,OAAOA,KA6BPkB,SA3Ba,WACb,OA7+KgBC,EA6+KLmC,OAAOy0C,GA5+Kb,WACL,MAAM,IAAI32C,MAAMD,OAFV,IAAUA,GAwgLhBK,GAzBO,SAAU2uB,GACjB,OAAOA,GAyBP1uB,QAvBY,SAAUzB,GACtB,OAAOA,KAuBPY,KAZS,SAAUo3C,EAASL,GAC5B,OAAOK,EAAQD,IAYfr2C,IAtBQ,SAAUg2C,GAClB,OAAO1pC,GAAM+pC,IAsBbF,SApBa,SAAU73C,GACvB,OAAOgO,GAAMhO,EAAE+3C,KAoBfp2C,KAAM5C,EACN6C,KAnBS,SAAU81C,GACnB,OAAO1pC,GAAM+pC,IAmBbl2C,OAAQ5B,EACR6B,OAAQ5B,EACR43C,WAAYj1C,EAAS1C,OAQrB83C,GAAS,CACXh5C,MAAOA,GACP+O,MAAOA,GACPkqC,WARe,SAAU/nB,EAAKgoB,GAC9B,OAAOhoB,EAAIvvB,MAAK,WACd,OAAOoN,GAAMmqC,KACZl5C,MAqBDm5C,GAAe,SAAUC,EAAOC,GAGlC,MAAO,CACLC,SAAU,EACVC,SAJe3F,GAAWwF,EAAM,IACjBxF,GAAWyF,EAAM,MAMhCG,GAAgB,SAAUJ,EAAOC,GAGnC,MAAO,CACLC,SAHeF,EAAM54C,OACN64C,EAAM74C,OAGrB+4C,SAAU,IAGVE,GAAmB,SAAUpnC,EAAO8H,EAAKsU,GAC3C,IAAIirB,EAA+B,aAAhBv/B,EAAI7H,QAAyBmc,EAAWpD,IAAMoD,EAAW7V,KAC5E,OAAOnW,EAAI4P,GAAO,WAChB,OAAOE,GAAWmnC,KAAgB,OAGlCC,GAAU,SAAUz9B,EAAMqZ,EAAQ9G,GACpC,OAAOvS,EAAKvb,OAAOkF,EAAM0vB,GAAQ,WAC/B,IAAIpb,EAAM+B,EAAKA,EAAK1b,OAAS,GAC7B,OAAOgzC,GAASr5B,EAAKs/B,GAAiBt/B,EAAI9H,MAAO8H,EAAKsU,SAGtDmrB,GAAU,SAAU19B,EAAMqZ,EAAQ9G,GACpC,OAAOhsB,EAAIyZ,GAAM,SAAU/B,GACzB,IAAI0/B,EAAcJ,GAAiB5zC,EAAM0vB,EAAQt1B,GAAWka,EAAKsU,GACjE,OAAO+kB,GAASr5B,EAAKA,EAAI9H,MAAM1R,OAAOk5C,QAGtCC,GAAS,SAAUV,EAAOhnB,EAAO3D,GACnC,IAAIsrB,EAAW3nB,EAAMmnB,SAAW,EAAIK,GAAU35C,EAG9C,OAFemyB,EAAMknB,SAAW,EAAIK,GAAU15C,GAC3B85C,EAASX,EAAOp9B,KAAKsW,IAAIF,EAAMmnB,UAAW9qB,GAC/BzS,KAAKsW,IAAIF,EAAMknB,UAAW7qB,IAGtDurB,GAAa,SAAU99B,EAAM/B,EAAKkR,EAAK9O,GACzC,IACI09B,EAAW95C,EAAMoc,EADLm3B,GAAQx3B,EAAK/B,GAAMkR,GACQ5b,SACvCk7B,EAAazuB,EAAK/B,GACtB,OAAO+B,EAAK1b,OAAS,GAAKozC,GAAWjJ,GAAc,IAAMtf,EAAM,GAAK4uB,EAAStG,GAAehJ,EAAYtf,EAAM,KAAOA,EAAMsf,EAAWt4B,MAAM7R,OAAS,GAAKy5C,EAAStG,GAAehJ,EAAYtf,EAAM,KAAOlR,EAAM,GAAK8/B,EAAStG,GAAez3B,EAAK/B,EAAM,GAAIkR,KAASlR,EAAM+B,EAAK1b,OAAS,GAAKy5C,EAAStG,GAAez3B,EAAK/B,EAAM,GAAIkR,MAqBpU6uB,GAAU,SAAUC,EAAcf,EAAOC,EAAOe,EAAW79B,GAE7D,OAjFY,SAAU49B,EAAcf,EAAOC,GAC3C,GAAIc,EAAahgC,KAAOi/B,EAAM54C,QAAU25C,EAAa9/B,OAASu5B,GAAWwF,EAAM,IAC7E,OAAOJ,GAAOjqC,MAAM,mDAAqDorC,EAAahgC,IAAM,aAAeggC,EAAa9/B,QAE1H,IAAIggC,EAAejB,EAAMn0C,MAAMk1C,EAAahgC,KACxCmgC,EAAeD,EAAa,GAAGhoC,MAAMpN,MAAMk1C,EAAa9/B,QACxDkgC,EAAc3G,GAAWyF,EAAM,IAC/BmB,EAAcnB,EAAM74C,OACxB,OAAOw4C,GAAOh5C,MAAM,CAClBs5C,SAAUe,EAAa75C,OAASg6C,EAChCjB,SAAUe,EAAa95C,OAAS+5C,IAsErBE,CAAQN,EAAcf,EAAOC,GAC5B52C,KAAI,SAAU2vB,GAC1B,IAAIsoB,EAAaZ,GAAOV,EAAOhnB,EAAOgoB,GACtC,OAvBc,SAAUD,EAAcf,EAAOC,EAAOe,EAAW79B,GAOjE,IANA,IAAIgB,EAAW48B,EAAahgC,IACxBkD,EAAW88B,EAAa9/B,OAGxBwO,EAAStL,EAFK87B,EAAM74C,OAGpBsoB,EAASzL,EAFIu2B,GAAWyF,EAAM,IAGzBtzC,EAAIwX,EAAUxX,EAAI8iB,EAAQ9iB,IACjC,IAAK,IAAIgsB,EAAI1U,EAAU0U,EAAIjJ,EAAQiJ,IAAK,CAClCioB,GAAWZ,EAAOrzC,EAAGgsB,EAAGxV,IAC1Bq7B,GAAQwB,EAAOzF,GAAeyF,EAAMrzC,GAAIgsB,GAAIxV,EAAY69B,EAAUxhC,MAEpE,IAAI+S,EAAUgoB,GAAe0F,EAAMtzC,EAAIwX,GAAWwU,EAAI1U,GAClD66B,EAAckC,EAAUzxC,QAAQgjB,GACpC2nB,GAAW8F,EAAMrzC,GAAIgsB,EAAGxf,GAAW2lC,GAAa,IAGpD,OAAOkB,EAMEuB,CAAYR,EAAcO,EAAYrB,EAAOe,EAAW79B,OAG/Dq+B,GAAa,SAAU1mC,EAAOklC,EAAOC,EAAOe,EAAW79B,IA/O3C,SAAUL,EAAMhI,EAAOqI,EAAYs7B,GAC7C3jC,EAAQ,GAAKA,EAAQgI,EAAK,GAAG7J,MAAM7R,QACrCkC,EAAKwZ,GAAM,SAAU/B,GACnB,IAAI0gC,EAAW1gC,EAAI9H,MAAM6B,EAAQ,GAC7B5K,EAAU6Q,EAAI9H,MAAM6B,GACNqI,EAAWjT,EAAQmG,QAASorC,EAASprC,UAErD6jC,GAAWn5B,EAAKjG,EAAO3B,GAAWslC,KAAgB,OAyOxDiD,CAAU1B,EAAOllC,EAAOqI,EAAY69B,EAAUxhC,MAC9C,IAAIwZ,EAAQonB,GAAcH,EAAOD,GAC7B2B,EAAgBjB,GAAOT,EAAOjnB,EAAOgoB,GACrCY,EAAcxB,GAAcJ,EAAO2B,GACnCE,EAAgBnB,GAAOV,EAAO4B,EAAaZ,GAC/C,OAAO33C,EAAIw4C,GAAe,SAAU1H,EAAS5tC,GAC3C,IAAI0uC,EAAWd,EAAQlhC,MAAMpN,MAAM,EAAGiP,GAAOvT,OAAOo6C,EAAcp1C,GAAG0M,OAAO1R,OAAO4yC,EAAQlhC,MAAMpN,MAAMiP,EAAOq/B,EAAQlhC,MAAM7R,SAC5H,OAAOgzC,GAASD,EAASc,OAGzB6G,GAAa,SAAUhnC,EAAOklC,EAAOC,EAAOe,EAAW79B,GACzDw7B,GAAUqB,EAAOllC,EAAOqI,EAAY69B,EAAUxhC,MAC9C,IAAIwZ,EAAQ+mB,GAAaE,EAAOD,GAC5B2B,EAAgBjB,GAAOT,EAAOjnB,EAAOgoB,GACrCY,EAAc7B,GAAaC,EAAO2B,GAClCE,EAAgBnB,GAAOV,EAAO4B,EAAaZ,GAC3Ce,EAAKtH,GAAmBoH,GAAgBG,EAAUD,EAAG3pB,KAAM6pB,EAAUF,EAAGphC,KAC5E,OAAOqhC,EAAQz6C,OAAO06C,EAAQp2C,MAAM,EAAGiP,IAAQvT,OAAOo6C,GAAep6C,OAAO06C,EAAQp2C,MAAMiP,EAAOmnC,EAAQ76C,UAGvG86C,GAAc,SAAUp/B,EAAMhI,EAAOqnC,EAASh/B,EAAYs7B,GAC5D,IAAIsD,EAAKtH,GAAmB33B,GAAOnC,EAAOohC,EAAGphC,KAAMyX,EAAO2pB,EAAG3pB,KACzD5R,EAAS7F,EAAK9U,MAAM,EAAGiP,GACvB6L,EAAQhG,EAAK9U,MAAMiP,GACnBsnC,EAAU/H,GAAS15B,EAAKwhC,IAAU,SAAUE,EAAI1pB,GAGlD,OAFiB7d,EAAQ,GAAKA,EAAQ6F,EAAKvZ,QAAU+b,EAAWo3B,GAAe55B,EAAK7F,EAAQ,GAAI6d,GAAI4hB,GAAe55B,EAAK7F,GAAQ6d,IACzG2hB,GAAQ35B,EAAK7F,GAAQ6d,GAAKxf,GAAWslC,EAAa4D,EAAGhsC,QAAS8M,IAAa,MAGpG,OAAOiV,EAAK7wB,OAAOif,GAAQjf,OAAO,CAAC66C,IAAU76C,OAAOof,IASlD27B,GAAiB,SAAUx/B,EAAMhI,EAAOqnC,EAASh/B,EAAYs7B,GAC/D,OAAOp1C,EAAIyZ,GAAM,SAAU/B,GACzB,IAAIwhC,EAAaznC,EAAQ,GAAKA,EAAQ0/B,GAAWz5B,IAAQoC,EAAWo3B,GAAex5B,EAAKjG,EAAQ,GAAIy/B,GAAex5B,EAAKjG,IACpHmkC,EAVY,SAAUl+B,EAAKE,EAAQ/H,EAASqpC,EAAYJ,EAASh/B,EAAYs7B,GACnF,MAAgB,aAAZvlC,GAA2BqpC,EAGtBjI,GAAQv5B,EAAKE,GAFb9H,GAAWslC,EAAalE,GAAex5B,EAAKohC,GAAUh/B,IAAa,GAQhEq/B,CAAczhC,EAAKjG,EAAOiG,EAAI7H,QAASqpC,EAAYJ,EAASh/B,EAAYs7B,GAClF,OAlpBU,SAAUtE,EAASr/B,EAAO0E,GACtC,IAAIvG,EAAQkhC,EAAQlhC,MAChBuN,EAASvN,EAAMpN,MAAM,EAAGiP,GACxB6L,EAAQ1N,EAAMpN,MAAMiP,GACpBmgC,EAAWz0B,EAAOjf,OAAO,CAACiY,IAAOjY,OAAOof,GAC5C,OAAOyzB,GAASD,EAASc,GA6oBhBwH,CAAQ1hC,EAAKjG,EAAOmkC,OAiB3ByD,GAAY,SAAU5/B,EAAMwS,EAASnS,EAAYs7B,GAMnD,OAAOp1C,EAAIyZ,GAAM,SAAU/B,GACzB,OAAOs5B,GAASt5B,GAAK,SAAUvB,GAC7B,OAPW,SAAUA,GACvB,OAAOhW,EAAO8rB,GAAS,SAAUnkB,GAC/B,OAAOgS,EAAW3D,EAAKnJ,QAASlF,EAAOkF,YAKhCssC,CAASnjC,GAAQrG,GAAWslC,EAAaj/B,EAAKnJ,QAAS8M,IAAa,GAAQ3D,SAIrFojC,GAAc,SAAU9/B,EAAM+L,EAAU3M,EAAUiB,GACpD,YAAoDja,IAA7CqxC,GAAez3B,EAAK+L,GAAW3M,IAA4B2M,EAAW,GAAK1L,EAAWo3B,GAAez3B,EAAK+L,EAAW,GAAI3M,GAAWq4B,GAAez3B,EAAK+L,GAAW3M,KAExK2gC,GAAiB,SAAU9hC,EAAKjG,EAAOqI,GACzC,OAAOrI,EAAQ,GAAKqI,EAAWo3B,GAAex5B,EAAKjG,EAAQ,GAAIy/B,GAAex5B,EAAKjG,KAEjFgoC,GAAgB,SAAUhgC,EAAMhI,EAAOqI,EAAYs7B,GACrD,IAAInpB,EAAU/rB,EAAKuZ,GAAM,SAAU/B,EAAKxU,GAEtC,OADmBq2C,GAAY9/B,EAAMvW,EAAGuO,EAAOqI,IAAe0/B,GAAe9hC,EAAKjG,EAAOqI,GACnE,GAAK,CAACm3B,GAAQv5B,EAAKjG,OAE3C,OAAO4nC,GAAU5/B,EAAMwS,EAASnS,EAAYs7B,IAE1CsE,GAAa,SAAUjgC,EAAMhI,EAAOqI,EAAYs7B,GAClD,IAAI99B,EAAO85B,GAAmB33B,GAAMnC,KAChCqiC,EAAYriC,EAAK7F,GACjBwa,EAAU/rB,EAAKy5C,EAAU/pC,OAAO,SAAUiK,EAAM3W,GAElD,OADmBq2C,GAAYjiC,EAAM7F,EAAOvO,EAAG4W,IAAe0/B,GAAeG,EAAWz2C,EAAG4W,GACrE,GAAK,CAACD,MAE9B,OAAOw/B,GAAU5/B,EAAMwS,EAASnS,EAAYs7B,IAG1CwE,GAAmB9Z,GAAQ,CAC7B,OACA,MACA,UACA,MACA,MACA,aAEE+Z,GAAgB,SAAU7sC,GAG5B,MAAO,CACLA,QAASA,EACT0C,QAJYwG,GAAalJ,EAAS,UAAW,GAK7CyC,QAJYyG,GAAalJ,EAAS,UAAW,KA2G7C8sC,GApGe,SAAU9tB,EAAY+tB,QACxB,IAAXA,IACFA,EAASF,IAEXD,GAAiB5tB,GACjB,IAAI0Y,EAAW2H,GAAKlrC,EAAS1C,QASzBu7C,EAAS,SAAUhtC,GAErB,OAVO,SAAUwzB,GACjB,OAAQ7+B,GAAK6+B,EAAKxzB,UAClB,IAAK,MACH,OAAOgf,EAAWpD,IAAI4X,GACxB,QACE,OAAOxU,EAAW7V,KAAKqqB,IAKlBp7B,CADI20C,EAAO/sC,KAGhB2vB,EAAM,SAAU3vB,GAClB,IAAIyoC,EAAcuE,EAAOhtC,GAQzB,OAPI03B,EAASzgC,MAAMpF,UACjB6lC,EAASpwB,IAAInT,EAAST,KAAK+0C,IAE7BwE,EAAS94C,EAAST,KAAK,CACrBmZ,KAAM7M,EACNyoC,YAAaA,IAERA,GAELwE,EAAS94C,EAAS1C,OAQtB,MAAO,CACLy7C,UARc,SAAUltC,EAAS8M,GACjC,OAAOmgC,EAAO/6C,MAAK,WACjB,OAAOy9B,EAAI3vB,MACV,SAAUxI,GACX,OAAOsV,EAAW9M,EAASxI,EAAEqV,MAAQrV,EAAEixC,YAAc9Y,EAAI3vB,OAK3D2nC,OAAQjQ,EAASzgC,MA6DjB61C,GA1Dc,SAAUhuC,EAAOU,GACjC,OAAO,SAAUwf,GACf,IAAI0Y,EAAW2H,GAAKlrC,EAAS1C,QAC7Bm7C,GAAiB5tB,GACjB,IAAI3T,EAAO,GAMP8hC,EAAU,SAAUntC,GACtB,IAAIwH,EAAQ,CAAE1I,MAAOA,GACjBqK,EAAO6V,EAAW9lB,QAAQ8G,EAASR,EAAKgI,GAQ5C,OAPA6D,EAAKzV,KAAK,CACRiX,KAAM7M,EACN4oC,IAAKz/B,IAEHuuB,EAASzgC,MAAMpF,UACjB6lC,EAASpwB,IAAInT,EAAST,KAAKyV,IAEtBA,GAST,MAAO,CACLikC,cARkB,SAAUptC,EAAS8M,GACrC,OAlBW,SAAU9M,EAAS8M,GAC9B,OAAOnW,EAAK0U,GAAM,SAAU5a,GAC1B,OAAOqc,EAAWrc,EAAEoc,KAAM7M,MAgBrB7G,CAAO6G,EAAS8M,GAAY5a,MAAK,WACtC,OAAOi7C,EAAQntC,MACd,SAAUxI,GACX,OAAOsV,EAAW9M,EAASxI,EAAEqV,MAAQrV,EAAEoxC,IAAMuE,EAAQntC,OAKvD2nC,OAAQjQ,EAASzgC,OA2BnB61C,GAvBU,SAAU9tB,GACtB4tB,GAAiB5tB,GACjB,IAAI0Y,EAAW2H,GAAKlrC,EAAS1C,QAgB7B,MAAO,CACL47C,QAhBY,SAAUlkC,GAItB,OAHIuuB,EAASzgC,MAAMpF,UACjB6lC,EAASpwB,IAAInT,EAAST,KAAKyV,IAEtB,WACL,IAAIL,EAAMkW,EAAW7V,KAAK,CACxBnJ,QAASmJ,EACTzG,QAAS,EACTD,QAAS,IAIX,OAFAsG,GAASD,EAAK,SACdC,GAASI,EAAM,SACRL,IAKT6+B,OAAQjQ,EAASzgC,MASjBq2C,GAAY,CACd,OACA,IACA,MACA,UACA,QACA,aACA,SACA,SACA,SACA,MACA,UACA,KACA,KACA,QACA,QACA,QACA,QACA,UACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,aACA,MACA,WAsBEC,GAAa17B,KACb27B,GAAY,SAAUxtC,GACxB,OAfY,SAAUmT,EAAUtG,GAChC,IAAI4gC,EAAUt6B,EAAS9K,WAAW1T,KAAKkY,GACvC,OAAOhX,EAASy3C,GAAWG,GAapBC,CAAQH,GAAYvtC,IAEzB2tC,GAAW,SAAU3tC,GACvB,OAzBW,SAAUmT,EAAUtG,GAC/B,IAAI4gC,EAAUt6B,EAAS9K,WAAW1T,KAAKkY,GACvC,OAAOhX,EAAS,CACd,KACA,MACC43C,GAoBIG,CAAOL,GAAYvtC,IAExB6tC,GAAe,SAAU7tC,GAC3B,OAjBe,SAAUmT,EAAUtG,GACnC,OAAOhX,EAAS,CACd,KACA,MACA,KACA,SACCsd,EAAS9K,WAAW1T,KAAKkY,IAWrBmG,CAAWu6B,GAAYvtC,IAG5B8tC,GAAU,SAAUlrC,GACtB,IA+BMyb,EA/BF0vB,EAAO,SAAUzoC,GACnB,MAAoB,OAAb3Q,GAAK2Q,IAqBV0oC,EAAW,SAAU7kC,GACvB,OAAOgR,GAAOhR,GAAMjW,MAAK,SAAUsa,GACjC,IAAIygC,EAZC3pC,GAYoCkJ,GAZpBxa,KAAI,SAAUk7C,GACnC,QAAIV,GAAUU,MAGVL,GAAaK,IACe,QAAvBv5C,GAAKu5C,MAGb57C,OAAM,GAKP,OAAOuR,GAAO2J,GAAWxa,KAAI,SAAU6Q,GACrC,OAA+B,IAAxBoqC,GAlBI,SAAU3oC,GACzB,MAAoB,OAAb3Q,GAAK2Q,IAAgBsB,GAAStB,EAAIqoC,IAAUt7C,SAiBR87C,CAAWtqC,IAAWkqC,EAAKvgC,IAAcggC,GAAU3pC,KAAYpD,GAAK0I,EAAMtF,GAAU,GAAK,CAAClF,GAAaY,QAAQ,aAEvJjN,MAAM,KASP87C,EAFwB,KAJtB/vB,EAAUnrB,EAAK0P,GAAO,SAAUuG,GAClC,IAAI5C,EAAahC,GAAS4E,GAC1B,OA9Ba,SAAU5E,GACzB,OAAOnR,EAAOmR,GAAU,SAAU+d,GAChC,OAAOyrB,EAAKzrB,IAAMhf,GAAOgf,IAAiC,IAA3B5Q,GAAM4Q,GAAG7nB,OAAO1J,UA4BxCs9C,CAAW9nC,GAAc,GAAKA,EAAWrV,OAAO88C,EAAS7kC,QAEnDpY,OAAe,CAAC4N,GAAaY,QAAQ,OAAS8e,EAG/DrN,GAAMpO,EAAM,IACZmO,GAASnO,EAAM,GAAIwrC,IAGjBt6B,GAAQ,SAAUzJ,GAEG,IADTzH,GAAMyH,GACRtZ,QACVogB,GAAS9G,IAGTikC,GAAU,SAAU7hC,EAAMk7B,GAC5B,MAAO,CACLl7B,KAAMA,EACNk7B,OAAQA,IAGR4G,GAAkB,SAAU9hC,EAAM/B,EAAKE,GACzC,IAAIN,EAAO85B,GAAmB33B,GAAMnC,KACpC,OAAOkkC,GAAOlkC,EAAMI,EAAKE,GAAQ7X,SAAQ,WACvC,OAAOy7C,GAAOlkC,EAAM,EAAG,OAGvBkkC,GAAS,SAAU/hC,EAAM/B,EAAKE,GAChC,OAAOzW,EAASC,KAAKqY,EAAK/B,IAAMxX,MAAK,SAAUoD,GAC7C,OAAOnC,EAASC,KAAKkC,EAAEsM,MAAMgI,IAAS1X,MAAK,SAAUovB,GACnD,OAAOnuB,EAASC,KAAKkuB,EAAEtiB,gBAIzByuC,GAAS,SAAUhiC,EAAM/B,EAAKE,GAChC,IAAIN,EAAO85B,GAAmB33B,GAAMnC,KACpC,OAAOgkC,GAAQ7hC,EAAM+hC,GAAOlkC,EAAMI,EAAKE,KAErC8jC,GAAa,SAAUnI,GAOzB,OAAO7vC,EAAM6vC,GANQ,SAAU/jB,EAAMhgB,GAInC,OAHgBrP,EAAOqvB,GAAM,SAAUmsB,GACrC,OAAOA,EAAcjkC,MAAQlI,EAAOkI,OAEnB8X,EAAOA,EAAKtxB,OAAO,CAACsR,MAEH,IAAIwvB,MAAK,SAAUzjB,EAASC,GAChE,OAAOD,EAAQ7D,IAAM8D,EAAQ9D,QAG7BkkC,GAAgB,SAAUrI,GAO5B,OAAO7vC,EAAM6vC,GANK,SAAU/jB,EAAMhgB,GAIhC,OAHmBrP,EAAOqvB,GAAM,SAAUmsB,GACxC,OAAOA,EAAc/jC,SAAWpI,EAAOoI,UAEnB4X,EAAOA,EAAKtxB,OAAO,CAACsR,MAET,IAAIwvB,MAAK,SAAUzjB,EAASC,GAC7D,OAAOD,EAAQ3D,OAAS4D,EAAQ5D,WA8HhCikC,GAAc,SAAUvkC,EAAM0U,EAAYmB,GAC5C,IA3vJ6B3V,EAAO3H,EA2vJhCisC,GA3vJyBtkC,EA2vJKF,EA3vJEzH,EA2vJIsd,EAAQtd,QA1vJzC0H,GAAoBC,GAAO,WAChC,OAAO3H,MA0vJLksC,EAAKriC,GAAUtB,SAAS0jC,GAC5B,OAAOpI,GAAOqI,EAAI/vB,GAAY,IAuD5BgwB,GAAe,SAAUpsC,EAAOqsC,GAClC,IAAIC,EAAc77C,EAAOuP,EAAOqsC,GAChC,OAA2B,IAAvBC,EAAYn+C,OACPoD,EAAST,KAAK,MACZw7C,EAAYn+C,SAAW6R,EAAM7R,OAC/BoD,EAAST,KAAK,MAEdS,EAAS1C,QAGhByuB,GAr4FgB,SAAU7V,EAAOgB,EAAM4U,GACzC,IAAI9U,EAAYuB,GAAUtB,SAASC,GAC/B0f,EAAS9K,EAAUwL,UAAUtgB,EAAW8U,GAC5CkL,GAAoBhgB,EAAW4f,EAAQ9K,IAm4FrCkvB,GAAmBhI,IAhME,SAAU16B,EAAM85B,EAASz5B,EAAYy6B,GAC5D,IAAIuE,EAAUvF,EAAQ,GAAG77B,IACrB0kC,EAAc7I,EAAQ,GAAG77B,IACzBJ,EAAOokC,GAAWnI,GAClB8I,EAAU34C,EAAM4T,GAAM,SAAUglC,EAAMC,GACxC,OAAO1D,GAAYyD,EAAMF,EAAatD,EAASh/B,EAAYy6B,EAAY2F,aACtEzgC,GACH,OAAOgiC,GAAOY,EAASD,EAAa7I,EAAQ,GAAG37B,UAyLFs9B,GAAS73C,EAAMA,EAAMy8C,IAChE0C,GAAkBrI,IAxLE,SAAU16B,EAAM85B,EAASz5B,EAAYy6B,GAC3D,IAAIj9B,EAAOokC,GAAWnI,GAClBuF,EAAUxhC,EAAKA,EAAKvZ,OAAS,GAAG2Z,IAChC0kC,EAAc9kC,EAAKA,EAAKvZ,OAAS,GAAG2Z,IAAMJ,EAAKA,EAAKvZ,OAAS,GAAG0R,QAChE4sC,EAAU34C,EAAM4T,GAAM,SAAUglC,EAAMC,GACxC,OAAO1D,GAAYyD,EAAMF,EAAatD,EAASh/B,EAAYy6B,EAAY2F,aACtEzgC,GACH,OAAOgiC,GAAOY,EAASD,EAAa7I,EAAQ,GAAG37B,UAiLJs9B,GAAS73C,EAAMA,EAAMy8C,IAC9D2C,GAAsBtI,IAhLE,SAAU16B,EAAM85B,EAASz5B,EAAYy6B,GAC/D,IAAIr9B,EAAU0kC,GAAcrI,GACxBuF,EAAU5hC,EAAQ,GAAGU,OACrBwkC,EAAcllC,EAAQ,GAAGU,OACzBykC,EAAU34C,EAAMwT,GAAS,SAAUolC,EAAMC,GAC3C,OAAOtD,GAAeqD,EAAMF,EAAatD,EAASh/B,EAAYy6B,EAAY2F,aACzEzgC,GACH,OAAOgiC,GAAOY,EAAS9I,EAAQ,GAAG77B,IAAK0kC,KAyKYlH,GAAShoB,GAAQ7vB,EAAMy8C,IACxE4C,GAAqBvI,IAxKE,SAAU16B,EAAM85B,EAASz5B,EAAYy6B,GAC9D,IAAIuE,EAAUvF,EAAQA,EAAQx1C,OAAS,GAAG6Z,OACtCwkC,EAAc7I,EAAQA,EAAQx1C,OAAS,GAAG6Z,OAAS27B,EAAQA,EAAQx1C,OAAS,GAAG2R,QAC/EwH,EAAU0kC,GAAcrI,GACxB8I,EAAU34C,EAAMwT,GAAS,SAAUolC,EAAMC,GAC3C,OAAOtD,GAAeqD,EAAMF,EAAatD,EAASh/B,EAAYy6B,EAAY2F,aACzEzgC,GACH,OAAOgiC,GAAOY,EAAS9I,EAAQ,GAAG77B,IAAK0kC,KAiKUlH,GAAShoB,GAAQ7vB,EAAMy8C,IACtE6C,GAAexI,IAhHE,SAAU16B,EAAM85B,EAASqJ,EAAaC,GACzD,IAAI3lC,EAAU0kC,GAAcrI,GACxB8I,EA/ZgB,SAAU5iC,EAAMtS,EAAO4U,GAC3C,IAAIzE,EAAOtX,EAAIyZ,GAAM,SAAU/B,GAC7B,IAAI9H,EAAQ8H,EAAI9H,MAAMpN,MAAM,EAAG2E,GAAOjJ,OAAOwZ,EAAI9H,MAAMpN,MAAMuZ,EAAS,IACtE,OAAO/L,GAASJ,EAAO8H,EAAI7H,YAE7B,OAAOxP,EAAOiX,GAAM,SAAUI,GAC5B,OAAOA,EAAI9H,MAAM7R,OAAS,KAyZd++C,CAAgBrjC,EAAMvC,EAAQ,GAAGU,OAAQV,EAAQA,EAAQnZ,OAAS,GAAG6Z,QAC/E+8B,EAAS4G,GAAgBc,EAAS9I,EAAQ,GAAG77B,IAAK67B,EAAQ,GAAG37B,QACjE,OAAO0jC,GAAQe,EAAS1H,KA4GaO,GAAShoB,GAAQpM,GAAOg5B,IAC3DiD,GAAY5I,IA3GE,SAAU16B,EAAM85B,EAASqJ,EAAaC,GACtD,IAAIvlC,EAAOokC,GAAWnI,GAClB8I,EA5Za,SAAU5iC,EAAMtS,EAAO4U,GACxC,IAAI28B,EAAKtH,GAAmB33B,GAAOnC,EAAOohC,EAAGphC,KAC7C,OAD0DohC,EAAG3pB,KACjD7wB,OAAOoZ,EAAK9U,MAAM,EAAG2E,IAAQjJ,OAAOoZ,EAAK9U,MAAMuZ,EAAS,IA0ZtDihC,CAAavjC,EAAMnC,EAAK,GAAGI,IAAKJ,EAAKA,EAAKvZ,OAAS,GAAG2Z,KAChEi9B,EAAS4G,GAAgBc,EAAS9I,EAAQ,GAAG77B,IAAK67B,EAAQ,GAAG37B,QACjE,OAAO0jC,GAAQe,EAAS1H,KAuGOO,GAAS73C,EAAMyjB,GAAOg5B,IAEnDmD,IADmB9I,IAtJE,SAAU+I,EAAa1tC,EAAQsK,EAAYy6B,GAClE,IAAI8H,EAAU5C,GAAcyD,EAAa1tC,EAAOoI,OAAQkC,EAAYy6B,EAAY6F,eAChF,OAAOqB,GAAOY,EAAS7sC,EAAOkI,IAAKlI,EAAOoI,UAoJGk9B,GAAQz3C,EAAMA,EAAMy8C,GAAqB,MAAO,OACvE3F,IAnJE,SAAU+I,EAAa3J,EAASz5B,EAAYy6B,GACpE,IAAIr9B,EAAU0kC,GAAcrI,GAIxB8I,EAAU34C,EAAMwT,GAHL,SAAUimC,EAAavlC,GACpC,OAAO6hC,GAAc0D,EAAavlC,EAAOA,OAAQkC,EAAYy6B,EAAY6F,iBAEpC8C,GACvC,OAAOzB,GAAOY,EAAS9I,EAAQ,GAAG77B,IAAK67B,EAAQ,GAAG37B,UA6IHs9B,GAAS73C,EAAMA,EAAMy8C,GAAqB,MAAO,QAE9FsD,IADqBjJ,IAhIE,SAAU+I,EAAa1tC,EAAQsK,EAAYy6B,GACpE,IAAI8H,EAAU5C,GAAcyD,EAAa1tC,EAAOoI,OAAQkC,EAAYy6B,EAAY6F,eAChF,OAAOqB,GAAOY,EAAS7sC,EAAOkI,IAAKlI,EAAOoI,UA8HOk9B,GAAQz3C,EAAMA,EAAMy8C,GAAqB,KAAM,OACxE3F,IA7HE,SAAU+I,EAAa3J,EAASz5B,EAAYy6B,GACtE,IAAIr9B,EAAU0kC,GAAcrI,GAIxB8I,EAAU34C,EAAMwT,GAHL,SAAUimC,EAAavlC,GACpC,OAAO6hC,GAAc0D,EAAavlC,EAAOA,OAAQkC,EAAYy6B,EAAY6F,iBAEpC8C,GACvC,OAAOzB,GAAOY,EAAS9I,EAAQ,GAAG77B,IAAK67B,EAAQ,GAAG37B,UAuHCs9B,GAAS73C,EAAMA,EAAMy8C,GAAqB,KAAM,QAKjGuD,IAJgBlJ,IAtKE,SAAU16B,EAAMjK,EAAQsK,EAAYy6B,GACxD,IAAI8H,EAAU3C,GAAWjgC,EAAMjK,EAAOkI,IAAKoC,EAAYy6B,EAAY6F,eACnE,OAAOqB,GAAOY,EAAS7sC,EAAOkI,IAAKlI,EAAOoI,UAoKHk9B,GAAQz3C,EAAMA,EAAMy8C,GAAqB,MAAO,OACpE3F,IAnKE,SAAU+I,EAAa3J,EAASz5B,EAAYy6B,GACjE,IAAIj9B,EAAOokC,GAAWnI,GAIlB8I,EAAU34C,EAAM4T,GAHL,SAAU6lC,EAAazlC,GACpC,OAAOgiC,GAAWyD,EAAazlC,EAAIA,IAAKoC,EAAYy6B,EAAY6F,iBAE9B8C,GACpC,OAAOzB,GAAOY,EAAS9I,EAAQ,GAAG77B,IAAK67B,EAAQ,GAAG37B,UA6JTs9B,GAAS73C,EAAMA,EAAMy8C,GAAqB,MAAO,OACtE3F,IAhJE,SAAU16B,EAAMjK,EAAQsK,EAAYy6B,GAC1D,IAAI8H,EAAU3C,GAAWjgC,EAAMjK,EAAOkI,IAAKoC,EAAYy6B,EAAY6F,eACnE,OAAOqB,GAAOY,EAAS7sC,EAAOkI,IAAKlI,EAAOoI,UA8ICk9B,GAAQz3C,EAAMA,EAAMy8C,GAAqB,KAAM,OACrE3F,IA7IE,SAAU+I,EAAa3J,EAASz5B,EAAYy6B,GACnE,IAAIj9B,EAAOokC,GAAWnI,GAIlB8I,EAAU34C,EAAM4T,GAHL,SAAU6lC,EAAazlC,GACpC,OAAOgiC,GAAWyD,EAAazlC,EAAIA,IAAKoC,EAAYy6B,EAAY6F,iBAE9B8C,GACpC,OAAOzB,GAAOY,EAAS9I,EAAQ,GAAG77B,IAAK67B,EAAQ,GAAG37B,UAuILs9B,GAAS73C,EAAMA,EAAMy8C,GAAqB,KAAM,OAC9E3F,IA9GE,SAAU16B,EAAM2Q,EAAUtQ,EAAY+iC,GACvD,IAAIjtC,EAAQwa,EAASxa,MACrBkrC,GAAQlrC,GACR,IAAIysC,EA5uBM,SAAU5iC,EAAMa,EAAQR,EAAYs7B,GAC9C,IAAI99B,EAAO85B,GAAmB33B,GAAMnC,KACpC,GAAoB,IAAhBA,EAAKvZ,OACP,OAAO0b,EAET,IAAK,IAAIvW,EAAIoX,EAAOQ,SAAU5X,GAAKoX,EAAOO,UAAW3X,IACnD,IAAK,IAAI4B,EAAIwV,EAAOM,SAAU9V,GAAKwV,EAAOK,UAAW7V,IACnD+rC,GAAWv5B,EAAKpU,GAAI4B,EAAGgL,GAAWslC,KAAgB,IAGtD,OAAO37B,EAkuBO6jC,CAAM7jC,EAAM2Q,EAAS9P,OAAQR,EAAYxc,EAASsS,EAAM,KACtE,OAAO0rC,GAAQe,EAASl7C,EAASC,KAAKwO,EAAM,QA7vB7B,SAAU2tC,EAAYz1C,GACrC,OAAOA,EAAOsiB,WAs2B+B/sB,EAAMA,EAAMy8C,KACvD0D,GAAerJ,IAzGE,SAAU16B,EAAMwQ,EAAYnQ,EAAYy6B,GAC3D,IAAI8H,EAAU94C,EAAM0mB,GAAY,SAAU/oB,EAAGiV,GAC3C,OAAOg/B,GAAQj0C,EAAGiV,EAAM2D,EAAYy6B,EAAY8F,QAAQlkC,MACvDsD,GACH,OAAO6hC,GAAQe,EAASl7C,EAASC,KAAK6oB,EAAW,QAhwBhC,SAAUszB,EAAYz1C,GACvC,OAAOA,EAAOmiB,aAo2BqCiD,GAAQ7vB,EAAMy8C,IAC/D1tB,GAAa+nB,IApGE,SAAU16B,EAAMqiC,EAAchiC,EAAY+iC,GAC3D,IAIIjG,EAJU,SAAUv/B,EAAO2U,GAC7B,IAAI+vB,EAAKriC,GAAU1B,UAAUX,GAC7B,OAAOq8B,GAAOqI,EAAI/vB,GAAY,GAEpByxB,CAAQ3B,EAAa5vB,UAAW4vB,EAAa9vB,YACrD0rB,EAtvKQ,SAAUhgC,EAAKE,GAC3B,MAAO,CACLF,IAAKA,EACLE,OAAQA,GAmvKS8lC,CAAQ5B,EAAapkC,IAAKokC,EAAalkC,QAE1D,OADiB6/B,GAAQC,EAAcj+B,EAAMm9B,EAAOkF,EAAa9vB,WAAYlS,GAC3D5a,MAAK,WACrB,OAAOo8C,GAAQ7hC,EAAMtY,EAAST,KAAKo7C,EAAa9uC,aAC/C,SAAUqvC,GACX,IAAI1H,EAAS4G,GAAgBc,EAASP,EAAapkC,IAAKokC,EAAalkC,QACrE,OAAO0jC,GAAQe,EAAS1H,SAzyBd,SAAUx8B,EAAWrQ,GACjC,OAAOqO,GAAKrO,EAAOkF,SAAS9M,MAAK,SAAUiW,GACzC,OAAO+9B,GAAgB/7B,EAAWhC,GAAMnW,KAAI,SAAUuzC,GAKpD,OAJYlvC,EAASA,EAAS,GAAIkvC,GAAU,CAC1CvnB,WAAYlkB,EAAOkkB,WACnBE,UAAWpkB,EAAOokB,oBA43BkBgB,GAAQ7vB,EAAMy8C,IACtD6D,GAAkBxJ,IAjFE,SAAU16B,EAAMqiC,EAAchiC,EAAY+iC,GAChE,IAAIvlC,EAAO85B,GAAmB33B,GAAMnC,KAChC7F,EAAQqqC,EAAalsC,MAAM,GAAGgI,OAC9BuV,EAAU7V,EAAKwkC,EAAalsC,MAAM,GAAG8H,KACrCk/B,EAAQiF,GAAYC,EAAa5vB,UAAW4vB,EAAa9vB,WAAYmB,GACrEywB,EAAazF,GAAW1mC,EAAOgI,EAAMm9B,EAAOkF,EAAa9vB,WAAYlS,GACrE66B,EAAS4G,GAAgBqC,EAAY9B,EAAalsC,MAAM,GAAG8H,IAAKokC,EAAalsC,MAAM,GAAGgI,QAC1F,OAAO0jC,GAAQsC,EAAYjJ,KA0EgBI,GAAiB13C,EAAMA,EAAMy8C,IACtE+D,GAAiB1J,IAzEE,SAAU16B,EAAMqiC,EAAchiC,EAAY+iC,GAC/D,IAAIvlC,EAAO85B,GAAmB33B,GAAMnC,KAChC7F,EAAQqqC,EAAalsC,MAAMksC,EAAalsC,MAAM7R,OAAS,GAAG6Z,OAASkkC,EAAalsC,MAAMksC,EAAalsC,MAAM7R,OAAS,GAAG2R,QACrHyd,EAAU7V,EAAKwkC,EAAalsC,MAAM,GAAG8H,KACrCk/B,EAAQiF,GAAYC,EAAa5vB,UAAW4vB,EAAa9vB,WAAYmB,GACrEywB,EAAazF,GAAW1mC,EAAOgI,EAAMm9B,EAAOkF,EAAa9vB,WAAYlS,GACrE66B,EAAS4G,GAAgBqC,EAAY9B,EAAalsC,MAAM,GAAG8H,IAAKokC,EAAalsC,MAAM,GAAGgI,QAC1F,OAAO0jC,GAAQsC,EAAYjJ,KAkEcI,GAAiB13C,EAAMA,EAAMy8C,IACpEgE,GAAkB3J,IAjEE,SAAU16B,EAAMqiC,EAAchiC,EAAY+iC,GAChE,IAAIvlC,EAAO85B,GAAmB33B,GAAMnC,KAChC7F,EAAQqqC,EAAalsC,MAAM,GAAG8H,IAC9ByV,EAAU7V,EAAK7F,GACfmlC,EAAQiF,GAAYC,EAAa5vB,UAAW4vB,EAAa9vB,WAAYmB,GACrEywB,EAAanF,GAAWhnC,EAAOgI,EAAMm9B,EAAOkF,EAAa9vB,WAAYlS,GACrE66B,EAAS4G,GAAgBqC,EAAY9B,EAAalsC,MAAM,GAAG8H,IAAKokC,EAAalsC,MAAM,GAAGgI,QAC1F,OAAO0jC,GAAQsC,EAAYjJ,KA0DgBI,GAAiB13C,EAAMA,EAAMy8C,IACtEiE,GAAiB5J,IAzDE,SAAU16B,EAAMqiC,EAAchiC,EAAY+iC,GAC/D,IAAIvlC,EAAO85B,GAAmB33B,GAAMnC,KAChC7F,EAAQqqC,EAAalsC,MAAMksC,EAAalsC,MAAM7R,OAAS,GAAG2Z,IAAMokC,EAAalsC,MAAMksC,EAAalsC,MAAM7R,OAAS,GAAG0R,QAClH0d,EAAU7V,EAAKwkC,EAAalsC,MAAM,GAAG8H,KACrCk/B,EAAQiF,GAAYC,EAAa5vB,UAAW4vB,EAAa9vB,WAAYmB,GACrEywB,EAAanF,GAAWhnC,EAAOgI,EAAMm9B,EAAOkF,EAAa9vB,WAAYlS,GACrE66B,EAAS4G,GAAgBqC,EAAY9B,EAAalsC,MAAM,GAAG8H,IAAKokC,EAAalsC,MAAM,GAAGgI,QAC1F,OAAO0jC,GAAQsC,EAAYjJ,KAkDcI,GAAiB13C,EAAMA,EAAMy8C,IACpEkE,GAjDkB,SAAU3mC,EAAOvP,GACrC,IAAI+d,EAAQnM,GAAU1B,UAAUX,GAEhC,OADc69B,GAAQrvB,EAAO/d,GACd5H,MAAK,SAAU+9C,GAC5B,IAAIC,EAAmBD,EAAcA,EAAclgD,OAAS,GACxDogD,EAAcF,EAAc,GAAGrmC,OAC/BwmC,EAAcF,EAAiBtmC,OAASsmC,EAAiBxuC,QACzD2uC,EAAsBt6C,EAAQ/D,EAAI6lB,EAAM5nB,KAAK,SAAUyZ,GACzD,OAAOrX,EAAOqX,EAAI9H,OAAO,SAAUuG,GACjC,OAAOA,EAAKyB,QAAUumC,GAAehoC,EAAKyB,OAASwmC,SAGvD,OAAOpC,GAAaqC,GAAqB,SAAUloC,GACjD,MAA8B,OAAvBxU,GAAKwU,EAAKnJ,eAElB1N,MAAM,KAoCPmY,GAAa,SAAUT,GACzB,OAAOy0B,GAAYz0B,EAAIlG,aAWrBwtC,GAAkB,SAAUvzB,EAAQ/T,GACtC,IAAIunC,EAA8B,UAApB9mC,GAAWT,GACrBwnC,GAAkBr+C,EAAO6W,EAAIpH,OAAO,SAAU0f,GAChD,MAA0B,OAAnBmc,GAAYnc,MAErB,OAAOivB,GAAWC,EAAiBr9C,EAAST,KAAK,CAC/C+9C,MAAOF,EACPG,IAAKF,IACFr9C,EAAS1C,QAEZkgD,GAAa,SAAU5zB,EAAQ/T,GACjC,MAnBgB,WADmBnH,EAoBPyuC,GAAgBvzB,EAAQ/T,GAAK9X,MAAK,WAC5D,OAAOuY,GAAWT,MACjB,SAAU4nC,GACX,MAAO,YArBA,SACc,UAAZ/uC,EACF,SAEA,OANgB,IAAUA,GA0BjCgvC,GAAmB,SAAUnzC,EAAKozC,EAAQC,GAC5C,IAAIC,EAAWtzC,EAAIkgB,UAAUkzB,EAAQ,SACjCG,EAAgBH,EAAOhuC,WACvBouC,EAAiBzT,GAAYwT,GACjC,GAAIF,IAAmBG,EAAgB,CACrC,IAAIC,EAAezzC,EAAIokC,OAAOiP,EAAgBC,GAAU,GACxD,IAAKG,EAAc,CACjBA,EAAezzC,EAAI+T,OAAOs/B,GAC1B,IAAIK,EAAoBJ,EAASvhC,WACV,UAAnBshC,EACF76C,EAAKoP,GAAW3H,GAAaH,QAAQwzC,GAAW,qBAAqB9/C,MAAK,WACxE,OAAO8/C,EAAS3hC,aAAa8hC,EAAcC,MAC1C,SAAU9vB,GACX,OAAO5jB,EAAI2zC,YAAYF,EAAc7vB,EAAE5jB,QAGzCszC,EAASthC,YAAYyhC,GAGF,UAAnBJ,GAAiD,UAAnBG,GAA8BC,EAAa1hC,WAC3E0hC,EAAa9hC,aAAayhC,EAAQK,EAAa1hC,YAE/C0hC,EAAazhC,YAAYohC,GAEtBG,EAAc9yC,iBACjBT,EAAIkJ,OAAOqqC,KAabK,GAAiB,SAAUv0B,EAAQ5U,EAAMopC,EAAazzC,GACxD,IAAIJ,EAAMqf,EAAOrf,IACbwd,EAXW,SAAU6B,EAAQ5U,EAAMopC,GACvC,GAAIp9C,EAAco9C,IAAgB9T,GAAYt1B,KAAUopC,EAAa,CACnE,IAAIC,EAAaz0B,EAAOrf,IAAI+zC,OAAOtpC,EAAMopC,GAEzC,OADA5V,GAAY5e,EAAQy0B,GACbA,EAEP,OAAOrpC,EAKKupC,CAAW30B,EAAQ5U,EAAMopC,GAIvC,OAHKr9C,EAAY4J,IACfJ,EAAIi0C,UAAUz2B,EAAS,QAASpd,GAE3Bod,GAEL02B,GAAkB,SAAU70B,EAAQnb,EAAO2vC,EAAazzC,GAC1D,OAAO7L,EAAK2P,GAAO,SAAU0f,GAC3B,OAAOgwB,GAAev0B,EAAQuE,EAAGiwB,EAAazzC,OAG9C+zC,GAAoB,SAAU90B,EAAQ+zB,EAAQxiB,GAChD,IACMwjB,EAaFp0C,EAAMqf,EAAOrf,IACjB,GAAgB,WAAZ4wB,EAAsB,CACxB,IAAIyjB,EAAuB7U,GAAmBngB,GAC1Ci1B,EAAyC,SAAzBD,GAhBhBD,EAAezoC,GAAM1L,GAAaH,QAAQszC,EAAOlvC,MAAM,KAAK5P,KAAI,SAAUqX,GAC5E,OAAOC,GAAKD,MACX/X,MAAM,IACF6E,EAAQ27C,GAAc,SAAUpoC,GACrC,OAAO4mC,GAAgBvzB,EAAQrT,EAAIhM,QAClC1L,KAAI,SAAUigD,GACf,OAAIA,EAAaxB,OAASwB,EAAavB,IAC9B,eAEAuB,EAAaxB,MAAQ,UAAY,WAEzCn/C,MAAM,YAKwEygD,EACjFH,GAAgB70B,EAAQ+zB,EAAOlvC,MAAyB,YAAlBowC,EAA8B,KAAO,KAAM,OACjFnB,GAAiBnzC,EAAKozC,EAA0B,UAAlBkB,EAA4B,QAAU,cAEpEJ,GAAgB70B,EAAQ+zB,EAAOlvC,MAAO,KAAM,MAC5CivC,GAAiBnzC,EAAKozC,EAAoB,WAAZxiB,EAAuB,QAAU,UAa/D4jB,GAAgC,SAAUjzC,GAC5C,OAAO,SAAU9F,GACf,IAAIg5C,EAAgBx+C,GAAKwF,GACrB8T,EAA8B,QAAlBklC,GAA6C,aAAlBA,EAZX,SAAUh5C,GAC5C,OAAOkQ,GAAMlQ,GAAOjH,MAAK,SAAUmX,GACjC,OAAO4L,GAAW5L,EAAOgT,GAAS3H,0BACjCxjB,MAAK,WACN,OAAOiI,KACN,SAAUyI,GACX,OAAOA,EAAM,MAM6DwwC,CAA8Bj5C,GAASA,EACjH,OAAOgN,GAAU8G,EAAWhO,KAG5BozC,GAAwBH,GAA8B,SACtDI,GAAiCJ,GAA8B,iBAC/DK,GAAwB,SAAUp5C,EAAO6iB,GAC3C,OAAOq2B,GAAsBl5C,GAAOnH,KAAI,SAAUwgD,GAChD,OAAOz2B,GAAUC,MAChB1qB,MAAM,KAEPmhD,GAAuB,SAAUt5C,EAAO8F,GAC1C,IAlxHoByzC,EAAIC,EAAIriD,EAkxHxBw4B,EAAUupB,GAAsBl5C,GAChCy5C,EAAU9pB,EAAQ52B,MAAK,SAAUiW,GACnC,OAAOkB,GAAMlB,MACZnW,KAAI,SAAUqX,GACf,OAAOC,GAAKD,MAEd,OAxxHoBqpC,EAwxHP5pB,EAxxHW6pB,EAwxHFC,EAxxHMtiD,EAwxHG,SAAU6X,EAAMmB,GAC7C,OAAOjX,EAAOiX,GAAM,SAAUI,GAC5B,OAAOvX,EAAO0pB,GAAUnS,EAAIhM,IAAIkE,QAAQ,SAAUqJ,GAChD,MAAoC,MAA7BxE,GAAMwE,EAAShM,IAAqBQ,GAAKwL,EAAS9C,UA1xHxDuqC,EAAGrhD,UAAYshD,EAAGthD,SAAW8B,EAAST,KAAKpC,EAAEoiD,EAAGlhD,WAAYmhD,EAAGnhD,aAAe2B,EAAS1C,QA6xH3Fa,MAAM,KAGPuhD,GAAe,SAAU91B,EAAQmlB,EAAUlmB,GAC7C,IAAI82B,EAAc,SAAU/1B,GAC1B,MAAmC,UAA5BppB,GAAK+pC,GAAU3gB,KAQpBzB,EAAeiiB,GAAiBxgB,GAChCg2B,EAAU,SAAU3M,EAAW4M,EAAO34B,EAAQ6nB,GAChD,OAAO,SAAU74B,EAAOvP,GACtBgkC,GAAgBz0B,GAChB,IAAIuuB,EAAOsK,IACPp9B,EAAMnH,GAAaH,QAAQuf,EAAOgB,UAClCC,EAAa5D,GAAeC,EAAQvV,EAAKwW,GACzCkrB,EAAStH,GAAMniB,EAAQ1T,GAC3B,OAAO2pC,EAAM3pC,GAAS+8B,EAAUxO,EAAMvuB,EAAOvP,EAAQkkB,EAAYwoB,GAAQt0C,MAAK,SAAUiT,GAOtF,OANAlT,EAAKkT,EAAOw+B,SAAS,SAAUj6B,GAC7B+xB,GAAW1e,EAAQrT,EAAIhM,QAEzBzL,EAAKkT,EAAOy+B,UAAU,SAAUz7B,GAC9BwzB,GAAY5e,EAAQ5U,EAAKzK,QAEpByH,EAAOwhC,OAAO30C,KAAI,SAAUmW,GACjC,IAAI8qC,EA72CLzQ,GAAcC,GA62CWt6B,GACpBkW,EAAMtB,EAAOrf,IAAIw1C,YAGrB,OAFA70B,EAAI80B,SAASF,EAAIj0C,QAAQtB,IAAKu1C,EAAI5Q,QAClChkB,EAAI+0B,OAAOH,EAAIj0C,QAAQtB,IAAKu1C,EAAI5Q,QACzBhkB,QAENlrB,EAAS1C,SAGd4iD,EAAYN,EAAQhE,IA/BL,SAAU1lC,GAC3B,OAA+B,IAAxBypC,EAAY/1B,IAAqBwT,GAAYlnB,GAAOC,KAAO,IA8BnBja,EAAM6yC,GACnDoR,EAAeP,EAAQpE,IA7BL,SAAUtlC,GAC9B,OAA+B,IAAxBypC,EAAY/1B,IAAqBwT,GAAYlnB,GAAOH,QAAU,IA4Bb7Z,EAAM6yC,GAC5DqR,EAAqBR,EAAQ5E,GAAkB39C,EAAQnB,EAAM6yC,GAC7DsR,EAAoBT,EAAQvE,GAAiBh+C,EAAQnB,EAAM6yC,GAC3DuR,EAAwBV,EAAQtE,GAAqBj+C,EAAQkyC,GAAOR,GACpEwR,EAAuBX,EAAQrE,GAAoBl+C,EAAQkyC,GAAOR,GAClEyR,EAAeZ,EAAQ1D,GAAY7+C,EAAQnB,EAAM6yC,GACjD0R,EAAiBb,EAAQvD,GAAch/C,EAAQnB,EAAM6yC,GACrD2R,EAAoBd,EAAQpD,GAAiBn/C,EAAQnB,EAAM6yC,GAC3D4R,EAAmBf,EAAQlD,GAAgBr/C,EAAQnB,EAAM6yC,GACzD6R,EAAoBhB,EAAQjD,GAAiBt/C,EAAQnB,EAAM6yC,GAC3D8R,EAAmBjB,EAAQhD,GAAgBv/C,EAAQnB,EAAM6yC,GACzD+R,EAAelB,EAAQ30B,GAAY5tB,EAAQnB,EAAM6yC,GACjDgS,EAAc,SAAUh9C,EAAMi9C,GAChC,OAAO/yC,GAAMlK,EAAM,QAAQ7E,QAAO,SAAUiB,GAC1C,OAAOuB,EAASs/C,EAAY7gD,OAuDhC,MAAO,CACL+/C,UAAWA,EACXC,aAAcA,EACdnF,iBAAkBoF,EAClB/E,gBAAiBgF,EACjB/E,oBAAqBgF,EACrB/E,mBAAoBgF,EACpBrE,WAAYsE,EACZnE,aAAcoE,EACdjE,gBAAiBkE,EACjBhE,eAAgBiE,EAChBhE,gBAAiBiE,EACjBhE,eAAgBiE,EAChB51B,WAAY61B,EACZG,iBAlEqB,SAAUr3B,EAAQ7lB,GACvC,OAAOg9C,EAAYh9C,EAAM,CACvB,KACA,OACCjF,MAAK,SAAUqB,GAChB,IAAIsO,EAAQ5P,EAAIugD,GAAsBnU,GAAkBrhB,GAASf,IAAa,SAAUsF,GACtF,OAAOA,EAAE5jB,OAEXk0C,GAAgB70B,EAAQnb,EAAOtO,EAAM,UA2DvC+gD,gBAxDoB,SAAUt3B,EAAQ7lB,GACtC,OAAOg9C,EAAYh9C,EAAM,CACvB,SACA,OACA,WACCjF,MAAK,SAAUqB,GAChBtB,EAAIygD,GAAqBrU,GAAkBrhB,GAASV,GAASI,WAAW,SAAU/S,GAChF,OAAOmoC,GAAkB90B,EAAQrT,EAAIhM,IAAKpK,UAkD9C27C,kBA9CwB8D,EAAQ9D,GAAmBz+C,EAAQnB,EAAM6yC,GA+CjEkN,oBA9C0B2D,EAAQ3D,GAAqB5+C,EAAQnB,EAAM6yC,GA+CrEoS,gBA9CoB,SAAUv3B,GAC9B,IAAIzT,EAAOmpC,GAAqBrU,GAAkBrhB,GAASV,GAASI,UACpE,GAAInT,EAAKvZ,OAAS,EAAG,CACnB,IAAIwkD,EAAWviD,EAAIsX,GAAM,SAAUhU,GACjC,OAAOq7C,GAAW5zB,EAAQznB,EAAEoI,QAE1B82C,EAAY3/C,EAAS0/C,EAAU,UAC/BE,EAAY5/C,EAAS0/C,EAAU,UACnC,GAAKC,GAAcC,EAEZ,CACL,IAAIC,EAAU7/C,EAAS0/C,EAAU,QACjC,OAAIC,GAAcE,GAAYD,EAElBD,GAAcE,IAAWD,EAG5B,GAFA,SAFA,SAJT,MAAO,SAsCXE,iBAzBqB,SAAU53B,GAC/B,OAAOixB,GAAauE,GAAsBnU,GAAkBrhB,GAASf,IAAa,SAAU7T,GAC1F,MAAsB,OAAfxU,GAAKwU,MACX7W,MAAM,KAuBTsjD,gBArBoB5E,KAyBpB6E,GAAuB,CACzB5jC,OAAQ,CACN6qB,kBAAmB,WACnBjX,MAAS,QAEX9d,WAAY,CAAEi1B,OAAQ,KACtB8Y,WAAW,GA0BTC,GAAiB,SAAU7rC,GAC7B,IAAIE,EAAczL,GAAaY,QAAQ,YAIvC,OAHAnJ,EAAM8T,GAAS,WACb,OAAOqG,GAAOnG,EApBTzL,GAAaY,QAAQ,WAsBrB6K,GAEL4rC,GAAa,SAAU1rC,EAAMJ,EAAS+rC,EAAYC,GACpD,OAAO9/C,EAAMkU,GAAM,SAAUhU,GAC3B,OAxBY,SAAU4T,EAAS+rC,EAAYC,EAAe19B,GAE5D,IADA,IAAIusB,EAAKpmC,GAAaY,QAAQ,MACrBzH,EAAI,EAAGA,EAAIoS,EAASpS,IAAK,CAChC,IAAI2gB,EAAKD,EAAWy9B,GAAcn+C,EAAIo+C,EAXjCv3C,GAAaY,QAAQ,MAGrBZ,GAAaY,QAAQ,MAStBzH,EAAIo+C,GACN5uC,GAAImR,EAAI,QAAS,OAEfD,EAAWy9B,GACb3uC,GAAImR,EAAI,QAAS,OAEnBlI,GAAOkI,EAAI9Z,GAAaY,QAAQ,OAChCgR,GAAOw0B,EAAItsB,GAEb,OAAOssB,EAWEoR,CAAUjsC,EAAS+rC,EAAYC,EAAe5/C,OAyCrD8/C,GAAmB,SAAUr4B,EAAQ5U,GACvC4U,EAAOhB,UAAU+lB,OAAO35B,EAAKzK,KAAK,GAClCqf,EAAOhB,UAAUs5B,UAAS,IAgBxBC,GAAW,SAAUv4B,EAAQ7T,EAASI,EAAMisC,EAAYN,GAC1D,IAAIpZ,EAAgBS,GAAiBvf,GACjCyZ,EAAU,CACZvlB,OAAQ4qB,EACR90B,WAAYs1B,GAAqBtf,GACjC+3B,UAAW7X,GAAelgB,IAS5B,OAPAA,EAAO6kB,YAAY6B,QAAO,WACxB,IAAIp6B,EAhEO,SAAUC,EAAMJ,EAAS+rC,EAAYC,EAAeM,EAAYC,QAC1D,IAAfA,IACFA,EAAaZ,IAEf,IAAIxrC,EAAQ1L,GAAaY,QAAQ,SAC7Bm3C,EAAqC,UAAfF,EAC1BhuC,GAAS6B,EAAOosC,EAAWxkC,QAC3B1K,GAAO8C,EAAOosC,EAAW1uC,YACrB0uC,EAAWX,WACbvlC,GAAOlG,EAAO0rC,GAAe7rC,IAE/B,IAAIysC,EAAmBpqC,KAAKkC,IAAInE,EAAM2rC,GACtC,GAAIS,GAAuBT,EAAa,EAAG,CACzC,IAAIxE,EAAQ9yC,GAAaY,QAAQ,SACjCgR,GAAOlG,EAAOonC,GACd,IACImF,EAAYZ,GAAWC,EAAY/rC,EADF,iBAAfssC,EAAgCG,EAAmB,EACRT,GACjEnlC,GAAS0gC,EAAOmF,GAElB,IAAIC,EAAQl4C,GAAaY,QAAQ,SACjCgR,GAAOlG,EAAOwsC,GACd,IAEIC,EAAYd,GAFFU,EAAsBpsC,EAAOqsC,EAAmBrsC,EAE1BJ,EADhBwsC,EAAsB,EAAIT,EACcC,GAE5D,OADAnlC,GAAS8lC,EAAOC,GACTzsC,EAuCO0sC,CAASzsC,EAAMJ,EAAS+rC,EAAYM,EAAYrY,GAAmBngB,GAASyZ,GACxFlwB,GAAI+C,EAAO,cAAe,SAC1B,IAAIxL,EAnCS,SAAUmB,GACzB,IAAI0U,EAAY/V,GAAaY,QAAQ,OACjCuI,EAAQnJ,GAAaH,QAAQwB,EAAQtB,IAAIgU,WAAU,IAEvD,OADAnC,GAAOmE,EAAW5M,GANR,SAAU9H,GACpB,OAAOA,EAAQtB,IAAIQ,UAMZ83C,CAAMtiC,GA+BAuiC,CAAW5sC,GACtB0T,EAAOm5B,cAAcr4C,GACrBkf,EAAOo5B,eAEFnwC,GAAa03B,GAAU3gB,GAAS,8BAA8B/qB,KAAI,SAAUqX,GAYjF,OAXIkzB,GAAexf,GACjByiB,GAAcziB,EAAQ1T,GACbozB,GAAmB1f,GAC5B2iB,GAAYr2B,IACH2zB,GAAoBjgB,IAtBd,SAAU8H,GAC7B,OAAO/wB,EAAS+wB,KAAkC,IAAxBA,EAAMnwB,QAAQ,KAqBI0hD,CAAeva,EAAchX,SACrEya,GAAkBviB,EAAQ1T,GAE5By0B,GAAgBz0B,GAChBzC,GAAOyC,EAAO,eAlCD,SAAU0T,EAAQ1T,GACjCpX,EAAKuT,GAAc6D,EAAO,OAAO,SAAUK,GACzC+xB,GAAW1e,EAAQrT,EAAIhM,KACvBzL,EAAKuT,GAAckE,EAAK,UAAU,SAAUvB,GAC1CwzB,GAAY5e,EAAQ5U,EAAKzK,WA+B3B24C,CAAWt5B,EAAQ1T,GAtCM,SAAU0T,EAAQi0B,GAC7ChrC,GAAagrC,EAAU,SAAS/+C,KAAKvC,EAAM0lD,GAAkBr4B,IAsC3Du5B,CAAuBv5B,EAAQ1T,GACxBA,EAAM3L,OACZpM,MAAM,OAEPilD,GAAgC,SAAUx5B,EAAQzT,EAAMJ,EAASstB,EAASggB,QAC5D,IAAZhgB,IACFA,EAAU,IAEZ,IAAIigB,EAAa,SAAUv2B,GACzB,OAAO5rB,EAAS4rB,IAAQA,EAAM,GAEhC,GAAIu2B,EAAWntC,IAASmtC,EAAWvtC,GAAU,CAC3C,IAAIwtC,EAAalgB,EAAQkgB,YAAc,EACnCC,EAAgBngB,EAAQmgB,eAAiB,EAC7C,OAAOrB,GAASv4B,EAAQ7T,EAASI,EAAMqtC,EAAeD,GAGtD,OADAr4C,QAAQC,MAAMk4C,GACP,MAIPI,GAAuB,SAAUC,GACnC,OAAO,WACL,OAAOA,IAAe3lD,MAAK,WACzB,MAAO,MACN,SAAUsY,GACX,OAAOxX,EAAIwX,GAAO,SAAUxF,GAC1B,OAAOA,EAAEtG,YAKbo5C,GAAuB,SAAUC,GACnC,OAAO,SAAUvtC,GACf,IAAIwtC,EAAUxtC,EAAMzZ,OAAS,EAAIoD,EAAST,KAAKmpB,GAAUrS,IAAUrW,EAAS1C,OAC5EsmD,EAAaC,KAGbC,GAAc,SAAUl6B,GAC1B,OAAO,SAAU7T,EAASI,EAAMktB,QACd,IAAZA,IACFA,EAAU,IAEZ,IAAIntB,EAAQktC,GAA8Bx5B,EAAQzT,EAAMJ,EAASstB,EAAS,4FAE1E,OADAzZ,EAAO6kB,YAAYjT,MACZtlB,IAeP6tC,GAAgB,SAAUl4C,EAASqI,EAAU9X,GAC/C,IAAI4nD,EAAiBjvC,GAAalJ,EAASqI,EAAU,GACvC,IAAV9X,GAAe4nD,GAAkB,EACnCvwC,GAAO5H,EAASqI,GAEhBf,GAAItH,EAASqI,EAAUkE,KAAKkC,IAAIle,EAAO4nD,KAmCvCC,GAAW,SAAU/tC,EAAOvP,GAC9B,IAAI+d,EAAQnM,GAAU1B,UAAUX,GAEhC,OADc69B,GAAQrvB,EAAO/d,GACd9H,KAAI,SAAUi+C,GAC3B,IAAIC,EAAmBD,EAAcA,EAAclgD,OAAS,GACxDogD,EAAcF,EAAc,GAAGrmC,OAC/BwmC,EAAcF,EAAiBtmC,OAASsmC,EAAiBxuC,QAG7D,OAAO/K,EAzCY,SAAUkhB,EAAOs4B,EAAaC,GACnD,GAAI1kC,GAAUS,WAAW0L,GAAQ,CAC/B,IAAIw/B,EAAahlD,EAAOqZ,GAAUQ,YAAY2L,IAAQ,SAAU+C,GAC9D,OAAOA,EAAIhR,QAAUumC,GAAev1B,EAAIhR,OAASwmC,KAE/CkH,EAAatlD,EAAIqlD,GAAY,SAAU/1B,GACzC,IAAIi2B,EAAY99B,GAAK6H,EAAEtiB,SAEvB,OADAk4C,GAAcK,EAAW,OAAQnH,EAAcD,GACxCoH,KAELC,EAAe75C,GAAaY,QAAQ,YAExC,OADAwR,GAASynC,EAAcF,GAChB,CAACE,GAER,MAAO,GAyBaC,CAAiB5/B,EAAOs4B,EAAaC,GAtB1C,SAAUv4B,EAAOs4B,EAAaC,GAC/C,OAAOp+C,EAAI6lB,EAAM5nB,KAAK,SAAUyZ,GAC9B,IAAIguC,EAAcrlD,EAAOqX,EAAI9H,OAAO,SAAUuG,GAC5C,OAAOA,EAAKyB,QAAUumC,GAAehoC,EAAKyB,OAASwmC,KAEjDuH,EAAc3lD,EAAI0lD,GAAa,SAAUvvC,GAC3C,IAAIyvC,EAAan+B,GAAKtR,EAAKnJ,SAE3B,OADAk4C,GAAcU,EAAY,UAAWxH,EAAcD,GAC5CyH,KAELC,EAASl6C,GAAaY,QAAQ,MAElC,OADAwR,GAAS8nC,EAAQF,GACVE,KAWQC,CAAajgC,EAAOs4B,EAAaC,QAKhD2H,GAAW,SAAU1uC,EAAOvP,EAAQkkB,GACtC,IAAI7T,EAAYuB,GAAU1B,UAAUX,GAEpC,OADc69B,GAAQ/8B,EAAWrQ,GAClB9H,KAAI,SAAUi+C,GAC3B,IAAIxkC,EAAOi6B,GAAOv7B,EAAW6T,GAAY,GAErCg6B,EADO5U,GAAmB33B,GAAMnC,KACd9U,MAAMy7C,EAAc,GAAGvmC,IAAKumC,EAAcA,EAAclgD,OAAS,GAAG2Z,IAAMumC,EAAcA,EAAclgD,OAAS,GAAG0R,SAExI,OAjjDS,SAAUgK,GACrB,OAAOzZ,EAAIyZ,GAAM,SAAU/B,GACzB,IAAIq6B,EAAKvqB,GAAQ9P,EAAI1K,SAOrB,OANA/M,EAAKyX,EAAI9H,OAAO,SAAUuG,GACxB,IAAIyvC,EAAan+B,GAAKtR,EAAKnJ,SAC3BwkC,GAASoU,EAAY,UAAWzvC,EAAKzG,QAAS,GAC9C8hC,GAASoU,EAAY,UAAWzvC,EAAK1G,QAAS,GAC9C8N,GAAOw0B,EAAI6T,MAEN7T,KAwiDAkU,CADahS,GAAa+R,EAAYh6B,QAK7Ck6B,GAAWhhC,QAAQC,KAAKC,MAAMC,QAAQ,sBAEtC8gC,GAAsB,SAAUz6C,EAAKsL,EAAKrV,GAe5C,OAZoB,SAAUykD,EAAiBC,GAC7C,IAAK,IAAInjD,EAAI,EAAGA,EAAImjD,EAAKtoD,OAAQmF,IAAK,CACpC,IAAIojD,EAAe56C,EAAIugC,SAASoa,EAAKnjD,GAAIvB,GAIzC,QAH+B,IAApBykD,IACTA,EAAkBE,GAEhBF,IAAoBE,EACtB,MAAO,GAGX,OAAOF,EAEFG,CAbHH,UADQ16C,EAAIokC,OAAO,QAAS94B,KAgB9BwvC,GAAa,SAAUz7B,EAAQ/T,EAAKrV,GAClCA,GACFopB,EAAO07B,UAAUtoD,MAAM,QAAUwD,EAAM,GAAIqV,IAQ3C0vC,GAAe,SAAU37B,EAAQ/T,GACnCkvC,GAASjmD,KAAK,oBAAoB0jC,MAAM,MAAM,SAAUhiC,GACtDopB,EAAO07B,UAAU7xC,OAAO,QAAUjT,EAAM,GAAIqV,OAS5C2vC,GAAc,SAAU9sC,GAC1B,OA56LsB,SAAUrL,EAAKa,GACrC,OAAOC,GAAId,EAAKa,SAAqBxP,IAAb2O,EAAIa,IAAmC,OAAbb,EAAIa,GA26L/Cu3C,CAAkB/sC,EAAM,SAE7BgtC,GAAiB,SAAUC,EAAWC,GAiBxC,OAhBkB,SAAU73C,EAAQ1L,GAClC,OAAOA,EAAItF,OAAO8B,EAAIkP,GAAQ,SAAU2K,GACtC,IAAInN,EAAOmN,EAAKnN,MAAQmN,EAAKmtC,MAC7B,OAAIL,GAAY9sC,GACP,CACLnN,KAAMA,EACNu6C,MAAOJ,GAAehtC,EAAKqtC,OAGtB,CACLx6C,KAAMA,EACNnP,MAAOsc,EAAKtc,WAKb4pD,CAAYL,EAAWC,GAAc,KAE1CK,GAAW,SAAU17C,GACvB,OAAO,SAAUnO,GACf,OAAO8J,EAAW9J,EAAO,OAASmO,EAAI27C,MAAM9pD,GAASA,IAGrD+pD,GAAwB,SAAU57C,EAAKsL,GACzC,IAAIhK,EAAUrB,GAAaH,QAAQwL,GACnC,MAAO,CACLuwC,YAAa1xC,GAAO7I,EAAS,gBAAgB1N,MAAM,IACnDkoD,YAAa3xC,GAAO7I,EAAS,gBAAgB1N,MAAM,IACnDmoD,YAAa5xC,GAAO7I,EAAS,gBAAgBhN,IAAIonD,GAAS17C,IAAMpM,MAAM,IACtEooD,gBAAiB7xC,GAAO7I,EAAS,oBAAoBhN,IAAIonD,GAAS17C,IAAMpM,MAAM,MAG9EqoD,GAAkB,SAAUnnB,GAC9B,IAAIonB,EAAWpnB,EAAK,GAChBqnB,EAAiBrnB,EAAKh+B,MAAM,GAahC,OAZAvC,EAAK4nD,GAAgB,SAAUZ,GAC7BhnD,EAAKqO,GAAKs5C,IAAW,SAAUv4C,GAC7Bd,GAAO04C,GAAO,SAAUa,EAAWC,GACjC,IAAIC,EAAkBJ,EAASv4C,GACP,KAApB24C,GAA0B34C,IAAQ04C,GAChCC,IAAoBF,IACtBF,EAASv4C,GAAO,aAMnBu4C,GAELK,GAAiB,SAAUC,GAC7B,IAAIC,EAAc,CAChB,CACExmD,KAAM,cACNL,KAAM,UACNgjB,MAAO,eACP2iC,MAAO,CACL,CACEv6C,KAAM,YACNnP,MAAO,IAET,CACEmP,KAAM,QACNnP,MAAO,SAET,CACEmP,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,QACNnP,MAAO,SAET,CACEmP,KAAM,QACNnP,MAAO,SAET,CACEmP,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,OACNnP,MAAO,QAET,CACEmP,KAAM,SACNnP,MAAO,YAIb,CACEoE,KAAM,cACNL,KAAM,aACNgjB,MAAO,gBAET,CACE3iB,KAAM,kBACNL,KAAM,aACNgjB,MAAO,qBASX,MAAO,CACL0iC,MAAO,WACPrlD,KAAM,WACNslD,MAJyB,SAAfiB,EAAwB,CALlB,CAChBvmD,KAAM,cACNL,KAAM,QACNgjB,MAAO,iBAEyCpmB,OAAOiqD,GAAeA,IAOtEC,GAAe,SAAUr/B,EAASs/B,EAAYt9B,EAAQ/T,GACxD,OAAOrT,EAAKolB,GAAS,SAAUpnB,GAC7B,OAAOopB,EAAO07B,UAAU6B,UAAUtxC,EAAKqxC,EAAa1mD,MACnDrC,MAAM,KAEPipD,GAAgB7qD,EAAM0qD,GAAc,CACtC,OACA,SACA,SACC,SACCI,GAAgB9qD,EAAM0qD,GAAc,CACtC,MACA,SACA,UACC,UA4GCK,GAAa,CACf,CACE9mD,KAAM,QACNL,KAAM,QACNgjB,MAAO,SAET,CACE3iB,KAAM,SACNL,KAAM,QACNgjB,MAAO,UAET,CACE3iB,KAAM,WACNL,KAAM,UACNgjB,MAAO,YACP2iC,MAAO,CACL,CACEv6C,KAAM,OACNnP,MAAO,MAET,CACEmP,KAAM,cACNnP,MAAO,QAIb,CACEoE,KAAM,QACNL,KAAM,UACNgjB,MAAO,QACP2iC,MAAO,CACL,CACEv6C,KAAM,OACNnP,MAAO,IAET,CACEmP,KAAM,MACNnP,MAAO,OAET,CACEmP,KAAM,SACNnP,MAAO,OAET,CACEmP,KAAM,YACNnP,MAAO,YAET,CACEmP,KAAM,eACNnP,MAAO,cAIb,CACEoE,KAAM,SACNL,KAAM,UACNgjB,MAAO,UACP2iC,MAAO,CACL,CACEv6C,KAAM,OACNnP,MAAO,IAET,CACEmP,KAAM,OACNnP,MAAO,QAET,CACEmP,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,QACNnP,MAAO,WAIb,CACEoE,KAAM,SACNL,KAAM,UACNgjB,MAAO,UACP2iC,MAAO,CACL,CACEv6C,KAAM,OACNnP,MAAO,IAET,CACEmP,KAAM,MACNnP,MAAO,OAET,CACEmP,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,SACNnP,MAAO,aAKXmrD,GAAW,SAAU39B,GACvB,OAAO09B,GAAWvqD,OAjHD,SAAU6sB,GAC3B,IAAI49B,EAAU9B,GA98EO,SAAU97B,GAC/B,OAAOA,EAAOof,SAAS,wBAAyB,GAAI,SA68EvBye,CAAiB79B,IAC9C,OAAI49B,EAAQ5qD,OAAS,EACZoD,EAAST,KAAK,CACnBiB,KAAM,QACNL,KAAM,UACNgjB,MAAO,QACP2iC,MAAO0B,IAGJxnD,EAAS1C,OAuGSoqD,CAAa99B,GAAQvqB,YAG5CsoD,GAAY,SAAUC,GACxB,OAAO,SAAUh+B,EAAQtf,GACvB,IAAIC,EAAMqf,EAAOrf,IAoBjB,MAAO,CACLi0C,UApBc,SAAU3qC,EAAMzX,GACzBwrD,IAAcxrD,GACjBmO,EAAIi0C,UAAUl0C,EAAMuJ,EAAMzX,IAmB5ByrD,SAhBa,SAAUC,EAAM1rD,GACxBwrD,IAAcxrD,GACjBmO,EAAIs9C,SAASv9C,EAAMw9C,EAAM1rD,IAe3B2rD,UAZc,SAAUb,EAAY9qD,GAC/BwrD,IAAcxrD,IACH,KAAVA,EACFwtB,EAAO07B,UAAU7xC,OAAOyzC,EAAY,CAAE9qD,MAAO,MAAQkO,GAAM,GAE3Dsf,EAAO07B,UAAUtoD,MAAMkqD,EAAY,CAAE9qD,MAAOA,GAASkO,QAW3D09C,GAAc,CAChBC,OAAQN,IAAU,GAClBO,SAAUP,IAAU,IAGlBQ,GAAmB,SAAU15C,GAC/B,OAAOyH,GAAMzH,EAAM,IAAI5P,KAAI,SAAUqX,GACnC,IAAIc,EAAYuB,GAAU1B,UAAUX,GAChCkyC,EAAW7vC,GAAUM,UAAU7B,GAC/B4B,EAAW1Z,EAAOkpD,GAAU,SAAUC,GACxC,OAAOrpD,EAAOyP,GAAO,SAAU65C,GAC7B,OAAOh8C,GAAK+7C,EAAMx8C,QAASy8C,SAG/B,OAAOzpD,EAAI+Z,GAAU,SAAU5D,GAC7B,MAAO,CACLnJ,QAASmJ,EAAKnJ,QAAQtB,IACtBkM,OAAQ8B,GAAUU,YAAYjC,EAAWhC,EAAKyB,QAAQ5X,KAAI,SAAU4oB,GAClE,OAAOA,EAAI5b,QAAQtB,eAkBzBg+C,GAAgB,SAAU3+B,EAAQnb,EAAO4wB,GAC3C,IAAImpB,EAAgC,IAAjB/5C,EAAM7R,OACzB,GAAI6R,EAAM7R,QAAU,EAAG,CACrB,IAAI6rD,EAAWvyC,GAAMzH,EAAM,IAC3B05C,GAAiB15C,GAAO3P,MAAK,SAAUg+C,GACrCh+C,EAAKg+C,GAAe,SAAUpkC,GAC5B,IAAIgwC,EAAUvK,GAAev0B,EAAQlR,EAAK7M,QAASwzB,EAAKspB,UACpDC,EAAWJ,EAAeR,GAAYC,OAAOr+B,EAAQ8+B,GAAWV,GAAYE,SAASt+B,EAAQ8+B,IAnBjF,SAAUE,EAAUC,EAAaxpB,GACvDupB,EAASpK,UAAU,QAASnf,EAAK10B,OACjCi+C,EAASpK,UAAU,QAASnf,EAAKypB,OACjCF,EAASf,SAAS,SAAUnd,GAAYrL,EAAKpQ,SAC7C45B,EAAYhB,SAAS,QAASnd,GAAYrL,EAAK3N,QAmBzCq3B,CAAkBH,EAHAlwC,EAAKjC,OAAO5X,KAAI,SAAU4oB,GAC1C,OAAO+gC,EAAeR,GAAYC,OAAOr+B,EAAQnC,GAAOugC,GAAYE,SAASt+B,EAAQnC,MACpFtpB,MAAMyqD,GACgCvpB,GACrCoK,GAAmB7f,IAlBL,SAAUg/B,EAAUvpB,GAC5CupB,EAASb,UAAU,2BAA4B1oB,EAAKknB,iBACpDqC,EAASb,UAAU,uBAAwB1oB,EAAKinB,aAChDsC,EAASb,UAAU,uBAAwB1oB,EAAKgnB,aAChDuC,EAASb,UAAU,uBAAwBrd,GAAYrL,EAAK+mB,cAepD4C,CAAoBJ,EAAUvpB,GAE5BmpB,IACFjD,GAAa37B,EAAQ8+B,GA1bX,SAAU9+B,EAAQ/T,GACpCkvC,GAASjmD,KAAK,oBAAoB0jC,MAAM,MAAM,SAAUhiC,GACtDopB,EAAO07B,UAAU7xC,OAAO,SAAWjT,EAAM,GAAIqV,MAybvCozC,CAAcr/B,EAAQ8+B,IAEpBrpB,EAAK6pB,QACP7D,GAAWz7B,EAAQ8+B,EAASrpB,EAAK6pB,QAE/B7pB,EAAK8pB,QA1cC,SAAUv/B,EAAQ/T,EAAKrV,GACnCA,GACFopB,EAAO07B,UAAUtoD,MAAM,SAAWwD,EAAM,GAAIqV,GAyctCuzC,CAAYx/B,EAAQ8+B,EAASrpB,EAAK8pB,cAIxCV,EAAS3pD,MAAK,SAAUoX,GACtB,OAAOuyB,GAAkB7e,EAAQ1T,EAAM3L,UAIzC8+C,GAAmB,SAAUz/B,EAAQnb,EAAO0O,GAC9C,IAAIkiB,EAAOliB,EAAImsC,UACfnsC,EAAIosC,QACJ3/B,EAAO6kB,YAAY+a,UAAS,WAC1BjB,GAAc3+B,EAAQnb,EAAO4wB,GAC7BzV,EAAOwB,YAGPk+B,GAAU,SAAU1/B,EAAQnb,GAC9B,IAAIg7C,EAAYtB,GAAiB15C,GAAO5P,KAAI,SAAUi+C,GACpD,OAAOj+C,EAAIi+C,GAAe,SAAUpkC,GAClC,OAjP2B,SAAUkR,EAAQ5U,EAAMy0B,EAAoBhzB,GAC3E,IAAIlM,EAAMqf,EAAOrf,IACbm/C,EAASjzC,EAAOtY,MAAM6W,GACtB81B,EAAW,SAAUj/B,EAASkI,GAChC,OAAOxJ,EAAIugC,SAASj/B,EAASkI,IAAUxJ,EAAIwgC,UAAUl/B,EAASkI,IAEhE,OAAO7Q,EAAS,CACdwuB,MAAOoZ,EAAS4e,EAAQ,SACxBz6B,OAAQ6b,EAAS91B,EAAM,UACvBrK,MAAOJ,EAAIwgC,UAAU/1B,EAAM,SAC3B2zC,SAAUre,GAAYt1B,GACtB8zC,MAAOv+C,EAAIwgC,UAAU/1B,EAAM,QAAS,IACpCk0C,OAAQ9B,GAAcx9B,EAAQ5U,GAC9Bm0C,OAAQ9B,GAAcz9B,EAAQ5U,IAC7By0B,EAAqB0c,GAAsB57C,EAAKyK,GAAQ,IAmOhD20C,CAA2B//B,EAAQlR,EAAK7M,QAAS49B,GAAmB7f,GAASlR,EAAKjC,cAG7F,OAAO+vC,GAAgBiD,EAAUprD,aAE/BurD,GAAO,SAAUhgC,EAAQf,GAC3B,IAAIpa,EAAQ2wC,GAAsBnU,GAAkBrhB,GAASf,GAC7D,GAAqB,IAAjBpa,EAAM7R,OAAV,CAGA,IAAIyiC,EAAOiqB,GAAQ1/B,EAAQnb,GACvBo7C,EAAiB,CACnB1pD,KAAM,WACN2pD,KAAM,CACJ,CACEjE,MAAO,UACPrlD,KAAM,UACNslD,MAAOyB,GAAS39B,IAElBk9B,GAAe,UAGfiD,EAAc,CAChB5pD,KAAM,QACN2lD,MAAO,CAAC,CACJ3lD,KAAM,OACN4V,QAAS,EACT+vC,MAAOyB,GAAS39B,MAGtBA,EAAOogC,cAAcJ,KAAK,CACxB/D,MAAO,kBACPzsB,KAAM,SACNxnB,KAAM63B,GAAmB7f,GAAUigC,EAAiBE,EACpDE,QAAS,CACP,CACE9pD,KAAM,SACNK,KAAM,SACN+K,KAAM,UAER,CACEpL,KAAM,SACNK,KAAM,OACN+K,KAAM,OACN2+C,SAAS,IAGbC,YAAa9qB,EACb+qB,SAAU7tD,EAAM8sD,GAAkBz/B,EAAQnb,OAgB1C47C,GAAe,CACjB,CACElqD,KAAM,UACNK,KAAM,OACN2iB,MAAO,WACP2iC,MAAO,CACL,CACEv6C,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,OACNnP,MAAO,QAET,CACEmP,KAAM,SACNnP,MAAO,YAIb,CACE+D,KAAM,UACNK,KAAM,QACN2iB,MAAO,YACP2iC,MAAO,CACL,CACEv6C,KAAM,OACNnP,MAAO,IAET,CACEmP,KAAM,OACNnP,MAAO,QAET,CACEmP,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,QACNnP,MAAO,WAIb,CACE+mB,MAAO,SACP3iB,KAAM,SACNL,KAAM,UAGNmqD,GAAa,SAAU1gC,GACzB,OAAOygC,GAAattD,OA9DD,SAAU6sB,GAC7B,IAAI49B,EAAU9B,GA/tFM,SAAU97B,GAC9B,OAAOA,EAAOof,SAAS,uBAAwB,GAAI,SA8tFtBuhB,CAAgB3gC,IAC7C,OAAI49B,EAAQ5qD,OAAS,EACZoD,EAAST,KAAK,CACnBiB,KAAM,QACNL,KAAM,UACNgjB,MAAO,QACP2iC,MAAO0B,IAGJxnD,EAAS1C,OAoDWktD,CAAe5gC,GAAQvqB,YAahDorD,GAAe,SAAU7gC,EAAQzT,EAAMu0C,EAASrrB,GAClD,IAAIsrB,EAA8B,IAAhBx0C,EAAKvZ,OACvBkC,EAAKqX,GAAM,SAAUwnC,GACfte,EAAKl/B,OAASmqC,GAAYqT,EAAOhuC,aACnC+uC,GAAkB90B,EAAQ+zB,EAAQte,EAAKl/B,MAEzC,IAAIyoD,EAAW+B,EAAc3C,GAAYC,OAAOr+B,EAAQ+zB,GAAUqK,GAAYE,SAASt+B,EAAQ+zB,IAhBzE,SAAUiL,EAAUvpB,GAC5CupB,EAASpK,UAAU,QAASnf,EAAK10B,OACjCi+C,EAASpK,UAAU,QAASnf,EAAKypB,OACjCF,EAASf,SAAS,SAAUnd,GAAYrL,EAAKpQ,SAc3C27B,CAAoBhC,EAAUvpB,GAC1BqK,GAAkB9f,IAbE,SAAUg/B,EAAUvpB,GAC9CupB,EAASf,SAAS,mBAAoBxoB,EAAKknB,iBAC3CqC,EAASf,SAAS,eAAgBxoB,EAAKinB,aACvCsC,EAASf,SAAS,eAAgBxoB,EAAKgnB,aAWnCwE,CAAsBjC,EAAUvpB,GAE9BA,EAAKyrB,QAAUJ,EAAQI,QACzBvF,GAAa37B,EAAQ+zB,GACrB0H,GAAWz7B,EAAQ+zB,EAAQte,EAAKyrB,WAGpC50C,GAAM1L,GAAaH,QAAQ8L,EAAK,KAAKrX,MAAK,SAAUoX,GAClD,OAAOuyB,GAAkB7e,EAAQ1T,EAAM3L,SAGvCwgD,GAAkB,SAAUnhC,EAAQzT,EAAMu0C,EAASvtC,GACrD,IAAIkiB,EAAOliB,EAAImsC,UACfnsC,EAAIosC,QACJ3/B,EAAO6kB,YAAY+a,UAAS,WAC1BiB,GAAa7gC,EAAQzT,EAAMu0C,EAASrrB,GACpCzV,EAAOwB,YAGP4/B,GAAS,SAAUphC,GACrB,IAAIzT,EAAOmpC,GAAqBrU,GAAkBrhB,GAASV,GAASI,UACpE,GAAoB,IAAhBnT,EAAKvZ,OAAT,CAGA,IAAIquD,EAAWpsD,EAAIsX,GAAM,SAAUwnC,GACjC,OA5Z4B,SAAU/zB,EAAQ/T,EAAK6zB,GACrD,IAAIn/B,EAAMqf,EAAOrf,IACjB,OAAOrH,EAAS,CACd+rB,OAAQ1kB,EAAIugC,SAASj1B,EAAK,WAAatL,EAAIwgC,UAAUl1B,EAAK,UAC1DlL,MAAOJ,EAAIwgC,UAAUl1B,EAAK,SAC1BizC,MAAOv+C,EAAIwgC,UAAUl1B,EAAK,QAAS,IACnC1V,KAAMq9C,GAAW5zB,EAAQ/T,GACzBi1C,MAAO1D,GAAcx9B,EAAQ/T,IAC5B6zB,EAAoByc,GAAsB57C,EAAKsL,GAAO,IAoZhDq1C,CAA0BthC,EAAQ+zB,EAAOpzC,IAAKm/B,GAAkB9f,OAErEyV,EAAOmnB,GAAgByE,GACvBpB,EAAiB,CACnB1pD,KAAM,WACN2pD,KAAM,CACJ,CACEjE,MAAO,UACPrlD,KAAM,UACNslD,MAAOwE,GAAW1gC,IAEpBk9B,GAAe,SAGfiD,EAAc,CAChB5pD,KAAM,QACN2lD,MAAO,CAAC,CACJ3lD,KAAM,OACN4V,QAAS,EACT+vC,MAAOwE,GAAW1gC,MAGxBA,EAAOogC,cAAcJ,KAAK,CACxB/D,MAAO,iBACPzsB,KAAM,SACNxnB,KAAM83B,GAAkB9f,GAAUigC,EAAiBE,EACnDE,QAAS,CACP,CACE9pD,KAAM,SACNK,KAAM,SACN+K,KAAM,UAER,CACEpL,KAAM,SACNK,KAAM,OACN+K,KAAM,OACN2+C,SAAS,IAGbC,YAAa9qB,EACb+qB,SAAU7tD,EAAMwuD,GAAiBnhC,EAAQ/qB,EAAIsX,GAAM,SAAUhU,GAC3D,OAAOA,EAAEoI,OACP80B,OAIJ8rB,GAAWpnC,QAAQC,KAAKC,MAAMC,QAAQ,eAEtCknC,GAAa,SAAUxhC,EAAQ49B,EAAS6D,GAC1C,IAAIC,EAAoBD,EAAsB,CAC5C,CACElrD,KAAM,QACNK,KAAM,OACN2iB,MAAO,OACPooC,UAAW,WAEb,CACEprD,KAAM,QACNK,KAAM,OACN2iB,MAAO,OACPooC,UAAW,YAX0B,GA0BrCC,EAl6FqB,SAAU5hC,GACnC,OAAOA,EAAOof,SAAS,4BAA4B,EAAM,WAi6FnCyiB,CAAqB7hC,GAAU,CACnD,CACEzpB,KAAM,QACNK,KAAM,cACN2iB,MAAO,eACPooC,UAAW,WAEb,CACEprD,KAAM,QACNK,KAAM,cACN2iB,MAAO,eACPooC,UAAW,WAEb,CACEprD,KAAM,QACNK,KAAM,SACN2iB,MAAO,gBAET,CACEhjB,KAAM,QACNgjB,MAAO,UACP2iC,MAAO,CAAC,CACJ3lD,KAAM,WACNK,KAAM,UACN2iB,MAAO,mBAGX,GAwBAuoC,EAAgBlE,EAAQ5qD,OAAS,EAAI,CAAC,CACtCuD,KAAM,UACNK,KAAM,QACN2iB,MAAO,QACP2iC,MAAO0B,IACJ,GACP,OAAO8D,EAAiBvuD,OArEN,CAChB,CACEoD,KAAM,QACNK,KAAM,QACN2iB,MAAO,SAET,CACEhjB,KAAM,QACNK,KAAM,SACN2iB,MAAO,YA4DiCpmB,OAAOyuD,GAAiBzuD,OA7BhD,CAAC,CACjBoD,KAAM,UACNK,KAAM,QACN2iB,MAAO,YACP2iC,MAAO,CACL,CACEv6C,KAAM,OACNnP,MAAO,IAET,CACEmP,KAAM,OACNnP,MAAO,QAET,CACEmP,KAAM,SACNnP,MAAO,UAET,CACEmP,KAAM,QACNnP,MAAO,aAU2EW,OAAO2uD,IAG/FC,GAAY,SAAUphD,EAAKsL,EAAKrV,EAAMpE,GACxC,GAAoB,OAAhByZ,EAAIyjC,SAAoC,OAAhBzjC,EAAIyjC,QAC1B34C,EAASH,GACX+J,EAAIs9C,SAAShyC,EAAKrV,EAAMpE,GAExBmO,EAAIs9C,SAAShyC,EAAKrV,QAGpB,GAAIqV,EAAIzF,SACN,IAAK,IAAIrO,EAAI,EAAGA,EAAI8T,EAAIzF,SAASxT,OAAQmF,IACvC4pD,GAAUphD,EAAKsL,EAAIzF,SAASrO,GAAIvB,EAAMpE,IA4C1CwvD,GAAoB,SAAUhiC,EAAQi0B,EAAU1gC,GAClD,IACI0uC,EADAthD,EAAMqf,EAAOrf,IAEb80B,EAAOliB,EAAImsC,UACfnsC,EAAIosC,QACe,KAAflqB,EAAKypB,cACAzpB,EAAKypB,MAEdl/B,EAAO6kB,YAAY+a,UAAS,WAC1B,IAAK3L,EAAU,CACb,IAAIjwB,EAAO1Y,SAASmqB,EAAKzR,KAAM,KAAO,EAClCzX,EAAOjB,SAASmqB,EAAKlpB,KAAM,KAAO,EACtC0nC,EAAWsE,GAASv4B,EAAQgE,EAAMzX,EAAM,EAAG,IAnDxB,SAAUyT,EAAQi0B,EAAUxe,GACnD,IAj5F6BjG,EAi5FzB7uB,EAAMqf,EAAOrf,IACb8I,EAAQ,GACRyK,EAAS,GAgBb,GAfAzK,EAAMy1C,MAAQzpB,EAAKypB,MACnBhrC,EAAOmR,OAASyb,GAAYrL,EAAKpQ,QAC7B1kB,EAAIwgC,UAAU8S,EAAU,WAAajU,GAAmBhgB,GAC1DvW,EAAMqe,OAv5FqB0H,EAu5FEiG,EAAK3N,OAt5FtB0H,EAAKr0B,QAAQ,MAAO,IAAM,GAw5FtC+Y,EAAO4T,MAAQgZ,GAAYrL,EAAK3N,OAE9BkY,GAAmBhgB,IACrB9L,EAAO,gBAAkB4sB,GAAYrL,EAAKwJ,QAC1C/qB,EAAO,kBAAoB4sB,GAAYrL,EAAKysB,eAE5Cz4C,EAAMw1B,OAASxJ,EAAKwJ,OACpBx1B,EAAM04C,YAAc1sB,EAAK0sB,YACzB14C,EAAMy4C,YAAczsB,EAAKysB,aAEvBliB,GAAmBhgB,IAAWi0B,EAASztC,SACzC,IAAK,IAAIrO,EAAI,EAAGA,EAAI87C,EAASztC,SAASxT,OAAQmF,IAC5C4pD,GAAUphD,EAAKszC,EAASztC,SAASrO,GAAI,CACnCiqD,eAAgBthB,GAAYrL,EAAKwJ,QACjC6D,QAAWhC,GAAYrL,EAAK0sB,eAE1BpiB,GAAoB/f,IACtB+hC,GAAUphD,EAAKszC,EAASztC,SAASrO,GAAI,CAAEkqD,eAAgB5sB,EAAKinB,cAI9D3c,GAAoB/f,KACtB9L,EAAO,oBAAsBuhB,EAAKknB,gBAClCzoC,EAAO,gBAAkBuhB,EAAKinB,YAC9BxoC,EAAO,gBAAkBuhB,EAAKgnB,aAEhChzC,EAAMU,MAAQxJ,EAAI2hD,eAAehpD,EAASA,EAAS,GAAIimC,GAAiBvf,IAAU9L,IAClFvT,EAAI4hD,WAAWtO,EAAU36C,EAASA,EAAS,GAAIgmC,GAAqBtf,IAAUvW,IAC9Eo1B,GAAkB7e,EAAQi0B,GAgBxBuO,CAAmBxiC,EAAQi0B,EAAUxe,IACrCwsB,EAAathD,EAAIokC,OAAO,UAAWkP,GAAU,MAC1Bxe,EAAKgtB,SACtB9hD,EAAIkJ,OAAOo4C,IAERA,GAAcxsB,EAAKgtB,WACtBR,EAAathD,EAAI+T,OAAO,YACbvT,UAAaogD,GAAStjD,GA55K5B,IA45KiC,2BACtCg2C,EAAS3hC,aAAa2vC,EAAYhO,EAASvhC,aAE1B,KAAf+iB,EAAKyrB,MACPvF,GAAa37B,EAAQi0B,GAErBwH,GAAWz7B,EAAQi0B,EAAUxe,EAAKyrB,OAEpClhC,EAAOwB,QACPxB,EAAOo5B,gBAGPsJ,GAAS,SAAU1iC,EAAQyhC,GAC7B,IACIxN,EADAtzC,EAAMqf,EAAOrf,IAEb80B,EAjsBwB,SAAUzV,EAAQ2iC,GAC9C,IAEyChiD,EA8BnCiiD,EAKA9f,EAjBA+f,EApBF14C,EAAQo1B,GAAiBvf,GACzBvW,EAAQ61B,GAAqBtf,GA6B7B8iC,EAAWH,GA5B0BhiD,EA4BgBqf,EAAOrf,IA3BvD,CACL87C,YAAap4C,GAAM8F,EAAO,gBAAgB5V,MAAM,IAChDmoD,YAAaL,GAAS17C,EAAT07C,CAAch4C,GAAM8F,EAAO,gBAAgB5V,MAAM,KAC9DooD,gBAAiBN,GAAS17C,EAAT07C,CAAch4C,GAAM8F,EAAO,oBAAoB5V,MAAM,OAwBH,GAevE,OADW+E,EAASA,EAASA,EAASA,EAASA,EAASA,EAAS,GAnC/C,CAChB+rB,OAAQ,GACRyC,MAAO,OACPo6B,YAAa,GACbC,YAAa,GACbM,SAAS,EACTvD,MAAO,GACPgC,MAAO,GACPjiB,OAAQ,KA2ByE90B,GAAQV,GAAQq5C,IAxB7FD,EAAc14C,EAAM,gBACpB61B,GAAmBhgB,IAAW6iC,EACzB,CAAE5jB,OAAQ4jB,GAEZx+C,GAAMoF,EAAO,UAAUtV,MAAK,WACjC,MAAO,MACN,SAAU8qC,GACX,MAAO,CAAEA,OAAQA,SAKf2jB,EAAUv+C,GAAM8F,EAAO,kBAAkBpV,GAAGsP,GAAMoF,EAAO,gBAAgBtV,MAAK,WAChF,MAAO,MACN,SAAU+tD,GACX,MAAO,CAAEA,YAAaA,MAEpBpf,EAAUz+B,GAAM8F,EAAO,kBAAkBpV,GAAGsP,GAAMoF,EAAO,gBAAgBtV,MAAK,WAChF,MAAO,MACN,SAAUguD,GACX,MAAO,CAAEA,YAAaA,MAEjB7oD,EAASA,EAAS,GAAIspD,GAAU9f,KAspB9BigB,CAAwB/iC,EAAQ+f,GAAoB/f,KACxC,IAAnByhC,GACFxN,EAAWtzC,EAAIkgB,UAAUb,EAAOhB,UAAU8B,WAAY,UAEpD2U,EArpB4B,SAAUzV,EAAQ/T,EAAK02C,GACvD,IAOIhiD,EAAMqf,EAAOrf,IACjB,OAAOrH,EAAS,CACdwuB,MAAOnnB,EAAIugC,SAASj1B,EAAK,UAAYtL,EAAIwgC,UAAUl1B,EAAK,SACxDoZ,OAAQ1kB,EAAIugC,SAASj1B,EAAK,WAAatL,EAAIwgC,UAAUl1B,EAAK,UAC1Di2C,YAAavhD,EAAIugC,SAASj1B,EAAK,mBAAqBtL,EAAIwgC,UAAUl1B,EAAK,eACvEk2C,YAAaxhD,EAAIwgC,UAAUl1B,EAAK,gBAAkBmvC,GAAoBp7B,EAAOrf,IAAKsL,EAAK,WACvFgzB,OAbc,SAAUt+B,EAAKsL,GAC7B,IAAI+2C,EAAiBl4C,GAAOlK,GAAaH,QAAQwL,GAAM,gBACvD,OAAI+zB,GAAmBhgB,IAAWgjC,EAAe1uD,SACxC0uD,EAAezuD,MAAM,IAEvBoM,EAAIwgC,UAAUl1B,EAAK,WAAamvC,GAAoBp7B,EAAOrf,IAAKsL,EAAK,iBAAmBmvC,GAAoBp7B,EAAOrf,IAAKsL,EAAK,UAQ5Hg3C,CAAUtiD,EAAKsL,GACvBw2C,UAAW9hD,EAAIokC,OAAO,UAAW94B,GAAK,GACtCizC,MAAOv+C,EAAIwgC,UAAUl1B,EAAK,QAAS,IACnCi1C,MAAO1D,GAAcx9B,EAAQ/T,IAC5B02C,EAAiBpG,GAAsB57C,EAAKsL,GAAO,IAmoB3Ci3C,CAA4BljC,EAAQi0B,EAAUlU,GAAoB/f,IAErE+f,GAAoB/f,KACtByV,EAAKgnB,YAAc,GACnBhnB,EAAKinB,YAAc,GACnBjnB,EAAKknB,gBAAkB,KAI3BlnB,EAAKzR,KAAO,IACZyR,EAAKlpB,KAAO,IACRwzB,GAAoB/f,KACtByV,EAAKgnB,YAAc,GACnBhnB,EAAKinB,YAAc,GACnBjnB,EAAKknB,gBAAkB,KAG3B,IAAIiB,EAAU9B,GA9jGQ,SAAU97B,GAChC,OAAOA,EAAOof,SAAS,mBAAoB,GAAI,SA6jGlB+jB,CAAkBnjC,IAC3C49B,EAAQ5qD,OAAS,GACfyiC,EAAKypB,QACPzpB,EAAKypB,MAAQzpB,EAAKypB,MAAM/jD,QAAQ,0BAA2B,KAG/D,IAAIioD,EAAe,CACjB7sD,KAAM,OACN4V,QAAS,EACT+vC,MAAOsF,GAAWxhC,EAAQ49B,EAAS6D,IAqBjC4B,EAAatjB,GAAoB/f,GAZ5B,CACLzpB,KAAM,WACN2pD,KAAM,CACJ,CACEjE,MAAO,UACPrlD,KAAM,UACNslD,MAAO,CAACkH,IAEVlG,GAAe,WAdZ,CACL3mD,KAAM,QACN2lD,MAAO,CAACkH,IAiBZpjC,EAAOogC,cAAcJ,KAAK,CACxB/D,MAAO,mBACPzsB,KAAM,SACNxnB,KAAMq7C,EACN7C,SAAU7tD,EAAMqvD,GAAmBhiC,EAAQi0B,GAC3CoM,QAAS,CACP,CACE9pD,KAAM,SACNK,KAAM,SACN+K,KAAM,UAER,CACEpL,KAAM,SACNK,KAAM,OACN+K,KAAM,OACN2+C,SAAS,IAGbC,YAAa9qB,KAIb6tB,GAAmC,SAAUtjC,GAC/C,OAAOu1B,GAA+BlU,GAAkBrhB,KAEtDujC,GAA0B,SAAUvjC,GACtC,OAAOs1B,GAAsBjU,GAAkBrhB,KAE7CwjC,GAAmB,SAAUxjC,EAAQC,EAASC,EAAejB,EAAYkC,GAC3E,IAAIlb,EAAS4Q,GAAUmJ,GAsCnByjC,EAAmB,SAAUr4C,GAC/B,OAAOkB,GAAMlB,EAAMnF,IAEjBy9C,EAAc,SAAUp3C,GAC1B,OAAO,SAAUgV,GACftB,EAAOhB,UAAUuC,OAAOD,GACxBtB,EAAOwB,QACPtB,EAAcuB,MAAMnV,GACpBy0B,GAAgBz0B,GAChBuyB,GAAkB7e,EAAQ1T,EAAM3L,OAGhCgjD,EAAiB,SAAU3N,GAC7B,OAAOuN,GAAwBvjC,GAAQ9qB,MAAK,SAAUkW,GACpDq4C,EAAiBr4C,GAAMlW,MAAK,SAAUoX,GACpC,IAAI4U,EAAUpB,GAAQb,EAAY3S,EAAOlB,GACzC4qC,EAAQ1pC,EAAO4U,GAAShsB,KAAKwuD,EAAYp3C,WAI3Cs3C,EAAmB,WACrB,OAAOL,GAAwBvjC,GAAQ/qB,KAAI,SAAUmW,GACnD,OAAOq4C,EAAiBr4C,GAAMjW,MAAK,SAAUmX,GAC3C,IAAI4U,EAAUpB,GAAQb,EAAY3S,EAAOlB,GACrC6V,EAAa5D,GAAe/qB,EAAMsO,GAAaH,QAAQuf,EAAOgB,UAAW5qB,EAAS1C,QACtF,OAAOsnD,GAAS1uC,EAAO4U,EAASD,UAIlC4iC,EAAmB,WACrB,OAAON,GAAwBvjC,GAAQ/qB,KAAI,SAAUmW,GACnD,OAAOq4C,EAAiBr4C,GAAMjW,MAAK,SAAUmX,GAC3C,IAAI4U,EAAUpB,GAAQb,EAAY3S,EAAOlB,GACzC,OAAOivC,GAAS/tC,EAAO4U,UAIzB4iC,EAAmB,SAAU9N,EAAS+N,GACxC,OAAOA,IAAU7uD,MAAK,SAAUqX,GAC9B,IAAIy3C,EAAa/uD,EAAIsX,GAAM,SAAUI,GACnC,OAAO+P,GAAK/P,MAEd42C,GAAwBvjC,GAAQ9qB,MAAK,SAAUkW,GAC7C,OAAOq4C,EAAiBr4C,GAAMlW,MAAK,SAAUoX,GAC3C,IAAI2U,EAAapC,GAAMje,GAAaH,QAAQuf,EAAOgB,WAC/CE,EAj0KE,SAAUjC,EAAY7T,EAAM+V,EAAWF,GACrD,MAAO,CACLjC,UAAWA,GAAUC,GACrBkC,UAAWA,EACXF,WAAYA,GA6zKQgjC,CAAUhlC,EAAY7T,EAAM44C,EAAY/iC,GACtD+0B,EAAQ1pC,EAAO4U,GAAShsB,KAAKwuD,EAAYp3C,cAKjD9I,GAAO,CACL0gD,mBAAoB,WAClB,OAAOP,EAAe1jC,EAAQwyB,eAEhC0R,mBAAoB,WAClB,OAAOR,EAAe1jC,EAAQqyB,aAEhC8R,wBAAyB,WACvB,OAAOT,EAAe1jC,EAAQmxB,mBAEhCiT,uBAAwB,WACtB,OAAOV,EAAe1jC,EAAQwxB,kBAEhC6S,wBAAyB,WACvB,OAAOX,EAAe1jC,EAAQyxB,sBAEhC6S,uBAAwB,WACtB,OAAOZ,EAAe1jC,EAAQ0xB,qBAEhC6S,kBAAmB,WACjB,OAAOb,EAAe1jC,EAAQs2B,eAEhCkO,kBAAmB,WACjB,OAAOd,EAAe1jC,EAAQq2B,YAEhCoO,eAAgB,SAAUC,GACxB,OAAOd,IAAmB3uD,MAAK,SAAU8pB,GACvCmC,EAAUyjC,WAAW5lC,GACrB2kC,EAAe1jC,EAAQs2B,kBAG3BsO,eAAgB,SAAUF,GACxB,OAAOf,IAAmB1uD,MAAK,SAAU8pB,GACvCmC,EAAU2jC,QAAQ9lC,GAClB2kC,EAAe1jC,EAAQq2B,eAG3ByO,gBAAiB,SAAUJ,GACzB,OAAOd,IAAmB3uD,MAAK,SAAU8pB,GACvC,OAAOmC,EAAUyjC,WAAW5lC,OAGhCgmC,gBAAiB,SAAUL,GACzB,OAAOf,IAAmB1uD,MAAK,SAAU8pB,GACvC,OAAOmC,EAAU2jC,QAAQ9lC,OAG7BimC,uBAAwB,SAAUN,GAChC,OAAOb,EAAiB7jC,EAAQ2yB,gBAAiBzxB,EAAU+jC,aAE7DC,sBAAuB,SAAUR,GAC/B,OAAOb,EAAiB7jC,EAAQ6yB,eAAgB3xB,EAAU+jC,aAE5DE,uBAAwB,SAAUT,GAChC,OAAOb,EAAiB7jC,EAAQ8yB,gBAAiB5xB,EAAU4iC,UAE7DsB,sBAAuB,SAAUV,GAC/B,OAAOb,EAAiB7jC,EAAQ+yB,eAAgB7xB,EAAU4iC,UAE5DuB,eAnJe,WACf,OAAOhC,GAAiCtjC,GAAQ9qB,MAAK,SAAUqwD,GAC7Dj5C,GAAMi5C,EAAet/C,GAAQ3Q,OAAOhC,EAAI2S,IAAS/Q,MAAK,SAAUoX,GAC9D,IAAIs9B,EAAShpC,GAAac,SAAS,IAGnC,GAFA6Q,GAAMjG,EAAOs9B,GACbx2B,GAAS9G,GACL0T,EAAOrf,IAAI6kD,QAAQxlC,EAAO/X,WAC5B+X,EAAOylC,WAAW,IAClBzlC,EAAOhB,UAAU0mC,wBACZ,CACL,IAAIpkC,EAAMtB,EAAOrf,IAAIw1C,YACrB70B,EAAI80B,SAASxM,EAAOjpC,IAAK,GACzB2gB,EAAI+0B,OAAOzM,EAAOjpC,IAAK,GACvBqf,EAAOhB,UAAUuC,OAAOD,GACxBtB,EAAO2lC,sBAsIbC,mBAAoB,SAAUC,EAAIpc,GAChC,OAlIgB,SAAUA,GAC5B,OAAO6Z,GAAiCtjC,GAAQ9qB,MAAK,SAAUqwD,GACxC7lB,GAAmB1f,IAAWwf,GAAexf,IAAWigB,GAAoBjgB,IAE/F1T,GAAMi5C,EAAet/C,GAAQ/Q,MAAK,SAAUoX,GAC3B,aAAXm9B,GAA0BrW,GAAkB9mB,GAE1B,UAAXm9B,GAAuBpW,GAAgB/mB,GAE5B,eAAXm9B,GAA4BnW,GAAehnB,IACpDq2B,GAAYr2B,GAFZm2B,GAAcziB,EAAQ1T,GAFtBi2B,GAAkBviB,EAAQ1T,GAM5By0B,GAAgBz0B,GAChBuyB,GAAkB7e,EAAQ1T,EAAM3L,WAqH7BmlD,CAAcrc,MAEtB,SAAUsc,EAAMnvD,GACjB,OAAOopB,EAAOgmC,WAAWpvD,EAAMmvD,MAEjC,IAAIE,EAAgC,SAAUjmC,EAAQ6+B,GACpDA,EAAS3pD,MAAK,SAAUoX,GACtBuyB,GAAkB7e,EAAQ1T,EAAM3L,SAGpC6C,GAAO,CACL0iD,iBAAkB,SAAUC,EAAKhsD,GAC/B,IAAI0kD,EAAWvyC,GAAM+0B,GAAkBrhB,GAAS/Z,GAChDga,EAAQo3B,iBAAiBr3B,EAAQ7lB,GACjC8rD,EAA8BjmC,EAAQ6+B,IAExCuH,gBAAiB,SAAUD,EAAKhsD,GAC9B,IAAI0kD,EAAWvyC,GAAM+0B,GAAkBrhB,GAAS/Z,GAChDga,EAAQq3B,gBAAgBt3B,EAAQ7lB,GAChC8rD,EAA8BjmC,EAAQ6+B,MAEvC,SAAUkH,EAAMnvD,GACjB,OAAOopB,EAAOgmC,WAAWpvD,EAAMmvD,MAEjC/lC,EAAOgmC,WAAW,mBAAmB,SAAUG,EAAKhsD,GAClD,OAAOkK,GAAMlK,EAAM,QAAQjF,MAAK,SAAUqB,GACxC,OAAOotD,EAAwB,OAATptD,EAAgB0pB,EAAQiyB,kBAAoBjyB,EAAQoyB,2BAG9E7uC,GAAO,CACL6iD,cAAe1zD,EAAM+vD,GAAQ1iC,GAAQ,GACrCsmC,iBAAkB3zD,EAAMyuD,GAAQphC,GAChCumC,kBAAmB5zD,EAAMqtD,GAAMhgC,EAAQf,KACtC,SAAU8mC,EAAMnvD,GACjB,OAAOopB,EAAOgmC,WAAWpvD,GAAM,WAC7B,OAAOmvD,UAGX/lC,EAAOgmC,WAAW,kBAAkB,SAAUG,EAAKhsD,GAC7CnD,EAASmD,IAASoJ,GAAKpJ,GAAMnH,OAAS,EACxCwmD,GAA8Bx5B,EAAQ7lB,EAAKoS,KAAMpS,EAAKgS,QAAShS,EAAKs/B,QAAS,+FAE7EipB,GAAO1iC,GAAQ,MAGnBA,EAAOgmC,WAAW,0BAA0B,SAAUG,EAAKhsD,GACzD,IAAIqsD,EAAgB,SAAUr8C,GAC5B,MAAO,YAAcA,EAAMtP,cAAcM,QAAQ,IAAK,KAExD,GAAKnE,EAASmD,GAAd,CAGA,IAAI0K,EAAQ2wC,GAAsBnU,GAAkBrhB,GAASf,GAC7D,GAAqB,IAAjBpa,EAAM7R,OAAV,CAGA,IAAIyzD,EAAY3iD,GAAS3J,GAAM,SAAU3H,EAAO2X,GAC9C,OAAO6V,EAAO07B,UAAUn3C,IAAIiiD,EAAcr8C,KAAWpT,EAASvE,OAzhOtD,SAAU+F,GACtB,IAAK,IAAI7F,KAAK6F,EACZ,GAAImB,GAAe3F,KAAKwE,EAAG7F,GACzB,OAAO,EAGX,OAAO,GAqhOD8yD,CAAQiB,KAGZjjD,GAAOijD,GAAW,SAAUj0D,EAAO2X,GACjCjV,EAAK2P,GAAO,SAAUuG,GACpBgzC,GAAYC,OAAOr+B,EAAQ5U,EAAKzK,KAAKw9C,UAAUqI,EAAcr8C,GAAQ3X,SAGzEixD,EAAiB5+C,EAAM,IAAI3P,MAAK,SAAUoX,GACxC,OAAOuyB,GAAkB7e,EAAQ1T,EAAM3L,IAAK,CAC1C+lD,WAAW,EACXv8C,OAAO,cAMXw8C,GAAwB,SAAU3mC,EAAQC,EAAShB,GACrD,IAAIhZ,EAAS4Q,GAAUmJ,GAIvBxc,GAAO,CACL4iD,gBAAiB,WACf,OAAOnmC,EAAQs3B,gBAAgBv3B,IAEjCkmC,iBAAkB,WAChB,OAAOjmC,EAAQ23B,iBAAiB53B,IAElC4mC,gBAAiB,WACf,OAAOtR,GAAsBjU,GAAkBrhB,IAAS7qB,MAAK,SAAUiW,GACrE,OAZiB,SAAUA,GAC/B,OAAOkB,GAAMlB,EAAMnF,GAWRw9C,CAAiBr4C,GAAMnW,KAAI,SAAUqX,GAC1C,IAAI4U,EAAUpB,GAAQb,EAAY3S,EAAOlB,GACzC,OAAO6U,EAAQ43B,gBAAgBvrC,EAAO4U,SAEvC3sB,MAAM,OAEV,SAAUwxD,EAAMnvD,GACjB,OAAOopB,EAAO6mC,qBAAqBjwD,EAAMmvD,OA8BzCe,GAAc,CAChBC,yBAA0B,CACxB7kD,SAAU,QACVgS,OAAQ,CAAE8yC,gBAAiB,UAC3BC,gBAAgB,GAElBC,qBAAsB,CACpBhlD,SAAU,QACVgS,OAAQ,CAAEizC,YAAa,UACvBF,gBAAgB,GAElBG,qBAAsB,CACpBllD,SAAU,QACVgS,OAAQ,CAAEmzC,YAAa,UACvBJ,gBAAgB,GAElBK,qBAAsB,CACpBplD,SAAU,QACVgS,OAAQ,CAAE2uC,YAAa,UACvBoE,gBAAgB,IAOhBM,GAAQ5uC,GAAa,CACvB,CAAEjlB,KAAM,CAAC,YACT,CAAEme,MAAO,CAAC,YACV,CACE+P,OAAQ,CACN,UACA,WAGJ,CAAEzoB,KAAM,CAAC,cAQPquD,GAAeluD,EAASA,EAAS,GAAIiuD,IAAQ,CAAE7zD,KANtC,SAAUoI,GAIrB,YAHgB,IAAZA,IACFA,OAAUhH,GAELyyD,GAAM7zD,KAAKoI,MAIhB2rD,GAAW,SAAU3rD,EAASmK,GAChC,OAAOqG,GAAMxQ,EAASmK,GAAQ9Q,MAAK,SAAUmX,GAC3C,IAAIpZ,EAAM2R,GAAMyH,GAIhB,OAHYvT,EAAU7F,GAAK,SAAUR,GACnC,OAAOgQ,GAAK5G,EAASpJ,MAEVuC,KAAI,SAAUyR,GACzB,MAAO,CACLA,MAAOA,EACPxT,IAAKA,UA8BTw0D,GARW,SAAUtrD,EAAOurD,EAAS32C,EAAQ42C,GAC/C,MAAO,CACLxrD,MAAOA,EACPurD,QAASA,EACT32C,OAAQA,EACR42C,QAASA,IAKTC,GAAQlvC,GAAa,CACvB,CAAEvG,OAAQ,CAAC,YACX,CACE+N,GAAI,CACF,UACA,WAGJ,CAAE5N,MAAO,CAAC,cAWRu1C,GAAO,CACT11C,OAJay1C,GAAMz1C,OAKnB+N,GAJO0nC,GAAM1nC,GAKb5N,MAJYs1C,GAAMt1C,MAKlBqH,KAbW,SAAUC,EAASkuC,EAAUC,EAAMC,GAC9C,OAAOpuC,EAAQ1lB,KAAK4zD,EAAUC,EAAMC,IAapCnnC,SAXa,SAAUonC,GACvB,OAAOA,EAAK/zD,KAAK1B,EAAUA,EAAUA,KAanC01D,GAAQxvC,GAAa,CACvB,CAAEyvC,SAAU,CAAC,QACb,CACEjgC,SAAU,CACR,YACA,eAGJ,CACEkgC,MAAO,CACL,QACA,UACA,SACA,cA4BFC,GAAe,CACjBF,SATaD,GAAMC,SAUnBjgC,SATaggC,GAAMhgC,SAUnBkgC,MATUF,GAAME,MAUhBE,eA5BmB,SAAUC,GAC7B,OAAOL,GAAME,MAAMG,EAASpsD,MAAOosD,EAASb,QAASa,EAASx3C,OAAQw3C,EAASZ,UA4B/Ea,OAVW,SAAUzpC,GACrB,IA7mO0B/c,EA6mOtB7F,EAjBW,SAAU4iB,GACzB,OAAOA,EAAUlc,MAAM,CACrBslD,SAAU,SAAU9mC,GAClB,OAAO1gB,GAAaH,QAAQ6gB,EAAIonC,iBAElCvgC,SAAU,SAAUwgC,EAAWC,GAC7B,OAAOd,GAAKhnC,SAAS6nC,IAEvBN,MAAO,SAAUjsD,EAAOysD,EAAUC,EAASC,GACzC,OAAO3sD,KAQC4sD,CAAWhqC,GACvB,OA9mO0B/c,EA8mOP7F,EA7mOZwE,GAAaH,QAAQmF,GAAgB3D,GAAStB,IAAIolB,cAsnOzD1tB,MAPYqvD,IAeVuB,GAA0B,SAAU3nC,EAAKrf,GAC3C,OAAOqf,EAAI4nC,mBAAmBjnD,EAAQtB,MAoBpCwoD,GAAmB,SAAUrjC,EAAK6iC,EAAWS,GAC/C,IAnBuB9nC,EAmBnBjpB,EAAQytB,EAAI7kB,SAASooD,cAGzB,OAtBuB/nC,EAoBdjpB,EAAOswD,EAnBXx0D,MAAK,SAAU8S,GAClBqa,EAAIgoC,eAAeriD,EAAEtG,QACpB,SAAUsG,EAAGpT,GACdytB,EAAI80B,SAASnvC,EAAEtG,IAAK9M,MACnB,SAAUoT,GACXqa,EAAIioC,cAActiD,EAAEtG,QAGR,SAAU2gB,EAAK4mC,GAC7BA,EAAK/zD,MAAK,SAAU8S,GAClBqa,EAAIkoC,aAAaviD,EAAEtG,QAClB,SAAUsG,EAAGpT,GACdytB,EAAI+0B,OAAOpvC,EAAEtG,IAAK9M,MACjB,SAAUoT,GACXqa,EAAImoC,YAAYxiD,EAAEtG,QAMpB+oD,CAAUrxD,EAAO+wD,GACV/wD,GAELsxD,GAAgB,SAAU7jC,EAAK1pB,EAAOurD,EAAS32C,EAAQ42C,GACzD,IAAItmC,EAAMwE,EAAI7kB,SAASooD,cAGvB,OAFA/nC,EAAI80B,SAASh6C,EAAMuE,IAAKgnD,GACxBrmC,EAAI+0B,OAAOrlC,EAAOrQ,IAAKinD,GAChBtmC,GAELsoC,GAAS,SAAUC,GACrB,MAAO,CACLloC,KAAMkoC,EAAKloC,KACX8D,IAAKokC,EAAKpkC,IACV5D,MAAOgoC,EAAKhoC,MACZioC,OAAQD,EAAKC,OACbhiC,MAAO+hC,EAAK/hC,MACZzC,OAAQwkC,EAAKxkC,SASb0kC,GAAQpxC,GAAa,CACvB,CACEqxC,IAAK,CACH,QACA,UACA,SACA,YAGJ,CACEC,IAAK,CACH,QACA,UACA,SACA,cAIFC,GAAY,SAAUpkC,EAAKvvB,EAAM8B,GACnC,OAAO9B,EAAKqK,GAAaH,QAAQpI,EAAMqwD,gBAAiBrwD,EAAM8xD,YAAavpD,GAAaH,QAAQpI,EAAM+xD,cAAe/xD,EAAMgyD,YA+CzHC,GAAW,SAAUxkC,EAAK9G,GAE5B,OAjBe,SAAU8G,EAAKykC,GAC9B,IAAIjpC,EAAMipC,EAAOP,MACjB,OAAI1oC,EAAIkpC,UACSD,EAAON,MAAM30D,QAAO,SAAUm1D,GAC3C,OAAyB,IAAlBA,EAAID,aAEGv1D,KAAI,SAAUw1D,GAC5B,OAAOV,GAAME,IAAIrpD,GAAaH,QAAQgqD,EAAIL,cAAeK,EAAIJ,UAAWzpD,GAAaH,QAAQgqD,EAAI/B,gBAAiB+B,EAAIN,gBACrH31D,YAAW,WACZ,OAAO01D,GAAUpkC,EAAKikC,GAAMC,IAAK1oC,MAG5B4oC,GAAUpkC,EAAKikC,GAAMC,IAAK1oC,GAK5BopC,CAAW5kC,EA/CJ,SAAUA,EAAK9G,GAC7B,OAAOA,EAAUlc,MAAM,CACrBslD,SAAU,SAAU9mC,GAClB,MAAO,CACL0oC,IAAKz3D,EAAS+uB,GACd2oC,IAAK7zD,EAAS1C,OAGlBy0B,SAAU,SAAUwgC,EAAWS,GAC7B,MAAO,CACLY,IAAK/vD,GAAO,WACV,OAAOkvD,GAAiBrjC,EAAK6iC,EAAWS,MAE1Ca,IAAKhwD,GAAO,WACV,OAAO7D,EAAST,KAAKwzD,GAAiBrjC,EAAKsjC,EAAYT,SAI7DN,MAAO,SAAUjsD,EAAOurD,EAAS32C,EAAQ42C,GACvC,MAAO,CACLoC,IAAK/vD,GAAO,WACV,OAAO0vD,GAAc7jC,EAAK1pB,EAAOurD,EAAS32C,EAAQ42C,MAEpDqC,IAAKhwD,GAAO,WACV,OAAO7D,EAAST,KAAKg0D,GAAc7jC,EAAK9U,EAAQ42C,EAASxrD,EAAOurD,WAsB3DgD,CAAU7kC,EAAK9G,KAG1B4rC,GAAa,SAAU9kC,EAAK9G,GAE9B,OADgBsrC,GAASxkC,EAAK9G,GACblc,MAAM,CACrBknD,IAAK,SAAU5tD,EAAOurD,EAAS32C,EAAQ42C,GACrC,IAAItmC,EAAMwE,EAAI7kB,SAASooD,cAGvB,OAFA/nC,EAAI80B,SAASh6C,EAAMuE,IAAKgnD,GACxBrmC,EAAI+0B,OAAOrlC,EAAOrQ,IAAKinD,GAChBtmC,GAET2oC,IAAK,SAAU7tD,EAAOurD,EAAS32C,EAAQ42C,GACrC,IAAItmC,EAAMwE,EAAI7kB,SAASooD,cAGvB,OAFA/nC,EAAI80B,SAASplC,EAAOrQ,IAAKinD,GACzBtmC,EAAI+0B,OAAOj6C,EAAMuE,IAAKgnD,GACfrmC,MA2BTupC,IAvBQd,GAAMC,IACND,GAAME,IAsBL,SAAUJ,EAAMn3D,EAAGqP,GAC9B,OAAOrP,GAAKm3D,EAAKloC,MAAQjvB,GAAKm3D,EAAKhoC,OAAS9f,GAAK8nD,EAAKpkC,KAAO1jB,GAAK8nD,EAAKC,SAGrEgB,GAAe,SAAU/iD,EAAKgjD,EAAUr4D,EAAGqP,EAAG8nD,GAChD,IAAImB,EAAiB,SAAUn3D,GAC7B,IAAI0E,EAAIwP,EAAIpH,IAAI0oD,cAGhB,OAFA9wD,EAAE69C,SAAS2U,EAASpqD,IAAK9M,GACzB0E,EAAE+/C,UAAS,GACJ//C,GAMLvF,EAAS2gB,GAAMo3C,GAAU/3D,OACzBsyC,EApCe,SAAU2lB,EAAev4D,EAAGqP,EAAGmpD,EAAMl4D,GACxD,GAAe,IAAXA,EACF,OAAO,EACF,GAAIN,IAAMw4D,EACf,OAAOl4D,EAAS,EAGlB,IADA,IAAIwnC,EAAS0wB,EACJ/yD,EAAI,EAAGA,EAAInF,EAAQmF,IAAK,CAC/B,IAAI0xD,EAAOoB,EAAc9yD,GACrBgzD,EAAY38C,KAAKsW,IAAIpyB,EAAIm3D,EAAKloC,MAClC,GAAI5f,GAAK8nD,EAAKC,OAAQ,CACpB,GAAI/nD,EAAI8nD,EAAKpkC,KAAO0lC,EAAY3wB,EAC9B,OAAOriC,EAAI,EAEXqiC,EAAS2wB,GAIf,OAAO,EAkBMC,EALO,SAAUv3D,GAE5B,OADQm3D,EAAen3D,GACduxB,0BAGgC1yB,EAAGqP,EAAG8nD,EAAKhoC,MAAO7uB,GAC7D,OAAOg4D,EAAe1lB,IAsBpB+lB,GAAa,SAAUtjD,EAAKrH,EAAMhO,EAAGqP,GACvC,OAAOwD,GAAO7E,GArBH,SAAUqH,EAAKrH,EAAMhO,EAAGqP,GACnC,IAAIxJ,EAAIwP,EAAIpH,IAAI0oD,cAChB9wD,EAAE+yD,WAAW5qD,EAAKC,KAClB,IAAI4qD,EAAQhzD,EAAEizD,iBAId,OAHgBpyD,EAAQmyD,GAAO,SAAU1B,GACvC,OAAOgB,GAAOhB,EAAMn3D,EAAGqP,GAAK3L,EAAST,KAAKk0D,GAAQzzD,EAAS1C,UAE5CuB,KAAI,SAAU40D,GAC7B,OAAOiB,GAAa/iD,EAAKrH,EAAMhO,EAAGqP,EAAG8nD,MAajB4B,CAAO1jD,EAAKrH,EAAMhO,EAAGqP,GATtB,SAAUgG,EAAKrH,EAAMhO,EAAGqP,GAC7C,IAAIxJ,EAAIwP,EAAIpH,IAAI0oD,cACZtqC,EAAQvY,GAAS9F,GACrB,OAAOtH,EAAQ2lB,GAAO,SAAU7qB,GAE9B,OADAqE,EAAE+yD,WAAWp3D,EAAEyM,KACRkqD,GAAOtyD,EAAE6sB,wBAAyB1yB,EAAGqP,GAAKspD,GAAWtjD,EAAK7T,EAAGxB,EAAGqP,GAAK3L,EAAS1C,UAIvCg4D,CAAiB3jD,EAAKrH,EAAMhO,EAAGqP,IAa7E4pD,GAAuB,SAAU9B,EAAMn3D,GACzC,OAAOA,EAAIm3D,EAAKloC,KAAOkoC,EAAKhoC,MAAQnvB,GAElCk5D,GAAsB,SAAU7jD,EAAKhL,EAAQ8uD,GAC/C,IAAItzD,EAAIwP,EAAIpH,IAAI0oD,cAGhB,OAFA9wD,EAAE+yD,WAAWvuD,EAAO4D,KACpBpI,EAAE+/C,SAASuT,GACJtzD,GAELuzD,GAAkB,SAAU/jD,EAAKrH,EAAMhO,GACzC,IAAIq5D,EAAchkD,EAAIpH,IAAI0oD,cAC1B0C,EAAYT,WAAW5qD,EAAKC,KAC5B,IAAIkpD,EAAOkC,EAAY3mC,wBACnBymC,EAAoBF,GAAqB9B,EAAMn3D,GAEnD,OAjBqB,OAgBbm5D,EAAyCh6C,GAAQuK,IAChD1b,GAAMzL,KAAI,SAAU8H,GAC3B,OAAO6uD,GAAoB7jD,EAAKhL,EAAQ8uD,OAGxCG,GAAgB,SAAUjkD,EAAKrH,EAAMhO,GACvC,IAAIm3D,EAAOnpD,EAAKC,IAAIykB,wBAChBymC,EAAoBF,GAAqB9B,EAAMn3D,GACnD,OAAO0D,EAAST,KAAKi2D,GAAoB7jD,EAAKrH,EAAMmrD,KAOlDI,GAAyB,SAAUlkD,EAAKrV,EAAGqP,GAC7C,OAAO3L,EAASC,KAAK0R,EAAIpH,IAAIsrD,uBAAuBv5D,EAAGqP,IAAI5M,MAAK,SAAUi3B,GACxE,GAAuB,OAAnBA,EAAI8/B,WACN,OAAO91D,EAAS1C,OAElB,IAAI6E,EAAIwP,EAAIpH,IAAI0oD,cAGhB,OAFA9wD,EAAE69C,SAAShqB,EAAI8/B,WAAY9/B,EAAIkZ,QAC/B/sC,EAAE+/C,WACKliD,EAAST,KAAK4C,OAGrB4zD,GAAsB,SAAUpkD,EAAKrV,EAAGqP,GAC1C,OAAO3L,EAASC,KAAK0R,EAAIpH,IAAIwrD,oBAAoBz5D,EAAGqP,KAElDqqD,GAAkB,SAAUrkD,EAAKrH,EAAMhO,EAAGqP,GAC5C,IAAIxJ,EAAIwP,EAAIpH,IAAI0oD,cAChB9wD,EAAE+yD,WAAW5qD,EAAKC,KAClB,IAAIkpD,EAAOtxD,EAAE6sB,wBAGb,OA5Da,SAAUrd,EAAKrH,EAAMhO,EAAGqP,GACrC,IAAIxJ,EAAIwP,EAAIpH,IAAI0oD,cAChB9wD,EAAE+yD,WAAW5qD,EAAKC,KAClB,IAAIkpD,EAAOtxD,EAAE6sB,wBACTinC,EAAW79C,KAAKC,IAAIo7C,EAAKloC,KAAMnT,KAAKkC,IAAIm5C,EAAKhoC,MAAOnvB,IACpD45D,EAAW99C,KAAKC,IAAIo7C,EAAKpkC,IAAKjX,KAAKkC,IAAIm5C,EAAKC,OAAQ/nD,IACxD,OAAOspD,GAAWtjD,EAAKrH,EAAM2rD,EAAUC,GAsDhCC,CAASxkD,EAAKrH,EAFN8N,KAAKC,IAAIo7C,EAAKloC,KAAMnT,KAAKkC,IAAIm5C,EAAKhoC,MAAOnvB,IACzC8b,KAAKC,IAAIo7C,EAAKpkC,IAAKjX,KAAKkC,IAAIm5C,EAAKC,OAAQ/nD,MAGtDyqD,GAAkB,SAAUzkD,EAAKrV,EAAGqP,GACtC,OAAOnB,GAAaiB,UAAUkG,EAAKrV,EAAGqP,GAAG5M,MAAK,SAAUiN,GACtD,IAAIiJ,EAAW,WACb,OA9BO,SAAUtD,EAAKrH,EAAMhO,GAEhC,OADkC,IAA1B8T,GAAS9F,GAAM1N,OAAeg5D,GAAgBF,IAC7C/jD,EAAKrH,EAAMhO,GA4BT+I,CAAOsM,EAAK3F,EAAM1P,IAE3B,OAAiC,IAA1B8T,GAASpE,GAAMpP,OAAeqY,IAAa+gD,GAAgBrkD,EAAK3F,EAAM1P,EAAGqP,GAAG/M,QAAQqW,OAG3FohD,GACExrD,SAASgrD,uBACJA,GACEhrD,SAASkrD,oBACXA,GAEAK,GAUPE,GAAgB,SAAUzqD,EAASqjC,GACrC,IAAIqnB,EAAS/1D,GAAKqL,GAClB,MAAI,UAAY0qD,EACP7E,GAAKv1C,MAAMtQ,GACRnK,EAAS,CACjB,KACA,OACC60D,GAGe,IAAXrnB,EAAewiB,GAAK11C,OAAOnQ,GAAW6lD,GAAKv1C,MAAMtQ,GAFjD6lD,GAAK3nC,GAAGle,EAASqjC,IAKxBsnB,GAAqB,SAAUjE,EAAWS,GAC5C,IAAIhtD,EAAQusD,EAAUx0D,KAAK2zD,GAAK11C,OAAQs6C,GAAe5E,GAAKv1C,OACxDvB,EAASo4C,EAAWj1D,KAAK2zD,GAAK11C,OAAQs6C,GAAe5E,GAAKv1C,OAC9D,OAAO+1C,GAAangC,SAAS/rB,EAAO4U,IAElC67C,GAAkB,SAAUzwD,EAAOurD,EAAS32C,EAAQ42C,GACtD,IAAIe,EAAY+D,GAActwD,EAAOurD,GACjCyB,EAAasD,GAAc17C,EAAQ42C,GACvC,OAAOU,GAAangC,SAASwgC,EAAWS,IAqBtC0D,GAAU,SAAU1wD,EAAOurD,EAAS32C,EAAQ42C,GAC9C,IAAIrvD,EARU,SAAU6D,EAAOurD,EAAS32C,EAAQ42C,GAChD,IACItmC,EADM5b,GAAMtJ,GACFuE,IAAI0oD,cAGlB,OAFA/nC,EAAI80B,SAASh6C,EAAMuE,IAAKgnD,GACxBrmC,EAAI+0B,OAAOrlC,EAAOrQ,IAAKinD,GAChBtmC,EAGCyrC,CAAU3wD,EAAOurD,EAAS32C,EAAQ42C,GACtCoF,EAAOtqD,GAAKtG,EAAO4U,IAAW22C,IAAYC,EAC9C,OAAOrvD,EAAEiyD,YAAcwC,GAGrBC,GAAqB,SAAUnnC,GACjC,OAAO1vB,EAASC,KAAKyvB,EAAIonC,iBAEvBC,GAAmB,SAAUrnC,EAAKxE,GACpC2rC,GAAmBnnC,GAAK5wB,MAAK,SAAU8pB,GACrCA,EAAUouC,kBACVpuC,EAAUquC,SAAS/rC,OAGnBgsC,GAAa,SAAUxnC,EAAK1pB,EAAOurD,EAAS32C,EAAQ42C,GACtD,IAAItmC,EAAMqoC,GAAc7jC,EAAK1pB,EAAOurD,EAAS32C,EAAQ42C,GACrDuF,GAAiBrnC,EAAKxE,IAMpBisC,GAAuB,SAAUznC,EAAKqC,GACxC,OAAOmiC,GAASxkC,EAAKqC,GAAUrlB,MAAM,CACnCknD,IAAK,SAAU5tD,EAAOurD,EAAS32C,EAAQ42C,GACrC0F,GAAWxnC,EAAK1pB,EAAOurD,EAAS32C,EAAQ42C,IAE1CqC,IAAK,SAAU7tD,EAAOurD,EAAS32C,EAAQ42C,GACrCqF,GAAmBnnC,GAAK5wB,MAAK,SAAU8pB,GACrC,GAAIA,EAAUwuC,iBACZxuC,EAAUwuC,iBAAiBpxD,EAAMuE,IAAKgnD,EAAS32C,EAAOrQ,IAAKinD,QACtD,GAAI5oC,EAAUyuC,OACnB,KAdc,SAAU3nC,EAAK9G,EAAW5iB,EAAOurD,EAAS32C,EAAQ42C,GACxE5oC,EAAUs5B,SAASl8C,EAAMuE,IAAKgnD,GAC9B3oC,EAAUyuC,OAAOz8C,EAAOrQ,IAAKinD,GAanB8F,CAAkB5nC,EAAK9G,EAAW5iB,EAAOurD,EAAS32C,EAAQ42C,GAC1D,MAAO3gD,GACPqmD,GAAWxnC,EAAK9U,EAAQ42C,EAASxrD,EAAOurD,QAG1C2F,GAAWxnC,EAAK9U,EAAQ42C,EAASxrD,EAAOurD,UAM9CgG,GAAW,SAAU7nC,EAAK1pB,EAAOurD,EAAS32C,EAAQ42C,GACpD,IAAIz/B,EAAW0kC,GAAgBzwD,EAAOurD,EAAS32C,EAAQ42C,GACvD2F,GAAqBznC,EAAKqC,IAExBylC,GAAc,SAAU9nC,EAAK6iC,EAAWS,GAC1C,IAAIjhC,EAAWykC,GAAmBjE,EAAWS,GAC7CmE,GAAqBznC,EAAKqC,IAExB0lC,GAAW,SAAU7uC,GACvB,IAAI8G,EAAMwiC,GAAaG,OAAOzpC,GAAWre,IACrCmtD,EAAc,SAAU1xD,EAAOurD,EAAS32C,EAAQ42C,GAClD,OAAO+B,GAAc7jC,EAAK1pB,EAAOurD,EAAS32C,EAAQ42C,IAEhD54C,EA7EW,SAAUgQ,GACzB,OAAOA,EAAUlc,MAAM,CACrBslD,SAAU,SAAU9mC,GAClB,IAAIllB,EAAQwE,GAAaH,QAAQ6gB,EAAIonC,gBACjC13C,EAASpQ,GAAaH,QAAQ6gB,EAAI8oC,cACtC,OAAOyC,GAAgBzwD,EAAOklB,EAAI6oC,YAAan5C,EAAQsQ,EAAI+oC,YAE7DliC,SAAUykC,GACVvE,MAAOwE,KAqEMkB,CAAW/uC,GAC1B,OAAOsrC,GAASxkC,EAAK9W,GAAUlM,MAAM,CACnCknD,IAAK8D,EACL7D,IAAK6D,KAGLE,GAAY,SAAUhvC,GACxB,GAAIA,EAAUivC,WAAa,EAAG,CAC5B,IAAIC,EAAWlvC,EAAUmvC,WAAW,GAChCC,EAAUpvC,EAAUmvC,WAAWnvC,EAAUivC,WAAa,GAC1D,OAAO73D,EAAST,KAAK+xD,GAAgB9mD,GAAaH,QAAQytD,EAASxF,gBAAiBwF,EAAS/D,YAAavpD,GAAaH,QAAQ2tD,EAAQhE,cAAegE,EAAQ/D,YAE9J,OAAOj0D,EAAS1C,QAGhB26D,GAAa,SAAUrvC,GACzB,GAA6B,OAAzBA,EAAUsvC,YAA+C,OAAxBtvC,EAAUuvC,UAC7C,OAAOP,GAAUhvC,GAEjB,IAAIwvC,EAAS5tD,GAAaH,QAAQue,EAAUsvC,YACxCG,EAAU7tD,GAAaH,QAAQue,EAAUuvC,WAC7C,OAAOzB,GAAQ0B,EAAQxvC,EAAU0vC,aAAcD,EAASzvC,EAAU2vC,aAAev4D,EAAST,KAAK+xD,GAAgB8G,EAAQxvC,EAAU0vC,aAAcD,EAASzvC,EAAU2vC,cAAgBX,GAAUhvC,IAG5L4vC,GAAe,SAAU9oC,EAAK7jB,GAChC,IAAIqf,EAjamB,SAAUwE,EAAK7jB,GACtC,IAAIqf,EAAMwE,EAAI7kB,SAASooD,cAEvB,OADAJ,GAAwB3nC,EAAKrf,GACtBqf,EA8ZG4nC,CAAmBpjC,EAAK7jB,GAClCkrD,GAAiBrnC,EAAKxE,IAOpButC,GAAQ,SAAU/oC,GACpB,OANa,SAAUA,GACvB,OAAOmnC,GAAmBnnC,GAAKxwB,QAAO,SAAUw5D,GAC9C,OAAOA,EAAIb,WAAa,KACvB94D,KAAKk5D,IAGDU,CAASjpC,GAAK7wB,KAAI,SAAUoD,GACjC,OAAOiwD,GAAaD,MAAMhwD,EAAM+D,MAAO/D,EAAMsvD,QAAStvD,EAAM2Y,OAAQ3Y,EAAMuvD,aAG1EoH,GAAiB,SAAUlpC,EAAK9G,GAElC,OAhYiB,SAAUsC,GAC3B,IAAIiqC,EAAQjqC,EAAIkqC,iBACZ3B,EAAO0B,EAAMv4D,OAAS,EAAIu4D,EAAM,GAAKjqC,EAAI8D,wBAC7C,OAAOykC,EAAK/hC,MAAQ,GAAK+hC,EAAKxkC,OAAS,EAAIjvB,EAAST,KAAKk0D,GAAM50D,IAAI20D,IAAUxzD,EAAS1C,OA6X/Eu7D,CADGrE,GAAW9kC,EAAK9G,KAGxBkwC,GAAa,SAAUppC,EAAKpzB,EAAGqP,GACjC,OAtJgB,SAAU+jB,EAAKpzB,EAAGqP,GAClC,IAAIgG,EAAMnH,GAAaH,QAAQqlB,EAAI7kB,UACnC,OAAOwrD,GAAgB1kD,EAAKrV,EAAGqP,GAAG9M,KAAI,SAAUqsB,GAC9C,OAAOomC,GAAgB9mD,GAAaH,QAAQ6gB,EAAIonC,gBAAiBpnC,EAAI6oC,YAAavpD,GAAaH,QAAQ6gB,EAAI8oC,cAAe9oC,EAAI+oC,cAmJzH8E,CAAYrpC,EAAKpzB,EAAGqP,IAQzBqtD,GAAWj1C,QAAQC,KAAKC,MAAMC,QAAQ,mBAEtC+0C,GAAU,SAAUrvC,EAAQ/Z,EAAQmF,EAAM6U,GAC5C,OAAOoX,GAAGrX,EAAQ/Z,EAtiBT,SAAUnK,EAASmK,GAE5B,OADgBwhD,GAAS3rD,EAASmK,GACjB9R,MAAK,WACpB,OAAOqzD,GAAa9zD,KAAKoI,MACxB,SAAU0B,GACX,OAAOA,EAAKkJ,MAAQ,EAAIlJ,EAAKtK,IAAIF,OAASw0D,GAAa5lC,OAAO9lB,EAAS0B,EAAKtK,IAAIsK,EAAKkJ,MAAQ,IAAM8gD,GAAaruD,KAAK2C,MAiiB7FymB,CAAKnX,GAAO6U,IAEpCqvC,GAAW,SAAUtvC,EAAQ/Z,EAAQmF,EAAM6U,GAC7C,OAAOoX,GAAGrX,EAAQ/Z,EAjiBT,SAAUnK,EAASmK,GAE5B,OADgBwhD,GAAS3rD,EAASmK,GACjB9R,MAAK,WACpB,OAAOqzD,GAAa9zD,UACnB,SAAU8J,GACX,OAAOA,EAAKkJ,MAAQ,GAAK,EAAI8gD,GAAa5lC,OAAO9lB,EAAS0B,EAAKtK,IAAIsK,EAAKkJ,MAAQ,IAAM8gD,GAAa31C,MAAM/V,MA4hBjF2hB,CAAKrS,GAAO6U,IAEpCsvC,GAA6B,SAAUvvC,EAAQ5U,GACjD,IAAI4T,EAAYspC,GAAaD,MAAMj9C,EAAM,EAAGA,EAAM,GAClD,OAAOyiD,GAAS7uC,IAUdqY,GAAK,SAAUrX,EAAQ/Z,EAAQmF,EAAM6U,GACvC,OAAO7U,EAAKjX,KAAKiC,EAAS1C,KAAM0C,EAAS1C,MAAM,SAAUoI,EAASymB,GAChE,OAAO1Q,GAAM0Q,GAAMttB,KAAI,SAAUmW,GAC/B,OAAOmkD,GAA2BvvC,EAAQ5U,SAE3C,SAAUtP,GACX,OAAOwQ,GAAMxQ,EAASmK,GAAQ9Q,MAAK,SAAUmX,GAC3C,IAAI4U,EAAUrB,GAAO/jB,GAIrB,OAHAkkB,EAAO6kB,YAAY+a,UAAS,WAC1B3/B,EAAQwxB,gBAAgBnlC,EAAO4U,MAjBT,SAAUlB,EAAQ1T,GAC9C,IAAIC,EAAO9D,GAAc6D,EAAO,MAChC,OAAOnT,EAAKoT,GAAMpX,MAAK,SAAUgE,GAC/B,OAAO8P,GAAa9P,EAAM,SAASlE,KAAI,SAAU4c,GAC/C,OAAO09C,GAA2BvvC,EAAQnO,SAenC29C,CAAwBxvC,EAAQ1T,UAIzCmjD,GAAe,CACjB,QACA,KACA,MA8BEC,GANW,SAAU1wC,EAAW6Y,GAClC,MAAO,CACL7Y,UAAWA,EACX6Y,KAAMA,IAWN83B,GANW,SAAUvzD,EAAOurD,EAAS32C,EAAQ42C,GAC/C,MAAO,CACLxrD,MAAO0rD,GAAK3nC,GAAG/jB,EAAOurD,GACtB32C,OAAQ82C,GAAK3nC,GAAGnP,EAAQ42C,KAKxBgI,GAAiB,SAAU9pC,EAAK9G,GAClC,IAAIsC,EAAMspC,GAAW9kC,EAAK9G,GAC1B,OAAO0oC,GAAgB9mD,GAAaH,QAAQ6gB,EAAIonC,gBAAiBpnC,EAAI6oC,YAAavpD,GAAaH,QAAQ6gB,EAAI8oC,cAAe9oC,EAAI+oC,YAE5HwF,GAAYF,GAaZG,GAAW,SAAUn5C,EAAW1Q,EAAQ7J,EAAO4U,EAAQ++C,GACzD,OAAKrtD,GAAKtG,EAAO4U,GAWR5a,EAAS1C,OAVTkjB,GAASxa,EAAO4U,EAAQ/K,GAAQ9Q,MAAK,SAAU66D,GACpD,IAAIj5C,EAAQi5C,EAAQj5C,MAAMxiB,MAAM,IAChC,OAAIwiB,EAAM/jB,OAAS,GACjB+8D,EAAYp5C,EAAWI,EAAOi5C,EAAQ5zD,MAAO4zD,EAAQh/C,QAC9C5a,EAAST,KAAK+5D,GAAgBt5D,EAAST,KAAKk6D,GAAUzzD,EAAO,EAAGA,EAAO0f,GAAO1f,MAAU,KAExFhG,EAAS1C,WAgBpBu8D,GAAW,SAAUnhD,EAAM0mB,GAC7B,MAAO,CACL1mB,KAAMA,EACN0mB,KAAMA,IAGN06B,GAAY,SAAU96C,EAAUtG,EAAMqhD,EAAYC,GAIpD,YAHmB,IAAfA,IACFA,EAAaC,IAERj7C,EAAS9K,WAAWxE,OAAOgJ,GAAM7Z,KAAI,SAAUwE,GACpD,OAAOw2D,GAASx2D,EAAG22D,OAGnBC,GAAW,SAAUj7C,EAAUtG,EAAM6d,EAAWyjC,GAIlD,YAHmB,IAAfA,IACFA,EAAaE,IAER3jC,EAAU4jC,QAAQn7C,EAAUtG,GAAM7Z,KAAI,SAAUwE,GACrD,OAAOw2D,GAASx2D,EAAG22D,OAGnBE,GAAU,SAAUl7C,EAAUtG,EAAM6d,EAAWyjC,QAC9B,IAAfA,IACFA,EAAaE,IAEf,IAAI9pD,EAAW4O,EAAS9K,WAAW9D,SAASsI,GAE5C,OADa6d,EAAU9a,MAAMrL,GACfvR,KAAI,SAAUsD,GAC1B,OAAO03D,GAAS13D,EAAG63D,OAGnBI,GAAa,CACf,CACE10D,QAASo0D,GACT3tC,KAAM8tC,GACNhlD,SAAUjV,EAAS1C,QAErB,CACEoI,QAASu0D,GACT9tC,KAAM+tC,GACNjlD,SAAUjV,EAAST,KAAKu6D,KAE1B,CACEp0D,QAASw0D,GACT/tC,KAAM+tC,GACNjlD,SAAUjV,EAAST,KAAK06D,MAGxBI,GAAO,SAAUr7C,EAAUtG,EAAM0mB,EAAM7I,EAAW+jC,GAOpD,YANc,IAAVA,IACFA,EAAQF,IAEI53D,EAAK83D,GAAO,SAAUC,GAClC,OAAOA,EAAK70D,UAAY05B,KAEXrgC,MAAK,SAAUy7D,GAC5B,OAAOA,EAAK90D,QAAQsZ,EAAUtG,EAAM6d,EAAWikC,EAAKruC,MAAMvtB,SAAQ,WAChE,OAAO47D,EAAKvlD,SAASlW,MAAK,SAAUuiC,GAClC,OAAO+4B,GAAKr7C,EAAUtG,EAAM4oB,EAAI/K,aA8BpCkkC,GAxBO,WAOT,MAAO,CACLN,QAPY,SAAUn7C,EAAUtG,GAChC,OAAOsG,EAASlV,QAAQmG,YAAYyI,IAOpC+C,MALU,SAAUrL,GACpB,OAAOA,EAASxT,OAAS,EAAIoD,EAAST,KAAK6Q,EAASA,EAASxT,OAAS,IAAMoD,EAAS1C,UAmBrFm9D,GAZQ,WAOV,MAAO,CACLN,QAPY,SAAUn7C,EAAUtG,GAChC,OAAOsG,EAASlV,QAAQqG,YAAYuI,IAOpC+C,MALU,SAAUrL,GACpB,OAAOA,EAASxT,OAAS,EAAIoD,EAAST,KAAK6Q,EAAS,IAAMpQ,EAAS1C,UAYnEo9D,GAAO,SAAU17C,EAAUtG,EAAM3G,EAAWqtB,EAAM7I,EAAW1mB,GAE/D,OADWwqD,GAAKr7C,EAAUtG,EAAM0mB,EAAM7I,GAC1Bx3B,MAAK,SAAUjB,GACzB,OAAI+R,EAAO/R,EAAE4a,MACJ1Y,EAAS1C,OAETyU,EAAUjU,EAAE4a,MAAQ1Y,EAAST,KAAKzB,EAAE4a,MAAQgiD,GAAK17C,EAAUlhB,EAAE4a,KAAM3G,EAAWjU,EAAEshC,KAAM7I,EAAW1mB,OAW1G8qD,GAAS,SAAU37C,GACrB,OAAO,SAAUnT,GACf,OAAwD,IAAjDmT,EAAS9K,WAAW9D,SAASvE,GAASjP,SAS7Cg+D,GAlBS,SAAU57C,EAAUtG,EAAM3G,EAAWlC,GAChD,OAAO6qD,GAAK17C,EAAUtG,EAAM3G,EAAWkoD,GAAUQ,KAAgB5qD,IAkB/DgrD,GAhBU,SAAU77C,EAAUtG,EAAM3G,EAAWlC,GACjD,OAAO6qD,GAAK17C,EAAUtG,EAAM3G,EAAWkoD,GAAUQ,KAAiB5qD,IAiBhEirD,GAAap9C,KACbq9C,GAAW,SAAUlvD,EAASgE,GAChC,OAXa,SAAUmP,EAAUtG,EAAM7I,GACvC,OAAO+qD,GAAS57C,EAAUtG,EAAMiiD,GAAO37C,GAAWnP,GAU3CmrD,CAASF,GAAYjvD,EAASgE,IAEnCorD,GAAU,SAAUpvD,EAASgE,GAC/B,OAXY,SAAUmP,EAAUtG,EAAM7I,GACtC,OAAOgrD,GAAU77C,EAAUtG,EAAMiiD,GAAO37C,GAAWnP,GAU5CqrD,CAAQJ,GAAYjvD,EAASgE,IAalCsrD,GAAQ54C,GAAa,CACvB,CAAEjlB,KAAM,CAAC,YACT,CAAE89D,QAAS,IACX,CAAEC,SAAU,CAAC,SACb,CAAEC,WAAY,CAAC,WAObC,GAAQ,SAAUvvD,GACpB,OAAOgH,GAAUhH,EAAM,OAuBrBwvD,GAAct4D,EAASA,EAAS,GAAIi4D,IAAQ,CAC9CM,OAtBW,SAAUC,EAAQ1/C,EAAQ2/C,EAAcx/C,EAAOy/C,EAAaC,EAAShsD,GAChF,OAAOmD,GAAUmJ,EAAO,QAAStM,GAAQ9Q,MAAK,SAAU+8D,GACtD,OAAO9oD,GAAUgJ,EAAQ,QAASnM,GAAQhR,KAAI,SAAUk9D,GACtD,OAAKzvD,GAAKwvD,EAAWC,GAUZzvD,GAAK6P,EAAO2/C,IAAcp2C,GAAOo2C,KAAeF,EAAcC,EAAQE,GAAcZ,GAAM79D,KAAK,gBAT/F8iB,GAAYm7C,GAAO,CACxBO,EACAC,IACCh+D,MAAK,WACN,OAhBU,SAAU29D,EAAQ1/C,EAAQG,GAC5C,IAAI6/C,EAAeN,EAAOO,QAAQjgD,GAC9BkgD,EAAcR,EAAOO,QAAQ9/C,GACjC,OAAO+/C,EAAYzwC,MAAQuwC,EAAazwC,MAAQ2wC,EAAY3wC,KAAOywC,EAAavwC,MAajE0wC,CAAcT,EAAQK,EAAYD,GAAaX,GAAMC,UAAYS,EAAQE,MAC/E,SAAUK,GACX,OAAOP,EAAQE,YAMpB59D,MAAMg9D,GAAM79D,KAAK,aAOpBkmB,KALW,SAAUC,EAASC,EAAQ24C,EAAWC,EAAYC,GAC7D,OAAO94C,EAAQ1lB,KAAK2lB,EAAQ24C,EAAWC,EAAYC,MAuBjDh7D,GAAU,SAAUob,EAAU9Q,GAChC,OAAOlJ,EAAUga,EAAUpgB,EAAM+P,GAAMT,KAGrC+tC,GAAO,SAAU5tC,GACnB,MAAsB,OAAfxL,GAAKwL,IAEVwwD,GAAW,SAAUC,EAAMC,EAAQ7sD,GACrC,OAAO6sD,EAAOD,EAAM5sD,GAAQ9Q,MAAK,SAAU4H,GACzC,OAAOwI,GAAOxI,IAA2C,IAAhC4W,GAAM5W,GAAQL,OAAO1J,OAAe4/D,GAAS71D,EAAQ+1D,EAAQ7sD,GAAU7P,EAAST,KAAKoH,OAa9Gg2D,GAAe,SAAU9sD,EAAQhE,EAASqjC,EAAQ3Y,GACpD,OANW,SAAU1qB,EAASqjC,GAC9B,OAAO7+B,GAAMxE,EAASqjC,GAAQhwC,OAAO06C,IAAMh7C,SAAQ,WACjD,OAAOyR,GAAMxE,EAASqjC,EAAS,GAAGhwC,OAAO06C,OAIpCgjB,CAAO/wD,EAASqjC,GAAQnwC,MAAK,SAAU89D,GAC5C,OAAOtmC,EAAUsjC,SAASgD,GAAI9+D,MAAK,WACjC,OAAOy+D,GAASK,EAAItmC,EAAUmmC,OAAQ7sD,GAAQhR,IAAI03B,EAAUxE,aAC3D,SAAU+qC,GACX,OAnCc,SAAUjxD,GAC5B,OAAO6D,GAAO7D,GAAS9M,MAAK,SAAU2Q,GACpC,IAAI0C,EAAahC,GAASV,GAC1B,OAAOnO,GAAQ6Q,EAAYvG,GAAShN,KAAI,SAAUyR,GAChD,OAZS,SAAUZ,EAAQU,EAAUvE,EAASyE,GAClD,MAAO,CACLZ,OAAQA,EACRU,SAAUA,EACVvE,QAASA,EACTyE,MAAOA,GAOEysD,CAASrtD,EAAQ0C,EAAYvG,EAASyE,SA+BtC0sD,CAAcF,GAAUj+D,KAAI,SAAUuI,GAC3C,OAAOsqD,GAAK3nC,GAAG3iB,EAAKsI,OAAQtI,EAAKkJ,iBAKrC2sD,GAAQ,SAAUptD,EAAQhE,EAASqjC,EAAQ3Y,GAE7C,OADaqjB,GAAK/tC,GAtBL,SAAUgE,EAAQhE,EAAS0qB,GACxC,OAAOA,EAAUsjC,SAAShuD,GAASjN,SAAQ,WACzC,OAAO49D,GAAS3wD,EAAS0qB,EAAUmmC,OAAQ7sD,MAC1ChR,IAAI03B,EAAUxE,UAmBYmrC,CAASrtD,EAAQhE,EAAS0qB,GAAaomC,GAAa9sD,EAAQhE,EAASqjC,EAAQ3Y,IAC5F13B,KAAI,SAAUs+D,GAC1B,MAAO,CACLn3D,MAAOm3D,EACPviD,OAAQuiD,OAgBVC,GAAW,SAAUC,EAAO1rC,GAC9B,MAAO,CACLpG,KAAM8xC,EAAM9xC,KACZ8D,IAAKguC,EAAMhuC,IAAMsC,EACjBlG,MAAO4xC,EAAM5xC,MACbioC,OAAQ2J,EAAM3J,OAAS/hC,IAGvB2rC,GAAS,SAAUD,EAAO1rC,GAC5B,MAAO,CACLpG,KAAM8xC,EAAM9xC,KACZ8D,IAAKguC,EAAMhuC,IAAMsC,EACjBlG,MAAO4xC,EAAM5xC,MACbioC,OAAQ2J,EAAM3J,OAAS/hC,IAGvBrC,GAAY,SAAU+tC,EAAOj5B,EAAQC,GACvC,MAAO,CACL9Y,KAAM8xC,EAAM9xC,KAAO6Y,EACnB/U,IAAKguC,EAAMhuC,IAAMgV,EACjB5Y,MAAO4xC,EAAM5xC,MAAQ2Y,EACrBsvB,OAAQ2J,EAAM3J,OAASrvB,IAkBvBk5B,GAAU,SAAU9J,GACtB,MAAO,CACLloC,KAAMkoC,EAAKloC,KACX8D,IAAKokC,EAAKpkC,IACV5D,MAAOgoC,EAAKhoC,MACZioC,OAAQD,EAAKC,SAGb8J,GAAa,SAAU9B,EAAQ7vD,GACjC,OAAO7L,EAAST,KAAKm8D,EAAOO,QAAQpwD,KAElC4xD,GAAW,SAAU/B,EAAQ7vD,EAASqjC,GACxC,OAAIhgC,GAAUrD,GACL2xD,GAAW9B,EAAQ7vD,GAAShN,IAAI0+D,IAC9BpuD,GAAOtD,GAtBA,SAAU6vD,EAAQ7vD,EAASqjC,GAC7C,OAAIA,GAAU,GAAKA,EAASxpB,GAAO7Z,GAC1B6vD,EAAOgC,cAAc7xD,EAASqjC,EAAQrjC,EAASqjC,EAAS,GACtDA,EAAS,EACXwsB,EAAOgC,cAAc7xD,EAASqjC,EAAS,EAAGrjC,EAASqjC,GAErDlvC,EAAS1C,OAiBPqgE,CAAcjC,EAAQ7vD,EAASqjC,GAAQrwC,IAAI0+D,IAE3Cv9D,EAAS1C,QAGhBsgE,GAAe,SAAUlC,EAAQ7vD,GACnC,OAAIqD,GAAUrD,GACL2xD,GAAW9B,EAAQ7vD,GAAShN,IAAI0+D,IAC9BpuD,GAAOtD,GACT6vD,EAAOgC,cAAc7xD,EAAS,EAAGA,EAAS6Z,GAAO7Z,IAAUhN,IAAI0+D,IAE/Dv9D,EAAS1C,QAMhBugE,GAAQt7C,GAAa,CACvB,CAAEjlB,KAAM,IACR,CAAEwgE,MAAO,CAAC,YAKRC,GAAiB,SAAUrC,EAAQ7vD,EAASwxD,GAC9C,OAj2PsB1yD,EAi2PPkB,EAj2PckG,EAi2PLsnC,GA71PjB7mC,IAHE,SAAU5S,EAAG+E,GACpB,OAAOA,EAAK/E,KAEe6S,GAAU9H,EAAOoH,EAAWlC,IA61PtB9R,KAAKX,GAAO,SAAU4X,GACvD,OAAO4oD,GAAalC,EAAQ1mD,GAAMhW,QAAO,SAAU0iB,GACjD,OANU,SAAU27C,EAAO37C,GAC/B,OAAO27C,EAAM9xC,KAAO7J,EAAI6J,MAAQnT,KAAKsW,IAAIhN,EAAI+J,MAAQ4xC,EAAM9xC,MAAQ,GAAK8xC,EAAM9xC,KAAO7J,EAAI+J,MAK9EuyC,CAAUX,EAAO37C,SAn2PhB,IAAU/W,EAAOoH,EAAWlC,GAq4PtCouD,GAAe,CACjBhvB,MAzFc,SAAUouB,GACxB,OAAOA,EAAM3J,QAyFbwK,SAhCe,SAAUxC,EAAQ7vD,EAASsyD,EAAUh4C,EAAUk3C,GAC9D,IAAIe,EAAahB,GAASC,EAjBZ,GAkBd,OAAIjlD,KAAKsW,IAAIyvC,EAASzK,OAASvtC,EAASutC,QAAU,GAEvCyK,EAAS9uC,IAAMguC,EAAM3J,OADvBmK,GAAMC,MAAMM,GAGVD,EAAS9uC,MAAQguC,EAAM3J,OACzBmK,GAAMC,MAAMV,GAASC,EAAO,IAE5BU,GAAerC,EAAQ7vD,EAASwxD,GAASQ,GAAMC,MAAMxuC,GAAU8uC,EAzB1D,EAyBiF,IAAMP,GAAMvgE,QAwB3G4hC,KAAMk+B,GACNV,OAAQzB,IAUNoD,GAAY,SAAU3C,EAAQp7B,EAAUna,EAAUk3C,EAAOiB,GAC3D,OAAmB,IAAfA,EACKt+D,EAAST,KAAK89D,GAVT,SAAU3B,EAAQp/D,EAAGqP,GACnC,OAAO+vD,EAAO9vD,iBAAiBtP,EAAGqP,GAAGzM,QAAO,SAAU2W,GACpD,MAAqB,UAAdrV,GAAKqV,MACX3X,SASCqgE,CAAU7C,EAAQ2B,EAAM9xC,KAAM+U,EAAS2O,MAAMouB,IAP9B,SAAU3B,EAAQp7B,EAAUna,EAAUk3C,EAAOiB,GAChE,OAAOD,GAAU3C,EAAQp7B,EAAUna,EAAUma,EAASpB,KAAKm+B,EA1D7C,GA0DgEiB,GAOrEE,CAAe9C,EAAQp7B,EAAUna,EAAUk3C,EAAOiB,EAAa,GAEjE5C,EAAO+C,eAAepB,EAAM9xC,KAAM+U,EAAS2O,MAAMouB,IAAQt+D,MAAK,SAAU2/D,GAC7E,OAAOA,EAAM14D,MAAMjI,KAAKiC,EAAS1C,MAAM,SAAUuO,GAC/C,OAAO+xD,GAAalC,EAAQ7vD,GAAS9M,MAAK,SAAUo/D,GAClD,OAAO79B,EAAS49B,SAASxC,EAAQ7vD,EAASsyD,EAAUh4C,EAAUk3C,GAAOt/D,KAAKiC,EAAS1C,MAAM,SAAUqhE,GACjG,OAAON,GAAU3C,EAAQp7B,EAAUna,EAAUw4C,EAAUL,EAAa,SAErE1/D,SAAQ,WACT,OAAOoB,EAAST,KAAK89D,QAEtBr9D,EAAS1C,UAkBZwgE,GAAQ,SAAUx9B,EAAUo7B,EAAQ2B,GACtC,IAAIuB,EAAQt+B,EAASpB,KAAKm+B,EA/FZ,GAgGVwB,EAAWR,GAAU3C,EAAQp7B,EAAU+8B,EAAOuB,EA/FlC,KA+FsDzgE,MAAMygE,GAC5E,OAZgB,SAAUt+B,EAAUu+B,EAAUnD,GAC9C,OAAIp7B,EAAS2O,MAAM4vB,GAAYnD,EAAOoD,iBAC7B9+D,EAAST,KAAK+gC,EAAS2O,MAAM4vB,GAAYnD,EAAOoD,kBAC9Cx+B,EAAS2O,MAAM4vB,GAAY,EAC7B7+D,EAAST,MAAM+gC,EAAS2O,MAAM4vB,IAE9B7+D,EAAS1C,OAMXyhE,CAAYz+B,EAAUu+B,EAAUnD,GAAQ39D,MAAK,WAClD,OAAO29D,EAAO+C,eAAeI,EAAStzC,KAAM+U,EAAS2O,MAAM4vB,OAC1D,SAAUrwC,GAEX,OADAktC,EAAOsD,SAAS,EAAGxwC,GACZktC,EAAO+C,eAAeI,EAAStzC,KAAM+U,EAAS2O,MAAM4vB,GAAYrwC,OAGvEywC,GAAU,CACZC,MAAO3iE,EAAMuhE,GAjEE,CACf7uB,MAtFa,SAAUouB,GACvB,OAAOA,EAAMhuC,KAsFb6uC,SAda,SAAUxC,EAAQ7vD,EAASsyD,EAAUh4C,EAAUk3C,GAC5D,IAAI8B,EAAc7B,GAAOD,EA7BX,GA8Bd,OAAIjlD,KAAKsW,IAAIyvC,EAAS9uC,IAAMlJ,EAASkJ,KAAO,GAEjC8uC,EAASzK,OAAS2J,EAAMhuC,IAD1BwuC,GAAMC,MAAMqB,GAGVhB,EAASzK,SAAW2J,EAAMhuC,IAC5BwuC,GAAMC,MAAMR,GAAOD,EAAO,IAE1BU,GAAerC,EAAQ7vD,EAASwxD,GAASQ,GAAMC,MAAMxuC,GAAU6vC,EArC1D,EAqCkF,IAAMtB,GAAMvgE,QAM5G4hC,KAAMo+B,GACNZ,OAAQ3B,KA8DRqE,QAAS7iE,EAAMuhE,GAAOG,IACtBoB,QAzBY,SAAU3D,EAAQ2B,GAC9B,OAAO3B,EAAO+C,eAAepB,EAAM9xC,KAAM8xC,EAAMhuC,IAnFjC,IA4GdiwC,UA7Bc,SAAU5D,EAAQ2B,GAChC,OAAO3B,EAAO+C,eAAepB,EAAM9xC,KAAM8xC,EAAM3J,OAhFjC,IA6Gd6L,YAAapjE,EA7GC,IAiHZqjE,GAAW,SAAU9D,EAAQ7rD,EAAQ0mB,GACvC,OAAOmlC,EAAO5E,eAAe/3D,MAAK,SAAU25D,GAC1C,OAAOuE,GAAMptD,EAAQ6oD,EAAI99C,OAAQ89C,EAAIlH,QAASj7B,GAAWx4B,MAAK,WAC5D,OAAOiC,EAAST,KAAK0vC,GAAMypB,EAAI99C,OAAQ89C,EAAIlH,aAC1C,SAAUiO,GACX,IAAIx9D,EAAQy5D,EAAOgE,UAAUD,GAE7B,OAzMQ,SAAUE,GACtB,OAAOnE,GAAYh4C,KAAKm8C,GAAU,SAAUC,GAC1C,OAAO5/D,EAAS1C,UACf,WACD,OAAO0C,EAAS1C,UACf,SAAU0X,GACX,OAAOhV,EAAST,KAAK0vC,GAAMj6B,EAAM,OAChC,SAAUA,GACX,OAAOhV,EAAST,KAAK0vC,GAAMj6B,EAAM0Q,GAAO1Q,QAiM/B6qD,CADQrE,GAAYC,OAAOC,EAAQhD,EAAI99C,OAAQ89C,EAAIlH,QAASvvD,EAAM2Y,OAAQ3Y,EAAMuvD,QAASj7B,EAAUslC,QAAShsD,WAKrHiwD,GAAS,SAAUpE,EAAQ7rD,EAAQhE,EAASqjC,EAAQ3Y,EAAW+nC,GACjE,OAAmB,IAAfA,EACKt+D,EAAS1C,OAEXyiE,GAAUrE,EAAQ7rD,EAAQhE,EAASqjC,EAAQ3Y,GAAWx3B,MAAK,SAAUihE,GAC1E,IAAI/9D,EAAQy5D,EAAOgE,UAAUM,GACzBL,EAAWnE,GAAYC,OAAOC,EAAQ7vD,EAASqjC,EAAQjtC,EAAM2Y,OAAQ3Y,EAAMuvD,QAASj7B,EAAUslC,QAAShsD,GAC3G,OAAO2rD,GAAYh4C,KAAKm8C,GAAU,WAChC,OAAO3/D,EAAS1C,UACf,WACD,OAAO0C,EAAST,KAAKygE,MACpB,SAAUhrD,GACX,OAAI1I,GAAKT,EAASmJ,IAAoB,IAAXk6B,EAClB+wB,GAASvE,EAAQ7vD,EAASqjC,EAAQouB,GAAQ/mC,GAE1CupC,GAAOpE,EAAQ7rD,EAAQmF,EAAM,EAAGuhB,EAAW+nC,EAAa,MAEhE,SAAUtpD,GACX,OAAI1I,GAAKT,EAASmJ,IAASk6B,IAAWxpB,GAAO1Q,GACpCirD,GAASvE,EAAQ7vD,EAASqjC,EAAQkuB,GAAU7mC,GAE5CupC,GAAOpE,EAAQ7rD,EAAQmF,EAAM0Q,GAAO1Q,GAAOuhB,EAAW+nC,EAAa,UAK9E2B,GAAW,SAAUvE,EAAQ7vD,EAASqjC,EAAQhQ,EAAM3I,GACtD,OAAOknC,GAAS/B,EAAQ7vD,EAASqjC,GAAQnwC,MAAK,SAAU2iB,GACtD,OAAOw+C,GAAMxE,EAAQnlC,EAAW2I,EAAKxd,EAAKu9C,GAAQM,oBAGlDW,GAAQ,SAAUxE,EAAQnlC,EAAW7U,GACvC,IAAIlc,EAAU4E,KAAW5E,QACzB,OAAIA,EAAQ+B,YAAc/B,EAAQmC,YAAcnC,EAAQkC,aAAelC,EAAQ8B,SACtEivB,EAAU4pC,WAAWzE,EAAQh6C,GAC3Blc,EAAQgC,OACV+uB,EAAU6pC,QAAQ1E,EAAQh6C,GAE1B1hB,EAAS1C,QAGhByiE,GAAY,SAAUrE,EAAQ7rD,EAAQhE,EAASqjC,EAAQ3Y,GACzD,OAAOknC,GAAS/B,EAAQ7vD,EAASqjC,GAAQnwC,MAAK,SAAU2iB,GACtD,OAAOw+C,GAAMxE,EAAQnlC,EAAW7U,OAShC2+C,GAAc,SAAUr0D,EAAMkK,GAChC,OAvWOzD,GAuWWzG,GAAM,SAAU6E,GAChC,OAAOnB,GAAOmB,GAAG7R,QAAO,SAAUqE,GAChC,OAAOiJ,GAAKjJ,EAAG6S,QAzWerG,GAAQ3R,SAD3B,IAA4B2R,GA8WzCywD,GAAW,SAAU5E,EAAQ7rD,EAAQ0mB,EAAW4U,EAASitB,GAC3D,OAAOplD,GAAUm4B,EAAS,QAASt7B,GAAQ9Q,MAAK,SAAUiH,GACxD,OAAOgN,GAAUhN,EAAO,QAAS6J,GAAQ9Q,MAAK,SAAUmX,GACtD,OAAKmqD,GAAYjI,EAAQliD,GAhBhB,SAAUwlD,EAAQ7rD,EAAQ0mB,GACvC,OAAOipC,GAAS9D,EAAQ7rD,EAAQ0mB,GAAWx3B,MAAK,SAAUwhE,GACxD,OAAOT,GAAOpE,EAAQ7rD,EAAQ0wD,EAAK10D,QAAS00D,EAAKrxB,OAAQ3Y,EA5D3C,IA4DmE13B,IAAI68D,EAAOgE,cAiBnFc,CAAS9E,EAAQ7rD,EAAQ0mB,GAAWx3B,MAAK,SAAUkD,GACxD,OAAO+Q,GAAU/Q,EAAM2Y,OAAQ,QAAS/K,GAAQhR,KAAI,SAAU+b,GAC5D,MAAO,CACL5U,MAAOA,EACP4U,OAAQA,EACR3Y,MAAOA,SAPJjC,EAAS1C,cAcpBmjE,GAAW,SAAU/E,EAAQ7rD,EAAQ0mB,EAAW4U,EAASitB,EAAQsI,GACnE,OAAIt2D,KAAW5E,QAAQgC,OACdxH,EAAS1C,OAETojE,EAASv1B,EAASt7B,GAAQjR,SAAQ,WACvC,OAAO0hE,GAAS5E,EAAQ7rD,EAAQ0mB,EAAW4U,EAASitB,GAAQv5D,KAAI,SAAUuI,GACxE,IAAInF,EAAQmF,EAAKnF,MACjB,OAAOq3D,GAAgBt5D,EAAST,KAAKk6D,GAAUx3D,EAAM+D,MAAO/D,EAAMsvD,QAAStvD,EAAM2Y,OAAQ3Y,EAAMuvD,WAAW,UAK9GmP,GAAe,SAAUx1B,EAASt7B,GACpC,OAAOmD,GAAUm4B,EAAS,KAAMt7B,GAAQ9Q,MAAK,SAAU4a,GACrD,OAAO3G,GAAU2G,EAAU,QAAS9J,GAAQ9Q,MAAK,SAAUmX,GACzD,IAAIC,EAAO9D,GAAc6D,EAAO,MAChC,OAAI5J,GAAKqN,EAAUxD,EAAK,IAvZb,SAAUtK,EAASkG,EAAWlC,GAC7C,OAAO+qD,GAASE,GAAYjvD,EAASkG,EAAWlC,GAuZnC+wD,CAAW1qD,GAAO,SAAUrK,GACjC,OAAOma,GAAOna,GAAS3N,WACtB2R,GAAQhR,KAAI,SAAUkE,GACvB,IAAI89D,EAAan7C,GAAO3iB,GACxB,OAAOu2D,GAAgBt5D,EAAST,KAAKk6D,GAAU12D,EAAM89D,EAAY99D,EAAM89D,KAAc,MAGhF7gE,EAAS1C,cAKpBwjE,GAAgB,SAAU31B,EAASt7B,GACrC,OAAOmD,GAAUm4B,EAAS,KAAMt7B,GAAQ9Q,MAAK,SAAU4a,GACrD,OAAO3G,GAAU2G,EAAU,QAAS9J,GAAQ9Q,MAAK,SAAUmX,GACzD,IAAIC,EAAO9D,GAAc6D,EAAO,MAChC,OAAI5J,GAAKqN,EAAUxD,EAAKA,EAAKvZ,OAAS,IAra1B,SAAUiP,EAASkG,EAAWlC,GAC9C,OAAOgrD,GAAUC,GAAYjvD,EAASkG,EAAWlC,GAqapCkxD,CAAY7qD,GAAO,SAAUrK,GAClC,OAAO4P,GAAM5P,GAAS3N,WACrB2R,GAAQhR,KAAI,SAAU4c,GACvB,OAAO69C,GAAgBt5D,EAAST,KAAKk6D,GAAUh+C,EAAO,EAAGA,EAAO,KAAK,MAGhEzb,EAAS1C,cAKpBqxC,GAAS,SAAU+sB,EAAQn7C,EAAW1Q,EAAQ0mB,EAAW4U,EAASitB,EAAQuB,GAC5E,OAAO2G,GAAS5E,EAAQ7rD,EAAQ0mB,EAAW4U,EAASitB,GAAQr5D,MAAK,SAAUqI,GACzE,OAAOsyD,GAASn5C,EAAW1Q,EAAQzI,EAAKpB,MAAOoB,EAAKwT,OAAQ++C,OA0B5DqH,GAAW,SAAUr6D,EAAQkJ,GAC/B,OAAOmD,GAAUrM,EAAQ,QAASkJ,IAEpC,SAASoxD,GAAgBvF,EAAQn7C,EAAW1Q,EAAQqxD,GAClD,IAzBIz9C,EAyBA+vB,GAzBA/vB,EAAUynB,GAAKlrC,EAAS1C,QAarB,CACL+tB,MAbU,WACV,OAAO5H,EAAQtQ,IAAInT,EAAS1C,SAa5B6V,IAXQ,SAAUvT,GAClB,OAAO6jB,EAAQtQ,IAAInT,EAAST,KAAKK,KAWjCuhE,MATU,WACV,OAAO19C,EAAQ3gB,MAAM5E,UASrB6rB,GAPO,SAAU5sB,GACjB,OAAOsmB,EAAQ3gB,MAAMhE,KAAK3B,MAexBikE,EAAa5tB,EAAOnoB,MAsBxB,MAAO,CACL+1C,WAAYA,EACZ/5B,UAvBc,SAAUn2B,GACxBgwD,EAAY71C,MAAM9K,GAClBygD,GAAS9vD,EAAMvK,OAAQkJ,GAAQ/Q,KAAK00C,EAAOrgC,MAsB3Cs0B,UApBc,SAAUv2B,GACxBsiC,EAAOzpB,IAAG,SAAU/jB,GAClBk7D,EAAYG,kBAAkB9gD,GAC9BygD,GAAS9vD,EAAMvK,OAAQkJ,GAAQ/Q,MAAK,SAAU8b,GAC5C4F,GAASxa,EAAO4U,EAAQ/K,GAAQ/Q,MAAK,SAAU86D,GAC7C,IAAIj5C,EAAQi5C,EAAQj5C,MAAMxiB,MAAM,KAC5BwiB,EAAM/jB,OAAS,GAAsB,IAAjB+jB,EAAM/jB,SAAiB0P,GAAKtG,EAAO4U,MACzDsmD,EAAYvH,YAAYp5C,EAAWI,EAAOi5C,EAAQ5zD,MAAO4zD,EAAQh/C,QACjE8gD,EAAO4F,eAAe1mD,cAa9B2mD,QAPY,SAAUl5B,GACtB+4B,MAUJ,IAAIvjD,GAAO,CACTg8C,SAAU1pD,GACVusD,OAAQzB,GACRlpC,SAAU2/B,GAAK11C,OACfmkD,WAAYlB,GAAQG,QACpBgB,QAASnB,GAAQK,UACjBzD,QAASL,GAAYF,YAEnB39C,GAAK,CACPk8C,SAAU5pD,GACVysD,OAAQ3B,GACRhpC,SAAU2/B,GAAK11C,OACfmkD,WAAYlB,GAAQC,MACpBkB,QAASnB,GAAQI,QACjBxD,QAASL,GAAYH,UAGnBmG,GAAQ,SAAUtzD,GACpB,OAAO,SAAUuzD,GACf,OAAOA,IAAYvzD,IAGnBwzD,GAAOF,GAAM,IACbG,GAASH,GAAM,IACfI,GAAe,SAAUH,GAC3B,OAAOA,GAAW,IAAMA,GAAW,IAEjCI,GAAQ,CACVC,WAAYN,GAAM,IAClBO,UAAWP,GAAM,KAEfQ,GAAQ,CACVF,WAAYN,GAAM,IAClBO,UAAWP,GAAM,KAiBfS,GAAe,SAAUvyC,GAgE3B,MAAO,CACL9jB,iBAhEqB,SAAUtP,EAAGqP,GAClC,OAAOnB,GAAaiB,UAAUjB,GAAaH,QAAQqlB,EAAI7kB,UAAWvO,EAAGqP,IAgErEswD,QA9DY,SAAUpwD,GACtB,OAAOA,EAAQtB,IAAIykB,yBA8DnB0uC,cA5DkB,SAAU13D,EAAOurD,EAAS32C,EAAQ42C,GACpD,IAAIkH,EAAMxG,GAAaD,MAAMjsD,EAAOurD,EAAS32C,EAAQ42C,GACrD,OAAOoH,GAAelpC,EAAKgpC,IA2D3B5B,aAzDiB,WACjB,OAAO2B,GAAM/oC,GAAK7wB,KAAI,SAAUqjE,GAC9B,OAAO1I,GAAe9pC,EAAKwyC,OAwD7BxC,UArDc,SAAUM,GACxB,IAAIjuC,EAAWmgC,GAAangC,SAASiuC,EAAMh6D,MAAOg6D,EAAMplD,QACxD,OAAO4+C,GAAe9pC,EAAKqC,IAoD3B0sC,eAlDmB,SAAUniE,EAAGqP,GAChC,OAAOmtD,GAAWppC,EAAKpzB,EAAGqP,GAAG9M,KAAI,SAAUozD,GACzC,OAAOsH,GAAatH,EAAMjsD,MAAOisD,EAAMV,QAASU,EAAMr3C,OAAQq3C,EAAMT,aAiDtE2Q,eA9CmB,YA/zBX,SAAUzyC,GACpBmnC,GAAmBnnC,GAAK5wB,MAAK,SAAU8pB,GACrC,OAAOA,EAAUouC,qBA8zBjB3rC,CAAMqE,IA8CN0yC,kBA5CsB,SAAUC,QAChB,IAAZA,IACFA,GAAU,GAEZ5J,GAAM/oC,GAAK5wB,MAAK,SAAU45D,GACxB,OAAOA,EAAI36D,MAAK,SAAUmtB,GACxB,OAAOA,EAAIg3B,SAASmgB,MACnB,SAAU9P,EAAWS,GACtB,IAAIlB,EAAOuQ,EAAU9P,EAAYS,EACjCwE,GAAY9nC,EAAKoiC,EAAMA,MACtB,SAAU9rD,EAAOurD,EAAS32C,EAAQ42C,GACnC,IAAIlnD,EAAO+3D,EAAUr8D,EAAQ4U,EACzBs0B,EAASmzB,EAAU9Q,EAAUC,EACjC+F,GAAS7nC,EAAKplB,EAAM4kC,EAAQ5kC,EAAM4kC,UAgCtCozB,aAzBiB,SAAU5J,GAC3BnB,GAAS7nC,EAAKgpC,EAAI1yD,MAAO0yD,EAAInH,QAASmH,EAAI99C,OAAQ89C,EAAIlH,UAyBtD+Q,qBAvByB,SAAUv8D,EAAO4U,GAC1C48C,GAAY9nC,EAAK1pB,EAAO4U,IAuBxB0mD,eA9BmB,SAAUz1D,GAC7B2sD,GAAa9oC,EAAK7jB,IA8BlBizD,eAtBmB,WACnB,OAAOpvC,EAAI8yC,aAsBXC,WApBe,WACf,IAxEkBC,EAChB/wD,EACArV,EACAqP,EAsEF,OAzEkB+2D,EAwEFl4D,GAAaH,QAAQqlB,EAAI7kB,UAvEvC8G,OAAejT,IAATgkE,EAAqBA,EAAKn4D,IAAMM,SACtCvO,EAAIqV,EAAIC,KAAKqe,YAActe,EAAIie,gBAAgBK,WAC/CtkB,EAAIgG,EAAIC,KAAKme,WAAape,EAAIie,gBAAgBG,UAC3CR,GAAcjzB,EAAGqP,IAqEX0jB,KAmBX2vC,SAjBa,SAAU1iE,EAAGqP,IArErB,SAAUrP,EAAGqP,EAAG+2D,GACvB,IACIhzC,QADehxB,IAATgkE,EAAqBA,EAAKn4D,IAAMM,UAC5B8kB,YACVD,GACFA,EAAIsvC,SAAS1iE,EAAGqP,GAkEhBg3D,CAAGrmE,EAAGqP,EAAGnB,GAAaH,QAAQqlB,EAAI7kB,cAoBlC+3D,GAAK,SAAUzsD,EAAMyX,GACvB,MAAO,CACLzX,KAAMA,EACNyX,KAAMA,IAaNi1C,GAAW,SAAUnzC,EAAKnP,EAAW1Q,EAAQqxD,GAC/C,IAAIxF,EAASuG,GAAavyC,GACtBozC,EAAkB,WAEpB,OADA5B,EAAY71C,MAAM9K,GACXvgB,EAAS1C,QAyElB,MAAO,CACLylE,QAxEY,SAAU7xD,EAAOlL,EAAOurD,EAAS32C,EAAQ42C,EAASj7B,GAC9D,IAAIysC,EAAY9xD,EAAMyD,IAClB8sD,EAAUuB,EAAUC,MACpBC,GAAkC,IAAvBF,EAAUE,SAmDzB,OAlDc9hD,GAASb,EAAW2gD,EAAY18C,kBAAkBzmB,MAAK,WACnE,OAAI4jE,GAAOF,IAAYyB,EACd3mE,EAAMoyC,GAAQ+sB,EAAQn7C,EAAW1Q,EAAQgO,GAAMjD,EAAQ5U,EAAOk7D,EAAYvH,aACxE+H,GAAKD,IAAYyB,EACnB3mE,EAAMoyC,GAAQ+sB,EAAQn7C,EAAW1Q,EAAQ8N,GAAI/C,EAAQ5U,EAAOk7D,EAAYvH,aACtEgI,GAAOF,GACTllE,EAAMkkE,GAAU/E,EAAQ7rD,EAAQgO,GAAMjD,EAAQ5U,EAAO86D,IACnDY,GAAKD,GACPllE,EAAMkkE,GAAU/E,EAAQ7rD,EAAQ8N,GAAI/C,EAAQ5U,EAAO26D,IAEnD3gE,EAAS1C,QAEjB,SAAUgsB,GACX,IAAI65C,EAAW,SAAUC,GACvB,OAAO,WAIL,OAHiBpgE,EAAQogE,GAAU,SAAU50C,GAC3C,OA9yBC,SAAUrY,EAAMJ,EAASwK,EAAW+I,EAAU43C,GAMzD,OAAOz/C,GAAe6H,EAAUnT,EAAMJ,EAASmrD,EAAY3/C,sBAAuB2/C,EAAY1/C,sBAAsB3iB,KAL9F,SAAUwkE,GAG9B,OAFAnC,EAAYG,kBAAkB9gD,GAC9B2gD,EAAYvH,YAAYp5C,EAAW8iD,EAAQ1iD,MAAO0iD,EAAQr9D,MAAOq9D,EAAQzoD,QAClEyoD,EAAQ1iD,SA0yBA6e,CAAOhR,EAAMrY,KAAMqY,EAAMZ,KAAMrN,EAAW+I,EAAU43C,MAE3CnjE,MAAK,WACrB,OAAOujB,GAASf,EAAW2gD,EAAY3/C,sBAAuB2/C,EAAY1/C,sBAAsB3iB,KAAI,SAAUmjB,GAC5G,IAAI+P,EAAW4vC,GAAOF,IAAYlrC,EAAUwrC,UAAUN,GAAW/P,GAAKv1C,MAAQu1C,GAAK11C,OAGnF,OAFA0/C,EAAO6G,qBAAqB7Q,GAAK3nC,GAAG/H,EAAMvG,MAAO,GAAIsW,EAAS/P,EAAM9L,QACpEgrD,EAAY71C,MAAM9K,GACX+4C,GAAgBt5D,EAAS1C,QAAQ,SAEzC,SAAUw3C,GACX,OAAO90C,EAAST,KAAK+5D,GAAgBt5D,EAAS1C,QAAQ,SAI5D,OAAIqkE,GAAOF,IAAYyB,EACdC,EAAS,CAACP,GAAG,EAAI,KACflB,GAAKD,IAAYyB,EACnBC,EAAS,CAACP,IAAI,EAAG,KACfrsC,EAAUurC,WAAWL,IAAYyB,EACnCC,EAAS,CACdP,GAAG,GAAI,GACPA,IAAI,EAAG,KAEArsC,EAAUwrC,UAAUN,IAAYyB,EAClCC,EAAS,CACdP,GAAG,EAAG,GACNA,GAAG,EAAI,KAEAhB,GAAaH,KAAyB,IAAbyB,EAC3BJ,EAEA9iE,EAAS1C,OAGbkgC,IAmBP8lC,MAjBU,SAAUpyD,EAAOlL,EAAOurD,EAAS32C,EAAQ42C,GACnD,OAAOpwC,GAASb,EAAW2gD,EAAY18C,kBAAkBzmB,MAAK,WAC5D,IAAIilE,EAAY9xD,EAAMyD,IAClB8sD,EAAUuB,EAAUC,MAExB,OAAiB,MADqB,IAAvBD,EAAUE,UAEhBljE,EAAS1C,OAEdskE,GAAaH,GAp3BZ,SAAUlhD,EAAW1Q,EAAQ7J,EAAOurD,EAAS32C,EAAQ42C,EAASmI,GACvE,OAAMrtD,GAAKtG,EAAO4U,IAAW22C,IAAYC,EAOhCxxD,EAAS1C,OANT0V,GAAUhN,EAAO,QAAS6J,GAAQ9Q,MAAK,SAAUa,GACtD,OAAOoT,GAAU4H,EAAQ,QAAS/K,GAAQ9Q,MAAK,SAAU5B,GACvD,OAAOu8D,GAASn5C,EAAW1Q,EAAQjQ,EAAGzC,EAAGw8D,SAi3BlC4J,CAAKhjD,EAAW1Q,EAAQ7J,EAAOurD,EAAS32C,EAAQ42C,EAAS0P,EAAYvH,aAErE35D,EAAS1C,SAEjB0C,EAAS1C,SAgGZkmE,GAjCS,SAAUt6C,EAAUu6C,EAAaC,GAC5C,IAAIC,EAA4B,SAAU93D,GACxC4H,GAAO5H,EAASqd,EAASI,UACzB7V,GAAO5H,EAASqd,EAASK,eACzB9V,GAAO5H,EAASqd,EAASM,eAEvBo6C,EAAwB,SAAU/3D,GACpCsH,GAAItH,EAASqd,EAASI,SAAU,MAE9B+B,EAAQ,SAAU9K,GACpB8gD,EAAkB9gD,GAClBmjD,KAEErC,EAAoB,SAAU9gD,GAChC,IAAIc,EAAOhP,GAAckO,EAAW2I,EAAS1E,kBAC7C1lB,EAAKuiB,EAAMsiD,IASb,MAAO,CACLtC,kBAAmBA,EACnBh2C,MAAOA,EACPsuC,YAVgB,SAAUp5C,EAAW9R,EAAOzI,EAAO4U,GACnDyQ,EAAM9K,GACNzhB,EAAK2P,EAAOm1D,GACZzwD,GAAInN,EAAOkjB,EAASK,cAAe,KACnCpW,GAAIyH,EAAQsO,EAASM,aAAc,KACnCi6C,EAAYh1D,EAAOzI,EAAO4U,IAM1B4J,iBAAkB0E,EAAS1E,iBAC3BjD,sBAAuB2H,EAAS3H,sBAChCC,qBAAsB0H,EAAS1H,uBA4B/BqiD,GAAgB,SAAU3tD,EAAOvP,EAAQkkB,GAC3C,IAAI7T,EAAYuB,GAAU1B,UAAUX,GAEpC,OADc69B,GAAQ/8B,EAAWrQ,GAClB9H,KAAI,SAAUi+C,GAC3B,IAAIxkC,EAAOi6B,GAAOv7B,EAAW6T,GAAY,GAGzC,MAAO,CACLi5C,cA5BiB,SAAUxrD,EAAMwkC,EAAejyB,GACpD,IAAIk5C,EAASzrD,EAAKjX,MAAM,EAAGy7C,EAAcA,EAAclgD,OAAS,GAAG2Z,IAAM,GACrEytD,EAAYlxB,GAAaixB,EAAQl5C,GACrC,OAAO9rB,EAAKilE,GAAW,SAAU31D,GAC/B,IAAI41D,EAAc51D,EAAOI,MAAMpN,MAAM,EAAGy7C,EAAcA,EAAclgD,OAAS,GAAG6Z,OAAS,GACzF,OAAO5X,EAAIolE,GAAa,SAAUjvD,GAChC,OAAOA,EAAKnJ,cAmBMq4D,CAAiB5rD,EAAMwkC,EAAejyB,GAIxDs5C,iBAnBoB,SAAU7rD,EAAMwkC,EAAejyB,GACvD,IAAIu5C,EAAW9rD,EAAKjX,MAAMy7C,EAAc,GAAGvmC,IAAMumC,EAAc,GAAGxuC,QAAU,EAAGgK,EAAK1b,QAChFynE,EAAcvxB,GAAasxB,EAAUv5C,GACzC,OAAO9rB,EAAKslE,GAAa,SAAUh2D,GACjC,IAAI41D,EAAc51D,EAAOI,MAAMpN,MAAMy7C,EAAc,GAAGrmC,OAASqmC,EAAc,GAAGvuC,QAAU,EAAGF,EAAOI,MAAM7R,QAC1G,OAAOiC,EAAIolE,GAAa,SAAUjvD,GAChC,OAAOA,EAAKnJ,cAUSy4D,CAAoBhsD,EAAMwkC,EAAejyB,QAQhE05C,GAAoB,SAAU1zD,GAChC,OAA8E,IAAvEkyB,GAAMv4B,GAAaH,QAAQwG,EAAElK,QAAS,8BAE/C,SAAS69D,GAAe56C,EAAQsjB,EAAYu3B,GAC1C,IAcIvD,EAAcsC,GAA2Bt6C,IAd3B,SAAUza,EAAOzI,EAAO4U,GACxC6pD,EAAiB35C,UAAUhsB,MAAK,SAAUgsB,GACzB5U,GAAMlQ,GACZlH,MAAK,SAAUoX,GACtB,IAAIiS,EAAeiiB,GAAiBxgB,GAChCiB,EAAa5D,GAAe/qB,EAAMsO,GAAaH,QAAQuf,EAAOgB,UAAWzC,GACzEu8C,EAAab,GAAc3tD,EAAO4U,EAASD,IAvpKxB,SAAUjB,EAAQnb,EAAOzI,EAAO4U,EAAQ8pD,GACrE96C,EAAO2e,KAAK,uBAAwB,CAClC95B,MAAOA,EACPzI,MAAOA,EACP4U,OAAQA,EACR8pD,WAAYA,IAmpKRC,CAAyB/6C,EAAQnb,EAAOzI,EAAO4U,EAAQ8pD,YAI/C,WACZ,OArpK0B,SAAU96C,GACtCA,EAAO2e,KAAK,uBAopKHq8B,CAAwBh7C,MA8HjC,OA3HAA,EAAOG,GAAG,QAAQ,SAAU86C,GAC1B,IAAIn1C,EAAM9F,EAAOyoC,SACbzgD,EAAO24B,GAAU3gB,GACjB/Z,EAAS4Q,GAAUmJ,GAanBk7C,EA/PI,SAAUp1C,EAAKnP,EAAW1Q,EAAQqxD,GAC5C,IACI3jC,EAAW0jC,GADFgB,GAAavyC,GACYnP,EAAW1Q,EAAQqxD,GACzD,MAAO,CACLE,WAAY7jC,EAAS6jC,WACrB/5B,UAAW9J,EAAS8J,UACpBI,UAAWlK,EAASkK,UACpB85B,QAAShkC,EAASgkC,SAwPEwD,CAAMr1C,EAAK9d,EAAM/B,EAAQqxD,GACzC8D,EAAcnC,GAASnzC,EAAK9d,EAAM/B,EAAQqxD,GAC1C+D,EArKO,SAAUv1C,EAAKnP,EAAW1Q,EAAQqxD,GAC/C,IAAIxF,EAASuG,GAAavyC,GAC1B,OAAO,SAAU1pB,EAAO4U,GACtBsmD,EAAYG,kBAAkB9gD,GAC9BC,GAASxa,EAAO4U,EAAQ/K,GAAQ/Q,MAAK,SAAU86D,GAC7C,IAAIj5C,EAAQi5C,EAAQj5C,MAAMxiB,MAAM,IAChC+iE,EAAYvH,YAAYp5C,EAAWI,EAAOi5C,EAAQ5zD,MAAO4zD,EAAQh/C,QACjE8gD,EAAO4F,eAAe1mD,GACtB8gD,EAAO0G,wBA6JQ8C,CAASx1C,EAAK9d,EAAM/B,EAAQqxD,GAI7Ct3C,EAAOG,GAAG,uBAAuB,SAAUlZ,GACzC,OAAOo0D,EAAWp0D,EAAE7K,MAAO6K,EAAE+J,WAE/B,IAuEMuqD,EACAC,EAxEFC,EAAiB,SAAUn0D,EAAOo0D,IANpB,SAAUp0D,GAC1B,OAA8B,IAAvBA,EAAMyD,IAAIuuD,UAMZqC,CAAYr0D,KAGbo0D,EAAS7jC,MACXvwB,EAAMuwB,OAER6jC,EAAS18C,UAAU9pB,MAAK,SAAU0mE,GAChC,IAAIzzC,EAAWmgC,GAAangC,SAASyzC,EAAGx/D,MAAOw/D,EAAG5qD,QAC9CsQ,EAAMspC,GAAW9kC,EAAKqC,GAC1BnI,EAAOhB,UAAUuC,OAAOD,QA8BxBu6C,EAAc,SAAU9wD,GAC1B,OAAsB,IAAfA,EAAI+wD,QA+CTC,GAjBER,EAAaj6B,GAAK1gC,GAAaH,QAAQuH,IACvCwzD,EAAgBl6B,GAAK,GAclB,CAAE06B,SAbM,SAAU3oE,GACvB,IAAI0J,EAAS6D,GAAaH,QAAQpN,EAAE0J,QACpC,GAAqB,OAAjBnG,GAAKmG,IAAqC,OAAjBnG,GAAKmG,GAAkB,CAClD,IAAIk/D,EAAKV,EAAWriE,MAChBgjE,EAAMV,EAActiE,MACpBwJ,GAAKu5D,EAAIl/D,IAAW1J,EAAE8oE,UAAYD,EAAM,MAC1C7oE,EAAE+sB,iBACFi7C,EAAWt+D,EAAQA,IAGvBw+D,EAAWhyD,IAAIxM,GACfy+D,EAAcjyD,IAAIlW,EAAE8oE,cAKxBn8C,EAAOG,GAAG,aArCM,SAAU86C,GACxBC,EAAc1D,gBAqChBx3C,EAAOG,GAAG,aAnCM,SAAUlZ,GACpB40D,EAAY50D,IAAM0zD,GAAkB1zD,IACtCi0D,EAAcz9B,UAAU/E,GAAezxB,OAkC3C+Y,EAAOG,GAAG,aA/BM,SAAUlZ,GAjBA,IAAU8D,QACdjW,KADciW,EAkBV9D,GAjBhBo5C,SAGJkB,GAAS3lD,QAAQ8B,UAA4B,IAAhBqN,EAAIs1C,SAGR,IAAP,EAAdt1C,EAAIs1C,WAWkBsa,GAAkB1zD,IAC9Ci0D,EAAcr9B,UAAUnF,GAAezxB,OA8B3C+Y,EAAOG,GAAG,WA3BI,SAAUlZ,GAClB40D,EAAY50D,IAAM0zD,GAAkB1zD,IACtCi0D,EAAcvD,QAAQj/B,GAAezxB,OA0BzC+Y,EAAOG,GAAG,WAAY47C,EAAUC,UAChCh8C,EAAOG,GAAG,SAjFE,SAAU7Y,GACpB,IAAI80D,EAAe1jC,GAAepxB,GAClC,GAAI80D,EAAarxD,IAAIuuD,UAAYtB,GAAaoE,EAAarxD,IAAIsuD,OAAQ,CACrE,IAAI/3C,EAAMtB,EAAOhB,UAAUylB,SACvBroC,EAAQwE,GAAaH,QAAQ6gB,EAAIonC,gBACjCjzC,EAAM7U,GAAaH,QAAQ6gB,EAAI8oC,cACnCgR,EAAY1B,MAAM0C,EAAchgE,EAAOklB,EAAI6oC,YAAa10C,EAAK6L,EAAI+oC,WAAWn1D,MAAK,SAAUwmE,GACzFD,EAAeW,EAAcV,UA2EnC17C,EAAOG,GAAG,WAvEI,SAAU7Y,GACtB,IAAI80D,EAAe1jC,GAAepxB,GAClCg8B,IAAapuC,MAAK,SAAUitB,GAC1B,OAAOA,EAAO4b,cAEhB,IAAIzc,EAAMtB,EAAOhB,UAAUylB,SACvBroC,EAAQwE,GAAaH,QAAQ6gB,EAAIonC,gBACjCjzC,EAAM7U,GAAaH,QAAQ6gB,EAAI8oC,cAC/Bz9B,EAAY5H,GAAYkzC,GAAOG,GAAnBrzC,CAA0BnkB,GAAaH,QAAQuf,EAAOhB,UAAU8B,aAChFs6C,EAAYjC,QAAQiD,EAAchgE,EAAOklB,EAAI6oC,YAAa10C,EAAK6L,EAAI+oC,UAAW19B,GAAWz3B,MAAK,SAAUwmE,GACtGD,EAAeW,EAAcV,MAE/Bp4B,IAAapuC,MAAK,SAAUitB,GAC1B,OAAOA,EAAO6b,iBA2DlBhe,EAAOG,GAAG,cArHU,WAClB,IAAI2uC,EAAM9uC,EAAOhB,UACb5iB,EAAQwE,GAAaH,QAAQquD,EAAIhuC,YACjCrL,EAAM7U,GAAaH,QAAQquD,EAAIhzC,UACtBtF,GAAYlK,GAAO,CAC9BlQ,EACAqZ,IAEKthB,MAAK,WACV,OAAOmjE,EAAY71C,MAAMzZ,KACxB1V,SA6GA,CAAEmvB,MAAO61C,EAAY71C,OAG9B,IAAI46C,GAAsB,SAAUr8C,EAAQf,GAC1C,IAAIiC,EAAUogB,GAAKlrC,EAAS1C,QACxB4oE,EAAiBh7B,GAAK,IACtBi7B,EAAc,WAChB,OAAOhnB,GAA+BlU,GAAkBrhB,IAAS7qB,MAAK,SAAUowD,GAC9E,IAAIiX,EAAUlwD,GAAMi5C,GAIpB,OAAOiX,EAAQvnE,KAAI,SAAUqX,GAC3B,MAHsB,YAAf1V,GAGO2uD,GACL1lC,GAAO0lC,GAEPzlC,GAAQb,EAAY3S,EAAOi5C,UAKtCkX,EAAe,WACjBv7C,EAAQ3X,IAAItP,EAAOsiE,EAAPtiE,IACZ/E,EAAKonE,EAAepjE,OAAO,SAAU06B,GACnC,OAAOA,QAGP8oC,EAAU,SAAUnpD,EAAKopD,GAC3B,IAAI/oC,EAAU,WACZ,OAAO1S,EAAQhoB,MAAM/E,MAAK,WACxBof,EAAIqpD,aAAY,MACf,SAAU17C,GACX3N,EAAIqpD,YAAYD,EAAWz7C,QAK/B,OAFA0S,IACA0oC,EAAe/yD,IAAI+yD,EAAepjE,MAAM/F,OAAO,CAACygC,KACzC,WACL0oC,EAAe/yD,IAAIjU,EAAOgnE,EAAepjE,OAAO,SAAUmqB,GACxD,OAAOA,IAAMuQ,QAgCnB,OADA5T,EAAOG,GAAG,6CAA8Cs8C,GACjD,CACLI,aA7BiB,SAAUtpD,GAC3B,OAAOmpD,EAAQnpD,GAAK,SAAU23B,GAC5B,OAAO,MA4BT4xB,iBAzBqB,SAAUvpD,GAC/B,OAAOmpD,EAAQnpD,GAAK,SAAU2N,GAC5B,MAAiC,YAA1BtqB,GAAKsqB,EAAQjf,aAwBtB86D,iBArBqB,SAAUC,GAC/B,OAAO,SAAUzpD,GACf,OAAOmpD,EAAQnpD,GAAK,SAAU2N,GAC5B,MAAiC,YAA1BtqB,GAAKsqB,EAAQjf,UAA0B+6D,IAAmBlpE,cAmBrEmpE,iBAfqB,SAAU1pD,GAC/B,OAAOmpD,EAAQnpD,GAAK,SAAU2N,GAC5B,OAAOA,EAAQ7B,SAASvrB,aAc1BopE,mBAXuB,SAAU3pD,GACjC,OAAOmpD,EAAQnpD,GAAK,SAAU2N,GAC5B,OAAOA,EAAQhC,WAAWprB,aAU5B2oE,aAAcA,EACdv7C,QAAS,WACP,OAAOA,EAAQhoB,SAoWrB,SAASikE,GAAOn9C,GACd,IAAIf,EA9mQW,SAAUm+C,EAAUt8C,EAAUlG,GAQ7C,MAAO,CAAE1hB,IAPC,WACR,OAAOgf,GAAWklD,IAAYxiD,GAAkBzmB,MAAK,WACnD,OAAO2sB,IAAW7rB,IAAI0kB,IAAQnlB,WAAWylB,OACxC,SAAUpV,GACX,OAAO6U,GAAS7U,QAymQHw4D,EAAW,WAC1B,OAAO18B,GAAU3gB,MAChB,WACD,OAAOu1B,GAA+BlU,GAAkBrhB,MACvDV,GAAS1E,kBACRigD,EAAmBwB,GAAoBr8C,EAAQf,GAC/Cq+C,EAAgBr6B,GAAiBjjB,GACjCE,EAAgB06C,GAAc56C,EAAQs9C,EAAch6B,WAAYu3B,GAChE56C,EAAU61B,GAAa91B,EAAQs9C,EAAcn4B,SAAUlmB,GACvDkC,EAvxEU,WACd,IAAI5U,EAAO+0B,GAAKlrC,EAAS1C,QACrBswB,EAAOsd,GAAKlrC,EAAS1C,QACrB6pE,EAAiB,SAAUp8C,GAC7BA,EAAU5X,IAAInT,EAAS1C,SAEzB,MAAO,CACLqwD,QAASx3C,EAAKrT,IACd4rD,QAAS,SAAUvsD,GACjBgU,EAAKhD,IAAIhR,GACTglE,EAAev5C,IAEjBw5C,UAAW,WACT,OAAOD,EAAehxD,IAExB24C,WAAYlhC,EAAK9qB,IACjB0rD,WAAY,SAAUrgC,GACpBP,EAAKza,IAAIgb,GACTg5C,EAAehxD,IAEjBkxD,aAAc,WACZ,OAAOF,EAAev5C,KAkwEV05C,GAoBhB,OAnBAla,GAAiBxjC,EAAQC,EAASC,EAAejB,EAAYkC,GAC7DwlC,GAAsB3mC,EAAQC,EAAShB,GACvCc,GAAeC,EAAQf,EAAYgB,EAASC,GAlN3B,SAAUF,EAAQ66C,EAAkB15C,GACrD,IAAIw8C,EAAM,SAAUC,GAClB,OAAO,WACL,OAAO59C,EAAO69C,YAAYD,KAG1BE,EAAoB,SAAUroC,GAChCzV,EAAO69C,YAAY,kBAAkB,EAAO,CAC1CtxD,KAAMkpB,EAAKsoC,QACX5xD,QAASspB,EAAKuoC,cAGdC,EAAkB,CACpBt8D,KAAM,mBACN+6D,QAAS7B,EAAiBgC,aAC1BqB,SAAUP,EAAI,kBAEZQ,EAAc,CAChBx8D,KAAM,eACNy8D,KAAM,qBACN1B,QAAS7B,EAAiBgC,aAC1BqB,SAAUP,EAAI,mBAEhB39C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,uBAAwB,CACrD18D,KAAM,oBACNy8D,KAAM,yBACNF,SAAUP,EAAI,2BACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,sBAAuB,CACpD18D,KAAM,mBACNy8D,KAAM,yBACNF,SAAUP,EAAI,0BACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,iBAAkB,CAC/C18D,KAAM,aACNy8D,KAAM,mBACNF,SAAUP,EAAI,qBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,gBAAiB,CAC9C18D,KAAM,iBACNy8D,KAAM,uBACNF,SAAUP,EAAI,oBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,cAAe,CAC5C18D,KAAM,UACNy8D,KAAM,UACNF,SAAUP,EAAI,kBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,eAAgB,CAC7C18D,KAAM,WACNy8D,KAAM,gBACNF,SAAUP,EAAI,mBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,sBAAuB,CACpD18D,KAAM,mBACNy8D,KAAM,mBACNF,SAAUP,EAAI,0BACdjB,QAAS7B,EAAiBkC,iBAAiB57C,EAAU4iC,WAEvD/jC,EAAO6lC,GAAG7xB,SAASqqC,YAAY,qBAAsB,CACnD18D,KAAM,kBACNy8D,KAAM,kBACNF,SAAUP,EAAI,yBACdjB,QAAS7B,EAAiBkC,iBAAiB57C,EAAU4iC,WASvD/jC,EAAO6lC,GAAG7xB,SAASqqC,YAAY,0BAA2B,CACxD18D,KAAM,uBACNy8D,KAAM,6BACNF,SAAUP,EAAI,2BACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,yBAA0B,CACvD18D,KAAM,sBACNy8D,KAAM,4BACNF,SAAUP,EAAI,0BACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,oBAAqB,CAClD18D,KAAM,gBACNy8D,KAAM,sBACNF,SAAUP,EAAI,qBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,iBAAkB,CAC/C18D,KAAM,aACNy8D,KAAM,aACNF,SAAUP,EAAI,kBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,kBAAmB,CAChD18D,KAAM,cACNy8D,KAAM,mBACNF,SAAUP,EAAI,mBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,yBAA0B,CACvD18D,KAAM,sBACNy8D,KAAM,sBACNF,SAAUP,EAAI,0BACdjB,QAAS7B,EAAiBkC,iBAAiB57C,EAAU+jC,cAEvDllC,EAAO6lC,GAAG7xB,SAASqqC,YAAY,wBAAyB,CACtD18D,KAAM,qBACNy8D,KAAM,qBACNF,SAAUP,EAAI,yBACdjB,QAAS7B,EAAiBkC,iBAAiB57C,EAAU+jC,cASvDllC,EAAO6lC,GAAG7xB,SAASqqC,YAAY,iBAAkB,CAC/C18D,KAAM,kBACNy8D,KAAM,wBACNF,SAAUP,EAAI,qBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,kBAAmB,CAChD18D,KAAM,cACNy8D,KAAM,oBACNF,SAAUP,EAAI,sBACdjB,QAAS7B,EAAiBoC,mBAE5Bj9C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,kBAAmB,CAChD18D,KAAM,aACNy8D,KAAM,oBACNF,SAAUP,EAAI,sBACdjB,QAAS7B,EAAiBqC,sBASC,IAjmLZ,SAAUl9C,GAC3B,OAAOA,EAAOof,SAAS,cAAc,EAAM,WAgmLvCk/B,CAAat+C,GACfA,EAAO6lC,GAAG7xB,SAASqqC,YAAY,cAAe,CAC5C18D,KAAM,QACNy8D,KAAM,QACNF,SAAUP,EAAI,oBAGhB39C,EAAO6lC,GAAG7xB,SAASuqC,kBAAkB,cAAe,CAClD58D,KAAM,QACNy8D,KAAM,QACNI,gBAAiB,WACf,MAAO,CAAC,CACJjoE,KAAM,gBACNkoE,UAAW,cACXP,SAAUJ,OAKpB99C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,oBAAqB,CAClD18D,KAAM,eACNy8D,KAAM,QACNF,SAAUP,EAAI,oBAEhB39C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,aAAcJ,GAC7Cj+C,EAAO6lC,GAAG7xB,SAASqqC,YAAY,cAAeF,GAC9Cn+C,EAAO6lC,GAAG7xB,SAASuqC,kBAAkB,MA3G3B,CACRhoE,KAAM,iBACNoL,KAAM,MACN68D,gBAAiB,WACf,MAAO,6IAwGXx+C,EAAO6lC,GAAG7xB,SAASuqC,kBAAkB,SA3DxB,CACXhoE,KAAM,iBACNoL,KAAM,SACN68D,gBAAiB,WACf,MAAO,oJAwDXx+C,EAAO6lC,GAAG7xB,SAASuqC,kBAAkB,OAnC1B,CACThoE,KAAM,iBACNoL,KAAM,OACN68D,gBAAiB,WACf,MAAO,oDAgCXx+C,EAAO6lC,GAAG7xB,SAAS0qC,eAAe,QAAS,CACzC9oC,OAAQ,WAEN,OADAilC,EAAiB4B,eACV5B,EAAiB35C,UAAU/sB,MAAK,WACrC,MAAO,MACN,SAAU+sB,GACX,MAA8B,YAA1BtqB,GAAKsqB,EAAQjf,SACR,yBAEA,gEAqBf08D,CAAa3+C,EAAQ66C,EAAkB15C,GA7WxB,SAAUnB,EAAQ66C,EAAkB15C,GACnDnB,EAAO6lC,GAAG7xB,SAAS4qC,cAAc,QAAS,CACxCC,QAAS,QACTT,KAAM,QACNU,MAAO,SAAUC,GACf,OAAOA,EAAS,4EAGpB,IAAIpB,EAAM,SAAUC,GAClB,OAAO,WACL,OAAO59C,EAAO69C,YAAYD,KAG9B59C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,aAAc,CACzCH,QAAS,mBACTX,SAAUP,EAAI,iBACdS,KAAM,QACN1B,QAAS7B,EAAiBgC,eAE5B78C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,cAAe,CAC1CH,QAAS,eACTX,SAAUP,EAAI,kBACdS,KAAM,qBACN1B,QAAS7B,EAAiBgC,eAE5B78C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,iBAAkB,CAC7CH,QAAS,kBACTX,SAAUP,EAAI,qBACdS,KAAM,wBACN1B,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,kBAAmB,CAC9CH,QAAS,cACTX,SAAUP,EAAI,sBACdS,KAAM,oBACN1B,QAAS7B,EAAiBoC,mBAE5Bj9C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,kBAAmB,CAC9CH,QAAS,aACTX,SAAUP,EAAI,sBACdS,KAAM,oBACN1B,QAAS7B,EAAiBqC,qBAE5Bl9C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,uBAAwB,CACnDH,QAAS,oBACTX,SAAUP,EAAI,2BACdS,KAAM,yBACN1B,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,sBAAuB,CAClDH,QAAS,mBACTX,SAAUP,EAAI,0BACdS,KAAM,yBACN1B,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,iBAAkB,CAC7CH,QAAS,aACTX,SAAUP,EAAI,qBACdS,KAAM,mBACN1B,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,gBAAiB,CAC5CH,QAAS,iBACTX,SAAUP,EAAI,oBACdS,KAAM,uBACN1B,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,uBAAwB,CACnDH,QAAS,uBACTX,SAAUP,EAAI,2BACdS,KAAM,6BACN1B,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,sBAAuB,CAClDH,QAAS,sBACTX,SAAUP,EAAI,0BACdS,KAAM,4BACN1B,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,iBAAkB,CAC7CH,QAAS,gBACTX,SAAUP,EAAI,qBACdS,KAAM,sBACN1B,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,cAAe,CAC1CH,QAAS,UACTT,KAAM,UACNF,SAAUP,EAAI,kBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,eAAgB,CAC3CH,QAAS,WACTT,KAAM,gBACNF,SAAUP,EAAI,mBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,sBAAuB,CAClDH,QAAS,mBACTT,KAAM,mBACNF,SAAUP,EAAI,0BACdjB,QAAS7B,EAAiBkC,iBAAiB57C,EAAU4iC,WAEvD/jC,EAAO6lC,GAAG7xB,SAASgrC,UAAU,qBAAsB,CACjDH,QAAS,kBACTT,KAAM,kBACNF,SAAUP,EAAI,yBACdjB,QAAS7B,EAAiBkC,iBAAiB57C,EAAU4iC,WAEvD/jC,EAAO6lC,GAAG7xB,SAASgrC,UAAU,cAAe,CAC1CH,QAAS,aACTT,KAAM,aACNF,SAAUP,EAAI,kBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,eAAgB,CAC3CH,QAAS,cACTT,KAAM,mBACNF,SAAUP,EAAI,mBACdjB,QAAS7B,EAAiBiC,mBAE5B98C,EAAO6lC,GAAG7xB,SAASgrC,UAAU,sBAAuB,CAClDH,QAAS,sBACTT,KAAM,sBACNF,SAAUP,EAAI,0BACdjB,QAAS7B,EAAiBkC,iBAAiB57C,EAAU+jC,cAEvDllC,EAAO6lC,GAAG7xB,SAASgrC,UAAU,qBAAsB,CACjDH,QAAS,qBACTT,KAAM,qBACNF,SAAUP,EAAI,yBACdjB,QAAS7B,EAAiBkC,iBAAiB57C,EAAU+jC,cAEvDllC,EAAO6lC,GAAG7xB,SAASgrC,UAAU,oBAAqB,CAChDH,QAAS,eACTX,SAAUP,EAAI,kBACdS,KAAM,UAsORa,CAAWj/C,EAAQ66C,EAAkB15C,GAnOrB,SAAUnB,GAC1B,IAGIk/C,EAt6KW,SAAUl/C,GACzB,OAAOA,EAAOof,SAAS,gBA1EC,8IA++KV+/B,CAAWn/C,GACrBk/C,EAAQlsE,OAAS,GACnBgtB,EAAO6lC,GAAG7xB,SAASorC,kBAAkB,QAAS,CAC5Cj3D,UANU,SAAUmE,GACtB,OAAO0T,EAAOrf,IAAItM,GAAGiY,EAAO,UAAY0T,EAAO/X,UAAUnQ,SAASwU,IAMhE4vC,MAAOgjB,EACPn+D,MAAO,OACP44B,SAAU,SA0Nd0lC,CAAYr/C,GACZA,EAAOG,GAAG,WAAW,WACnBH,EAAOU,WAAW4+C,YAAYhgD,GAASK,eACvCK,EAAOU,WAAW4+C,YAAYhgD,GAASM,cAhvErB,SAAUI,GAC9BA,EAAO07B,UAAU6jB,SAASzY,IAgvExB0Y,CAAgBx/C,MAjrLG,SAAUA,GAC/B,OAAOA,EAAOof,SAAS,wBAAwB,EAAM,WAkrLjDqgC,CAAiBz/C,IACnBA,EAAOG,GAAG,WAAW,SAAUlZ,IApoDpB,SAAUK,EAAO0Y,EAAQC,GACtC,GAAI3Y,EAAMo4D,UAAYtQ,GAASuQ,IAAK,CAClC,IAAIC,EAASj/B,GAAU3gB,GACnB6/C,EAAW,SAAU59D,GACvB,IAAI0qD,EAAS/1D,GAAKqL,GAClB,OAAOS,GAAKT,EAAS29D,IAAW9nE,EAAS23D,GAAc9C,IAErDrrC,EAAMtB,EAAOhB,UAAUylB,SAC3B,GAAInjB,EAAIkpC,UAAW,CACjB,IAAIpuD,EAAQwE,GAAaH,QAAQ6gB,EAAIonC,gBACrCt9C,GAAKhP,EAAOyjE,GAAU3qE,MAAK,SAAUkW,GACnC9D,EAAM8Y,kBACW9Y,EAAMgyD,SAAWhK,GAAWD,IACxBrvC,EAAQ6/C,EAAUz0D,EAAM6U,GACzC/qB,MAAK,SAAUmD,GACjB2nB,EAAOhB,UAAUuC,OAAOlpB,WAsnD5BynE,CAAS74D,EAAG+Y,EAAQC,MAGxBD,EAAOG,GAAG,UAAU,WAClBm9C,EAAchmC,aA3jHL,SAAUtX,EAAQmB,EAAWm8C,EAAezC,GACvD,MAAO,CACL3gB,YAAaA,GAAYl6B,GACzB+/C,iBAAkBhmB,GAAqB54B,EAAU2jC,SACjDkb,iBAAkBnmB,GAAqB14B,EAAU4iC,SACjDkc,iBAAkBlmB,GAAqB54B,EAAUyjC,YACjDsb,iBAAkBrmB,GAAqB14B,EAAU+jC,YACjDoY,cAAeA,EACfzC,iBAAkBA,GAqjHbsF,CAAOngD,EAAQmB,EAAWm8C,EAAezC,GAGhD3gD,GAAO0X,IAAI,QAASurC,IAjvU1B","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n(function () {\n    'use strict';\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var pure = function (x) {\n      return [x];\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is;\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var isEmpty = function (r) {\n      for (var x in r) {\n        if (hasOwnProperty.call(r, x)) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    var validSectionList = [\n      'tfoot',\n      'thead',\n      'tbody',\n      'colgroup'\n    ];\n    var isValidSection = function (parentName) {\n      return contains(validSectionList, parentName);\n    };\n    var grid = function (rows, columns) {\n      return {\n        rows: rows,\n        columns: columns\n      };\n    };\n    var address = function (row, column) {\n      return {\n        row: row,\n        column: column\n      };\n    };\n    var detail = function (element, rowspan, colspan) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan\n      };\n    };\n    var detailnew = function (element, rowspan, colspan, isNew) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        isNew: isNew\n      };\n    };\n    var extended = function (element, rowspan, colspan, row, column) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        row: row,\n        column: column\n      };\n    };\n    var rowdata = function (element, cells, section) {\n      return {\n        element: element,\n        cells: cells,\n        section: section\n      };\n    };\n    var elementnew = function (element, isNew) {\n      return {\n        element: element,\n        isNew: isNew\n      };\n    };\n    var rowdatanew = function (element, cells, section, isNew) {\n      return {\n        element: element,\n        cells: cells,\n        section: section,\n        isNew: isNew\n      };\n    };\n    var rowcells = function (cells, section) {\n      return {\n        cells: cells,\n        section: section\n      };\n    };\n    var rowdetails = function (details, section) {\n      return {\n        details: details,\n        section: section\n      };\n    };\n    var bounds = function (startRow, startCol, finishRow, finishCol) {\n      return {\n        startRow: startRow,\n        startCol: startCol,\n        finishRow: finishRow,\n        finishCol: finishCol\n      };\n    };\n    var columnext = function (element, colspan, column) {\n      return {\n        element: element,\n        colspan: colspan,\n        column: column\n      };\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement(e) && name(e) === tag;\n      };\n    };\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var children$1 = function (scope, predicate) {\n      return filter(children(scope), predicate);\n    };\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var children$2 = function (scope, selector) {\n      return children$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child$2 = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor$1, scope, selector, isRoot);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$2(element, key));\n    };\n    var remove = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$1 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (getOpt(element, 'style').map(trim).is('')) {\n        remove(element, 'style');\n      }\n    };\n    var copy = function (source, target) {\n      var sourceDom = source.dom;\n      var targetDom = target.dom;\n      if (isSupported$1(sourceDom) && isSupported$1(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var getAttrValue = function (cell, name, fallback) {\n      if (fallback === void 0) {\n        fallback = 0;\n      }\n      return getOpt(cell, name).map(function (value) {\n        return parseInt(value, 10);\n      }).getOr(fallback);\n    };\n    var getSpan = function (cell, type) {\n      return getAttrValue(cell, type, 1);\n    };\n    var hasColspan = function (cell) {\n      return getSpan(cell, 'colspan') > 1;\n    };\n    var hasRowspan = function (cell) {\n      return getSpan(cell, 'rowspan') > 1;\n    };\n    var getCssValue = function (element, property) {\n      return parseInt(get$3(element, property), 10);\n    };\n    var minWidth = constant(10);\n    var minHeight = constant(10);\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, always);\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind(children(scope), function (x) {\n        if (is(x, selector)) {\n          return predicate(x) ? [x] : [];\n        } else {\n          return filterFirstLayer(x, selector, predicate);\n        }\n      });\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Optional.none();\n      }\n      if (contains(tags, name(element))) {\n        return Optional.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells = function (ancestor) {\n      return firstLayer(ancestor, 'th,td');\n    };\n    var columns = function (ancestor) {\n      if (is(ancestor, 'colgroup')) {\n        return children$2(ancestor, 'col');\n      } else {\n        return bind(columnGroups(ancestor), function (columnGroup) {\n          return children$2(columnGroup, 'col');\n        });\n      }\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var rows = function (ancestor) {\n      return firstLayer(ancestor, 'tr');\n    };\n    var columnGroups = function (ancestor) {\n      return table(ancestor).fold(constant([]), function (table) {\n        return children$2(table, 'colgroup');\n      });\n    };\n\n    var fromRowsOrColGroups = function (elems, getSection) {\n      return map(elems, function (row) {\n        if (name(row) === 'colgroup') {\n          var cells$1 = map(columns(row), function (column) {\n            var colspan = getAttrValue(column, 'span', 1);\n            return detail(column, 1, colspan);\n          });\n          return rowdata(row, cells$1, 'colgroup');\n        } else {\n          var cells$1 = map(cells(row), function (cell) {\n            var rowspan = getAttrValue(cell, 'rowspan', 1);\n            var colspan = getAttrValue(cell, 'colspan', 1);\n            return detail(cell, rowspan, colspan);\n          });\n          return rowdata(row, cells$1, getSection(row));\n        }\n      });\n    };\n    var getParentSection = function (group) {\n      return parent(group).map(function (parent) {\n        var parentName = name(parent);\n        return isValidSection(parentName) ? parentName : 'tbody';\n      }).getOr('tbody');\n    };\n    var fromTable = function (table) {\n      var rows$1 = rows(table);\n      var columnGroups$1 = columnGroups(table);\n      var elems = __spreadArrays(columnGroups$1, rows$1);\n      return fromRowsOrColGroups(elems, getParentSection);\n    };\n    var fromPastedRows = function (elems, section) {\n      return fromRowsOrColGroups(elems, function () {\n        return section;\n      });\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      var raw = warehouse.access[key(row, column)];\n      return raw !== undefined ? Optional.some(raw) : Optional.none();\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element);\n      });\n      return filtered.length > 0 ? Optional.some(filtered[0]) : Optional.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind(warehouse.all, function (r) {\n        return r.cells;\n      });\n      return filter(all, predicate);\n    };\n    var generateColumns = function (rowData) {\n      var columnsGroup = {};\n      var index = 0;\n      each(rowData.cells, function (column) {\n        var colspan = column.colspan;\n        range(colspan, function (columnIndex) {\n          var colIndex = index + columnIndex;\n          columnsGroup[colIndex] = columnext(column.element, colspan, colIndex);\n        });\n        index += colspan;\n      });\n      return columnsGroup;\n    };\n    var generate = function (list) {\n      var access = {};\n      var cells = [];\n      var columns = {};\n      var maxRows = 0;\n      var maxColumns = 0;\n      var rowCount = 0;\n      each(list, function (rowData) {\n        if (rowData.section === 'colgroup') {\n          columns = generateColumns(rowData);\n        } else {\n          var currentRow_1 = [];\n          each(rowData.cells, function (rowCell) {\n            var start = 0;\n            while (access[key(rowCount, start)] !== undefined) {\n              start++;\n            }\n            var current = extended(rowCell.element, rowCell.rowspan, rowCell.colspan, rowCount, start);\n            for (var occupiedColumnPosition = 0; occupiedColumnPosition < rowCell.colspan; occupiedColumnPosition++) {\n              for (var occupiedRowPosition = 0; occupiedRowPosition < rowCell.rowspan; occupiedRowPosition++) {\n                var rowPosition = rowCount + occupiedRowPosition;\n                var columnPosition = start + occupiedColumnPosition;\n                var newpos = key(rowPosition, columnPosition);\n                access[newpos] = current;\n                maxColumns = Math.max(maxColumns, columnPosition + 1);\n              }\n            }\n            currentRow_1.push(current);\n          });\n          maxRows++;\n          cells.push(rowdata(rowData.element, currentRow_1, rowData.section));\n          rowCount++;\n        }\n      });\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: grid$1,\n        access: access,\n        all: cells,\n        columns: columns\n      };\n    };\n    var fromTable$1 = function (table) {\n      var list = fromTable(table);\n      return generate(list);\n    };\n    var justCells = function (warehouse) {\n      return bind(warehouse.all, function (w) {\n        return w.cells;\n      });\n    };\n    var justColumns = function (warehouse) {\n      return values(warehouse.columns);\n    };\n    var hasColumns = function (warehouse) {\n      return keys(warehouse.columns).length > 0;\n    };\n    var getColumnAt = function (warehouse, columnIndex) {\n      return Optional.from(warehouse.columns[columnIndex]);\n    };\n    var Warehouse = {\n      fromTable: fromTable$1,\n      generate: generate,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells,\n      justColumns: justColumns,\n      hasColumns: hasColumns,\n      getColumnAt: getColumnAt\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column;\n      var rightEdge = detail.column + detail.colspan - 1;\n      var topEdge = detail.row;\n      var bottomEdge = detail.row + detail.rowspan - 1;\n      return leftEdge <= bounds.finishCol && rightEdge >= bounds.startCol && (topEdge <= bounds.finishRow && bottomEdge >= bounds.startRow);\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column >= bounds.startCol && detail.column + detail.colspan - 1 <= bounds.finishCol && detail.row >= bounds.startRow && detail.row + detail.rowspan - 1 <= bounds.finishRow;\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Optional.some(bounds) : Optional.none();\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row, detailB.row), Math.min(detailA.column, detailB.column), Math.max(detailA.row + detailA.rowspan - 1, detailB.row + detailB.rowspan - 1), Math.max(detailA.column + detailA.colspan - 1, detailB.column + detailB.colspan - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq$1);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq$1);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return isRectangular(warehouse, bounds);\n      });\n    };\n\n    var moveBy = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq$1).bind(function (detail) {\n        var startRow = row > 0 ? detail.row + detail.rowspan - 1 : detail.row;\n        var startCol = column > 0 ? detail.column + detail.colspan - 1 : detail.column;\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element;\n        });\n      });\n    };\n    var intercepts = function (warehouse, start, finish) {\n      return getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(inSelection, bounds));\n        return map(inside, function (detail) {\n          return detail.element;\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains$2(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element;\n      });\n    };\n\n    var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n      return table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return moveBy(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return intercepts(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq$1(table, firstTable) ? Optional.some(first) : parentCell(warehouse, first);\n      var optLastCell = eq$1(table, lastTable) ? Optional.some(last) : parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return intercepts(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return getBox(warehouse, first, last);\n    };\n    var getWarehouse = Warehouse.fromTable;\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var after$1 = function (marker, elements) {\n      each(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after(e, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove$2(rogue);\n      });\n    };\n    var remove$2 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$2(wrapper);\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$4 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n    var set$2 = function (element, value) {\n      return api.set(element, value);\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone$1 = function (element) {\n        return SugarElement.fromDom(element.dom.cloneNode(false));\n      };\n      var document = function (element) {\n        return documentOrOwner(element).dom;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var isNonEditable = function (element) {\n        return isElement(element) && get$2(element, 'contenteditable') === 'false';\n      };\n      var comparePosition = function (element, other) {\n        return element.dom.compareDocumentPosition(other.dom);\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone(source);\n        setAll(destination, as);\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants$1,\n          predicate: descendants\n        }),\n        styles: constant({\n          get: get$3,\n          getRaw: getRaw,\n          set: set$1,\n          remove: remove$1\n        }),\n        attrs: constant({\n          get: get$2,\n          set: set,\n          remove: remove,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before,\n          after: after,\n          afterAll: after$1,\n          append: append,\n          appendAll: append$1,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$2\n        }),\n        create: constant({\n          nu: SugarElement.fromTag,\n          clone: clone$1,\n          text: SugarElement.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          getText: get$4,\n          setText: set$2,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag,\n          isNonEditable: isNonEditable\n        }),\n        eq: eq$1,\n        is: is$1\n      };\n    }\n\n    var all$1 = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all$1(universe, look, elements, unsafeOne) : Optional.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq$2 = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find(pruned1, function (x) {\n        return exists(pruned2, eq$2(universe, x));\n      });\n      return {\n        firstpath: pruned1,\n        secondpath: pruned2,\n        shared: shared\n      };\n    };\n\n    var sharedOne = oneAll;\n    var ancestors$3 = ancestors$2;\n\n    var universe = DomUniverse();\n    var sharedOne$1 = function (look, elements) {\n      return sharedOne(universe, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var ancestors$4 = function (start, finish, isRoot) {\n      return ancestors$3(universe, start, finish, isRoot);\n    };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq$1(element, rootTable);\n        };\n      };\n      if (eq$1(start, finish)) {\n        return Optional.some({\n          boxes: Optional.some([start]),\n          start: start,\n          finish: finish\n        });\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq$1(startTable, finishTable)) {\n              return Optional.some({\n                boxes: intercepts$1(startTable, start, finish),\n                start: start,\n                finish: finish\n              });\n            } else if (contains$2(startTable, finishTable)) {\n              var ancestorCells = ancestors$1(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Optional.some({\n                boxes: nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              });\n            } else if (contains$2(finishTable, startTable)) {\n              var ancestorCells = ancestors$1(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Optional.some({\n                boxes: nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              });\n            } else {\n              return ancestors$4(start, finish).shared.bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$1(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$1(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Optional.some({\n                    boxes: nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  });\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve = function (container, selector) {\n      var sels = descendants$1(container, selector);\n      return sels.length > 0 ? Optional.some(sels) : Optional.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find(boxes, function (box) {\n        return is(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant$1(container, firstSelectedSelector).bind(function (first) {\n        return descendant$1(container, lastSelectedSelector).bind(function (last) {\n          return sharedOne$1(lookupTable, [\n            first,\n            last\n          ]).map(function (table) {\n            return {\n              first: first,\n              last: last,\n              table: table\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant$1(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes.map(function (boxes) {\n              return {\n                boxes: boxes,\n                start: identified.start,\n                finish: identified.finish\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return moveBy$1(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n\n    var retrieve$1 = function (container, selector) {\n      return retrieve(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq$1(container, ancestor);\n        };\n        var sectionSelector = 'thead,tfoot,tbody,table';\n        var firstAncestor = ancestor$1(edges.first, sectionSelector, isRoot);\n        var lastAncestor = ancestor$1(edges.last, sectionSelector, isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq$1(fA, lA) ? getBox$1(edges.table, edges.first, edges.last) : Optional.none();\n          });\n        });\n      });\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var type$1 = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['element'] }\n    ]);\n    var cata = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var none$1 = type$1.none;\n    var multiple = type$1.multiple;\n    var single = type$1.single;\n\n    var Selections = function (lazyRoot, getStart, selectedSelector) {\n      var get = function () {\n        return retrieve$1(lazyRoot(), selectedSelector).fold(function () {\n          return getStart().map(single).getOrThunk(none$1);\n        }, function (cells) {\n          return multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var statsStruct = function (minRow, minCol, maxRow, maxCol) {\n      return {\n        minRow: minRow,\n        minCol: minCol,\n        maxRow: maxRow,\n        maxCol: maxCol\n      };\n    };\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      each$1(house.access, function (detail) {\n        if (isSelected(detail)) {\n          var startRow = detail.row;\n          var endRow = startRow + detail.rowspan - 1;\n          var startCol = detail.column;\n          var endCol = startCol + detail.colspan - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element;\n      var td = SugarElement.fromTag('td');\n      append(td, SugarElement.fromTag('br'));\n      var f = seenSelected ? append : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow || i > stats.maxRow || j < stats.minCol || j > stats.maxCol)) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (table, stats) {\n      var emptyRows = filter(firstLayer(table, 'tr'), function (row) {\n        return row.dom.childElementCount === 0;\n      });\n      each(emptyRows, remove$2);\n      if (stats.minCol === stats.maxCol || stats.minRow === stats.maxRow) {\n        each(firstLayer(table, 'th,td'), function (cell) {\n          remove(cell, 'rowspan');\n          remove(cell, 'colspan');\n        });\n      }\n      remove(table, 'width');\n      remove(table, 'height');\n      remove$1(table, 'width');\n      remove$1(table, 'height');\n    };\n    var extract = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is(detail.element, selectedSelector);\n      };\n      var list = fromTable(table);\n      var house = Warehouse.generate(list);\n      var stats = findSelectedStats(house, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = filterFirstLayer(table, 'th,td', function (cell) {\n        return is(cell, selector);\n      });\n      each(unselectedCells, remove$2);\n      fillInGaps(list, house, stats, isSelected);\n      clean(table, stats);\n      return table;\n    };\n\n    var nbsp = '\\xA0';\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children(deep(original));\n      append$1(nu, cloneChildren);\n      return nu;\n    };\n\n    var transferableAttributes = {\n      scope: [\n        'row',\n        'col'\n      ]\n    };\n    var createCell = function () {\n      var td = SugarElement.fromTag('td');\n      append(td, SugarElement.fromTag('br'));\n      return td;\n    };\n    var createCol = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createColgroup = function () {\n      return SugarElement.fromTag('colgroup');\n    };\n    var replace = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove(replica, k);\n        } else {\n          set(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var newRow = function (doc) {\n      return function () {\n        return SugarElement.fromTag('tr', doc.dom);\n      };\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$1(firstText, formatSelector, function (element) {\n          return eq$1(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove(clonedFormat, 'contenteditable');\n          append(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cloneAppropriateAttributes = function (original, clone) {\n      each$1(transferableAttributes, function (validAttributes, attributeName) {\n        return getOpt(original, attributeName).filter(function (attribute) {\n          return contains(validAttributes, attribute);\n        }).each(function (attribute) {\n          return set(clone, attributeName, attribute);\n        });\n      });\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var cloneCss = function (prev, clone) {\n        copy(prev.element, clone);\n        remove$1(clone, 'height');\n        if (prev.colspan !== 1) {\n          remove$1(prev.element, 'width');\n        }\n      };\n      var newCell = function (prev) {\n        var docu = owner(prev.element);\n        var td = SugarElement.fromTag(name(prev.element), docu.dom);\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element, td, formats) : td;\n        append(lastNode, SugarElement.fromTag('br'));\n        cloneCss(prev, td);\n        cloneAppropriateAttributes(prev.element, td);\n        mutate(prev.element, td);\n        return td;\n      };\n      var newCol = function (prev) {\n        var doc = owner(prev.element);\n        var col = SugarElement.fromTag(name(prev.element), doc.dom);\n        cloneCss(prev, col);\n        mutate(prev.element, col);\n        return col;\n      };\n      return {\n        col: newCol,\n        colgroup: createColgroup,\n        row: newRow(doc),\n        cell: newCell,\n        replace: replace,\n        gap: createCell\n      };\n    };\n    var paste = function (doc) {\n      return {\n        col: createCol,\n        colgroup: createColgroup,\n        row: newRow(doc),\n        cell: createCell,\n        replace: pasteReplace,\n        gap: createCell\n      };\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map(nodes, SugarElement.fromDom);\n    };\n\n    var selection = function (selections) {\n      return cata(selections.get(), constant([]), identity, pure);\n    };\n    var unmergable = function (selections) {\n      var hasSpan = function (elem, type) {\n        return getOpt(elem, type).exists(function (span) {\n          return parseInt(span, 10) > 1;\n        });\n      };\n      var hasRowOrColSpan = function (elem) {\n        return hasSpan(elem, 'rowspan') || hasSpan(elem, 'colspan');\n      };\n      var candidates = selection(selections);\n      return candidates.length > 0 && forall(candidates, hasRowOrColSpan) ? Optional.some(candidates) : Optional.none();\n    };\n    var mergable = function (table, selections, ephemera) {\n      return cata(selections.get(), Optional.none, function (cells) {\n        if (cells.length <= 1) {\n          return Optional.none();\n        } else {\n          return retrieveBox(table, ephemera.firstSelectedSelector, ephemera.lastSelectedSelector).map(function (bounds) {\n            return {\n              bounds: bounds,\n              cells: cells\n            };\n          });\n        }\n      }, Optional.none);\n    };\n\n    var strSelected = 'data-mce-selected';\n    var strSelectedSelector = 'td[' + strSelected + '],th[' + strSelected + ']';\n    var strAttributeSelector = '[' + strSelected + ']';\n    var strFirstSelected = 'data-mce-first-selected';\n    var strFirstSelectedSelector = 'td[' + strFirstSelected + '],th[' + strFirstSelected + ']';\n    var strLastSelected = 'data-mce-last-selected';\n    var strLastSelectedSelector = 'td[' + strLastSelected + '],th[' + strLastSelected + ']';\n    var attributeSelector = strAttributeSelector;\n    var ephemera = {\n      selected: strSelected,\n      selectedSelector: strSelectedSelector,\n      firstSelected: strFirstSelected,\n      firstSelectedSelector: strFirstSelectedSelector,\n      lastSelected: strLastSelected,\n      lastSelectedSelector: strLastSelectedSelector\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: cell,\n        mergable: Optional.none(),\n        unmergable: Optional.none(),\n        selection: [cell]\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: cell,\n        mergable: mergable(table, selections, ephemera),\n        unmergable: unmergable(selections),\n        selection: selection(selections)\n      };\n    };\n    var paste$1 = function (element, clipboard, generators) {\n      return {\n        element: element,\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n    var pasteRows = function (selections, cell, clipboard, generators) {\n      return {\n        selection: selection(selections),\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n\n    var extractSelected = function (cells) {\n      return table(cells[0]).map(deep).map(function (replica) {\n        return [extract(replica, attributeSelector)];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom, {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map(elements, function (element) {\n        return element.dom.innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions, cellSelection) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          cata(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var cellOpt = Optional.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          cellOpt.each(function (domCell) {\n            var cell = SugarElement.fromDom(domCell);\n            table(cell).each(function (table) {\n              var elements = filter(fromHtml$1(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              var isTable = function (elm) {\n                return name(elm) === 'table';\n              };\n              if (elements.length === 1 && isTable(elements[0])) {\n                e.preventDefault();\n                var doc = SugarElement.fromDom(editor.getDoc());\n                var generators = paste(doc);\n                var targets = paste$1(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function (rng) {\n                  editor.selection.setRng(rng);\n                  editor.focus();\n                  cellSelection.clear(table);\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n\n    var adt = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt);\n\n    var neighbours = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize, resize) {\n      var result = input.slice(0);\n      var context = neighbours(input, column);\n      var onNone = constant(map(result, constant(0)));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onLeft = function (index, next) {\n        return resize.calcLeftEdgeDeltas(result, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onMiddle = function (prev, index, next) {\n        return resize.calcMiddleDeltas(result, prev, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onRight = function (prev, index) {\n        return resize.calcRightEdgeDeltas(result, prev, index, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var bindFrom = function (a, f) {\n      return a !== undefined && a !== null ? f(a) : Optional.none();\n    };\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$3(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$3(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var get$5 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var columns$1 = function (warehouse) {\n      var grid = warehouse.grid;\n      var cols = range(grid.columns, identity);\n      var rowsArr = range(grid.rows, identity);\n      return map(cols, function (col) {\n        var getBlock = function () {\n          return bind(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column === col;\n            }).toArray();\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.colspan === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n    var decide = function (getBlock, isSingle, getFallback) {\n      var inBlock = getBlock();\n      var singleInBlock = find(inBlock, isSingle);\n      var detailOption = singleInBlock.orThunk(function () {\n        return Optional.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element;\n      });\n    };\n    var rows$1 = function (warehouse) {\n      var grid = warehouse.grid;\n      var rowsArr = range(grid.rows, identity);\n      var cols = range(grid.columns, identity);\n      return map(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Optional.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Optional.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Optional.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$3(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var api$2 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$6 = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = function (row, y) {\n      return {\n        row: row,\n        y: y\n      };\n    };\n    var colInfo = function (col, x) {\n      return {\n        col: col,\n        x: x\n      };\n    };\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left + getOuter(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left;\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop = function (cell) {\n      return absolute(cell).top;\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell) + getOuter$1(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop\n    };\n    var ltr = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var detect$4 = onDirection(ltr, rtl);\n    var width = {\n      delta: function (amount, table) {\n        return detect$4(table).delta(amount, table);\n      },\n      positions: function (cols, table) {\n        return detect$4(table).positions(cols, table);\n      },\n      edge: function (cell) {\n        return detect$4(cell).edge(cell);\n      }\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n\n    var needManualCalc = function () {\n      var browser = detect$3().browser;\n      return browser.isIE() || browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      var num = parseFloat(px);\n      return isNaN(num) ? fallback : num;\n    };\n    var getProp = function (elm, name, fallback) {\n      return toNumber(get$3(elm, name), fallback);\n    };\n    var getCalculatedHeight = function (cell) {\n      var height = cell.dom.getBoundingClientRect().height;\n      var boxSizing = get$3(cell, 'box-sizing');\n      if (boxSizing === 'border-box') {\n        return height;\n      } else {\n        var paddingTop = getProp(cell, 'padding-top', 0);\n        var paddingBottom = getProp(cell, 'padding-bottom', 0);\n        var borderTop = getProp(cell, 'border-top-width', 0);\n        var borderBottom = getProp(cell, 'border-bottom-width', 0);\n        var borders = borderTop + borderBottom;\n        return height - paddingTop - paddingBottom - borders;\n      }\n    };\n    var getCalculatedWidth = function (cell) {\n      var width = cell.dom.getBoundingClientRect().width;\n      var boxSizing = get$3(cell, 'box-sizing');\n      if (boxSizing === 'border-box') {\n        return width;\n      } else {\n        var paddingLeft = getProp(cell, 'padding-left', 0);\n        var paddingRight = getProp(cell, 'padding-right', 0);\n        var borderLeft = getProp(cell, 'border-left-width', 0);\n        var borderRight = getProp(cell, 'border-right-width', 0);\n        var borders = borderLeft + borderRight;\n        return width - paddingLeft - paddingRight - borders;\n      }\n    };\n    var getHeight = function (cell) {\n      return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', get$6(cell));\n    };\n    var getWidth = function (cell) {\n      return needManualCalc() ? getCalculatedWidth(cell) : getProp(cell, 'width', get$5(cell));\n    };\n\n    var rPercentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var rPixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var getPercentSize = function (elm, getter) {\n      var relativeParent = offsetParent(elm).getOr(getBody(owner(elm)));\n      return getter(elm) / getter(relativeParent) * 100;\n    };\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRaw(cell, 'height').getOrThunk(function () {\n        return getHeight(cell) + 'px';\n      });\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseInt(value, 10);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$6(cell);\n      }\n      return normalizePixelSize(value, cell, get$6, setHeight);\n    };\n    var get$7 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getRawWidth = function (element) {\n      var cssWidth = getRaw(element, 'width');\n      return cssWidth.fold(function () {\n        return Optional.from(get$2(element, 'width'));\n      }, function (width) {\n        return Optional.some(width);\n      });\n    };\n    var normalizePercentageWidth = function (cellWidth, tableSize) {\n      return cellWidth / tableSize.pixelWidth() * 100;\n    };\n    var choosePercentageSize = function (element, width, tableSize) {\n      var percentMatch = rPercentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        return parseFloat(percentMatch[1]);\n      } else {\n        var intWidth = getWidth(element);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }\n    };\n    var getPercentageWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        var intWidth = get$5(cell);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }, function (w) {\n        return choosePercentageSize(cell, w, tableSize);\n      });\n    };\n    var normalizePixelWidth = function (cellWidth, tableSize) {\n      return cellWidth / 100 * tableSize.pixelWidth();\n    };\n    var choosePixelSize = function (element, width, tableSize) {\n      var pixelMatch = rPixelBasedSizeRegex.exec(width);\n      if (pixelMatch !== null) {\n        return parseInt(pixelMatch[1], 10);\n      }\n      var percentMatch = rPercentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        var floatWidth = parseFloat(percentMatch[1]);\n        return normalizePixelWidth(floatWidth, tableSize);\n      }\n      return getWidth(element);\n    };\n    var getPixelWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        return getWidth(cell);\n      }, function (w) {\n        return choosePixelSize(cell, w, tableSize);\n      });\n    };\n    var getHeight$1 = function (cell) {\n      return get$7(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth(cell);\n      return width.bind(function (w) {\n        return parse(w, [\n          'fixed',\n          'relative',\n          'empty'\n        ]);\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var getPixelTableWidth = function (table) {\n      return get$5(table) + 'px';\n    };\n    var getPercentTableWidth = function (table) {\n      return getPercentSize(table, get$5) + '%';\n    };\n    var isPercentSizing = function (table) {\n      return getRawWidth(table).exists(function (size) {\n        return rPercentageBasedSizeRegex.test(size);\n      });\n    };\n    var isPixelSizing = function (table) {\n      return getRawWidth(table).exists(function (size) {\n        return rPixelBasedSizeRegex.test(size);\n      });\n    };\n    var isNoneSizing = function (table) {\n      return getRawWidth(table).isNone();\n    };\n    var percentageBasedSizeRegex = constant(rPercentageBasedSizeRegex);\n    var pixelBasedSizeRegex = constant(rPixelBasedSizeRegex);\n\n    var isCol = isTag('col');\n    var getRaw$1 = function (cell, property, getter) {\n      return getRaw(cell, property).fold(function () {\n        return getter(cell) + 'px';\n      }, function (raw) {\n        return raw;\n      });\n    };\n    var getRawW = function (cell, tableSize) {\n      var fallback = function (e) {\n        return isCol(e) ? get$5(e) : getPixelWidth(e, tableSize);\n      };\n      return getRaw$1(cell, 'width', fallback);\n    };\n    var getRawH = function (cell) {\n      return getRaw$1(cell, 'height', getHeight$1);\n    };\n    var justCols = function (warehouse) {\n      return map(Warehouse.justColumns(warehouse), function (column) {\n        return Optional.from(column.element);\n      });\n    };\n    var isValidColumn = function (cell) {\n      return !isCol(cell) || getRaw(cell, 'width').isSome();\n    };\n    var getDimension = function (cellOpt, index, backups, filter, getter, fallback) {\n      return cellOpt.filter(filter).fold(function () {\n        return fallback(deduce(backups, index));\n      }, function (cell) {\n        return getter(cell);\n      });\n    };\n    var getWidthFrom = function (warehouse, table, getWidth, fallback, tableSize) {\n      var columnCells = columns$1(warehouse);\n      var columns = Warehouse.hasColumns(warehouse) ? justCols(warehouse) : columnCells;\n      var backups = [Optional.some(width.edge(table))].concat(map(width.positions(columnCells, table), function (pos) {\n        return pos.map(function (p) {\n          return p.x;\n        });\n      }));\n      var colFilter = not(hasColspan);\n      return map(columns, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, colFilter, function (column) {\n          if (isValidColumn(column)) {\n            return getWidth(column, tableSize);\n          } else {\n            var cell = bindFrom(columnCells[c], identity);\n            return getDimension(cell, c, backups, colFilter, function (cell) {\n              return fallback(Optional.some(get$5(cell)));\n            }, fallback);\n          }\n        }, fallback);\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getRawW, getDeduced, tableSize);\n    };\n    var getPercentageWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      }, tableSize);\n    };\n    var getPixelWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPixelWidth, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      }, tableSize);\n    };\n    var getHeightFrom = function (warehouse, table, direction, getHeight, fallback) {\n      var rows = rows$1(warehouse);\n      var backups = [Optional.some(direction.edge(table))].concat(map(direction.positions(rows, table), function (pos) {\n        return pos.map(function (p) {\n          return p.y;\n        });\n      }));\n      return map(rows, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, not(hasRowspan), getHeight, fallback);\n      });\n    };\n    var getPixelHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getHeight$1, function (deduced) {\n        return deduced.getOrThunk(minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getRawH, getDeduced);\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidthForCells = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var width = total(cell.column, cell.column + cell.colspan, widths);\n        return {\n          element: cell.element,\n          width: width,\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateWidthForColumns = function (warehouse, widths) {\n      var groups = Warehouse.justColumns(warehouse);\n      return map(groups, function (column, index) {\n        return {\n          element: column.element,\n          width: widths[index],\n          colspan: column.colspan\n        };\n      });\n    };\n    var recalculateHeightForCells = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var height = total(cell.row, cell.row + cell.rowspan, heights);\n        return {\n          element: cell.element,\n          height: height,\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map(warehouse.all, function (row, i) {\n        return {\n          element: row.element,\n          height: heights[i]\n        };\n      });\n    };\n\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var recalculate = function (warehouse, widths) {\n      if (Warehouse.hasColumns(warehouse)) {\n        return recalculateWidthForColumns(warehouse, widths);\n      } else {\n        return recalculateWidthForCells(warehouse, widths);\n      }\n    };\n    var recalculateAndApply = function (warehouse, widths, tableSize) {\n      var newSizes = recalculate(warehouse, widths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element, cell.width);\n      });\n    };\n    var adjustWidth = function (table, delta, index, resizing, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var step = tableSize.getCellDelta(delta);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      var isLastColumn = index === warehouse.grid.columns - 1;\n      var clampedStep = resizing.clampTableDelta(widths, index, step, tableSize.minCellWidth(), isLastColumn);\n      var deltas = determine(widths, index, clampedStep, tableSize, resizing);\n      var newWidths = map(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      recalculateAndApply(warehouse, newWidths, tableSize);\n      resizing.resizeTable(tableSize.adjustTableWidth, clampedStep, isLastColumn);\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = Warehouse.fromTable(table);\n      var heights = getPixelHeights(warehouse, table, direction);\n      var newHeights = map(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, minHeight()) : dy;\n      });\n      var newCellSizes = recalculateHeightForCells(warehouse, newHeights);\n      var newRowSizes = matchRowHeight(warehouse, newHeights);\n      each(newRowSizes, function (row) {\n        setHeight(row.element, row.height);\n      });\n      each(newCellSizes, function (cell) {\n        setHeight(cell.element, cell.height);\n      });\n      var total = sumUp(newHeights);\n      setHeight(table, total);\n    };\n    var adjustWidthTo = function (table, list, tableSize) {\n      var warehouse = Warehouse.generate(list);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      recalculateAndApply(warehouse, widths, tableSize);\n    };\n\n    var zero = function (array) {\n      return map(array, constant(0));\n    };\n    var surround = function (sizes, startIndex, endIndex, results, f) {\n      return f(sizes.slice(0, startIndex)).concat(results).concat(f(sizes.slice(endIndex)));\n    };\n    var clampDeltaHelper = function (predicate) {\n      return function (sizes, index, delta, minCellSize) {\n        if (!predicate(delta)) {\n          return delta;\n        } else {\n          var newSize = Math.max(minCellSize, sizes[index] - Math.abs(delta));\n          var diff = Math.abs(newSize - sizes[index]);\n          return delta >= 0 ? diff : -diff;\n        }\n      };\n    };\n    var clampNegativeDelta = clampDeltaHelper(function (delta) {\n      return delta < 0;\n    });\n    var clampDelta = clampDeltaHelper(always);\n    var resizeTable = function () {\n      var calcFixedDeltas = function (sizes, index, next, delta, minCellSize) {\n        var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          0\n        ], zero);\n      };\n      var calcRelativeDeltas = function (sizes, index, delta, minCellSize) {\n        var ratio = (100 + delta) / 100;\n        var newThis = Math.max(minCellSize, (sizes[index] + delta) / ratio);\n        return map(sizes, function (size, idx) {\n          var newSize = idx === index ? newThis : size / ratio;\n          return newSize - size;\n        });\n      };\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize, relativeSizing) {\n        if (relativeSizing) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          return calcFixedDeltas(sizes, index, next, delta, minCellSize);\n        }\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize, relativeSizing) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize, relativeSizing);\n      };\n      var resizeTable = function (resizer, delta) {\n        return resizer(delta);\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, index, delta, minCellSize, relativeSizing) {\n        if (relativeSizing) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n          return zero(sizes.slice(0, index)).concat([clampedDelta]);\n        }\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampNegativeDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas\n      };\n    };\n    var preserveTable = function () {\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize) {\n        var idx = delta >= 0 ? next : index;\n        var clampedDelta = clampDelta(sizes, idx, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          -clampedDelta\n        ], zero);\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize);\n      };\n      var resizeTable = function (resizer, delta, isLastColumn) {\n        if (isLastColumn) {\n          resizer(delta);\n        }\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, _index, delta, _minCellSize, relativeSizing) {\n        if (relativeSizing) {\n          return zero(sizes);\n        } else {\n          var diff = delta / sizes.length;\n          return map(sizes, constant(diff));\n        }\n      };\n      var clampTableDelta = function (sizes, index, delta, minCellSize, isLastColumn) {\n        if (isLastColumn) {\n          if (delta >= 0) {\n            return delta;\n          } else {\n            var maxDelta = foldl(sizes, function (a, b) {\n              return a + b - minCellSize;\n            }, 0);\n            return Math.max(-maxDelta, delta);\n          }\n        } else {\n          return clampNegativeDelta(sizes, index, delta, minCellSize);\n        }\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampTableDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas\n      };\n    };\n\n    var only = function (element, isResizable) {\n      var parent = Optional.from(element.dom.documentElement).map(SugarElement.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var detached = function (editable, chrome, isResizable) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin,\n        isResizable: isResizable\n      };\n    };\n    var body$1 = function (editable, chrome, isResizable) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body$1\n    };\n\n    var adt$1 = Adt.generate([\n      { invalid: ['raw'] },\n      { pixels: ['value'] },\n      { percent: ['value'] }\n    ]);\n    var validateFor = function (suffix, type, value) {\n      var rawAmount = value.substring(0, value.length - suffix.length);\n      var amount = parseFloat(rawAmount);\n      return rawAmount === amount.toString() ? type(amount) : adt$1.invalid(value);\n    };\n    var from$1 = function (value) {\n      if (endsWith(value, '%')) {\n        return validateFor('%', adt$1.percent, value);\n      }\n      if (endsWith(value, 'px')) {\n        return validateFor('px', adt$1.pixels, value);\n      }\n      return adt$1.invalid(value);\n    };\n    var Size = __assign(__assign({}, adt$1), { from: from$1 });\n\n    var redistributeToPercent = function (widths, totalWidth) {\n      return map(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          var ratio = px / totalWidth * 100;\n          return ratio + '%';\n        }, function (pc) {\n          return pc + '%';\n        });\n      });\n    };\n    var redistributeToPx = function (widths, totalWidth, newTotalWidth) {\n      var scale = newTotalWidth / totalWidth;\n      return map(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          return px * scale + 'px';\n        }, function (pc) {\n          return pc / 100 * newTotalWidth + 'px';\n        });\n      });\n    };\n    var redistributeEmpty = function (newWidthType, columns) {\n      var f = newWidthType.fold(function () {\n        return constant('');\n      }, function (pixels) {\n        var num = pixels / columns;\n        return constant(num + 'px');\n      }, function () {\n        var num = 100 / columns;\n        return constant(num + '%');\n      });\n      return range(columns, f);\n    };\n    var redistributeValues = function (newWidthType, widths, totalWidth) {\n      return newWidthType.fold(function () {\n        return widths;\n      }, function (px) {\n        return redistributeToPx(widths, totalWidth, px);\n      }, function (_pc) {\n        return redistributeToPercent(widths, totalWidth);\n      });\n    };\n    var redistribute = function (widths, totalWidth, newWidth) {\n      var newType = Size.from(newWidth);\n      var floats = forall(widths, function (s) {\n        return s === '0px';\n      }) ? redistributeEmpty(newType, widths.length) : redistributeValues(newType, widths, totalWidth);\n      return normalize(floats);\n    };\n    var sum = function (values, fallback) {\n      if (values.length === 0) {\n        return fallback;\n      }\n      return foldr(values, function (rest, v) {\n        return Size.from(v).fold(constant(0), identity, identity) + rest;\n      }, 0);\n    };\n    var roundDown = function (num, unit) {\n      var floored = Math.floor(num);\n      return {\n        value: floored + unit,\n        remainder: num - floored\n      };\n    };\n    var add = function (value, amount) {\n      return Size.from(value).fold(constant(value), function (px) {\n        return px + amount + 'px';\n      }, function (pc) {\n        return pc + amount + '%';\n      });\n    };\n    var normalize = function (values) {\n      if (values.length === 0) {\n        return values;\n      }\n      var scan = foldr(values, function (rest, value) {\n        var info = Size.from(value).fold(function () {\n          return {\n            value: value,\n            remainder: 0\n          };\n        }, function (num) {\n          return roundDown(num, 'px');\n        }, function (num) {\n          return {\n            value: num + '%',\n            remainder: 0\n          };\n        });\n        return {\n          output: [info.value].concat(rest.output),\n          remainder: rest.remainder + info.remainder\n        };\n      }, {\n        output: [],\n        remainder: 0\n      });\n      var r = scan.output;\n      return r.slice(0, r.length - 1).concat([add(r[r.length - 1], Math.round(scan.remainder))]);\n    };\n    var validate = Size.from;\n\n    var redistributeToW = function (newWidths, cells, unit) {\n      each(cells, function (cell) {\n        var widths = newWidths.slice(cell.column, cell.colspan + cell.column);\n        var w = sum(widths, minWidth());\n        set$1(cell.element, 'width', w + unit);\n      });\n    };\n    var redistributeToColumns = function (newWidths, columns, unit) {\n      each(columns, function (column, index) {\n        var width = sum([newWidths[index]], minWidth());\n        set$1(column.element, 'width', width + unit);\n      });\n    };\n    var redistributeToH = function (newHeights, rows, cells, unit) {\n      each(cells, function (cell) {\n        var heights = newHeights.slice(cell.row, cell.rowspan + cell.row);\n        var h = sum(heights, minHeight());\n        set$1(cell.element, 'height', h + unit);\n      });\n      each(rows, function (row, i) {\n        set$1(row.element, 'height', newHeights[i]);\n      });\n    };\n    var getUnit = function (newSize) {\n      return validate(newSize).fold(constant('px'), constant('px'), constant('%'));\n    };\n    var redistribute$1 = function (table, optWidth, optHeight, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var rows = warehouse.all;\n      var cells = Warehouse.justCells(warehouse);\n      var columns = Warehouse.justColumns(warehouse);\n      optWidth.each(function (newWidth) {\n        var widthUnit = getUnit(newWidth);\n        var totalWidth = get$5(table);\n        var oldWidths = getRawWidths(warehouse, table, tableSize);\n        var nuWidths = redistribute(oldWidths, totalWidth, newWidth);\n        if (Warehouse.hasColumns(warehouse)) {\n          redistributeToColumns(nuWidths, columns, widthUnit);\n        } else {\n          redistributeToW(nuWidths, cells, widthUnit);\n        }\n        set$1(table, 'width', newWidth);\n      });\n      optHeight.each(function (newHeight) {\n        var hUnit = getUnit(newHeight);\n        var totalHeight = get$6(table);\n        var oldHeights = getRawHeights(warehouse, table, height);\n        var nuHeights = redistribute(oldHeights, totalHeight, newHeight);\n        redistributeToH(nuHeights, rows, cells, hUnit);\n        set$1(table, 'height', newHeight);\n      });\n    };\n    var isPercentSizing$1 = isPercentSizing;\n    var isPixelSizing$1 = isPixelSizing;\n    var isNoneSizing$1 = isNoneSizing;\n    var getPercentTableWidth$1 = getPercentTableWidth;\n\n    var getGridSize = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      return warehouse.grid;\n    };\n\n    var Event = function (fields) {\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = {};\n        each(fields, function (name, i) {\n          event[name] = args[i];\n        });\n        each(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create = function (typeDefs) {\n      var registry = map$1(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map$1(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var sort = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter(keys, function (key) {\n        return !contains(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    function InDrag () {\n      var previous = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = create({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    }\n\n    function NoDrag () {\n      return {\n        onEvent: noop,\n        reset: noop\n      };\n    }\n\n    function Movement () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    }\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = create({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last$2(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info);\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$2 = always;\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$2, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var read = function (element, attr) {\n      var value = get$2(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$1 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$3 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$8 = function (element) {\n      return read(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$1(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$3(element, 'class', clazz);\n    };\n\n    var add$3 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$8(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$5 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$1 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles = css('ephox-dragster');\n    var resolve = styles.resolve;\n\n    var Blocker = function (options) {\n      var settings = __assign({ layerClass: resolve('blocker') }, options);\n      var div = SugarElement.fromTag('div');\n      set(div, 'role', 'presentation');\n      setAll$1(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add$3(div, resolve('blocker'));\n      add$3(div, settings.layerClass);\n      var element = function () {\n        return div;\n      };\n      var destroy = function () {\n        remove$2(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var compare = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n    var extract$1 = function (event) {\n      return Optional.some(SugarPosition(event.x, event.y));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left, info.top);\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind$2(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind$2(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind$2(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind$2(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$2(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract$1,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var transform = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return setup(mutation, mode, settings);\n    };\n\n    var isContentEditableTrue = function (elm) {\n      return get$2(elm, 'contenteditable') === 'true';\n    };\n    var findClosestContentEditable = function (target, isRoot) {\n      return closest$1(target, '[contenteditable]', isRoot);\n    };\n\n    var styles$1 = css('ephox-snooker');\n    var resolve$1 = styles$1.resolve;\n\n    var Mutation = function () {\n      var events = create({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = create({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Optional.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta, event.yDelta, t);\n        });\n      });\n      var assign = function (t) {\n        target = Optional.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var col = function (column, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll$1(bar, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(bar, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n    var row = function (r, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll$1(bar, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(bar, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n\n    var resizeBar = resolve$1('resizer-bar');\n    var resizeRowBar = resolve$1('resizer-rows');\n    var resizeColBar = resolve$1('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var resizableRows = function (warehouse, isResizable) {\n      return bind(warehouse.all, function (row, i) {\n        return isResizable(row.element) ? [i] : [];\n      });\n    };\n    var resizableColumns = function (warehouse, isResizable) {\n      var resizableCols = [];\n      range(warehouse.grid.columns, function (index) {\n        var colElmOpt = Warehouse.getColumnAt(warehouse, index).map(function (col) {\n          return col.element;\n        });\n        if (colElmOpt.forall(isResizable)) {\n          resizableCols.push(index);\n        }\n      });\n      return filter(resizableCols, function (colIndex) {\n        var columnCells = Warehouse.filterItems(warehouse, function (cell) {\n          return cell.column === colIndex;\n        });\n        return forall(columnCells, function (cell) {\n          return isResizable(cell.element);\n        });\n      });\n    };\n    var destroy = function (wire) {\n      var previous = descendants$1(wire.parent(), '.' + resizeBar);\n      each(previous, remove$2);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each(positions, function (cpOption) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add$3(bar, resizeBar);\n          append(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = col(cp.col, cp.x - origin.left, position.top - origin.top, BAR_THICKNESS, tableHeight);\n        add$3(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = row(cp.row, position.left - origin.left, cp.y - origin.top, tableWidth, BAR_THICKNESS);\n        add$3(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (warhouse, wire, table, rows, cols) {\n      var position = absolute(table);\n      var isResizable = wire.isResizable;\n      var rowPositions = rows.length > 0 ? height.positions(rows, table) : [];\n      var resizableRowBars = rowPositions.length > 0 ? resizableRows(warhouse, isResizable) : [];\n      var resizableRowPositions = filter(rowPositions, function (_pos, i) {\n        return exists(resizableRowBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshRow(wire, resizableRowPositions, position, getOuter(table));\n      var colPositions = cols.length > 0 ? width.positions(cols, table) : [];\n      var resizableColBars = colPositions.length > 0 ? resizableColumns(warhouse, isResizable) : [];\n      var resizableColPositions = filter(colPositions, function (_pos, i) {\n        return exists(resizableColBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshCol(wire, resizableColPositions, position, getOuter$1(table));\n    };\n    var refresh = function (wire, table) {\n      destroy(wire);\n      if (wire.isResizable(table)) {\n        var warehouse = Warehouse.fromTable(table);\n        var rows = rows$1(warehouse);\n        var cols = columns$1(warehouse);\n        refreshGrid(warehouse, wire, table, rows, cols);\n      }\n    };\n    var each$2 = function (wire, f) {\n      var bars = descendants$1(wire.parent(), '.' + resizeBar);\n      each(bars, f);\n    };\n    var hide = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has$1(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has$1(element, resizeColBar);\n    };\n\n    var resizeBarDragging = resolve$1('resizer-bar-dragging');\n    var BarManager = function (wire) {\n      var mutation = BarMutation();\n      var resizing = transform(mutation, {});\n      var hoverTable = Optional.none();\n      var getResizer = function (element, type) {\n        return Optional.from(get$2(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target, 'data-row').each(function (_dataRow) {\n          var currentRow = getCssValue(event.target, 'top');\n          set$1(event.target, 'top', currentRow + event.yDelta + 'px');\n        });\n        getResizer(event.target, 'data-column').each(function (_dataCol) {\n          var currentCol = getCssValue(event.target, 'left');\n          set$1(event.target, 'left', currentCol + event.xDelta + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = getCssValue(target, dir);\n        var oldX = getAttrValue(target, 'data-initial-' + dir, 0);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            refresh(wire, table);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set(target, 'data-initial-' + dir, getCssValue(target, dir));\n        add$3(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind$2(wire.parent(), 'mousedown', function (event) {\n        if (isRowBar(event.target)) {\n          handler(event.target, 'top');\n        }\n        if (isColBar(event.target)) {\n          handler(event.target, 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq$1(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(function (table) {\n          return findClosestContentEditable(table, isRoot).exists(isContentEditableTrue);\n        });\n      };\n      var mouseover = bind$2(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target).fold(function () {\n          if (inBody(event.target)) {\n            destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Optional.some(table);\n          refresh(wire, table);\n        });\n      });\n      var destroy$1 = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        destroy(wire);\n      };\n      var refresh$1 = function (tbl) {\n        refresh(wire, tbl);\n      };\n      var events = create({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy$1,\n        refresh: refresh$1,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(hide, wire),\n        showBars: curry(show, wire),\n        events: events.registry\n      };\n    };\n\n    var create$1 = function (wire, resizing, lazySizing) {\n      var hdirection = height;\n      var vdirection = width;\n      var manager = BarManager(wire);\n      var events = create({\n        beforeResize: Event([\n          'table',\n          'type'\n        ]),\n        afterResize: Event([\n          'table',\n          'type'\n        ]),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'row');\n        var delta = hdirection.delta(event.delta, table);\n        adjustHeight(table, delta, event.row, hdirection);\n        events.trigger.afterResize(table, 'row');\n      });\n      manager.events.startAdjust.bind(function (_event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'col');\n        var delta = vdirection.delta(event.delta, table);\n        var tableSize = lazySizing(table);\n        adjustWidth(table, delta, event.column, resizing, tableSize);\n        events.trigger.afterResize(table, 'col');\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    };\n    var TableResize = { create: create$1 };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireTableSelectionChange = function (editor, cells, start, finish, otherCells) {\n      editor.fire('TableSelectionChange', {\n        cells: cells,\n        start: start,\n        finish: finish,\n        otherCells: otherCells\n      });\n    };\n    var fireTableSelectionClear = function (editor) {\n      editor.fire('TableSelectionClear');\n    };\n    var fireTableModified = function (editor, table, data) {\n      editor.fire('TableModified', __assign(__assign({}, data), { table: table }));\n    };\n\n    var defaultTableToolbar = 'tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol';\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var determineDefaultStyles = function (editor) {\n      if (isPixelsForced(editor)) {\n        var editorWidth = editor.getBody().offsetWidth;\n        return __assign(__assign({}, defaultStyles), { width: editorWidth + 'px' });\n      } else if (isResponsiveForced(editor)) {\n        return filter$1(defaultStyles, function (_value, key) {\n          return key !== 'width';\n        });\n      } else {\n        return defaultStyles;\n      }\n    };\n    var defaultAttributes = { border: '1' };\n    var defaultColumnResizingBehaviour = 'preservetable';\n    var getTableSizingMode = function (editor) {\n      return editor.getParam('table_sizing_mode', 'auto');\n    };\n    var getTableResponseWidth = function (editor) {\n      return editor.getParam('table_responsive_width');\n    };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', determineDefaultStyles(editor), 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var isPercentagesForced = function (editor) {\n      return getTableSizingMode(editor) === 'relative' || getTableResponseWidth(editor) === true;\n    };\n    var isPixelsForced = function (editor) {\n      return getTableSizingMode(editor) === 'fixed' || getTableResponseWidth(editor) === false;\n    };\n    var isResponsiveForced = function (editor) {\n      return getTableSizingMode(editor) === 'responsive';\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('table_toolbar', defaultTableToolbar);\n    };\n    var useColumnGroup = function (editor) {\n      return editor.getParam('table_use_colgroups', false, 'boolean');\n    };\n    var getTableHeaderType = function (editor) {\n      var defaultValue = 'section';\n      var value = editor.getParam('table_header_type', defaultValue, 'string');\n      var validValues = [\n        'section',\n        'cells',\n        'sectionCells',\n        'auto'\n      ];\n      if (!contains(validValues, value)) {\n        return defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getColumnResizingBehaviour = function (editor) {\n      var validModes = [\n        'preservetable',\n        'resizetable'\n      ];\n      var givenMode = editor.getParam('table_column_resizing', defaultColumnResizingBehaviour, 'string');\n      return find(validModes, function (mode) {\n        return mode === givenMode;\n      }).getOr(defaultColumnResizingBehaviour);\n    };\n    var isPreserveTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'preservetable';\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Optional.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Optional.some(cloneElements);\n      } else {\n        return Optional.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return isString(objectResizing) ? objectResizing === 'table' : objectResizing;\n    };\n\n    var getNodeName = function (elm) {\n      return elm.nodeName.toLowerCase();\n    };\n    var getBody$1 = function (editor) {\n      return SugarElement.fromDom(editor.getBody());\n    };\n    var getPixelWidth$1 = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq$1(element, getBody$1(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addPxSuffix = function (size) {\n      return /^\\d+(\\.\\d+)?$/.test(size) ? size + 'px' : size;\n    };\n    var removeDataStyle = function (table) {\n      remove(table, 'data-mce-style');\n      var removeStyleAttribute = function (element) {\n        return remove(element, 'data-mce-style');\n      };\n      each(cells(table), removeStyleAttribute);\n      each(columns(table), removeStyleAttribute);\n    };\n    var getRawWidth$1 = function (editor, elm) {\n      var raw = editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      return Optional.from(raw).filter(isNotEmpty);\n    };\n    var isPercentage = function (value) {\n      return /^(\\d+(\\.\\d+)?)%$/.test(value);\n    };\n    var isPixel = function (value) {\n      return /^(\\d+(\\.\\d+)?)px$/.test(value);\n    };\n    var getSelectionStart = function (editor) {\n      return SugarElement.fromDom(editor.selection.getStart());\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var noneSize = function (table) {\n      var getWidth = function () {\n        return get$5(table);\n      };\n      var zero = constant(0);\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: zero,\n        singleColumnWidth: constant([0]),\n        minCellWidth: zero,\n        setElementWidth: noop,\n        adjustTableWidth: noop,\n        isRelative: true,\n        label: 'none'\n      };\n    };\n    var percentageSize = function (initialWidth, table) {\n      var floatWidth = Cell(parseFloat(initialWidth));\n      var pixelWidth = Cell(get$5(table));\n      var getCellDelta = function (delta) {\n        return delta / pixelWidth.get() * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return minWidth() / pixelWidth.get() * 100;\n      };\n      var adjustTableWidth = function (delta) {\n        var currentWidth = floatWidth.get();\n        var change = delta / 100 * currentWidth;\n        var newWidth = currentWidth + change;\n        setPercentageWidth(table, newWidth);\n        floatWidth.set(newWidth);\n        pixelWidth.set(get$5(table));\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPercentageWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: floatWidth.get,\n        pixelWidth: pixelWidth.get,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: setPercentageWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: true,\n        label: 'percent'\n      };\n    };\n    var pixelSize = function (initialWidth, table) {\n      var width = Cell(initialWidth);\n      var getWidth = width.get;\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var adjustTableWidth = function (delta) {\n        var newWidth = getWidth() + delta;\n        setPixelWidth(table, newWidth);\n        width.set(newWidth);\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minWidth,\n        setElementWidth: setPixelWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: false,\n        label: 'pixel'\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(percentMatch[1], element);\n      }\n      var pixelMatch = pixelBasedSizeRegex().exec(width);\n      if (pixelMatch !== null) {\n        var intWidth = parseInt(pixelMatch[1], 10);\n        return pixelSize(intWidth, element);\n      }\n      var fallbackWidth = get$5(element);\n      return pixelSize(fallbackWidth, element);\n    };\n    var getTableSize = function (table) {\n      var width = getRawWidth(table);\n      return width.fold(function () {\n        return noneSize(table);\n      }, function (w) {\n        return chooseSize(table, w);\n      });\n    };\n    var TableSize = {\n      getTableSize: getTableSize,\n      pixelSize: pixelSize,\n      percentageSize: percentageSize,\n      noneSize: noneSize\n    };\n\n    var get$9 = function (editor, table) {\n      if (isPercentagesForced(editor)) {\n        var width = getRawWidth$1(editor, table.dom).filter(isPercentage).getOrThunk(function () {\n          return getPercentTableWidth$1(table);\n        });\n        return TableSize.percentageSize(width, table);\n      } else if (isPixelsForced(editor)) {\n        return TableSize.pixelSize(get$5(table), table);\n      } else {\n        return TableSize.getTableSize(table);\n      }\n    };\n\n    var cleanupLegacyAttributes = function (element) {\n      remove(element, 'width');\n    };\n    var convertToPercentSize = function (table, tableSize) {\n      var newWidth = getPercentTableWidth(table);\n      redistribute$1(table, Optional.some(newWidth), Optional.none(), tableSize);\n      cleanupLegacyAttributes(table);\n    };\n    var convertToPixelSize = function (table, tableSize) {\n      var newWidth = getPixelTableWidth(table);\n      redistribute$1(table, Optional.some(newWidth), Optional.none(), tableSize);\n      cleanupLegacyAttributes(table);\n    };\n    var convertToNoneSize = function (table) {\n      remove$1(table, 'width');\n      var columns$1 = columns(table);\n      var rowElements = columns$1.length > 0 ? columns$1 : cells(table);\n      each(rowElements, function (cell) {\n        remove$1(cell, 'width');\n        cleanupLegacyAttributes(cell);\n      });\n      cleanupLegacyAttributes(table);\n    };\n\n    var enforcePercentage = function (editor, table) {\n      var tableSizing = get$9(editor, table);\n      convertToPercentSize(table, tableSizing);\n    };\n    var enforcePixels = function (editor, table) {\n      var tableSizing = get$9(editor, table);\n      convertToPixelSize(table, tableSizing);\n    };\n    var enforceNone = convertToNoneSize;\n    var syncPixels = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      if (!Warehouse.hasColumns(warehouse)) {\n        each(cells(table), function (cell) {\n          var computedWidth = get$3(cell, 'width');\n          set$1(cell, 'width', computedWidth);\n          remove(cell, 'width');\n        });\n      }\n    };\n\n    var createContainer = function () {\n      var container = SugarElement.fromTag('div');\n      setAll$1(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append(body(), container);\n      return container;\n    };\n    var get$a = function (editor, isResizable) {\n      return editor.inline ? ResizeWire.body(getBody$1(editor), createContainer(), isResizable) : ResizeWire.only(SugarElement.fromDom(editor.getDoc()), isResizable);\n    };\n    var remove$6 = function (editor, wire) {\n      if (editor.inline) {\n        remove$2(wire.parent());\n      }\n    };\n\n    var barResizerPrefix = 'bar-';\n    var isResizable = function (elm) {\n      return get$2(elm, 'data-mce-resize') !== 'false';\n    };\n    var getResizeHandler = function (editor) {\n      var selectionRng = Optional.none();\n      var resize = Optional.none();\n      var wire = Optional.none();\n      var startW;\n      var startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(SugarElement.fromDom(editor.getBody()), isResizable));\n      };\n      var lazySizing = function (table) {\n        return get$9(editor, table);\n      };\n      var lazyResizingBehaviour = function () {\n        return isPreserveTableColumnResizing(editor) ? preserveTable() : resizeTable();\n      };\n      var getNumColumns = function (table) {\n        return getGridSize(table).columns;\n      };\n      var afterCornerResize = function (table, origin, width) {\n        var isRightEdgeResize = endsWith(origin, 'e');\n        if (startRawW === '') {\n          enforcePercentage(editor, table);\n        }\n        if (width !== startW && startRawW !== '') {\n          set$1(table, 'width', startRawW);\n          var resizing = lazyResizingBehaviour();\n          var tableSize = lazySizing(table);\n          var col = isPreserveTableColumnResizing(editor) || isRightEdgeResize ? getNumColumns(table) - 1 : 0;\n          adjustWidth(table, width - startW, col, resizing, tableSize);\n        } else if (isPercentage(startRawW)) {\n          var percentW = parseFloat(startRawW.replace('%', ''));\n          var targetPercentW = width * percentW / startW;\n          set$1(table, 'width', targetPercentW + '%');\n        }\n        if (isPixel(startRawW)) {\n          syncPixels(table);\n        }\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          remove$6(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var rawWire = get$a(editor, isResizable);\n        wire = Optional.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var resizing = lazyResizingBehaviour();\n          var sz = TableResize.create(rawWire, resizing, lazySizing);\n          sz.on();\n          sz.events.startDrag.bind(function (_event) {\n            selectionRng = Optional.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table.dom;\n            fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table;\n            var rawTable = table.dom;\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n            editor.undoManager.add();\n          });\n          resize = Optional.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          each(editor.dom.select('.mce-clonedresizable'), function (clone) {\n            editor.dom.addClass(clone, 'mce-' + getColumnResizingBehaviour(editor) + '-columns');\n          });\n          if (!isPixelSizing$1(table) && isPixelsForced(editor)) {\n            enforcePixels(editor, table);\n          } else if (!isPercentSizing$1(table) && isPercentagesForced(editor)) {\n            enforcePercentage(editor, table);\n          }\n          if (isNoneSizing$1(table) && startsWith(e.origin, barResizerPrefix)) {\n            enforcePercentage(editor, table);\n          }\n          startW = e.width;\n          startRawW = isResponsiveForced(editor) ? '' : getRawWidth$1(editor, targetElm).getOr('');\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          var origin_1 = e.origin;\n          if (startsWith(origin_1, 'corner-')) {\n            afterCornerResize(table, origin_1, e.width);\n          }\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        lazyResize().each(function (resize) {\n          if (editor.mode.isReadOnly()) {\n            resize.hideBars();\n          } else {\n            resize.showBars();\n          }\n        });\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n\n    var scan = function (universe, element, direction) {\n      if (universe.property().isText(element) && universe.property().getText(element).trim().length === 0 || universe.property().isComment(element)) {\n        return direction(element).bind(function (elem) {\n          return scan(universe, elem, direction).orThunk(function () {\n            return Optional.some(elem);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var toEnd = function (universe, element) {\n      if (universe.property().isText(element)) {\n        return universe.property().getText(element).length;\n      }\n      var children = universe.property().children(element);\n      return children.length;\n    };\n    var freefallRtl = function (universe, element) {\n      var candidate = scan(universe, element, universe.query().prevSibling).getOr(element);\n      if (universe.property().isText(candidate)) {\n        return point(candidate, toEnd(universe, candidate));\n      }\n      var children = universe.property().children(candidate);\n      return children.length > 0 ? freefallRtl(universe, children[children.length - 1]) : point(candidate, toEnd(universe, candidate));\n    };\n\n    var freefallRtl$1 = freefallRtl;\n\n    var universe$1 = DomUniverse();\n    var freefallRtl$2 = function (element) {\n      return freefallRtl$1(universe$1, element);\n    };\n\n    var halve = function (main, other) {\n      var width = getGenericWidth(main);\n      width.each(function (w) {\n        var newWidth = w.value / 2;\n        setGenericWidth(main, newWidth, w.unit);\n        setGenericWidth(other, newWidth, w.unit);\n      });\n    };\n\n    var addCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells;\n      var before = cells.slice(0, index);\n      var after = cells.slice(index);\n      var newCells = before.concat([cell]).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells;\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(cells, gridRow.section);\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells;\n      var r = map(cells, f);\n      return rowcells(r, gridRow.section);\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element;\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells.length;\n    };\n    var extractGridDetails = function (grid) {\n      var result = partition(grid, function (row) {\n        return row.section === 'colgroup';\n      });\n      return {\n        rows: result.fail,\n        cols: result.pass\n      };\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove(element, property);\n      } else {\n        set(element, property, value);\n      }\n    };\n    var insert = function (table, selector, element) {\n      last(children$2(table, selector)).fold(function () {\n        return prepend(table, element);\n      }, function (child) {\n        return after(child, element);\n      });\n    };\n    var generateSection = function (table, sectionName) {\n      var section = child$2(table, sectionName).getOrThunk(function () {\n        var newSection = SugarElement.fromTag(sectionName, owner(table).dom);\n        if (sectionName === 'thead') {\n          insert(table, 'caption,colgroup', newSection);\n        } else if (sectionName === 'colgroup') {\n          insert(table, 'caption', newSection);\n        } else {\n          append(table, newSection);\n        }\n        return newSection;\n      });\n      empty(section);\n      return section;\n    };\n    var render = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var syncRows = function (gridSection) {\n        return map(gridSection, function (row) {\n          if (row.isNew) {\n            newRows.push(row.element);\n          }\n          var tr = row.element;\n          empty(tr);\n          each(row.cells, function (cell) {\n            if (cell.isNew) {\n              newCells.push(cell.element);\n            }\n            setIfNot(cell.element, 'colspan', cell.colspan, 1);\n            setIfNot(cell.element, 'rowspan', cell.rowspan, 1);\n            append(tr, cell.element);\n          });\n          return tr;\n        });\n      };\n      var syncColGroup = function (gridSection) {\n        return bind(gridSection, function (colGroup) {\n          return map(colGroup.cells, function (col) {\n            setIfNot(col.element, 'span', col.colspan, 1);\n            return col.element;\n          });\n        });\n      };\n      var renderSection = function (gridSection, sectionName) {\n        var section = generateSection(table, sectionName);\n        var sync = sectionName === 'colgroup' ? syncColGroup : syncRows;\n        var sectionElems = sync(gridSection);\n        append$1(section, sectionElems);\n      };\n      var removeSection = function (sectionName) {\n        child$2(table, sectionName).each(remove$2);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      var columnGroupsSection = [];\n      each(grid, function (row) {\n        switch (row.section) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        case 'colgroup':\n          columnGroupsSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(columnGroupsSection, 'colgroup');\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: newRows,\n        newCells: newCells\n      };\n    };\n    var copy$2 = function (grid) {\n      return map(grid, function (row) {\n        var tr = shallow(row.element);\n        each(row.cells, function (cell) {\n          var clonedCell = deep(cell.element);\n          setIfNot(clonedCell, 'colspan', cell.colspan, 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan, 1);\n          append(tr, clonedCell);\n        });\n        return tr;\n      });\n    };\n\n    var getColumn = function (grid, index) {\n      return map(grid, function (row) {\n        return getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element, x.element);\n      });\n      return index.fold(function () {\n        return xs.length;\n      }, function (ind) {\n        return ind;\n      });\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var restOfRow = getRow(grid, row).cells.slice(column);\n      var endColIndex = findDiff(restOfRow, comparator);\n      var restOfColumn = getColumn(grid, column).slice(row);\n      var endRowIndex = findDiff(restOfColumn, comparator);\n      return {\n        colspan: endColIndex,\n        rowspan: endRowIndex\n      };\n    };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map(grid, function (row) {\n        return map(row.cells, never);\n      });\n      var updateSeen = function (rowIndex, columnIndex, rowspan, colspan) {\n        for (var row = rowIndex; row < rowIndex + rowspan; row++) {\n          for (var column = columnIndex; column < columnIndex + colspan; column++) {\n            seen[row][column] = true;\n          }\n        }\n      };\n      return map(grid, function (row, rowIndex) {\n        var details = bind(row.cells, function (cell, columnIndex) {\n          if (seen[rowIndex][columnIndex] === false) {\n            var result = subgrid(grid, rowIndex, columnIndex, comparator);\n            updateSeen(rowIndex, columnIndex, result.rowspan, result.colspan);\n            return [detailnew(cell.element, result.rowspan, result.colspan, cell.isNew)];\n          } else {\n            return [];\n          }\n        });\n        return rowdetails(details, row.section);\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      if (Warehouse.hasColumns(warehouse)) {\n        var groupElementNew = map(Warehouse.justColumns(warehouse), function (column) {\n          return elementnew(column.element, isNew);\n        });\n        grid.push(rowcells(groupElementNew, 'colgroup'));\n      }\n      for (var rowIndex = 0; rowIndex < warehouse.grid.rows; rowIndex++) {\n        var rowCells = [];\n        for (var columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++) {\n          var element = Warehouse.getAt(warehouse, rowIndex, columnIndex).map(function (item) {\n            return elementnew(item.element, isNew);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true);\n          });\n          rowCells.push(element);\n        }\n        var row = rowcells(rowCells, warehouse.all[rowIndex].section);\n        grid.push(row);\n      }\n      return grid;\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return toGrid(warehouse, generators, false);\n    };\n    var deriveRows = function (rendered, generators) {\n      var findRow = function (details) {\n        var rowOfCells = findMap(details, function (detail) {\n          return parent(detail.element).map(function (row) {\n            var isNew = parent(row).isNone();\n            return elementnew(row, isNew);\n          });\n        });\n        return rowOfCells.getOrThunk(function () {\n          return elementnew(generators.row(), true);\n        });\n      };\n      return map(rendered, function (details) {\n        var row = findRow(details.details);\n        return rowdatanew(row.element, details.details, details.section, row.isNew);\n      });\n    };\n    var toDetailList = function (grid, generators) {\n      var rendered = toDetails(grid, eq$1);\n      return deriveRows(rendered, generators);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      return findMap(warehouse.all, function (r) {\n        return find(r.cells, function (e) {\n          return eq$1(element, e.element);\n        });\n      });\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, sizing) {\n        var warehouse = Warehouse.fromTable(table);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq$1, genWrappers(generators));\n          var grid = toDetailList(result.grid, generators);\n          return {\n            grid: grid,\n            cursor: result.cursor\n          };\n        });\n        return output.fold(function () {\n          return Optional.none();\n        }, function (out) {\n          var newElements = render(table, out.grid);\n          var tableSizing = Optional.from(sizing).getOrThunk(function () {\n            return TableSize.getTableSize(table);\n          });\n          adjustment(table, out.grid, tableSizing);\n          postAction(table);\n          refresh(wire, table);\n          return Optional.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onCell = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell);\n      });\n    };\n    var onPaste = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign(__assign({}, details), {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteByEditor = function (warehouse, target) {\n      var details = map(target.selection, function (cell$1) {\n        return cell(cell$1).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Optional.some({\n        cells: cells,\n        generators: target.generators,\n        clipboard: target.clipboard\n      }) : Optional.none();\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable;\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable;\n    };\n    var onCells = function (warehouse, target) {\n      var details = map(target.selection, function (cell$1) {\n        return cell(cell$1).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Optional.some(cells) : Optional.none();\n    };\n\n    var merge = function (grid, bounds, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (rows.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          mutateCell(rows[i], j, elementnew(substitution(), false));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var first = true;\n      for (var i = 0; i < rows.length; i++) {\n        for (var j = 0; j < cellLength(rows[0]); j++) {\n          var current = getCellElement(rows[i], j);\n          var isToReplace = comparator(current, target);\n          if (isToReplace === true && first === false) {\n            mutateCell(rows[i], j, elementnew(substitution(), true));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element, cell.element);\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitCols = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid[0].cells.length) {\n        each(grid, function (row) {\n          var prevCell = row.cells[index - 1];\n          var current = row.cells[index];\n          var isToReplace = comparator(current.element, prevCell.element);\n          if (isToReplace) {\n            mutateCell(row, index, elementnew(substitution(), true));\n          }\n        });\n      }\n      return grid;\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (index > 0 && index < rows.length) {\n        var rowPrevCells = rows[index - 1].cells;\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each(cells, function (cell) {\n          var replacement = Optional.none();\n          var _loop_1 = function (i) {\n            var _loop_2 = function (j) {\n              var current = rows[i].cells[j];\n              var isToReplace = comparator(current.element, cell.element);\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Optional.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  mutateCell(rows[i], j, elementnew(sub, true));\n                });\n              }\n            };\n            for (var j = 0; j < cellLength(rows[0]); j++) {\n              _loop_2(j);\n            }\n          };\n          for (var i = index; i < rows.length; i++) {\n            _loop_1(i);\n          }\n        });\n      }\n      return grid;\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row >= gridA.length || startAddress.column > cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row + ', column: ' + startAddress.column);\n      }\n      var rowRemainder = gridA.slice(startAddress.row);\n      var colRemainder = rowRemainder[0].cells.slice(startAddress.column);\n      var colRequired = cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: rowRemainder.length - rowRequired,\n        colDelta: colRemainder.length - colRequired\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = cellLength(gridA[0]);\n      var colLengthB = cellLength(gridB[0]);\n      return {\n        rowDelta: 0,\n        colDelta: colLengthA - colLengthB\n      };\n    };\n    var measureHeight = function (gridA, gridB) {\n      var rowLengthA = gridA.length;\n      var rowLengthB = gridB.length;\n      return {\n        rowDelta: rowLengthA - rowLengthB,\n        colDelta: 0\n      };\n    };\n    var generateElements = function (cells, row, generators) {\n      var getGenerator = row.section === 'colgroup' ? generators.col : generators.cell;\n      return map(cells, function () {\n        return elementnew(getGenerator(), true);\n      });\n    };\n    var rowFill = function (grid, amount, generators) {\n      return grid.concat(range(amount, function () {\n        var row = grid[grid.length - 1];\n        return setCells(row, generateElements(row.cells, row, generators));\n      }));\n    };\n    var colFill = function (grid, amount, generators) {\n      return map(grid, function (row) {\n        var newChildren = generateElements(range(amount, identity), row, generators);\n        return setCells(row, row.cells.concat(newChildren));\n      });\n    };\n    var tailor = function (gridA, delta, generators) {\n      var fillCols = delta.colDelta < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta < 0 ? rowFill : identity;\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta), generators);\n      return fillRows(modifiedCols, Math.abs(delta.rowDelta), generators);\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element);\n      var currentRow = grid[row];\n      return grid.length > 1 && cellLength(currentRow) > 1 && (col > 0 && matching(getCellElement(currentRow, col - 1)) || col < currentRow.cells.length - 1 && matching(getCellElement(currentRow, col + 1)) || row > 0 && matching(getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator) {\n      var startRow = startAddress.row;\n      var startCol = startAddress.column;\n      var mergeHeight = gridB.length;\n      var mergeWidth = cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth;\n      for (var r = startRow; r < endRow; r++) {\n        for (var c = startCol; c < endCol; c++) {\n          if (isSpanning(gridA, r, c, comparator)) {\n            unmerge(gridA, getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var newCell = getCellElement(gridB[r - startRow], c - startCol);\n          var replacement = generator.replace(newCell);\n          mutateCell(gridA[r], c, elementnew(replacement, true));\n        }\n      }\n      return gridA;\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var result = measure(startAddress, gridA, gridB);\n      return result.map(function (delta) {\n        var fittedGrid = tailor(gridA, delta, generator);\n        return mergeTables(startAddress, fittedGrid, gridB, generator, comparator);\n      });\n    };\n    var insertCols = function (index, gridA, gridB, generator, comparator) {\n      splitCols(gridA, index, comparator, generator.cell);\n      var delta = measureHeight(gridB, gridA);\n      var fittedNewGrid = tailor(gridB, delta, generator);\n      var secondDelta = measureHeight(gridA, fittedNewGrid);\n      var fittedOldGrid = tailor(gridA, secondDelta, generator);\n      return map(fittedOldGrid, function (gridRow, i) {\n        var newCells = gridRow.cells.slice(0, index).concat(fittedNewGrid[i].cells).concat(gridRow.cells.slice(index, gridRow.cells.length));\n        return setCells(gridRow, newCells);\n      });\n    };\n    var insertRows = function (index, gridA, gridB, generator, comparator) {\n      splitRows(gridA, index, comparator, generator.cell);\n      var delta = measureWidth(gridB, gridA);\n      var fittedNewGrid = tailor(gridB, delta, generator);\n      var secondDelta = measureWidth(gridA, fittedNewGrid);\n      var fittedOldGrid = tailor(gridA, secondDelta, generator);\n      var _a = extractGridDetails(fittedOldGrid), oldCols = _a.cols, oldRows = _a.rows;\n      return oldCols.concat(oldRows.slice(0, index)).concat(fittedNewGrid).concat(oldRows.slice(index, oldRows.length));\n    };\n\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      var before = rows.slice(0, index);\n      var after = rows.slice(index);\n      var between = mapCells(rows[example], function (ex, c) {\n        var withinSpan = index > 0 && index < rows.length && comparator(getCellElement(rows[index - 1], c), getCellElement(rows[index], c));\n        var ret = withinSpan ? getCell(rows[index], c) : elementnew(substitution(ex.element, comparator), true);\n        return ret;\n      });\n      return cols.concat(before).concat([between]).concat(after);\n    };\n    var getElementFor = function (row, column, section, withinSpan, example, comparator, substitution) {\n      if (section === 'colgroup' || !withinSpan) {\n        return elementnew(substitution(getCellElement(row, example), comparator), true);\n      } else {\n        return getCell(row, column);\n      }\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map(grid, function (row) {\n        var withinSpan = index > 0 && index < cellLength(row) && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n        var sub = getElementFor(row, index, row.section, withinSpan, example, comparator, substitution);\n        return addCell(row, index, sub);\n      });\n    };\n    var deleteColumnsAt = function (grid, start, finish) {\n      var rows = map(grid, function (row) {\n        var cells = row.cells.slice(0, start).concat(row.cells.slice(finish + 1));\n        return rowcells(cells, row.section);\n      });\n      return filter(rows, function (row) {\n        return row.cells.length > 0;\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      return cols.concat(rows.slice(0, start)).concat(rows.slice(finish + 1));\n    };\n\n    var replaceIn = function (grid, targets, comparator, substitution) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element, target.element);\n        });\n      };\n      return map(grid, function (row) {\n        return mapCells(row, function (cell) {\n          return isTarget(cell) ? elementnew(substitution(cell.element, comparator), true) : cell;\n        });\n      });\n    };\n    var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(getCellElement(grid[rowIndex - 1], colIndex), getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n    };\n    var replaceColumn = function (grid, index, comparator, substitution) {\n      var targets = bind(grid, function (row, i) {\n        var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n        return alreadyAdded ? [] : [getCell(row, index)];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var replaceRow = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targetRow = rows[index];\n      var targets = bind(targetRow.cells, function (item, i) {\n        var alreadyAdded = notStartRow(rows, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n        return alreadyAdded ? [] : [item];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n\n    var verifyGenerators = exactly([\n      'cell',\n      'row',\n      'replace',\n      'gap',\n      'col',\n      'colgroup'\n    ]);\n    var elementToData = function (element) {\n      var colspan = getAttrValue(element, 'colspan', 1);\n      var rowspan = getAttrValue(element, 'rowspan', 1);\n      return {\n        element: element,\n        colspan: colspan,\n        rowspan: rowspan\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      verifyGenerators(generators);\n      var position = Cell(Optional.none());\n      var nu = function (data) {\n        switch (name(data.element)) {\n        case 'col':\n          return generators.col(data);\n        default:\n          return generators.cell(data);\n        }\n      };\n      var nuFrom = function (element) {\n        var data = toData(element);\n        return nu(data);\n      };\n      var add = function (element) {\n        var replacement = nuFrom(element);\n        if (position.get().isNone()) {\n          position.set(Optional.some(replacement));\n        }\n        recent = Optional.some({\n          item: element,\n          replacement: replacement\n        });\n        return replacement;\n      };\n      var recent = Optional.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return {\n        getOrInit: getOrInit,\n        cursor: position.get\n      };\n    };\n    var transform$1 = function (scope, tag) {\n      return function (generators) {\n        var position = Cell(Optional.none());\n        verifyGenerators(generators);\n        var list = [];\n        var find$1 = function (element, comparator) {\n          return find(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = { scope: scope };\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          if (position.get().isNone()) {\n            position.set(Optional.some(cell));\n          }\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          return find$1(element, comparator).fold(function () {\n            return makeNew(element);\n          }, function (p) {\n            return comparator(element, p.item) ? p.sub : makeNew(element);\n          });\n        };\n        return {\n          replaceOrInit: replaceOrInit,\n          cursor: position.get\n        };\n      };\n    };\n    var merging = function (generators) {\n      verifyGenerators(generators);\n      var position = Cell(Optional.none());\n      var combine = function (cell) {\n        if (position.get().isNone()) {\n          position.set(Optional.some(cell));\n        }\n        return function () {\n          var raw = generators.cell({\n            element: cell,\n            colspan: 1,\n            rowspan: 1\n          });\n          remove$1(raw, 'width');\n          remove$1(cell, 'width');\n          return raw;\n        };\n      };\n      return {\n        combine: combine,\n        cursor: position.get\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform$1,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(blockList, tagName);\n    };\n    var isEmptyTag = function (universe, item) {\n      return contains([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n\n    var universe$2 = DomUniverse();\n    var isBlock$1 = function (element) {\n      return isBlock(universe$2, element);\n    };\n    var isList$1 = function (element) {\n      return isList(universe$2, element);\n    };\n    var isEmptyTag$1 = function (element) {\n      return isEmptyTag(universe$2, element);\n    };\n\n    var merge$2 = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$4(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor(el, isList$1).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (isBlock$1(rightSibling)) {\n            return true;\n          }\n          if (isEmptyTag$1(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || isBlock$1(parent) && !eq$1(cell, parent) ? [] : [SugarElement.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind(cells, function (cell) {\n          var children$1 = children(cell);\n          return advancedBr(children$1) ? [] : children$1.concat(markCell(cell));\n        });\n        return content.length === 0 ? [SugarElement.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append$1(cells[0], contents);\n    };\n\n    var prune = function (table) {\n      var cells$1 = cells(table);\n      if (cells$1.length === 0) {\n        remove$2(table);\n      }\n    };\n    var outcome = function (grid, cursor) {\n      return {\n        grid: grid,\n        cursor: cursor\n      };\n    };\n    var elementFromGrid = function (grid, row, column) {\n      var rows = extractGridDetails(grid).rows;\n      return findIn(rows, row, column).orThunk(function () {\n        return findIn(rows, 0, 0);\n      });\n    };\n    var findIn = function (grid, row, column) {\n      return Optional.from(grid[row]).bind(function (r) {\n        return Optional.from(r.cells[column]).bind(function (c) {\n          return Optional.from(c.element);\n        });\n      });\n    };\n    var bundle = function (grid, row, column) {\n      var rows = extractGridDetails(grid).rows;\n      return outcome(grid, findIn(rows, row, column));\n    };\n    var uniqueRows = function (details) {\n      var rowCompilation = function (rest, detail) {\n        var rowExists = exists(rest, function (currentDetail) {\n          return currentDetail.row === detail.row;\n        });\n        return rowExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, rowCompilation, []).sort(function (detailA, detailB) {\n        return detailA.row - detailB.row;\n      });\n    };\n    var uniqueColumns = function (details) {\n      var uniqueCheck = function (rest, detail) {\n        var columnExists = exists(rest, function (currentDetail) {\n          return currentDetail.column === detail.column;\n        });\n        return columnExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, uniqueCheck, []).sort(function (detailA, detailB) {\n        return detailA.column - detailB.column;\n      });\n    };\n    var opInsertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var example = details[0].row;\n      var targetIndex = details[0].row;\n      var rows = uniqueRows(details);\n      var newGrid = foldl(rows, function (newG, _row) {\n        return insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var example = rows[rows.length - 1].row;\n      var targetIndex = rows[rows.length - 1].row + rows[rows.length - 1].rowspan;\n      var newGrid = foldl(rows, function (newG, _row) {\n        return insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertColumnsBefore = function (grid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var example = columns[0].column;\n      var targetIndex = columns[0].column;\n      var newGrid = foldl(columns, function (newG, _row) {\n        return insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opInsertColumnsAfter = function (grid, details, comparator, genWrappers) {\n      var example = details[details.length - 1].column;\n      var targetIndex = details[details.length - 1].column + details[details.length - 1].colspan;\n      var columns = uniqueColumns(details);\n      var newGrid = foldl(columns, function (newG, _row) {\n        return insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opMakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = replaceRow(grid, detail.row, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opMakeRowsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var replacer = function (currentGrid, row) {\n        return replaceRow(currentGrid, row.row, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(rows, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opMakeColumnHeader = function (initialGrid, detail, comparator, genWrappers) {\n      var newGrid = replaceColumn(initialGrid, detail.column, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opMakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var replacer = function (currentGrid, column) {\n        return replaceColumn(currentGrid, column.column, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(columns, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = replaceRow(grid, detail.row, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opUnmakeRowsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var replacer = function (currentGrid, row) {\n        return replaceRow(currentGrid, row.row, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(rows, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeColumnHeader = function (initialGrid, detail, comparator, genWrappers) {\n      var newGrid = replaceColumn(initialGrid, detail.column, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row, detail.column);\n    };\n    var opUnmakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var replacer = function (currentGrid, column) {\n        return replaceColumn(currentGrid, column.column, comparator, genWrappers.replaceOrInit);\n      };\n      var newGrid = foldl(columns, replacer, initialGrid);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opEraseColumns = function (grid, details, _comparator, _genWrappers) {\n      var columns = uniqueColumns(details);\n      var newGrid = deleteColumnsAt(grid, columns[0].column, columns[columns.length - 1].column);\n      var cursor = elementFromGrid(newGrid, details[0].row, details[0].column);\n      return outcome(newGrid, cursor);\n    };\n    var opEraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = deleteRowsAt(grid, rows[0].row, rows[rows.length - 1].row);\n      var cursor = elementFromGrid(newGrid, details[0].row, details[0].column);\n      return outcome(newGrid, cursor);\n    };\n    var opMergeCells = function (grid, mergable, comparator, _genWrappers) {\n      var cells = mergable.cells;\n      merge$2(cells);\n      var newGrid = merge(grid, mergable.bounds, comparator, constant(cells[0]));\n      return outcome(newGrid, Optional.from(cells[0]));\n    };\n    var opUnmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var newGrid = foldr(unmergable, function (b, cell) {\n        return unmerge(b, cell, comparator, genWrappers.combine(cell));\n      }, grid);\n      return outcome(newGrid, Optional.from(unmergable[0]));\n    };\n    var opPasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var wh = Warehouse.fromTable(table);\n        return toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard, pasteDetails.generators);\n      var startAddress = address(pasteDetails.row, pasteDetails.column);\n      var mergedGrid = merge$1(startAddress, grid, gridB, pasteDetails.generators, comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Optional.some(pasteDetails.element));\n      }, function (newGrid) {\n        var cursor = elementFromGrid(newGrid, pasteDetails.row, pasteDetails.column);\n        return outcome(newGrid, cursor);\n      });\n    };\n    var gridifyRows = function (rows, generators, context) {\n      var pasteDetails = fromPastedRows(rows, context.section);\n      var wh = Warehouse.generate(pasteDetails);\n      return toGrid(wh, generators, true);\n    };\n    var opPasteColsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].column;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteColsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].column + pasteDetails.cells[pasteDetails.cells.length - 1].colspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].row;\n      var context = rows[index];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opPasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n      return outcome(mergedGrid, cursor);\n    };\n    var opGetColumnType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var selectedColumnCells = flatten(map(house.all, function (row) {\n          return filter(row.cells, function (cell) {\n            return cell.column >= minColRange && cell.column < maxColRange;\n          });\n        }));\n        return getCellsType(selectedColumnCells, function (cell) {\n          return name(cell.element) === 'th';\n        });\n      }).getOr('');\n    };\n    var getCellsType = function (cells, headerPred) {\n      var headerCells = filter(cells, headerPred);\n      if (headerCells.length === 0) {\n        return Optional.some('td');\n      } else if (headerCells.length === cells.length) {\n        return Optional.some('th');\n      } else {\n        return Optional.none();\n      }\n    };\n    var resize = adjustWidthTo;\n    var insertRowsBefore = run(opInsertRowsBefore, onCells, noop, noop, Generators.modification);\n    var insertRowsAfter = run(opInsertRowsAfter, onCells, noop, noop, Generators.modification);\n    var insertColumnsBefore = run(opInsertColumnsBefore, onCells, resize, noop, Generators.modification);\n    var insertColumnsAfter = run(opInsertColumnsAfter, onCells, resize, noop, Generators.modification);\n    var eraseColumns = run(opEraseColumns, onCells, resize, prune, Generators.modification);\n    var eraseRows = run(opEraseRows, onCells, noop, prune, Generators.modification);\n    var makeColumnHeader = run(opMakeColumnHeader, onCell, noop, noop, Generators.transform('row', 'th'));\n    var makeColumnsHeader = run(opMakeColumnsHeader, onCells, noop, noop, Generators.transform('row', 'th'));\n    var unmakeColumnHeader = run(opUnmakeColumnHeader, onCell, noop, noop, Generators.transform(null, 'td'));\n    var unmakeColumnsHeader = run(opUnmakeColumnsHeader, onCells, noop, noop, Generators.transform(null, 'td'));\n    var makeRowHeader = run(opMakeRowHeader, onCell, noop, noop, Generators.transform('col', 'th'));\n    var makeRowsHeader = run(opMakeRowsHeader, onCells, noop, noop, Generators.transform('col', 'th'));\n    var unmakeRowHeader = run(opUnmakeRowHeader, onCell, noop, noop, Generators.transform(null, 'td'));\n    var unmakeRowsHeader = run(opUnmakeRowsHeader, onCells, noop, noop, Generators.transform(null, 'td'));\n    var mergeCells = run(opMergeCells, onMergable, noop, noop, Generators.merging);\n    var unmergeCells = run(opUnmergeCells, onUnmergable, resize, noop, Generators.merging);\n    var pasteCells = run(opPasteCells, onPaste, resize, noop, Generators.modification);\n    var pasteColsBefore = run(opPasteColsBefore, onPasteByEditor, noop, noop, Generators.modification);\n    var pasteColsAfter = run(opPasteColsAfter, onPasteByEditor, noop, noop, Generators.modification);\n    var pasteRowsBefore = run(opPasteRowsBefore, onPasteByEditor, noop, noop, Generators.modification);\n    var pasteRowsAfter = run(opPasteRowsAfter, onPasteByEditor, noop, noop, Generators.modification);\n    var getColumnType = opGetColumnType;\n\n    var getSection = function (elm) {\n      return getNodeName(elm.parentNode);\n    };\n    var mapSectionNameToType = function (section) {\n      if (section === 'thead') {\n        return 'header';\n      } else if (section === 'tfoot') {\n        return 'footer';\n      } else {\n        return 'body';\n      }\n    };\n    var detectHeaderRow = function (editor, elm) {\n      var isThead = getSection(elm) === 'thead';\n      var areAllCellsThs = !exists(elm.cells, function (c) {\n        return getNodeName(c) !== 'th';\n      });\n      return isThead || areAllCellsThs ? Optional.some({\n        thead: isThead,\n        ths: areAllCellsThs\n      }) : Optional.none();\n    };\n    var getRowType = function (editor, elm) {\n      return mapSectionNameToType(detectHeaderRow(editor, elm).fold(function () {\n        return getSection(elm);\n      }, function (_rowConfig) {\n        return 'thead';\n      }));\n    };\n    var switchRowSection = function (dom, rowElm, newSectionName) {\n      var tableElm = dom.getParent(rowElm, 'table');\n      var oldSectionElm = rowElm.parentNode;\n      var oldSectionName = getNodeName(oldSectionElm);\n      if (newSectionName !== oldSectionName) {\n        var sectionElm_1 = dom.select(newSectionName, tableElm)[0];\n        if (!sectionElm_1) {\n          sectionElm_1 = dom.create(newSectionName);\n          var firstTableChild_1 = tableElm.firstChild;\n          if (newSectionName === 'thead') {\n            last(children$2(SugarElement.fromDom(tableElm), 'caption,colgroup')).fold(function () {\n              return tableElm.insertBefore(sectionElm_1, firstTableChild_1);\n            }, function (c) {\n              return dom.insertAfter(sectionElm_1, c.dom);\n            });\n          } else {\n            tableElm.appendChild(sectionElm_1);\n          }\n        }\n        if (newSectionName === 'tbody' && oldSectionName === 'thead' && sectionElm_1.firstChild) {\n          sectionElm_1.insertBefore(rowElm, sectionElm_1.firstChild);\n        } else {\n          sectionElm_1.appendChild(rowElm);\n        }\n        if (!oldSectionElm.hasChildNodes()) {\n          dom.remove(oldSectionElm);\n        }\n      }\n    };\n    var renameCell = function (editor, cell, newCellType) {\n      if (isNonNullable(newCellType) && getNodeName(cell) !== newCellType) {\n        var newCellElm = editor.dom.rename(cell, newCellType);\n        fireNewCell(editor, newCellElm);\n        return newCellElm;\n      } else {\n        return cell;\n      }\n    };\n    var switchCellType = function (editor, cell, newCellType, scope) {\n      var dom = editor.dom;\n      var newCell = renameCell(editor, cell, newCellType);\n      if (!isUndefined(scope)) {\n        dom.setAttrib(newCell, 'scope', scope);\n      }\n      return newCell;\n    };\n    var switchCellsType = function (editor, cells, newCellType, scope) {\n      return each(cells, function (c) {\n        return switchCellType(editor, c, newCellType, scope);\n      });\n    };\n    var switchSectionType = function (editor, rowElm, newType) {\n      var determineHeaderRowType = function () {\n        var allTableRows = table(SugarElement.fromDom(rowElm.cells[0])).map(function (table) {\n          return rows(table);\n        }).getOr([]);\n        return findMap(allTableRows, function (row) {\n          return detectHeaderRow(editor, row.dom);\n        }).map(function (detectedType) {\n          if (detectedType.thead && detectedType.ths) {\n            return 'sectionCells';\n          } else {\n            return detectedType.thead ? 'section' : 'cells';\n          }\n        }).getOr('section');\n      };\n      var dom = editor.dom;\n      if (newType === 'header') {\n        var headerRowTypeSetting = getTableHeaderType(editor);\n        var headerRowType = headerRowTypeSetting === 'auto' ? determineHeaderRowType() : headerRowTypeSetting;\n        switchCellsType(editor, rowElm.cells, headerRowType === 'section' ? 'td' : 'th', 'col');\n        switchRowSection(dom, rowElm, headerRowType === 'cells' ? 'tbody' : 'thead');\n      } else {\n        switchCellsType(editor, rowElm.cells, 'td', null);\n        switchRowSection(dom, rowElm, newType === 'footer' ? 'tfoot' : 'tbody');\n      }\n    };\n\n    var getSelectionStartCellFallback = function (start) {\n      return table(start).bind(function (table) {\n        return retrieve$1(table, ephemera.firstSelectedSelector);\n      }).fold(function () {\n        return start;\n      }, function (cells) {\n        return cells[0];\n      });\n    };\n    var getSelectionStartFromSelector = function (selector) {\n      return function (start) {\n        var startCellName = name(start);\n        var startCell = startCellName === 'col' || startCellName === 'colgroup' ? getSelectionStartCellFallback(start) : start;\n        return closest$1(startCell, selector);\n      };\n    };\n    var getSelectionStartCell = getSelectionStartFromSelector('th,td');\n    var getSelectionStartCellOrCaption = getSelectionStartFromSelector('th,td,caption');\n    var getCellsFromSelection = function (start, selections) {\n      return getSelectionStartCell(start).map(function (_cell) {\n        return selection(selections);\n      }).getOr([]);\n    };\n    var getRowsFromSelection = function (start, selector) {\n      var cellOpt = getSelectionStartCell(start);\n      var rowsOpt = cellOpt.bind(function (cell) {\n        return table(cell);\n      }).map(function (table) {\n        return rows(table);\n      });\n      return lift2(cellOpt, rowsOpt, function (cell, rows) {\n        return filter(rows, function (row) {\n          return exists(fromDom$1(row.dom.cells), function (rowCell) {\n            return get$2(rowCell, selector) === '1' || eq$1(rowCell, cell);\n          });\n        });\n      }).getOr([]);\n    };\n\n    var TableActions = function (editor, lazyWire, selections) {\n      var isTableBody = function (editor) {\n        return name(getBody$1(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).rows > 1;\n      };\n      var lastColumnGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).columns > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var execute = function (operation, guard, mutate, lazyWire) {\n        return function (table, target) {\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = SugarElement.fromDom(editor.getDoc());\n          var generators = cellOperations(mutate, doc, cloneFormats);\n          var sizing = get$9(editor, table);\n          return guard(table) ? operation(wire, table, target, generators, sizing).bind(function (result) {\n            each(result.newRows, function (row) {\n              fireNewRow(editor, row.dom);\n            });\n            each(result.newCells, function (cell) {\n              fireNewCell(editor, cell.dom);\n            });\n            return result.cursor.map(function (cell) {\n              var des = freefallRtl$2(cell);\n              var rng = editor.dom.createRng();\n              rng.setStart(des.element.dom, des.offset);\n              rng.setEnd(des.element.dom, des.offset);\n              return rng;\n            });\n          }) : Optional.none();\n        };\n      };\n      var deleteRow = execute(eraseRows, lastRowGuard, noop, lazyWire);\n      var deleteColumn = execute(eraseColumns, lastColumnGuard, noop, lazyWire);\n      var insertRowsBefore$1 = execute(insertRowsBefore, always, noop, lazyWire);\n      var insertRowsAfter$1 = execute(insertRowsAfter, always, noop, lazyWire);\n      var insertColumnsBefore$1 = execute(insertColumnsBefore, always, halve, lazyWire);\n      var insertColumnsAfter$1 = execute(insertColumnsAfter, always, halve, lazyWire);\n      var mergeCells$1 = execute(mergeCells, always, noop, lazyWire);\n      var unmergeCells$1 = execute(unmergeCells, always, noop, lazyWire);\n      var pasteColsBefore$1 = execute(pasteColsBefore, always, noop, lazyWire);\n      var pasteColsAfter$1 = execute(pasteColsAfter, always, noop, lazyWire);\n      var pasteRowsBefore$1 = execute(pasteRowsBefore, always, noop, lazyWire);\n      var pasteRowsAfter$1 = execute(pasteRowsAfter, always, noop, lazyWire);\n      var pasteCells$1 = execute(pasteCells, always, noop, lazyWire);\n      var extractType = function (args, validTypes) {\n        return get$1(args, 'type').filter(function (type) {\n          return contains(validTypes, type);\n        });\n      };\n      var setTableCellType = function (editor, args) {\n        return extractType(args, [\n          'td',\n          'th'\n        ]).each(function (type) {\n          var cells = map(getCellsFromSelection(getSelectionStart(editor), selections), function (c) {\n            return c.dom;\n          });\n          switchCellsType(editor, cells, type, null);\n        });\n      };\n      var setTableRowType = function (editor, args) {\n        return extractType(args, [\n          'header',\n          'body',\n          'footer'\n        ]).each(function (type) {\n          map(getRowsFromSelection(getSelectionStart(editor), ephemera.selected), function (row) {\n            return switchSectionType(editor, row.dom, type);\n          });\n        });\n      };\n      var makeColumnsHeader$1 = execute(makeColumnsHeader, always, noop, lazyWire);\n      var unmakeColumnsHeader$1 = execute(unmakeColumnsHeader, always, noop, lazyWire);\n      var getTableRowType = function (editor) {\n        var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n        if (rows.length > 0) {\n          var rowTypes = map(rows, function (r) {\n            return getRowType(editor, r.dom);\n          });\n          var hasHeader = contains(rowTypes, 'header');\n          var hasFooter = contains(rowTypes, 'footer');\n          if (!hasHeader && !hasFooter) {\n            return 'body';\n          } else {\n            var hasBody = contains(rowTypes, 'body');\n            if (hasHeader && !hasBody && !hasFooter) {\n              return 'header';\n            } else if (!hasHeader && !hasBody && hasFooter) {\n              return 'footer';\n            } else {\n              return '';\n            }\n          }\n        }\n      };\n      var getTableCellType = function (editor) {\n        return getCellsType(getCellsFromSelection(getSelectionStart(editor), selections), function (cell) {\n          return name(cell) === 'th';\n        }).getOr('');\n      };\n      var getTableColType = getColumnType;\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore$1,\n        insertRowsAfter: insertRowsAfter$1,\n        insertColumnsBefore: insertColumnsBefore$1,\n        insertColumnsAfter: insertColumnsAfter$1,\n        mergeCells: mergeCells$1,\n        unmergeCells: unmergeCells$1,\n        pasteColsBefore: pasteColsBefore$1,\n        pasteColsAfter: pasteColsAfter$1,\n        pasteRowsBefore: pasteRowsBefore$1,\n        pasteRowsAfter: pasteRowsAfter$1,\n        pasteCells: pasteCells$1,\n        setTableCellType: setTableCellType,\n        setTableRowType: setTableRowType,\n        makeColumnsHeader: makeColumnsHeader$1,\n        unmakeColumnsHeader: unmakeColumnsHeader$1,\n        getTableRowType: getTableRowType,\n        getTableCellType: getTableCellType,\n        getTableColType: getTableColType\n      };\n    };\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      colGroups: false\n    };\n    var tableHeaderCell = function () {\n      return SugarElement.fromTag('th');\n    };\n    var tableCell = function () {\n      return SugarElement.fromTag('td');\n    };\n    var tableColumn = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createRow = function (columns, rowHeaders, columnHeaders, rowIndex) {\n      var tr = SugarElement.fromTag('tr');\n      for (var j = 0; j < columns; j++) {\n        var td = rowIndex < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n        if (j < columnHeaders) {\n          set(td, 'scope', 'row');\n        }\n        if (rowIndex < rowHeaders) {\n          set(td, 'scope', 'col');\n        }\n        append(td, SugarElement.fromTag('br'));\n        append(tr, td);\n      }\n      return tr;\n    };\n    var createGroupRow = function (columns) {\n      var columnGroup = SugarElement.fromTag('colgroup');\n      range(columns, function () {\n        return append(columnGroup, tableColumn());\n      });\n      return columnGroup;\n    };\n    var createRows = function (rows, columns, rowHeaders, columnHeaders) {\n      return range(rows, function (r) {\n        return createRow(columns, rowHeaders, columnHeaders, r);\n      });\n    };\n    var render$1 = function (rows, columns, rowHeaders, columnHeaders, headerType, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = SugarElement.fromTag('table');\n      var rowHeadersGoInThead = headerType !== 'cells';\n      setAll$1(table, renderOpts.styles);\n      setAll(table, renderOpts.attributes);\n      if (renderOpts.colGroups) {\n        append(table, createGroupRow(columns));\n      }\n      var actualRowHeaders = Math.min(rows, rowHeaders);\n      if (rowHeadersGoInThead && rowHeaders > 0) {\n        var thead = SugarElement.fromTag('thead');\n        append(table, thead);\n        var theadRowHeaders = headerType === 'sectionCells' ? actualRowHeaders : 0;\n        var theadRows = createRows(rowHeaders, columns, theadRowHeaders, columnHeaders);\n        append$1(thead, theadRows);\n      }\n      var tbody = SugarElement.fromTag('tbody');\n      append(table, tbody);\n      var numRows = rowHeadersGoInThead ? rows - actualRowHeaders : rows;\n      var numRowHeaders = rowHeadersGoInThead ? 0 : rowHeaders;\n      var tbodyRows = createRows(numRows, columns, numRowHeaders, columnHeaders);\n      append$1(tbody, tbodyRows);\n      return table;\n    };\n\n    var get$b = function (element) {\n      return element.dom.innerHTML;\n    };\n    var getOuter$2 = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append(container, clone);\n      return get$b(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom, true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant$1(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each(descendants$1(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom);\n        each(descendants$1(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom);\n        });\n      });\n    };\n    var isPercentage$1 = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert$1 = function (editor, columns, rows, colHeaders, rowHeaders) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        colGroups: useColumnGroup(editor)\n      };\n      editor.undoManager.ignore(function () {\n        var table = render$1(rows, columns, rowHeaders, colHeaders, getTableHeaderType(editor), options);\n        set(table, 'data-mce-id', '__mce');\n        var html = getOuter$2(table);\n        editor.insertContent(html);\n        editor.addVisual();\n      });\n      return descendant$1(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          enforcePixels(editor, table);\n        } else if (isResponsiveForced(editor)) {\n          enforceNone(table);\n        } else if (isPercentagesForced(editor) || isPercentage$1(defaultStyles.width)) {\n          enforcePercentage(editor, table);\n        }\n        removeDataStyle(table);\n        remove(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom;\n      }).getOr(null);\n    };\n    var insertTableWithDataValidation = function (editor, rows, columns, options, errorMsg) {\n      if (options === void 0) {\n        options = {};\n      }\n      var checkInput = function (val) {\n        return isNumber(val) && val > 0;\n      };\n      if (checkInput(rows) && checkInput(columns)) {\n        var headerRows = options.headerRows || 0;\n        var headerColumns = options.headerColumns || 0;\n        return insert$1(editor, columns, rows, headerColumns, headerRows);\n      } else {\n        console.error(errorMsg);\n        return null;\n      }\n    };\n\n    var getClipboardElements = function (getClipboard) {\n      return function () {\n        return getClipboard().fold(function () {\n          return [];\n        }, function (elems) {\n          return map(elems, function (e) {\n            return e.dom;\n          });\n        });\n      };\n    };\n    var setClipboardElements = function (setClipboard) {\n      return function (elems) {\n        var elmsOpt = elems.length > 0 ? Optional.some(fromDom$1(elems)) : Optional.none();\n        setClipboard(elmsOpt);\n      };\n    };\n    var insertTable = function (editor) {\n      return function (columns, rows, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        var table = insertTableWithDataValidation(editor, rows, columns, options, 'Invalid values for insertTable - rows and columns values are required to insert a table.');\n        editor.undoManager.add();\n        return table;\n      };\n    };\n    var getApi = function (editor, clipboard, resizeHandler, selectionTargets) {\n      return {\n        insertTable: insertTable(editor),\n        setClipboardRows: setClipboardElements(clipboard.setRows),\n        getClipboardRows: getClipboardElements(clipboard.getRows),\n        setClipboardCols: setClipboardElements(clipboard.setColumns),\n        getClipboardCols: getClipboardElements(clipboard.getColumns),\n        resizeHandler: resizeHandler,\n        selectionTargets: selectionTargets\n      };\n    };\n\n    var constrainSpan = function (element, property, value) {\n      var currentColspan = getAttrValue(element, property, 1);\n      if (value === 1 || currentColspan <= 1) {\n        remove(element, property);\n      } else {\n        set(element, property, Math.min(value, currentColspan));\n      }\n    };\n    var generateColGroup = function (house, minColRange, maxColRange) {\n      if (Warehouse.hasColumns(house)) {\n        var colsToCopy = filter(Warehouse.justColumns(house), function (col) {\n          return col.column >= minColRange && col.column < maxColRange;\n        });\n        var copiedCols = map(colsToCopy, function (c) {\n          var clonedCol = deep(c.element);\n          constrainSpan(clonedCol, 'span', maxColRange - minColRange);\n          return clonedCol;\n        });\n        var fakeColgroup = SugarElement.fromTag('colgroup');\n        append$1(fakeColgroup, copiedCols);\n        return [fakeColgroup];\n      } else {\n        return [];\n      }\n    };\n    var generateRows = function (house, minColRange, maxColRange) {\n      return map(house.all, function (row) {\n        var cellsToCopy = filter(row.cells, function (cell) {\n          return cell.column >= minColRange && cell.column < maxColRange;\n        });\n        var copiedCells = map(cellsToCopy, function (cell) {\n          var clonedCell = deep(cell.element);\n          constrainSpan(clonedCell, 'colspan', maxColRange - minColRange);\n          return clonedCell;\n        });\n        var fakeTR = SugarElement.fromTag('tr');\n        append$1(fakeTR, copiedCells);\n        return fakeTR;\n      });\n    };\n    var copyCols = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.map(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var fakeColGroups = generateColGroup(house, minColRange, maxColRange);\n        var fakeRows = generateRows(house, minColRange, maxColRange);\n        return __spreadArrays(fakeColGroups, fakeRows);\n      });\n    };\n\n    var copyRows = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.map(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var rows = extractGridDetails(grid).rows;\n        var slicedGrid = rows.slice(selectedCells[0].row, selectedCells[selectedCells.length - 1].row + selectedCells[selectedCells.length - 1].rowspan);\n        var slicedDetails = toDetailList(slicedGrid, generators);\n        return copy$2(slicedDetails);\n      });\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      return checkChildren(firstChildStyle, cells);\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$1.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'menu');\n    };\n    var buildListItems = function (inputList, startItems) {\n      var appendItems = function (values, acc) {\n        return acc.concat(map(values, function (item) {\n          var text = item.text || item.title;\n          if (isListGroup(item)) {\n            return {\n              text: text,\n              items: buildListItems(item.menu)\n            };\n          } else {\n            return {\n              text: text,\n              value: item.value\n            };\n          }\n        }));\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    var rgbToHex = function (dom) {\n      return function (value) {\n        return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n      };\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var element = SugarElement.fromDom(elm);\n      return {\n        borderwidth: getRaw(element, 'border-width').getOr(''),\n        borderstyle: getRaw(element, 'border-style').getOr(''),\n        bordercolor: getRaw(element, 'border-color').map(rgbToHex(dom)).getOr(''),\n        backgroundcolor: getRaw(element, 'background-color').map(rgbToHex(dom)).getOr('')\n      };\n    };\n    var getSharedValues = function (data) {\n      var baseData = data[0];\n      var comparisonData = data.slice(1);\n      each(comparisonData, function (items) {\n        each(keys(baseData), function (key) {\n          each$1(items, function (itemValue, itemKey) {\n            var comparisonValue = baseData[key];\n            if (comparisonValue !== '' && key === itemKey) {\n              if (comparisonValue !== itemValue) {\n                baseData[key] = '';\n              }\n            }\n          });\n        });\n      });\n      return baseData;\n    };\n    var getAdvancedTab = function (dialogName) {\n      var advTabItems = [\n        {\n          name: 'borderstyle',\n          type: 'listbox',\n          label: 'Border style',\n          items: [\n            {\n              text: 'Select...',\n              value: ''\n            },\n            {\n              text: 'Solid',\n              value: 'solid'\n            },\n            {\n              text: 'Dotted',\n              value: 'dotted'\n            },\n            {\n              text: 'Dashed',\n              value: 'dashed'\n            },\n            {\n              text: 'Double',\n              value: 'double'\n            },\n            {\n              text: 'Groove',\n              value: 'groove'\n            },\n            {\n              text: 'Ridge',\n              value: 'ridge'\n            },\n            {\n              text: 'Inset',\n              value: 'inset'\n            },\n            {\n              text: 'Outset',\n              value: 'outset'\n            },\n            {\n              text: 'None',\n              value: 'none'\n            },\n            {\n              text: 'Hidden',\n              value: 'hidden'\n            }\n          ]\n        },\n        {\n          name: 'bordercolor',\n          type: 'colorinput',\n          label: 'Border color'\n        },\n        {\n          name: 'backgroundcolor',\n          type: 'colorinput',\n          label: 'Background color'\n        }\n      ];\n      var borderWidth = {\n        name: 'borderwidth',\n        type: 'input',\n        label: 'Border width'\n      };\n      var items = dialogName === 'cell' ? [borderWidth].concat(advTabItems) : advTabItems;\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: items\n      };\n    };\n    var getAlignment = function (formats, formatName, editor, elm) {\n      return find(formats, function (name) {\n        return editor.formatter.matchNode(elm, formatName + name);\n      }).getOr('');\n    };\n    var getHAlignment = curry(getAlignment, [\n      'left',\n      'center',\n      'right'\n    ], 'align');\n    var getVAlignment = curry(getAlignment, [\n      'top',\n      'middle',\n      'bottom'\n    ], 'valign');\n    var extractDataFromSettings = function (editor, hasAdvTableTab) {\n      var style = getDefaultStyles(editor);\n      var attrs = getDefaultAttributes(editor);\n      var extractAdvancedStyleData = function (dom) {\n        return {\n          borderstyle: get$1(style, 'border-style').getOr(''),\n          bordercolor: rgbToHex(dom)(get$1(style, 'border-color').getOr('')),\n          backgroundcolor: rgbToHex(dom)(get$1(style, 'background-color').getOr(''))\n        };\n      };\n      var defaultData = {\n        height: '',\n        width: '100%',\n        cellspacing: '',\n        cellpadding: '',\n        caption: false,\n        class: '',\n        align: '',\n        border: ''\n      };\n      var getBorder = function () {\n        var borderWidth = style['border-width'];\n        if (shouldStyleWithCss(editor) && borderWidth) {\n          return { border: borderWidth };\n        }\n        return get$1(attrs, 'border').fold(function () {\n          return {};\n        }, function (border) {\n          return { border: border };\n        });\n      };\n      var advStyle = hasAdvTableTab ? extractAdvancedStyleData(editor.dom) : {};\n      var getCellPaddingCellSpacing = function () {\n        var spacing = get$1(style, 'border-spacing').or(get$1(attrs, 'cellspacing')).fold(function () {\n          return {};\n        }, function (cellspacing) {\n          return { cellspacing: cellspacing };\n        });\n        var padding = get$1(style, 'border-padding').or(get$1(attrs, 'cellpadding')).fold(function () {\n          return {};\n        }, function (cellpadding) {\n          return { cellpadding: cellpadding };\n        });\n        return __assign(__assign({}, spacing), padding);\n      };\n      var data = __assign(__assign(__assign(__assign(__assign(__assign({}, defaultData), style), attrs), advStyle), getBorder()), getCellPaddingCellSpacing());\n      return data;\n    };\n    var extractDataFromTableElement = function (editor, elm, hasAdvTableTab) {\n      var getBorder = function (dom, elm) {\n        var optBorderWidth = getRaw(SugarElement.fromDom(elm), 'border-width');\n        if (shouldStyleWithCss(editor) && optBorderWidth.isSome()) {\n          return optBorderWidth.getOr('');\n        }\n        return dom.getAttrib(elm, 'border') || getTDTHOverallStyle(editor.dom, elm, 'border-width') || getTDTHOverallStyle(editor.dom, elm, 'border');\n      };\n      var dom = editor.dom;\n      return __assign({\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        cellspacing: dom.getStyle(elm, 'border-spacing') || dom.getAttrib(elm, 'cellspacing'),\n        cellpadding: dom.getAttrib(elm, 'cellpadding') || getTDTHOverallStyle(editor.dom, elm, 'padding'),\n        border: getBorder(dom, elm),\n        caption: !!dom.select('caption', elm)[0],\n        class: dom.getAttrib(elm, 'class', ''),\n        align: getHAlignment(editor, elm)\n      }, hasAdvTableTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromRowElement = function (editor, elm, hasAdvancedRowTab) {\n      var dom = editor.dom;\n      return __assign({\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class', ''),\n        type: getRowType(editor, elm),\n        align: getHAlignment(editor, elm)\n      }, hasAdvancedRowTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromCellElement = function (editor, cell, hasAdvancedCellTab, column) {\n      var dom = editor.dom;\n      var colElm = column.getOr(cell);\n      var getStyle = function (element, style) {\n        return dom.getStyle(element, style) || dom.getAttrib(element, style);\n      };\n      return __assign({\n        width: getStyle(colElm, 'width'),\n        height: getStyle(cell, 'height'),\n        scope: dom.getAttrib(cell, 'scope'),\n        celltype: getNodeName(cell),\n        class: dom.getAttrib(cell, 'class', ''),\n        halign: getHAlignment(editor, cell),\n        valign: getVAlignment(editor, cell)\n      }, hasAdvancedCellTab ? extractAdvancedStyles(dom, cell) : {});\n    };\n\n    var getClassList = function (editor) {\n      var classes = buildListItems(getCellClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var children$3 = [\n      {\n        name: 'width',\n        type: 'input',\n        label: 'Width'\n      },\n      {\n        name: 'height',\n        type: 'input',\n        label: 'Height'\n      },\n      {\n        name: 'celltype',\n        type: 'listbox',\n        label: 'Cell type',\n        items: [\n          {\n            text: 'Cell',\n            value: 'td'\n          },\n          {\n            text: 'Header cell',\n            value: 'th'\n          }\n        ]\n      },\n      {\n        name: 'scope',\n        type: 'listbox',\n        label: 'Scope',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Row',\n            value: 'row'\n          },\n          {\n            text: 'Column',\n            value: 'col'\n          },\n          {\n            text: 'Row group',\n            value: 'rowgroup'\n          },\n          {\n            text: 'Column group',\n            value: 'colgroup'\n          }\n        ]\n      },\n      {\n        name: 'halign',\n        type: 'listbox',\n        label: 'H Align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        name: 'valign',\n        type: 'listbox',\n        label: 'V Align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Top',\n            value: 'top'\n          },\n          {\n            text: 'Middle',\n            value: 'middle'\n          },\n          {\n            text: 'Bottom',\n            value: 'bottom'\n          }\n        ]\n      }\n    ];\n    var getItems = function (editor) {\n      return children$3.concat(getClassList(editor).toArray());\n    };\n\n    var modifiers = function (testTruthy) {\n      return function (editor, node) {\n        var dom = editor.dom;\n        var setAttrib = function (attr, value) {\n          if (!testTruthy || value) {\n            dom.setAttrib(node, attr, value);\n          }\n        };\n        var setStyle = function (prop, value) {\n          if (!testTruthy || value) {\n            dom.setStyle(node, prop, value);\n          }\n        };\n        var setFormat = function (formatName, value) {\n          if (!testTruthy || value) {\n            if (value === '') {\n              editor.formatter.remove(formatName, { value: null }, node, true);\n            } else {\n              editor.formatter.apply(formatName, { value: value }, node);\n            }\n          }\n        };\n        return {\n          setAttrib: setAttrib,\n          setStyle: setStyle,\n          setFormat: setFormat\n        };\n      };\n    };\n    var DomModifier = {\n      normal: modifiers(false),\n      ifTruthy: modifiers(true)\n    };\n\n    var getSelectedCells = function (cells) {\n      return table(cells[0]).map(function (table) {\n        var warehouse = Warehouse.fromTable(table);\n        var allCells = Warehouse.justCells(warehouse);\n        var filtered = filter(allCells, function (cellA) {\n          return exists(cells, function (cellB) {\n            return eq$1(cellA.element, cellB);\n          });\n        });\n        return map(filtered, function (cell) {\n          return {\n            element: cell.element.dom,\n            column: Warehouse.getColumnAt(warehouse, cell.column).map(function (col) {\n              return col.element.dom;\n            })\n          };\n        });\n      });\n    };\n    var updateSimpleProps = function (modifier, colModifier, data) {\n      modifier.setAttrib('scope', data.scope);\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n      colModifier.setStyle('width', addPxSuffix(data.width));\n    };\n    var updateAdvancedProps = function (modifier, data) {\n      modifier.setFormat('tablecellbackgroundcolor', data.backgroundcolor);\n      modifier.setFormat('tablecellbordercolor', data.bordercolor);\n      modifier.setFormat('tablecellborderstyle', data.borderstyle);\n      modifier.setFormat('tablecellborderwidth', addPxSuffix(data.borderwidth));\n    };\n    var applyCellData = function (editor, cells, data) {\n      var isSingleCell = cells.length === 1;\n      if (cells.length >= 1) {\n        var tableOpt = table(cells[0]);\n        getSelectedCells(cells).each(function (selectedCells) {\n          each(selectedCells, function (item) {\n            var cellElm = switchCellType(editor, item.element, data.celltype);\n            var modifier = isSingleCell ? DomModifier.normal(editor, cellElm) : DomModifier.ifTruthy(editor, cellElm);\n            var colModifier = item.column.map(function (col) {\n              return isSingleCell ? DomModifier.normal(editor, col) : DomModifier.ifTruthy(editor, col);\n            }).getOr(modifier);\n            updateSimpleProps(modifier, colModifier, data);\n            if (hasAdvancedCellTab(editor)) {\n              updateAdvancedProps(modifier, data);\n            }\n            if (isSingleCell) {\n              unApplyAlign(editor, cellElm);\n              unApplyVAlign(editor, cellElm);\n            }\n            if (data.halign) {\n              applyAlign(editor, cellElm, data.halign);\n            }\n            if (data.valign) {\n              applyVAlign(editor, cellElm, data.valign);\n            }\n          });\n        });\n        tableOpt.each(function (table) {\n          return fireTableModified(editor, table.dom);\n        });\n      }\n    };\n    var onSubmitCellForm = function (editor, cells, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyCellData(editor, cells, data);\n        editor.focus();\n      });\n    };\n    var getData = function (editor, cells) {\n      var cellsData = getSelectedCells(cells).map(function (selectedCells) {\n        return map(selectedCells, function (item) {\n          return extractDataFromCellElement(editor, item.element, hasAdvancedCellTab(editor), item.column);\n        });\n      });\n      return getSharedValues(cellsData.getOrDie());\n    };\n    var open = function (editor, selections) {\n      var cells = getCellsFromSelection(getSelectionStart(editor), selections);\n      if (cells.length === 0) {\n        return;\n      }\n      var data = getData(editor, cells);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems(editor)\n          },\n          getAdvancedTab('cell')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Cell Properties',\n        size: 'normal',\n        body: hasAdvancedCellTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitCellForm, editor, cells)\n      });\n    };\n\n    var getClassList$1 = function (editor) {\n      var classes = buildListItems(getRowClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var formChildren = [\n      {\n        type: 'listbox',\n        name: 'type',\n        label: 'Row type',\n        items: [\n          {\n            text: 'Header',\n            value: 'header'\n          },\n          {\n            text: 'Body',\n            value: 'body'\n          },\n          {\n            text: 'Footer',\n            value: 'footer'\n          }\n        ]\n      },\n      {\n        type: 'listbox',\n        name: 'align',\n        label: 'Alignment',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        label: 'Height',\n        name: 'height',\n        type: 'input'\n      }\n    ];\n    var getItems$1 = function (editor) {\n      return formChildren.concat(getClassList$1(editor).toArray());\n    };\n\n    var updateSimpleProps$1 = function (modifier, data) {\n      modifier.setAttrib('scope', data.scope);\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n    };\n    var updateAdvancedProps$1 = function (modifier, data) {\n      modifier.setStyle('background-color', data.backgroundcolor);\n      modifier.setStyle('border-color', data.bordercolor);\n      modifier.setStyle('border-style', data.borderstyle);\n    };\n    var applyRowData = function (editor, rows, oldData, data) {\n      var isSingleRow = rows.length === 1;\n      each(rows, function (rowElm) {\n        if (data.type !== getNodeName(rowElm.parentNode)) {\n          switchSectionType(editor, rowElm, data.type);\n        }\n        var modifier = isSingleRow ? DomModifier.normal(editor, rowElm) : DomModifier.ifTruthy(editor, rowElm);\n        updateSimpleProps$1(modifier, data);\n        if (hasAdvancedRowTab(editor)) {\n          updateAdvancedProps$1(modifier, data);\n        }\n        if (data.align !== oldData.align) {\n          unApplyAlign(editor, rowElm);\n          applyAlign(editor, rowElm, data.align);\n        }\n      });\n      table(SugarElement.fromDom(rows[0])).each(function (table) {\n        return fireTableModified(editor, table.dom);\n      });\n    };\n    var onSubmitRowForm = function (editor, rows, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyRowData(editor, rows, oldData, data);\n        editor.focus();\n      });\n    };\n    var open$1 = function (editor) {\n      var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n      if (rows.length === 0) {\n        return;\n      }\n      var rowsData = map(rows, function (rowElm) {\n        return extractDataFromRowElement(editor, rowElm.dom, hasAdvancedRowTab(editor));\n      });\n      var data = getSharedValues(rowsData);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems$1(editor)\n          },\n          getAdvancedTab('row')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems$1(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Row Properties',\n        size: 'normal',\n        body: hasAdvancedRowTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitRowForm, editor, map(rows, function (r) {\n          return r.dom;\n        }), data)\n      });\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getItems$2 = function (editor, classes, insertNewTable) {\n      var rowColCountItems = !insertNewTable ? [] : [\n        {\n          type: 'input',\n          name: 'cols',\n          label: 'Cols',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'rows',\n          label: 'Rows',\n          inputMode: 'numeric'\n        }\n      ];\n      var alwaysItems = [\n        {\n          type: 'input',\n          name: 'width',\n          label: 'Width'\n        },\n        {\n          type: 'input',\n          name: 'height',\n          label: 'Height'\n        }\n      ];\n      var appearanceItems = hasAppearanceOptions(editor) ? [\n        {\n          type: 'input',\n          name: 'cellspacing',\n          label: 'Cell spacing',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'cellpadding',\n          label: 'Cell padding',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'border',\n          label: 'Border width'\n        },\n        {\n          type: 'label',\n          label: 'Caption',\n          items: [{\n              type: 'checkbox',\n              name: 'caption',\n              label: 'Show caption'\n            }]\n        }\n      ] : [];\n      var alignmentItem = [{\n          type: 'listbox',\n          name: 'align',\n          label: 'Alignment',\n          items: [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'Left',\n              value: 'left'\n            },\n            {\n              text: 'Center',\n              value: 'center'\n            },\n            {\n              text: 'Right',\n              value: 'right'\n            }\n          ]\n        }];\n      var classListItem = classes.length > 0 ? [{\n          type: 'listbox',\n          name: 'class',\n          label: 'Class',\n          items: classes\n        }] : [];\n      return rowColCountItems.concat(alwaysItems).concat(appearanceItems).concat(alignmentItem).concat(classListItem);\n    };\n\n    var styleTDTH = function (dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        if (isString(name)) {\n          dom.setStyle(elm, name, value);\n        } else {\n          dom.setStyle(elm, name);\n        }\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addPxSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addPxSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addPxSuffix(data.border);\n        styles['border-spacing'] = addPxSuffix(data.cellspacing);\n      } else {\n        attrs.border = data.border;\n        attrs.cellpadding = data.cellpadding;\n        attrs.cellspacing = data.cellspacing;\n      }\n      if (shouldStyleWithCss(editor) && tableElm.children) {\n        for (var i = 0; i < tableElm.children.length; i++) {\n          styleTDTH(dom, tableElm.children[i], {\n            'border-width': addPxSuffix(data.border),\n            'padding': addPxSuffix(data.cellpadding)\n          });\n          if (hasAdvancedTableTab(editor)) {\n            styleTDTH(dom, tableElm.children[i], { 'border-color': data.bordercolor });\n          }\n        }\n      }\n      if (hasAdvancedTableTab(editor)) {\n        styles['background-color'] = data.backgroundcolor;\n        styles['border-color'] = data.bordercolor;\n        styles['border-style'] = data.borderstyle;\n      }\n      attrs.style = dom.serializeStyle(__assign(__assign({}, getDefaultStyles(editor)), styles));\n      dom.setAttribs(tableElm, __assign(__assign({}, getDefaultAttributes(editor)), attrs));\n      fireTableModified(editor, tableElm);\n    };\n    var onSubmitTableForm = function (editor, tableElm, api) {\n      var dom = editor.dom;\n      var captionElm;\n      var data = api.getData();\n      api.close();\n      if (data.class === '') {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          var cols = parseInt(data.cols, 10) || 1;\n          var rows = parseInt(data.rows, 10) || 1;\n          tableElm = insert$1(editor, cols, rows, 0, 0);\n        }\n        applyDataToElement(editor, tableElm, data);\n        captionElm = dom.select('caption', tableElm)[0];\n        if (captionElm && !data.caption) {\n          dom.remove(captionElm);\n        }\n        if (!captionElm && data.caption) {\n          captionElm = dom.create('caption');\n          captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : nbsp;\n          tableElm.insertBefore(captionElm, tableElm.firstChild);\n        }\n        if (data.align === '') {\n          unApplyAlign(editor, tableElm);\n        } else {\n          applyAlign(editor, tableElm, data.align);\n        }\n        editor.focus();\n        editor.addVisual();\n      });\n    };\n    var open$2 = function (editor, insertNewTable) {\n      var dom = editor.dom;\n      var tableElm;\n      var data = extractDataFromSettings(editor, hasAdvancedTableTab(editor));\n      if (insertNewTable === false) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table');\n        if (tableElm) {\n          data = extractDataFromTableElement(editor, tableElm, hasAdvancedTableTab(editor));\n        } else {\n          if (hasAdvancedTableTab(editor)) {\n            data.borderstyle = '';\n            data.bordercolor = '';\n            data.backgroundcolor = '';\n          }\n        }\n      } else {\n        data.cols = '1';\n        data.rows = '1';\n        if (hasAdvancedTableTab(editor)) {\n          data.borderstyle = '';\n          data.bordercolor = '';\n          data.backgroundcolor = '';\n        }\n      }\n      var classes = buildListItems(getTableClassList(editor));\n      if (classes.length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n      }\n      var generalPanel = {\n        type: 'grid',\n        columns: 2,\n        items: getItems$2(editor, classes, insertNewTable)\n      };\n      var nonAdvancedForm = function () {\n        return {\n          type: 'panel',\n          items: [generalPanel]\n        };\n      };\n      var advancedForm = function () {\n        return {\n          type: 'tabpanel',\n          tabs: [\n            {\n              title: 'General',\n              name: 'general',\n              items: [generalPanel]\n            },\n            getAdvancedTab('table')\n          ]\n        };\n      };\n      var dialogBody = hasAdvancedTableTab(editor) ? advancedForm() : nonAdvancedForm();\n      editor.windowManager.open({\n        title: 'Table Properties',\n        size: 'normal',\n        body: dialogBody,\n        onSubmit: curry(onSubmitTableForm, editor, tableElm),\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data\n      });\n    };\n\n    var getSelectionStartCellOrCaption$1 = function (editor) {\n      return getSelectionStartCellOrCaption(getSelectionStart(editor));\n    };\n    var getSelectionStartCell$1 = function (editor) {\n      return getSelectionStartCell(getSelectionStart(editor));\n    };\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboard) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        return getSelectionStartCellOrCaption$1(editor).each(function (cellOrCaption) {\n          table(cellOrCaption, isRoot).filter(not(isRoot)).each(function (table) {\n            var cursor = SugarElement.fromText('');\n            after(table, cursor);\n            remove$2(table);\n            if (editor.dom.isEmpty(editor.getBody())) {\n              editor.setContent('');\n              editor.selection.setCursorLocation();\n            } else {\n              var rng = editor.dom.createRng();\n              rng.setStart(cursor.dom, 0);\n              rng.setEnd(cursor.dom, 0);\n              editor.selection.setRng(rng);\n              editor.nodeChanged();\n            }\n          });\n        });\n      };\n      var setSizingMode = function (sizing) {\n        return getSelectionStartCellOrCaption$1(editor).each(function (cellOrCaption) {\n          var isForcedSizing = isResponsiveForced(editor) || isPixelsForced(editor) || isPercentagesForced(editor);\n          if (!isForcedSizing) {\n            table(cellOrCaption, isRoot).each(function (table) {\n              if (sizing === 'relative' && !isPercentSizing$1(table)) {\n                enforcePercentage(editor, table);\n              } else if (sizing === 'fixed' && !isPixelSizing$1(table)) {\n                enforcePixels(editor, table);\n              } else if (sizing === 'responsive' && !isNoneSizing$1(table)) {\n                enforceNone(table);\n              }\n              removeDataStyle(table);\n              fireTableModified(editor, table.dom);\n            });\n          }\n        });\n      };\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      var postExecute = function (table) {\n        return function (rng) {\n          editor.selection.setRng(rng);\n          editor.focus();\n          cellSelection.clear(table);\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom);\n        };\n      };\n      var actOnSelection = function (execute) {\n        return getSelectionStartCell$1(editor).each(function (cell) {\n          getTableFromCell(cell).each(function (table) {\n            var targets = forMenu(selections, table, cell);\n            execute(table, targets).each(postExecute(table));\n          });\n        });\n      };\n      var copyRowSelection = function () {\n        return getSelectionStartCell$1(editor).map(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var targets = forMenu(selections, table, cell);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), Optional.none());\n            return copyRows(table, targets, generators);\n          });\n        });\n      };\n      var copyColSelection = function () {\n        return getSelectionStartCell$1(editor).map(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var targets = forMenu(selections, table, cell);\n            return copyCols(table, targets);\n          });\n        });\n      };\n      var pasteOnSelection = function (execute, getRows) {\n        return getRows().each(function (rows) {\n          var clonedRows = map(rows, function (row) {\n            return deep(row);\n          });\n          getSelectionStartCell$1(editor).each(function (cell) {\n            return getTableFromCell(cell).each(function (table) {\n              var generators = paste(SugarElement.fromDom(editor.getDoc()));\n              var targets = pasteRows(selections, cell, clonedRows, generators);\n              execute(table, targets).each(postExecute(table));\n            });\n          });\n        });\n      };\n      each$1({\n        mceTableSplitCells: function () {\n          return actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          return actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          return actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          return actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          return actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          return actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          return actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          return actOnSelection(actions.deleteRow);\n        },\n        mceTableCutCol: function (_grid) {\n          return copyColSelection().each(function (selection) {\n            clipboard.setColumns(selection);\n            actOnSelection(actions.deleteColumn);\n          });\n        },\n        mceTableCutRow: function (_grid) {\n          return copyRowSelection().each(function (selection) {\n            clipboard.setRows(selection);\n            actOnSelection(actions.deleteRow);\n          });\n        },\n        mceTableCopyCol: function (_grid) {\n          return copyColSelection().each(function (selection) {\n            return clipboard.setColumns(selection);\n          });\n        },\n        mceTableCopyRow: function (_grid) {\n          return copyRowSelection().each(function (selection) {\n            return clipboard.setRows(selection);\n          });\n        },\n        mceTablePasteColBefore: function (_grid) {\n          return pasteOnSelection(actions.pasteColsBefore, clipboard.getColumns);\n        },\n        mceTablePasteColAfter: function (_grid) {\n          return pasteOnSelection(actions.pasteColsAfter, clipboard.getColumns);\n        },\n        mceTablePasteRowBefore: function (_grid) {\n          return pasteOnSelection(actions.pasteRowsBefore, clipboard.getRows);\n        },\n        mceTablePasteRowAfter: function (_grid) {\n          return pasteOnSelection(actions.pasteRowsAfter, clipboard.getRows);\n        },\n        mceTableDelete: eraseTable,\n        mceTableSizingMode: function (ui, sizing) {\n          return setSizingMode(sizing);\n        }\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      var fireTableModifiedForSelection = function (editor, tableOpt) {\n        tableOpt.each(function (table) {\n          fireTableModified(editor, table.dom);\n        });\n      };\n      each$1({\n        mceTableCellType: function (_ui, args) {\n          var tableOpt = table(getSelectionStart(editor), isRoot);\n          actions.setTableCellType(editor, args);\n          fireTableModifiedForSelection(editor, tableOpt);\n        },\n        mceTableRowType: function (_ui, args) {\n          var tableOpt = table(getSelectionStart(editor), isRoot);\n          actions.setTableRowType(editor, args);\n          fireTableModifiedForSelection(editor, tableOpt);\n        }\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      editor.addCommand('mceTableColType', function (_ui, args) {\n        return get$1(args, 'type').each(function (type) {\n          return actOnSelection(type === 'th' ? actions.makeColumnsHeader : actions.unmakeColumnsHeader);\n        });\n      });\n      each$1({\n        mceTableProps: curry(open$2, editor, false),\n        mceTableRowProps: curry(open$1, editor),\n        mceTableCellProps: curry(open, editor, selections)\n      }, function (func, name) {\n        return editor.addCommand(name, function () {\n          return func();\n        });\n      });\n      editor.addCommand('mceInsertTable', function (_ui, args) {\n        if (isObject(args) && keys(args).length > 0) {\n          insertTableWithDataValidation(editor, args.rows, args.columns, args.options, 'Invalid values for mceInsertTable - rows and columns values are required to insert a table.');\n        } else {\n          open$2(editor, true);\n        }\n      });\n      editor.addCommand('mceTableApplyCellStyle', function (_ui, args) {\n        var getFormatName = function (style) {\n          return 'tablecell' + style.toLowerCase().replace('-', '');\n        };\n        if (!isObject(args)) {\n          return;\n        }\n        var cells = getCellsFromSelection(getSelectionStart(editor), selections);\n        if (cells.length === 0) {\n          return;\n        }\n        var validArgs = filter$1(args, function (value, style) {\n          return editor.formatter.has(getFormatName(style)) && isString(value);\n        });\n        if (isEmpty(validArgs)) {\n          return;\n        }\n        each$1(validArgs, function (value, style) {\n          each(cells, function (cell) {\n            DomModifier.normal(editor, cell.dom).setFormat(getFormatName(style), value);\n          });\n        });\n        getTableFromCell(cells[0]).each(function (table) {\n          return fireTableModified(editor, table.dom, {\n            structure: false,\n            style: true\n          });\n        });\n      });\n    };\n\n    var registerQueryCommands = function (editor, actions, selections) {\n      var isRoot = getIsRoot(editor);\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      each$1({\n        mceTableRowType: function () {\n          return actions.getTableRowType(editor);\n        },\n        mceTableCellType: function () {\n          return actions.getTableCellType(editor);\n        },\n        mceTableColType: function () {\n          return getSelectionStartCell(getSelectionStart(editor)).bind(function (cell) {\n            return getTableFromCell(cell).map(function (table) {\n              var targets = forMenu(selections, table, cell);\n              return actions.getTableColType(table, targets);\n            });\n          }).getOr('');\n        }\n      }, function (func, name) {\n        return editor.addQueryValueHandler(name, func);\n      });\n    };\n\n    var Clipboard = function () {\n      var rows = Cell(Optional.none());\n      var cols = Cell(Optional.none());\n      var clearClipboard = function (clipboard) {\n        clipboard.set(Optional.none());\n      };\n      return {\n        getRows: rows.get,\n        setRows: function (r) {\n          rows.set(r);\n          clearClipboard(cols);\n        },\n        clearRows: function () {\n          return clearClipboard(rows);\n        },\n        getColumns: cols.get,\n        setColumns: function (c) {\n          cols.set(c);\n          clearClipboard(rows);\n        },\n        clearColumns: function () {\n          return clearClipboard(cols);\n        }\n      };\n    };\n\n    var cellFormats = {\n      tablecellbackgroundcolor: {\n        selector: 'td,th',\n        styles: { backgroundColor: '%value' },\n        remove_similar: true\n      },\n      tablecellbordercolor: {\n        selector: 'td,th',\n        styles: { borderColor: '%value' },\n        remove_similar: true\n      },\n      tablecellborderstyle: {\n        selector: 'td,th',\n        styles: { borderStyle: '%value' },\n        remove_similar: true\n      },\n      tablecellborderwidth: {\n        selector: 'td,th',\n        styles: { borderWidth: '%value' },\n        remove_similar: true\n      }\n    };\n    var registerFormats = function (editor) {\n      editor.formatter.register(cellFormats);\n    };\n\n    var adt$2 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none$2 = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$2.none(current);\n    };\n    var CellLocation = __assign(__assign({}, adt$2), { none: none$2 });\n\n    var detect$5 = function (current, isRoot) {\n      return table(current, isRoot).bind(function (table) {\n        var all = cells(table);\n        var index = findIndex(all, function (x) {\n          return eq$1(current, x);\n        });\n        return index.map(function (index) {\n          return {\n            index: index,\n            all: all\n          };\n        });\n      });\n    };\n    var next = function (current, isRoot) {\n      var detection = detect$5(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return info.index + 1 < info.all.length ? CellLocation.middle(current, info.all[info.index + 1]) : CellLocation.last(current);\n      });\n    };\n    var prev = function (current, isRoot) {\n      var detection = detect$5(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return info.index - 1 >= 0 ? CellLocation.middle(current, info.all[info.index - 1]) : CellLocation.first(current);\n      });\n    };\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$3 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$3.before;\n    var on = adt$3.on;\n    var after$2 = adt$3.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$2,\n      cata: cata$1,\n      getStart: getStart\n    };\n\n    var adt$4 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$4.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$4.domRange;\n    var relative = adt$4.relative;\n    var exact = adt$4.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      return rng.selectNodeContents(element.dom);\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$5 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$5.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$5.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$5.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    var ltr$1 = adt$5.ltr;\n    var rtl$1 = adt$5.rtl;\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom.createRange();\n        r.setStart(textnode.dom, o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$4(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Optional.some(rect) : Optional.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom);\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Optional.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom.createRange();\n      r.selectNode(target.dom);\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom.createRange();\n      cursorRange.selectNode(node.dom);\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Optional.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Optional.from(doc.dom.caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Optional.none();\n        }\n        var r = doc.dom.createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Optional.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Optional.from(doc.dom.caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return SugarElement.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = function () {\n      if (document.caretPositionFromPoint) {\n        return caretPositionFromPoint;\n      } else if (document.caretRangeFromPoint) {\n        return caretRangeFromPoint;\n      } else {\n        return searchFromPoint;\n      }\n    }();\n    var fromPoint$1 = function (win, x, y) {\n      var doc = SugarElement.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return SimSelection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return SimSelection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = SugarElement.fromDom(rng.startContainer);\n          var finish = SugarElement.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$3 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var doSetNativeRange = function (win, rng) {\n      getNativeSelection(win).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom, soffset);\n      selection.extend(finish.dom, foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          getNativeSelection(win).each(function (selection) {\n            if (selection.setBaseAndExtent) {\n              selection.setBaseAndExtent(start.dom, soffset, finish.dom, foffset);\n            } else if (selection.extend) {\n              try {\n                setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n              } catch (e) {\n                doSetRange(win, finish, foffset, start, soffset);\n              }\n            } else {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          });\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = SimSelection.getWin(selection).dom;\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$3(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var setToElement = function (win, element) {\n      var rng = selectNodeContents(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$c = function (win) {\n      return getExact(win).map(function (range) {\n        return SimSelection.exact(range.start, range.soffset, range.finish, range.foffset);\n      });\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint$1(win, x, y);\n    };\n    var clear = function (win) {\n      getNativeSelection(win).each(function (selection) {\n        return selection.removeAllRanges();\n      });\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell, actions) {\n      return go(editor, isRoot, next(cell), actions);\n    };\n    var backward = function (editor, isRoot, cell, actions) {\n      return go(editor, isRoot, prev(cell), actions);\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = SimSelection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var getNewRowCursorPosition = function (editor, table) {\n      var rows = descendants$1(table, 'tr');\n      return last(rows).bind(function (last) {\n        return descendant$1(last, 'td,th').map(function (first) {\n          return getCellFirstCursorPosition(editor, first);\n        });\n      });\n    };\n    var go = function (editor, isRoot, cell, actions) {\n      return cell.fold(Optional.none, Optional.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        return table(current, isRoot).bind(function (table) {\n          var targets = noMenu(current);\n          editor.undoManager.transact(function () {\n            actions.insertRowsAfter(table, targets);\n          });\n          return getNewRowCursorPosition(editor, table);\n        });\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, actions) {\n      if (event.keyCode === global$3.TAB) {\n        var body_1 = getBody$1(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq$1(element, body_1) || contains(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        if (rng.collapsed) {\n          var start = SugarElement.fromDom(rng.startContainer);\n          cell(start, isRoot_1).each(function (cell) {\n            event.preventDefault();\n            var navigation = event.shiftKey ? backward : forward;\n            var rng = navigation(editor, isRoot_1, cell, actions);\n            rng.each(function (range) {\n              editor.selection.setRng(range);\n            });\n          });\n        }\n      }\n    };\n\n    var create$3 = function (selection, kill) {\n      return {\n        selection: selection,\n        kill: kill\n      };\n    };\n    var Response = { create: create$3 };\n\n    var create$4 = function (start, soffset, finish, foffset) {\n      return {\n        start: Situ.on(start, soffset),\n        finish: Situ.on(finish, foffset)\n      };\n    };\n    var Situs = { create: create$4 };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq$1(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect$6(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var detect$6 = function (container, isRoot, start, finish, selectRange) {\n      if (!eq$1(start, finish)) {\n        return identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          if (boxes.length > 0) {\n            selectRange(container, boxes, cellSel.start, cellSel.finish);\n            return Optional.some(Response.create(Optional.some(makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Optional.none();\n          }\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clearBeforeUpdate(container);\n        annotations.selectRange(container, newSels.boxes, newSels.start, newSels.finish);\n        return newSels.boxes;\n      };\n      return shiftSelection(selected, rows, columns, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(updateSelection);\n    };\n\n    var traverse = function (item, mode) {\n      return {\n        item: item,\n        mode: mode\n      };\n    };\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Optional.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Optional.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Optional.some(sidestep)\n      }\n    ];\n    var go$1 = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go$1(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[children.length - 1]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[0]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left,\n      right: right\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go$1(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item)) {\n          return Optional.none();\n        } else {\n          return predicate(n.item) ? Optional.some(n.item) : hone(universe, n.item, predicate, n.mode, direction, isRoot);\n        }\n      });\n    };\n    var left$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$3 = function (universe, item, isRoot) {\n      return seekLeft(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$4 = function (universe, item, isRoot) {\n      return seekRight(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft = left$1;\n    var seekRight = right$1;\n\n    var universe$3 = DomUniverse();\n    var before$4 = function (element, isRoot) {\n      return before$3(universe$3, element, isRoot);\n    };\n    var after$5 = function (element, isRoot) {\n      return after$4(universe$3, element, isRoot);\n    };\n    var seekLeft$1 = function (element, predicate, isRoot) {\n      return seekLeft(universe$3, element, predicate, isRoot);\n    };\n    var seekRight$1 = function (element, predicate, isRoot) {\n      return seekRight(universe$3, element, predicate, isRoot);\n    };\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      return ancestor(scope, predicate, isRoot).isSome();\n    };\n\n    var adt$6 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq$1(afterCell, beforeCell)) {\n            return sharedOne$1(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$6.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq$1(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$6.none('in same cell');\n          }\n        });\n      }).getOr(adt$6.none('default'));\n    };\n    var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign(__assign({}, adt$6), {\n      verify: verify,\n      cata: cata$2\n    });\n\n    var inParent = function (parent, children, element, index) {\n      return {\n        parent: parent,\n        children: children,\n        element: element,\n        index: index\n      };\n    };\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children$1 = children(parent);\n        return indexOf(children$1, element).map(function (index) {\n          return inParent(parent, children$1, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq$1, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$4(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Optional.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child(element, offset).filter(isBr).orThunk(function () {\n        return child(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent, info.index);\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: tgt,\n          finish: tgt\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (_message) {\n        return Optional.none();\n      }, function () {\n        return Optional.none();\n      }, function (cell) {\n        return Optional.some(point(cell, 0));\n      }, function (cell) {\n        return Optional.some(point(cell, getEnd(cell)));\n      });\n    };\n\n    var moveDown = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top + amount,\n        right: caret.right,\n        bottom: caret.bottom + amount\n      };\n    };\n    var moveUp = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top - amount,\n        right: caret.right,\n        bottom: caret.bottom - amount\n      };\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return {\n        left: caret.left + xDelta,\n        top: caret.top + yDelta,\n        right: caret.right + xDelta,\n        bottom: caret.bottom + yDelta\n      };\n    };\n    var getTop$1 = function (caret) {\n      return caret.top;\n    };\n    var getBottom = function (caret) {\n      return caret.bottom;\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Optional.none();\n    };\n    var toCaret = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      };\n    };\n    var getElemBox = function (bridge, element) {\n      return Optional.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt$7 = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left < box.left || Math.abs(box.right - caret.left) < 1 || caret.left > box.right;\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest(element, isBlock$1).fold(never, function (cell) {\n        return getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom - original.bottom) < 1) {\n        return adt$7.retry(lowerCaret);\n      } else if (guessBox.top > caret.bottom) {\n        return adt$7.retry(lowerCaret);\n      } else if (guessBox.top === caret.bottom) {\n        return adt$7.retry(moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$7.retry(translate(lowerCaret, JUMP_SIZE, 0)) : adt$7.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top - original.top) < 1) {\n        return adt$7.retry(higherCaret);\n      } else if (guessBox.bottom < caret.top) {\n        return adt$7.retry(higherCaret);\n      } else if (guessBox.bottom === caret.top) {\n        return adt$7.retry(moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$7.retry(translate(higherCaret, JUMP_SIZE, 0)) : adt$7.none();\n      }\n    };\n    var upMovement = {\n      point: getTop$1,\n      adjuster: adjustUp,\n      move: moveUp,\n      gather: before$4\n    };\n    var downMovement = {\n      point: getBottom,\n      adjuster: adjustDown,\n      move: moveDown,\n      gather: after$5\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Optional.some(caret);\n      }\n      if (isAtTable(bridge, caret.left, movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left, movement.point(caret)).bind(function (guess) {\n        return guess.start.fold(Optional.none, function (element) {\n          return getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Optional.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Optional.some(caret);\n          });\n        }, Optional.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.bottom + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.top - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Optional.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Optional.some(-movement.point(adjusted));\n      } else {\n        return Optional.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return tryBr(isRoot, sel.finish, sel.foffset, direction).fold(function () {\n          return Optional.some(point(sel.finish, sel.foffset));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish, sel.foffset, range.finish, range.foffset, direction.failure, isRoot);\n          return process(analysis);\n        });\n      });\n    };\n    var scan$1 = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Optional.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish, range.foffset, direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Optional.none();\n        }, function () {\n          return Optional.some(situs);\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, moveUp, direction);\n          } else {\n            return scan$1(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, moveDown, direction);\n          } else {\n            return scan$1(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      var browser = detect$3().browser;\n      if (browser.isChrome() || browser.isSafari() || browser.isFirefox() || browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Optional.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle$2 = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan$1(bridge, isRoot, spot.element, spot.offset, direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n\n    var inSameTable = function (elem, table) {\n      return ancestor$2(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq$1(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Optional.none();\n          }\n          return handle$2(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish, 'td,th', isRoot).map(function (finish) {\n              return {\n                start: start,\n                finish: finish,\n                range: range\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detect$3().browser.isIE()) {\n        return Optional.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range;\n            return Response.create(Optional.some(makeSitus(range.start, range.soffset, range.finish, range.foffset)), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq$1(startRow, rows[0])) {\n            return seekLeft$1(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Optional.some(makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq$1(startRow, rows[rows.length - 1])) {\n            return seekRight$1(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Optional.some(makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return detect$6(container, isRoot, info.start, info.finish, selectRange);\n      });\n    };\n\n    var value$1 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    function MouseSelection (bridge, container, isRoot, annotations) {\n      var cursor = value$1();\n      var clearstate = cursor.clear;\n      var mousedown = function (event) {\n        annotations.clear(container);\n        findCell(event.target, isRoot).each(cursor.set);\n      };\n      var mouseover = function (event) {\n        cursor.on(function (start) {\n          annotations.clearBeforeUpdate(container);\n          findCell(event.target, isRoot).each(function (finish) {\n            identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes.getOr([]);\n              if (boxes.length > 1 || boxes.length === 1 && !eq$1(start, finish)) {\n                annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mouseup = function (_event) {\n        clearstate();\n      };\n      return {\n        clearstate: clearstate,\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    }\n\n    var down = {\n      traverse: nextSibling,\n      gather: after$5,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before$4,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var ltr$2 = {\n      isBackward: isKey(37),\n      isForward: isKey(39)\n    };\n    var rtl$2 = {\n      isBackward: isKey(39),\n      isForward: isKey(37)\n    };\n\n    var get$d = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollBy(x, y);\n      }\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return SugarElement.fromPoint(SugarElement.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom.getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = SimSelection.exact(start, soffset, finish, foffset);\n        return getFirstRect$1(win, sel);\n      };\n      var getSelection = function () {\n        return get$c(win).map(function (exactAdt) {\n          return convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = SimSelection.relative(situs.start, situs.finish);\n        return convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start, exact.soffset, exact.finish, exact.foffset);\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var collapseSelection = function (toStart) {\n        if (toStart === void 0) {\n          toStart = false;\n        }\n        get$c(win).each(function (sel) {\n          return sel.fold(function (rng) {\n            return rng.collapse(toStart);\n          }, function (startSitu, finishSitu) {\n            var situ = toStart ? startSitu : finishSitu;\n            setRelative(win, situ, situ);\n          }, function (start, soffset, finish, foffset) {\n            var node = toStart ? start : finish;\n            var offset = toStart ? soffset : foffset;\n            setExact(win, node, offset, node, offset);\n          });\n        });\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start, sel.soffset, sel.finish, sel.foffset);\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get$d(SugarElement.fromDom(win.document));\n        return pos.top;\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, SugarElement.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        collapseSelection: collapseSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = function (rows, cols) {\n      return {\n        rows: rows,\n        cols: cols\n      };\n    };\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        clearstate: handlers.clearstate,\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Optional.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw;\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = retrieve(container, annotations.selectedSelector).fold(function () {\n          if (isDown(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, down, finish, start, annotations.selectRange);\n          } else if (isUp(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, up, finish, start, annotations.selectRange);\n          } else if (isDown(keycode)) {\n            return curry(navigate, bridge, isRoot, down, finish, start, lastDownCheck);\n          } else if (isUp(keycode)) {\n            return curry(navigate, bridge, isRoot, up, finish, start, firstUpCheck);\n          } else {\n            return Optional.none;\n          }\n        }, function (selected) {\n          var update$1 = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return update(delta.rows, delta.cols, container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return getEdges(container, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(function (edges) {\n                  var relative = isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first, 0), relative(edges.table));\n                  annotations.clear(container);\n                  return Response.create(Optional.none(), true);\n                });\n              }, function (_) {\n                return Optional.some(Response.create(Optional.none(), true));\n              });\n            };\n          };\n          if (isDown(keycode) && shiftKey) {\n            return update$1([rc(+1, 0)]);\n          } else if (isUp(keycode) && shiftKey) {\n            return update$1([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (isNavigation(keycode) && shiftKey === false) {\n            return clearToNavigate;\n          } else {\n            return Optional.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return retrieve(container, annotations.selectedSelector).fold(function () {\n          var realEvent = event.raw;\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (shiftKey === false) {\n            return Optional.none();\n          }\n          if (isNavigation(keycode)) {\n            return sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Optional.none();\n          }\n        }, Optional.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var external = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      return function (start, finish) {\n        annotations.clearBeforeUpdate(container);\n        identify(start, finish, isRoot).each(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n          bridge.selectContents(finish);\n          bridge.collapseSelection();\n        });\n      };\n    };\n\n    var remove$7 = function (element, classes) {\n      each(classes, function (x) {\n        remove$5(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add$3(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove$7(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected);\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected,\n        ephemera.lastSelected,\n        ephemera.firstSelected\n      ]);\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector);\n        each(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionClass);\n        add$3(start, ephemera.firstSelected);\n        add$3(finish, ephemera.lastSelected);\n      };\n      return {\n        clearBeforeUpdate: clear,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera, onSelection, onClear) {\n      var removeSelectionAttributes = function (element) {\n        remove(element, ephemera.selected);\n        remove(element, ephemera.firstSelected);\n        remove(element, ephemera.lastSelected);\n      };\n      var addSelectionAttribute = function (element) {\n        set(element, ephemera.selected, '1');\n      };\n      var clear = function (container) {\n        clearBeforeUpdate(container);\n        onClear();\n      };\n      var clearBeforeUpdate = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector);\n        each(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionAttribute);\n        set(start, ephemera.firstSelected, '1');\n        set(finish, ephemera.lastSelected, '1');\n        onSelection(cells, start, finish);\n      };\n      return {\n        clearBeforeUpdate: clearBeforeUpdate,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var getUpOrLeftCells = function (grid, selectedCells, generators) {\n      var upGrid = grid.slice(0, selectedCells[selectedCells.length - 1].row + 1);\n      var upDetails = toDetailList(upGrid, generators);\n      return bind(upDetails, function (detail) {\n        var slicedCells = detail.cells.slice(0, selectedCells[selectedCells.length - 1].column + 1);\n        return map(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getDownOrRightCells = function (grid, selectedCells, generators) {\n      var downGrid = grid.slice(selectedCells[0].row + selectedCells[0].rowspan - 1, grid.length);\n      var downDetails = toDetailList(downGrid, generators);\n      return bind(downDetails, function (detail) {\n        var slicedCells = detail.cells.slice(selectedCells[0].column + selectedCells[0].colspan - 1, detail.cells.length);\n        return map(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getOtherCells = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.map(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var upOrLeftCells = getUpOrLeftCells(grid, selectedCells, generators);\n        var downOrRightCells = getDownOrRightCells(grid, selectedCells, generators);\n        return {\n          upOrLeftCells: upOrLeftCells,\n          downOrRightCells: downOrRightCells\n        };\n      });\n    };\n\n    var hasInternalTarget = function (e) {\n      return has$1(SugarElement.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection (editor, lazyResize, selectionTargets) {\n      var onSelection = function (cells, start, finish) {\n        selectionTargets.targets().each(function (targets) {\n          var tableOpt = table(start);\n          tableOpt.each(function (table) {\n            var cloneFormats = getCloneElements(editor);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), cloneFormats);\n            var otherCells = getOtherCells(table, targets, generators);\n            fireTableSelectionChange(editor, cells, start, finish, otherCells);\n          });\n        });\n      };\n      var onClear = function () {\n        return fireTableSelectionClear(editor);\n      };\n      var annotations = SelectionAnnotation.byAttr(ephemera, onSelection, onClear);\n      editor.on('init', function (_e) {\n        var win = editor.getWin();\n        var body = getBody$1(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = SugarElement.fromDom(sel.getStart());\n          var end = SugarElement.fromDom(sel.getEnd());\n          var shared = sharedOne$1(table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            return annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = mouse(win, body, isRoot, annotations);\n        var keyHandlers = keyboard(win, body, isRoot, annotations);\n        var external$1 = external(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw.shiftKey === true;\n        };\n        editor.on('TableSelectorChange', function (e) {\n          return external$1(e.start, e.finish);\n        });\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill) {\n            event.kill();\n          }\n          response.selection.each(function (ns) {\n            var relative = SimSelection.relative(ns.start, ns.finish);\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = fromRawEvent$1(event);\n          if (wrappedEvent.raw.shiftKey && isNavigation(wrappedEvent.raw.which)) {\n            var rng = editor.selection.getRng();\n            var start = SugarElement.fromDom(rng.startContainer);\n            var end = SugarElement.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = fromRawEvent$1(event);\n          lazyResize().each(function (resize) {\n            return resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var start = SugarElement.fromDom(rng.startContainer);\n          var end = SugarElement.fromDom(rng.endContainer);\n          var direction = onDirection(ltr$2, rtl$2)(SugarElement.fromDom(editor.selection.getStart()));\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            return resize.showBars();\n          });\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          if (global$2.browser.isEdge() && raw.buttons === 0) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var dragStart = function (_e) {\n          mouseHandlers.clearstate();\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(fromRawEvent$1(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(fromRawEvent$1(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(fromRawEvent$1(e));\n          }\n        };\n        var getDoubleTap = function () {\n          var lastTarget = Cell(SugarElement.fromDom(body));\n          var lastTimeStamp = Cell(0);\n          var touchEnd = function (t) {\n            var target = SugarElement.fromDom(t.target);\n            if (name(target) === 'td' || name(target) === 'th') {\n              var lT = lastTarget.get();\n              var lTS = lastTimeStamp.get();\n              if (eq$1(lT, target) && t.timeStamp - lTS < 300) {\n                t.preventDefault();\n                external$1(target, target);\n              }\n            }\n            lastTarget.set(target);\n            lastTimeStamp.set(t.timeStamp);\n          };\n          return { touchEnd: touchEnd };\n        };\n        var doubleTap = getDoubleTap();\n        editor.on('dragstart', dragStart);\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('touchend', doubleTap.touchEnd);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('NodeChange', syncSelection);\n      });\n      return { clear: annotations.clear };\n    }\n\n    var getSelectionTargets = function (editor, selections) {\n      var targets = Cell(Optional.none());\n      var changeHandlers = Cell([]);\n      var findTargets = function () {\n        return getSelectionStartCellOrCaption(getSelectionStart(editor)).bind(function (cellOrCaption) {\n          var table$1 = table(cellOrCaption);\n          var isCaption = function (elem) {\n            return name(elem) === 'caption';\n          };\n          return table$1.map(function (table) {\n            if (isCaption(cellOrCaption)) {\n              return noMenu(cellOrCaption);\n            } else {\n              return forMenu(selections, table, cellOrCaption);\n            }\n          });\n        });\n      };\n      var resetTargets = function () {\n        targets.set(cached(findTargets)());\n        each(changeHandlers.get(), function (handler) {\n          return handler();\n        });\n      };\n      var onSetup = function (api, isDisabled) {\n        var handler = function () {\n          return targets.get().fold(function () {\n            api.setDisabled(true);\n          }, function (targets) {\n            api.setDisabled(isDisabled(targets));\n          });\n        };\n        handler();\n        changeHandlers.set(changeHandlers.get().concat([handler]));\n        return function () {\n          changeHandlers.set(filter(changeHandlers.get(), function (h) {\n            return h !== handler;\n          }));\n        };\n      };\n      var onSetupTable = function (api) {\n        return onSetup(api, function (_) {\n          return false;\n        });\n      };\n      var onSetupCellOrRow = function (api) {\n        return onSetup(api, function (targets) {\n          return name(targets.element) === 'caption';\n        });\n      };\n      var onSetupPasteable = function (getClipboardData) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return name(targets.element) === 'caption' || getClipboardData().isNone();\n          });\n        };\n      };\n      var onSetupMergeable = function (api) {\n        return onSetup(api, function (targets) {\n          return targets.mergable.isNone();\n        });\n      };\n      var onSetupUnmergeable = function (api) {\n        return onSetup(api, function (targets) {\n          return targets.unmergable.isNone();\n        });\n      };\n      editor.on('NodeChange ExecCommand TableSelectorChange', resetTargets);\n      return {\n        onSetupTable: onSetupTable,\n        onSetupCellOrRow: onSetupCellOrRow,\n        onSetupPasteable: onSetupPasteable,\n        onSetupMergeable: onSetupMergeable,\n        onSetupUnmergeable: onSetupUnmergeable,\n        resetTargets: resetTargets,\n        targets: function () {\n          return targets.get();\n        }\n      };\n    };\n\n    var addButtons = function (editor, selectionTargets, clipboard) {\n      editor.ui.registry.addMenuButton('table', {\n        tooltip: 'Table',\n        icon: 'table',\n        fetch: function (callback) {\n          return callback('inserttable | cell row column | advtablesort | tableprops deletetable');\n        }\n      });\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      editor.ui.registry.addButton('tableprops', {\n        tooltip: 'Table properties',\n        onAction: cmd('mceTableProps'),\n        icon: 'table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tabledelete', {\n        tooltip: 'Delete table',\n        onAction: cmd('mceTableDelete'),\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tablecellprops', {\n        tooltip: 'Cell properties',\n        onAction: cmd('mceTableCellProps'),\n        icon: 'table-cell-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablemergecells', {\n        tooltip: 'Merge cells',\n        onAction: cmd('mceTableMergeCells'),\n        icon: 'table-merge-cells',\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addButton('tablesplitcells', {\n        tooltip: 'Split cell',\n        onAction: cmd('mceTableSplitCells'),\n        icon: 'table-split-cells',\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      editor.ui.registry.addButton('tableinsertrowbefore', {\n        tooltip: 'Insert row before',\n        onAction: cmd('mceTableInsertRowBefore'),\n        icon: 'table-insert-row-above',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertrowafter', {\n        tooltip: 'Insert row after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        icon: 'table-insert-row-after',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tabledeleterow', {\n        tooltip: 'Delete row',\n        onAction: cmd('mceTableDeleteRow'),\n        icon: 'table-delete-row',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablerowprops', {\n        tooltip: 'Row properties',\n        onAction: cmd('mceTableRowProps'),\n        icon: 'table-row-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertcolbefore', {\n        tooltip: 'Insert column before',\n        onAction: cmd('mceTableInsertColBefore'),\n        icon: 'table-insert-column-before',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertcolafter', {\n        tooltip: 'Insert column after',\n        onAction: cmd('mceTableInsertColAfter'),\n        icon: 'table-insert-column-after',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tabledeletecol', {\n        tooltip: 'Delete column',\n        onAction: cmd('mceTableDeleteCol'),\n        icon: 'table-delete-column',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecutrow', {\n        tooltip: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecopyrow', {\n        tooltip: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablepasterowbefore', {\n        tooltip: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablepasterowafter', {\n        tooltip: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablecutcol', {\n        tooltip: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecopycol', {\n        tooltip: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablepastecolbefore', {\n        tooltip: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getColumns)\n      });\n      editor.ui.registry.addButton('tablepastecolafter', {\n        tooltip: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getColumns)\n      });\n      editor.ui.registry.addButton('tableinsertdialog', {\n        tooltip: 'Insert table',\n        onAction: cmd('mceInsertTable'),\n        icon: 'table'\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        return editor.dom.is(table, 'table') && editor.getBody().contains(table);\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.ui.registry.addContextToolbar('table', {\n          predicate: isTable,\n          items: toolbar,\n          scope: 'node',\n          position: 'node'\n        });\n      }\n    };\n\n    var addMenuItems = function (editor, selectionTargets, clipboard) {\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      var insertTableAction = function (data) {\n        editor.execCommand('mceInsertTable', false, {\n          rows: data.numRows,\n          columns: data.numColumns\n        });\n      };\n      var tableProperties = {\n        text: 'Table properties',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableDelete')\n      };\n      editor.ui.registry.addMenuItem('tableinsertrowbefore', {\n        text: 'Insert row before',\n        icon: 'table-insert-row-above',\n        onAction: cmd('mceTableInsertRowBefore'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tableinsertrowafter', {\n        text: 'Insert row after',\n        icon: 'table-insert-row-after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tabledeleterow', {\n        text: 'Delete row',\n        icon: 'table-delete-row',\n        onAction: cmd('mceTableDeleteRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablerowprops', {\n        text: 'Row properties',\n        icon: 'table-row-properties',\n        onAction: cmd('mceTableRowProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecutrow', {\n        text: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecopyrow', {\n        text: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablepasterowbefore', {\n        text: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addMenuItem('tablepasterowafter', {\n        text: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      var row = {\n        type: 'nestedmenuitem',\n        text: 'Row',\n        getSubmenuItems: function () {\n          return 'tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter';\n        }\n      };\n      editor.ui.registry.addMenuItem('tableinsertcolumnbefore', {\n        text: 'Insert column before',\n        icon: 'table-insert-column-before',\n        onAction: cmd('mceTableInsertColBefore'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tableinsertcolumnafter', {\n        text: 'Insert column after',\n        icon: 'table-insert-column-after',\n        onAction: cmd('mceTableInsertColAfter'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tabledeletecolumn', {\n        text: 'Delete column',\n        icon: 'table-delete-column',\n        onAction: cmd('mceTableDeleteCol'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecutcolumn', {\n        text: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecopycolumn', {\n        text: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnbefore', {\n        text: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getColumns)\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnafter', {\n        text: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getColumns)\n      });\n      var column = {\n        type: 'nestedmenuitem',\n        text: 'Column',\n        getSubmenuItems: function () {\n          return 'tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter';\n        }\n      };\n      editor.ui.registry.addMenuItem('tablecellprops', {\n        text: 'Cell properties',\n        icon: 'table-cell-properties',\n        onAction: cmd('mceTableCellProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablemergecells', {\n        text: 'Merge cells',\n        icon: 'table-merge-cells',\n        onAction: cmd('mceTableMergeCells'),\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addMenuItem('tablesplitcells', {\n        text: 'Split cell',\n        icon: 'table-split-cells',\n        onAction: cmd('mceTableSplitCells'),\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      var cell = {\n        type: 'nestedmenuitem',\n        text: 'Cell',\n        getSubmenuItems: function () {\n          return 'tablecellprops tablemergecells tablesplitcells';\n        }\n      };\n      if (hasTableGrid(editor) === false) {\n        editor.ui.registry.addMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          onAction: cmd('mceInsertTable')\n        });\n      } else {\n        editor.ui.registry.addNestedMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          getSubmenuItems: function () {\n            return [{\n                type: 'fancymenuitem',\n                fancytype: 'inserttable',\n                onAction: insertTableAction\n              }];\n          }\n        });\n      }\n      editor.ui.registry.addMenuItem('inserttabledialog', {\n        text: 'Insert table',\n        icon: 'table',\n        onAction: cmd('mceInsertTable')\n      });\n      editor.ui.registry.addMenuItem('tableprops', tableProperties);\n      editor.ui.registry.addMenuItem('deletetable', deleteTable);\n      editor.ui.registry.addNestedMenuItem('row', row);\n      editor.ui.registry.addNestedMenuItem('column', column);\n      editor.ui.registry.addNestedMenuItem('cell', cell);\n      editor.ui.registry.addContextMenu('table', {\n        update: function () {\n          selectionTargets.resetTargets();\n          return selectionTargets.targets().fold(function () {\n            return '';\n          }, function (targets) {\n            if (name(targets.element) === 'caption') {\n              return 'tableprops deletetable';\n            } else {\n              return 'cell row column | advtablesort | tableprops deletetable';\n            }\n          });\n        }\n      });\n    };\n\n    function Plugin(editor) {\n      var selections = Selections(function () {\n        return getBody$1(editor);\n      }, function () {\n        return getSelectionStartCellOrCaption(getSelectionStart(editor));\n      }, ephemera.selectedSelector);\n      var selectionTargets = getSelectionTargets(editor, selections);\n      var resizeHandler = getResizeHandler(editor);\n      var cellSelection = CellSelection(editor, resizeHandler.lazyResize, selectionTargets);\n      var actions = TableActions(editor, resizeHandler.lazyWire, selections);\n      var clipboard = Clipboard();\n      registerCommands(editor, actions, cellSelection, selections, clipboard);\n      registerQueryCommands(editor, actions, selections);\n      registerEvents(editor, selections, actions, cellSelection);\n      addMenuItems(editor, selectionTargets, clipboard);\n      addButtons(editor, selectionTargets, clipboard);\n      addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(ephemera.firstSelected);\n        editor.serializer.addTempAttr(ephemera.lastSelected);\n        registerFormats(editor);\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          handle$1(e, editor, actions);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n      });\n      return getApi(editor, clipboard, resizeHandler, selectionTargets);\n    }\n    function Plugin$1 () {\n      global.add('table', Plugin);\n    }\n\n    Plugin$1();\n\n}());\n"]}